var m8=Object.defineProperty;var p8=(t,e,n)=>e in t?m8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A8=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var St=(t,e,n)=>(p8(t,typeof e!="symbol"?e+"":e,n),n);var Vze=A8((Er,Hr)=>{function b8(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ig(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aM={exports:{}},sy={},lM={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=Symbol.for("react.element"),y8=Symbol.for("react.portal"),v8=Symbol.for("react.fragment"),S8=Symbol.for("react.strict_mode"),Z8=Symbol.for("react.profiler"),G8=Symbol.for("react.provider"),B8=Symbol.for("react.context"),R8=Symbol.for("react.forward_ref"),k8=Symbol.for("react.suspense"),V8=Symbol.for("react.memo"),w8=Symbol.for("react.lazy"),mx=Symbol.iterator;function W8(t){return t===null||typeof t!="object"?null:(t=mx&&t[mx]||t["@@iterator"],typeof t=="function"?t:null)}var gM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cM=Object.assign,uM={};function kI(t,e,n){this.props=t,this.context=e,this.refs=uM,this.updater=n||gM}kI.prototype.isReactComponent={};kI.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kI.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dM(){}dM.prototype=kI.prototype;function A2(t,e,n){this.props=t,this.context=e,this.refs=uM,this.updater=n||gM}var b2=A2.prototype=new dM;b2.constructor=A2;cM(b2,kI.prototype);b2.isPureReactComponent=!0;var px=Array.isArray,IM=Object.prototype.hasOwnProperty,y2={current:null},CM={key:!0,ref:!0,__self:!0,__source:!0};function hM(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)IM.call(e,i)&&!CM.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),g=0;g<a;g++)l[g]=arguments[g+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:zf,type:t,key:o,ref:s,props:r,_owner:y2.current}}function x8(t,e){return{$$typeof:zf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function v2(t){return typeof t=="object"&&t!==null&&t.$$typeof===zf}function X8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ax=/\/+/g;function zS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X8(""+t.key):e.toString(36)}function EA(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case zf:case y8:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+zS(s,0):i,px(r)?(n="",t!=null&&(n=t.replace(Ax,"$&/")+"/"),EA(r,e,n,"",function(g){return g})):r!=null&&(v2(r)&&(r=x8(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(Ax,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",px(t))for(var a=0;a<t.length;a++){o=t[a];var l=i+zS(o,a);s+=EA(o,e,n,l,r)}else if(l=W8(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=i+zS(o,a++),s+=EA(o,e,n,l,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function cp(t,e,n){if(t==null)return t;var i=[],r=0;return EA(t,i,"","",function(o){return e.call(n,o,r++)}),i}function J8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},HA={transition:null},E8={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:HA,ReactCurrentOwner:y2};Vt.Children={map:cp,forEach:function(t,e,n){cp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cp(t,function(){e++}),e},toArray:function(t){return cp(t,function(e){return e})||[]},only:function(t){if(!v2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Vt.Component=kI;Vt.Fragment=v8;Vt.Profiler=Z8;Vt.PureComponent=A2;Vt.StrictMode=S8;Vt.Suspense=k8;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E8;Vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=cM({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=y2.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)IM.call(e,l)&&!CM.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var g=0;g<l;g++)a[g]=arguments[g+2];i.children=a}return{$$typeof:zf,type:t.type,key:r,ref:o,props:i,_owner:s}};Vt.createContext=function(t){return t={$$typeof:B8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G8,_context:t},t.Consumer=t};Vt.createElement=hM;Vt.createFactory=function(t){var e=hM.bind(null,t);return e.type=t,e};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(t){return{$$typeof:R8,render:t}};Vt.isValidElement=v2;Vt.lazy=function(t){return{$$typeof:w8,_payload:{_status:-1,_result:t},_init:J8}};Vt.memo=function(t,e){return{$$typeof:V8,type:t,compare:e===void 0?null:e}};Vt.startTransition=function(t){var e=HA.transition;HA.transition={};try{t()}finally{HA.transition=e}};Vt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Vt.useCallback=function(t,e){return rr.current.useCallback(t,e)};Vt.useContext=function(t){return rr.current.useContext(t)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};Vt.useEffect=function(t,e){return rr.current.useEffect(t,e)};Vt.useId=function(){return rr.current.useId()};Vt.useImperativeHandle=function(t,e,n){return rr.current.useImperativeHandle(t,e,n)};Vt.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};Vt.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};Vt.useMemo=function(t,e){return rr.current.useMemo(t,e)};Vt.useReducer=function(t,e,n){return rr.current.useReducer(t,e,n)};Vt.useRef=function(t){return rr.current.useRef(t)};Vt.useState=function(t){return rr.current.useState(t)};Vt.useSyncExternalStore=function(t,e,n){return rr.current.useSyncExternalStore(t,e,n)};Vt.useTransition=function(){return rr.current.useTransition()};Vt.version="18.2.0";lM.exports=Vt;var m=lM.exports;const gt=Ig(m),bB=b8({__proto__:null,default:gt},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H8=m,N8=Symbol.for("react.element"),Y8=Symbol.for("react.fragment"),F8=Object.prototype.hasOwnProperty,M8=H8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T8={key:!0,ref:!0,__self:!0,__source:!0};function fM(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)F8.call(e,i)&&!T8.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:N8,type:t,key:o,ref:s,props:r,_owner:M8.current}}sy.Fragment=Y8;sy.jsx=fM;sy.jsxs=fM;aM.exports=sy;var C=aM.exports,yB={},mM={exports:{}},Kr={},pM={exports:{}},AM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,de){var ne=_.length;_.push(de);e:for(;0<ne;){var se=ne-1>>>1,E=_[se];if(0<r(E,de))_[se]=de,_[ne]=E,ne=se;else break e}}function n(_){return _.length===0?null:_[0]}function i(_){if(_.length===0)return null;var de=_[0],ne=_.pop();if(ne!==de){_[0]=ne;e:for(var se=0,E=_.length,M=E>>>1;se<M;){var T=2*(se+1)-1,U=_[T],H=T+1,ie=_[H];if(0>r(U,ne))H<E&&0>r(ie,U)?(_[se]=ie,_[H]=ne,se=H):(_[se]=U,_[T]=ne,se=T);else if(H<E&&0>r(ie,ne))_[se]=ie,_[H]=ne,se=H;else break e}}return de}function r(_,de){var ne=_.sortIndex-de.sortIndex;return ne!==0?ne:_.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],g=[],u=1,d=null,h=3,f=!1,A=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(_){for(var de=n(g);de!==null;){if(de.callback===null)i(g);else if(de.startTime<=_)i(g),de.sortIndex=de.expirationTime,e(l,de);else break;de=n(g)}}function R(_){if(p=!1,Z(_),!A)if(n(l)!==null)A=!0,q(W);else{var de=n(g);de!==null&&K(R,de.startTime-_)}}function W(_,de){A=!1,p&&(p=!1,v(w),w=-1),f=!0;var ne=h;try{for(Z(de),d=n(l);d!==null&&(!(d.expirationTime>de)||_&&!Y());){var se=d.callback;if(typeof se=="function"){d.callback=null,h=d.priorityLevel;var E=se(d.expirationTime<=de);de=t.unstable_now(),typeof E=="function"?d.callback=E:d===n(l)&&i(l),Z(de)}else i(l);d=n(l)}if(d!==null)var M=!0;else{var T=n(g);T!==null&&K(R,T.startTime-de),M=!1}return M}finally{d=null,h=ne,f=!1}}var B=!1,k=null,w=-1,J=5,X=-1;function Y(){return!(t.unstable_now()-X<J)}function z(){if(k!==null){var _=t.unstable_now();X=_;var de=!0;try{de=k(!0,_)}finally{de?P():(B=!1,k=null)}}else B=!1}var P;if(typeof S=="function")P=function(){S(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,oe=$.port2;$.port1.onmessage=z,P=function(){oe.postMessage(null)}}else P=function(){y(z,0)};function q(_){k=_,B||(B=!0,P())}function K(_,de){w=y(function(){_(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){A||f||(A=!0,q(W))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(_){switch(h){case 1:case 2:case 3:var de=3;break;default:de=h}var ne=h;h=de;try{return _()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,de){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var ne=h;h=_;try{return de()}finally{h=ne}},t.unstable_scheduleCallback=function(_,de,ne){var se=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?se+ne:se):ne=se,_){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=ne+E,_={id:u++,callback:de,priorityLevel:_,startTime:ne,expirationTime:E,sortIndex:-1},ne>se?(_.sortIndex=ne,e(g,_),n(l)===null&&_===n(g)&&(p?(v(w),w=-1):p=!0,K(R,ne-se))):(_.sortIndex=E,e(l,_),A||f||(A=!0,q(W))),_},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(_){var de=h;return function(){var ne=h;h=de;try{return _.apply(this,arguments)}finally{h=ne}}}})(AM);pM.exports=AM;var L8=pM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=m,Lr=L8;function Ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yM=new Set,Uh={};function Oc(t,e){Qd(t,e),Qd(t+"Capture",e)}function Qd(t,e){for(Uh[t]=e,t=0;t<e.length;t++)yM.add(e[t])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vB=Object.prototype.hasOwnProperty,_8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bx={},yx={};function D8(t){return vB.call(yx,t)?!0:vB.call(bx,t)?!1:_8.test(t)?yx[t]=!0:(bx[t]=!0,!1)}function K8(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z8(t,e,n,i){if(e===null||typeof e>"u"||K8(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function or(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var wi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wi[t]=new or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wi[e]=new or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wi[t]=new or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wi[t]=new or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wi[t]=new or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wi[t]=new or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wi[t]=new or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wi[t]=new or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wi[t]=new or(t,5,!1,t.toLowerCase(),null,!1,!1)});var S2=/[\-:]([a-z])/g;function Z2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S2,Z2);wi[e]=new or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S2,Z2);wi[e]=new or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S2,Z2);wi[e]=new or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wi[t]=new or(t,1,!1,t.toLowerCase(),null,!1,!1)});wi.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wi[t]=new or(t,1,!1,t.toLowerCase(),null,!0,!0)});function G2(t,e,n,i){var r=wi.hasOwnProperty(e)?wi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z8(e,n,r,i)&&(n=null),i||r===null?D8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ja=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,up=Symbol.for("react.element"),qu=Symbol.for("react.portal"),ed=Symbol.for("react.fragment"),B2=Symbol.for("react.strict_mode"),SB=Symbol.for("react.profiler"),vM=Symbol.for("react.provider"),SM=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),ZB=Symbol.for("react.suspense"),GB=Symbol.for("react.suspense_list"),k2=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),ZM=Symbol.for("react.offscreen"),vx=Symbol.iterator;function IC(t){return t===null||typeof t!="object"?null:(t=vx&&t[vx]||t["@@iterator"],typeof t=="function"?t:null)}var Hn=Object.assign,PS;function jC(t){if(PS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);PS=e&&e[1]||""}return`
`+PS+t}var US=!1;function jS(t,e){if(!t||US)return"";US=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var r=g.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||r[s]!==o[a]){var l=`
`+r[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{US=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jC(t):""}function P8(t){switch(t.tag){case 5:return jC(t.type);case 16:return jC("Lazy");case 13:return jC("Suspense");case 19:return jC("SuspenseList");case 0:case 2:case 15:return t=jS(t.type,!1),t;case 11:return t=jS(t.type.render,!1),t;case 1:return t=jS(t.type,!0),t;default:return""}}function BB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ed:return"Fragment";case qu:return"Portal";case SB:return"Profiler";case B2:return"StrictMode";case ZB:return"Suspense";case GB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SM:return(t.displayName||"Context")+".Consumer";case vM:return(t._context.displayName||"Context")+".Provider";case R2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k2:return e=t.displayName||null,e!==null?e:BB(t.type)||"Memo";case yl:e=t._payload,t=t._init;try{return BB(t(e))}catch{}}return null}function U8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return BB(e);case 8:return e===B2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ig(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j8(t){var e=GM(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dp(t){t._valueTracker||(t._valueTracker=j8(t))}function BM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=GM(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function RB(t,e){var n=e.checked;return Hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sx(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ig(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RM(t,e){e=e.checked,e!=null&&G2(t,"checked",e,!1)}function kB(t,e){RM(t,e);var n=ig(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VB(t,e.type,n):e.hasOwnProperty("defaultValue")&&VB(t,e.type,ig(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VB(t,e,n){(e!=="number"||Wb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var OC=Array.isArray;function Rd(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ig(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return Hn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ze(92));if(OC(n)){if(1<n.length)throw Error(Ze(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ig(n)}}function kM(t,e){var n=ig(e.value),i=ig(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Bx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ip,wM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ip=Ip||document.createElement("div"),Ip.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ip.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O8=["Webkit","ms","Moz","O"];Object.keys(Ih).forEach(function(t){O8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ih[e]=Ih[t]})});function WM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ih.hasOwnProperty(t)&&Ih[t]?(""+e).trim():e+"px"}function xM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=WM(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Q8=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xB(t,e){if(e){if(Q8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function XB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JB=null;function V2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var EB=null,kd=null,Vd=null;function Rx(t){if(t=jf(t)){if(typeof EB!="function")throw Error(Ze(280));var e=t.stateNode;e&&(e=uy(e),EB(t.stateNode,t.type,e))}}function XM(t){kd?Vd?Vd.push(t):Vd=[t]:kd=t}function JM(){if(kd){var t=kd,e=Vd;if(Vd=kd=null,Rx(t),e)for(t=0;t<e.length;t++)Rx(e[t])}}function EM(t,e){return t(e)}function HM(){}var OS=!1;function NM(t,e,n){if(OS)return t(e,n);OS=!0;try{return EM(t,e,n)}finally{OS=!1,(kd!==null||Vd!==null)&&(HM(),JM())}}function Oh(t,e){var n=t.stateNode;if(n===null)return null;var i=uy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ze(231,e,typeof n));return n}var HB=!1;if(Na)try{var CC={};Object.defineProperty(CC,"passive",{get:function(){HB=!0}}),window.addEventListener("test",CC,CC),window.removeEventListener("test",CC,CC)}catch{HB=!1}function $8(t,e,n,i,r,o,s,a,l){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(u){this.onError(u)}}var Ch=!1,xb=null,Xb=!1,NB=null,q8={onError:function(t){Ch=!0,xb=t}};function e7(t,e,n,i,r,o,s,a,l){Ch=!1,xb=null,$8.apply(q8,arguments)}function t7(t,e,n,i,r,o,s,a,l){if(e7.apply(this,arguments),Ch){if(Ch){var g=xb;Ch=!1,xb=null}else throw Error(Ze(198));Xb||(Xb=!0,NB=g)}}function Qc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kx(t){if(Qc(t)!==t)throw Error(Ze(188))}function n7(t){var e=t.alternate;if(!e){if(e=Qc(t),e===null)throw Error(Ze(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return kx(r),t;if(o===i)return kx(r),e;o=o.sibling}throw Error(Ze(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s)throw Error(Ze(189))}}if(n.alternate!==i)throw Error(Ze(190))}if(n.tag!==3)throw Error(Ze(188));return n.stateNode.current===n?t:e}function FM(t){return t=n7(t),t!==null?MM(t):null}function MM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MM(t);if(e!==null)return e;t=t.sibling}return null}var TM=Lr.unstable_scheduleCallback,Vx=Lr.unstable_cancelCallback,i7=Lr.unstable_shouldYield,r7=Lr.unstable_requestPaint,zn=Lr.unstable_now,o7=Lr.unstable_getCurrentPriorityLevel,w2=Lr.unstable_ImmediatePriority,LM=Lr.unstable_UserBlockingPriority,Jb=Lr.unstable_NormalPriority,s7=Lr.unstable_LowPriority,_M=Lr.unstable_IdlePriority,ay=null,Ws=null;function a7(t){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(ay,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:c7,l7=Math.log,g7=Math.LN2;function c7(t){return t>>>=0,t===0?32:31-(l7(t)/g7|0)|0}var Cp=64,hp=4194304;function QC(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eb(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~r;a!==0?i=QC(a):(o&=s,o!==0&&(i=QC(o)))}else s=n&~r,s!==0?i=QC(s):o!==0&&(i=QC(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-es(e),r=1<<n,i|=t[n],e&=~r;return i}function u7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d7(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-es(o),a=1<<s,l=r[s];l===-1?(!(a&n)||a&i)&&(r[s]=u7(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function YB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DM(){var t=Cp;return Cp<<=1,!(Cp&4194240)&&(Cp=64),t}function QS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-es(e),t[e]=n}function I7(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-es(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function W2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-es(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Qt=0;function KM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zM,x2,PM,UM,jM,FB=!1,fp=[],Ll=null,_l=null,Dl=null,Qh=new Map,$h=new Map,Rl=[],C7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wx(t,e){switch(t){case"focusin":case"focusout":Ll=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":Qh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(e.pointerId)}}function hC(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=jf(e),e!==null&&x2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function h7(t,e,n,i,r){switch(e){case"focusin":return Ll=hC(Ll,t,e,n,i,r),!0;case"dragenter":return _l=hC(_l,t,e,n,i,r),!0;case"mouseover":return Dl=hC(Dl,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Qh.set(o,hC(Qh.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,$h.set(o,hC($h.get(o)||null,t,e,n,i,r)),!0}return!1}function OM(t){var e=sc(t.target);if(e!==null){var n=Qc(e);if(n!==null){if(e=n.tag,e===13){if(e=YM(n),e!==null){t.blockedOn=e,jM(t.priority,function(){PM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function NA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=MB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);JB=i,n.target.dispatchEvent(i),JB=null}else return e=jf(n),e!==null&&x2(e),t.blockedOn=n,!1;e.shift()}return!0}function Wx(t,e,n){NA(t)&&n.delete(e)}function f7(){FB=!1,Ll!==null&&NA(Ll)&&(Ll=null),_l!==null&&NA(_l)&&(_l=null),Dl!==null&&NA(Dl)&&(Dl=null),Qh.forEach(Wx),$h.forEach(Wx)}function fC(t,e){t.blockedOn===e&&(t.blockedOn=null,FB||(FB=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,f7)))}function qh(t){function e(r){return fC(r,t)}if(0<fp.length){fC(fp[0],t);for(var n=1;n<fp.length;n++){var i=fp[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ll!==null&&fC(Ll,t),_l!==null&&fC(_l,t),Dl!==null&&fC(Dl,t),Qh.forEach(e),$h.forEach(e),n=0;n<Rl.length;n++)i=Rl[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Rl.length&&(n=Rl[0],n.blockedOn===null);)OM(n),n.blockedOn===null&&Rl.shift()}var wd=ja.ReactCurrentBatchConfig,Hb=!0;function m7(t,e,n,i){var r=Qt,o=wd.transition;wd.transition=null;try{Qt=1,X2(t,e,n,i)}finally{Qt=r,wd.transition=o}}function p7(t,e,n,i){var r=Qt,o=wd.transition;wd.transition=null;try{Qt=4,X2(t,e,n,i)}finally{Qt=r,wd.transition=o}}function X2(t,e,n,i){if(Hb){var r=MB(t,e,n,i);if(r===null)aZ(t,e,i,Nb,n),wx(t,i);else if(h7(r,t,e,n,i))i.stopPropagation();else if(wx(t,i),e&4&&-1<C7.indexOf(t)){for(;r!==null;){var o=jf(r);if(o!==null&&zM(o),o=MB(t,e,n,i),o===null&&aZ(t,e,i,Nb,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else aZ(t,e,i,null,n)}}var Nb=null;function MB(t,e,n,i){if(Nb=null,t=V2(i),t=sc(t),t!==null)if(e=Qc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nb=t,null}function QM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o7()){case w2:return 1;case LM:return 4;case Jb:case s7:return 16;case _M:return 536870912;default:return 16}default:return 16}}var wl=null,J2=null,YA=null;function $M(){if(YA)return YA;var t,e=J2,n=e.length,i,r="value"in wl?wl.value:wl.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return YA=r.slice(t,1<i?1-i:void 0)}function FA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mp(){return!0}function xx(){return!1}function zr(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mp:xx,this.isPropagationStopped=xx,this}return Hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mp)},persist:function(){},isPersistent:mp}),e}var VI={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E2=zr(VI),Uf=Hn({},VI,{view:0,detail:0}),A7=zr(Uf),$S,qS,mC,ly=Hn({},Uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mC&&(mC&&t.type==="mousemove"?($S=t.screenX-mC.screenX,qS=t.screenY-mC.screenY):qS=$S=0,mC=t),$S)},movementY:function(t){return"movementY"in t?t.movementY:qS}}),Xx=zr(ly),b7=Hn({},ly,{dataTransfer:0}),y7=zr(b7),v7=Hn({},Uf,{relatedTarget:0}),eZ=zr(v7),S7=Hn({},VI,{animationName:0,elapsedTime:0,pseudoElement:0}),Z7=zr(S7),G7=Hn({},VI,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),B7=zr(G7),R7=Hn({},VI,{data:0}),Jx=zr(R7),k7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W7(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w7[t])?!!e[t]:!1}function H2(){return W7}var x7=Hn({},Uf,{key:function(t){if(t.key){var e=k7[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=FA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V7[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H2,charCode:function(t){return t.type==="keypress"?FA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?FA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X7=zr(x7),J7=Hn({},ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ex=zr(J7),E7=Hn({},Uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H2}),H7=zr(E7),N7=Hn({},VI,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y7=zr(N7),F7=Hn({},ly,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M7=zr(F7),T7=[9,13,27,32],N2=Na&&"CompositionEvent"in window,hh=null;Na&&"documentMode"in document&&(hh=document.documentMode);var L7=Na&&"TextEvent"in window&&!hh,qM=Na&&(!N2||hh&&8<hh&&11>=hh),Hx=String.fromCharCode(32),Nx=!1;function eT(t,e){switch(t){case"keyup":return T7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var td=!1;function _7(t,e){switch(t){case"compositionend":return tT(e);case"keypress":return e.which!==32?null:(Nx=!0,Hx);case"textInput":return t=e.data,t===Hx&&Nx?null:t;default:return null}}function D7(t,e){if(td)return t==="compositionend"||!N2&&eT(t,e)?(t=$M(),YA=J2=wl=null,td=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qM&&e.locale!=="ko"?null:e.data;default:return null}}var K7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!K7[t.type]:e==="textarea"}function nT(t,e,n,i){XM(i),e=Yb(e,"onChange"),0<e.length&&(n=new E2("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var fh=null,ef=null;function z7(t){IT(t,0)}function gy(t){var e=rd(t);if(BM(e))return t}function P7(t,e){if(t==="change")return e}var iT=!1;if(Na){var tZ;if(Na){var nZ="oninput"in document;if(!nZ){var Fx=document.createElement("div");Fx.setAttribute("oninput","return;"),nZ=typeof Fx.oninput=="function"}tZ=nZ}else tZ=!1;iT=tZ&&(!document.documentMode||9<document.documentMode)}function Mx(){fh&&(fh.detachEvent("onpropertychange",rT),ef=fh=null)}function rT(t){if(t.propertyName==="value"&&gy(ef)){var e=[];nT(e,ef,t,V2(t)),NM(z7,e)}}function U7(t,e,n){t==="focusin"?(Mx(),fh=e,ef=n,fh.attachEvent("onpropertychange",rT)):t==="focusout"&&Mx()}function j7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gy(ef)}function O7(t,e){if(t==="click")return gy(e)}function Q7(t,e){if(t==="input"||t==="change")return gy(e)}function $7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ns=typeof Object.is=="function"?Object.is:$7;function tf(t,e){if(ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!vB.call(e,r)||!ns(t[r],e[r]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lx(t,e){var n=Tx(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tx(n)}}function oT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sT(){for(var t=window,e=Wb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wb(t.document)}return e}function Y2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q7(t){var e=sT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oT(n.ownerDocument.documentElement,n)){if(i!==null&&Y2(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Lx(n,o);var s=Lx(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e6=Na&&"documentMode"in document&&11>=document.documentMode,nd=null,TB=null,mh=null,LB=!1;function _x(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;LB||nd==null||nd!==Wb(i)||(i=nd,"selectionStart"in i&&Y2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mh&&tf(mh,i)||(mh=i,i=Yb(TB,"onSelect"),0<i.length&&(e=new E2("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=nd)))}function pp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var id={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},iZ={},aT={};Na&&(aT=document.createElement("div").style,"AnimationEvent"in window||(delete id.animationend.animation,delete id.animationiteration.animation,delete id.animationstart.animation),"TransitionEvent"in window||delete id.transitionend.transition);function cy(t){if(iZ[t])return iZ[t];if(!id[t])return t;var e=id[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aT)return iZ[t]=e[n];return t}var lT=cy("animationend"),gT=cy("animationiteration"),cT=cy("animationstart"),uT=cy("transitionend"),dT=new Map,Dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cg(t,e){dT.set(t,e),Oc(e,[t])}for(var rZ=0;rZ<Dx.length;rZ++){var oZ=Dx[rZ],t6=oZ.toLowerCase(),n6=oZ[0].toUpperCase()+oZ.slice(1);Cg(t6,"on"+n6)}Cg(lT,"onAnimationEnd");Cg(gT,"onAnimationIteration");Cg(cT,"onAnimationStart");Cg("dblclick","onDoubleClick");Cg("focusin","onFocus");Cg("focusout","onBlur");Cg(uT,"onTransitionEnd");Qd("onMouseEnter",["mouseout","mouseover"]);Qd("onMouseLeave",["mouseout","mouseover"]);Qd("onPointerEnter",["pointerout","pointerover"]);Qd("onPointerLeave",["pointerout","pointerover"]);Oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $C="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i6=new Set("cancel close invalid load scroll toggle".split(" ").concat($C));function Kx(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,t7(i,e,void 0,t),t.currentTarget=null}function IT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,g=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Kx(r,a,g),o=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,g=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Kx(r,a,g),o=l}}}if(Xb)throw t=NB,Xb=!1,NB=null,t}function An(t,e){var n=e[PB];n===void 0&&(n=e[PB]=new Set);var i=t+"__bubble";n.has(i)||(CT(e,t,2,!1),n.add(i))}function sZ(t,e,n){var i=0;e&&(i|=4),CT(n,t,i,e)}var Ap="_reactListening"+Math.random().toString(36).slice(2);function nf(t){if(!t[Ap]){t[Ap]=!0,yM.forEach(function(n){n!=="selectionchange"&&(i6.has(n)||sZ(n,!1,t),sZ(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ap]||(e[Ap]=!0,sZ("selectionchange",!1,e))}}function CT(t,e,n,i){switch(QM(e)){case 1:var r=m7;break;case 4:r=p7;break;default:r=X2}n=r.bind(null,e,n,t),r=void 0,!HB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function aZ(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;s=s.return}for(;a!==null;){if(s=sc(a),s===null)return;if(l=s.tag,l===5||l===6){i=o=s;continue e}a=a.parentNode}}i=i.return}NM(function(){var g=o,u=V2(n),d=[];e:{var h=dT.get(t);if(h!==void 0){var f=E2,A=t;switch(t){case"keypress":if(FA(n)===0)break e;case"keydown":case"keyup":f=X7;break;case"focusin":A="focus",f=eZ;break;case"focusout":A="blur",f=eZ;break;case"beforeblur":case"afterblur":f=eZ;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Xx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=y7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=H7;break;case lT:case gT:case cT:f=Z7;break;case uT:f=Y7;break;case"scroll":f=A7;break;case"wheel":f=M7;break;case"copy":case"cut":case"paste":f=B7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ex}var p=(e&4)!==0,y=!p&&t==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var S=g,Z;S!==null;){Z=S;var R=Z.stateNode;if(Z.tag===5&&R!==null&&(Z=R,v!==null&&(R=Oh(S,v),R!=null&&p.push(rf(S,R,Z)))),y)break;S=S.return}0<p.length&&(h=new f(h,A,null,n,u),d.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==JB&&(A=n.relatedTarget||n.fromElement)&&(sc(A)||A[Ya]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(A=n.relatedTarget||n.toElement,f=g,A=A?sc(A):null,A!==null&&(y=Qc(A),A!==y||A.tag!==5&&A.tag!==6)&&(A=null)):(f=null,A=g),f!==A)){if(p=Xx,R="onMouseLeave",v="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(p=Ex,R="onPointerLeave",v="onPointerEnter",S="pointer"),y=f==null?h:rd(f),Z=A==null?h:rd(A),h=new p(R,S+"leave",f,n,u),h.target=y,h.relatedTarget=Z,R=null,sc(u)===g&&(p=new p(v,S+"enter",A,n,u),p.target=Z,p.relatedTarget=y,R=p),y=R,f&&A)t:{for(p=f,v=A,S=0,Z=p;Z;Z=Eu(Z))S++;for(Z=0,R=v;R;R=Eu(R))Z++;for(;0<S-Z;)p=Eu(p),S--;for(;0<Z-S;)v=Eu(v),Z--;for(;S--;){if(p===v||v!==null&&p===v.alternate)break t;p=Eu(p),v=Eu(v)}p=null}else p=null;f!==null&&zx(d,h,f,p,!1),A!==null&&y!==null&&zx(d,y,A,p,!0)}}e:{if(h=g?rd(g):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var W=P7;else if(Yx(h))if(iT)W=Q7;else{W=j7;var B=U7}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(W=O7);if(W&&(W=W(t,g))){nT(d,W,n,u);break e}B&&B(t,h,g),t==="focusout"&&(B=h._wrapperState)&&B.controlled&&h.type==="number"&&VB(h,"number",h.value)}switch(B=g?rd(g):window,t){case"focusin":(Yx(B)||B.contentEditable==="true")&&(nd=B,TB=g,mh=null);break;case"focusout":mh=TB=nd=null;break;case"mousedown":LB=!0;break;case"contextmenu":case"mouseup":case"dragend":LB=!1,_x(d,n,u);break;case"selectionchange":if(e6)break;case"keydown":case"keyup":_x(d,n,u)}var k;if(N2)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else td?eT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(qM&&n.locale!=="ko"&&(td||w!=="onCompositionStart"?w==="onCompositionEnd"&&td&&(k=$M()):(wl=u,J2="value"in wl?wl.value:wl.textContent,td=!0)),B=Yb(g,w),0<B.length&&(w=new Jx(w,t,null,n,u),d.push({event:w,listeners:B}),k?w.data=k:(k=tT(n),k!==null&&(w.data=k)))),(k=L7?_7(t,n):D7(t,n))&&(g=Yb(g,"onBeforeInput"),0<g.length&&(u=new Jx("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:g}),u.data=k))}IT(d,e)})}function rf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yb(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Oh(t,n),o!=null&&i.unshift(rf(t,o,r)),o=Oh(t,e),o!=null&&i.push(rf(t,o,r))),t=t.return}return i}function Eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zx(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,g=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&g!==null&&(a=g,r?(l=Oh(n,o),l!=null&&s.unshift(rf(n,l,a))):r||(l=Oh(n,o),l!=null&&s.push(rf(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var r6=/\r\n?/g,o6=/\u0000|\uFFFD/g;function Px(t){return(typeof t=="string"?t:""+t).replace(r6,`
`).replace(o6,"")}function bp(t,e,n){if(e=Px(e),Px(t)!==e&&n)throw Error(Ze(425))}function Fb(){}var _B=null,DB=null;function KB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zB=typeof setTimeout=="function"?setTimeout:void 0,s6=typeof clearTimeout=="function"?clearTimeout:void 0,Ux=typeof Promise=="function"?Promise:void 0,a6=typeof queueMicrotask=="function"?queueMicrotask:typeof Ux<"u"?function(t){return Ux.resolve(null).then(t).catch(l6)}:zB;function l6(t){setTimeout(function(){throw t})}function lZ(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),qh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);qh(e)}function Kl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wI=Math.random().toString(36).slice(2),Gs="__reactFiber$"+wI,of="__reactProps$"+wI,Ya="__reactContainer$"+wI,PB="__reactEvents$"+wI,g6="__reactListeners$"+wI,c6="__reactHandles$"+wI;function sc(t){var e=t[Gs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ya]||n[Gs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jx(t);t!==null;){if(n=t[Gs])return n;t=jx(t)}return e}t=n,n=t.parentNode}return null}function jf(t){return t=t[Gs]||t[Ya],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ze(33))}function uy(t){return t[of]||null}var UB=[],od=-1;function hg(t){return{current:t}}function Gn(t){0>od||(t.current=UB[od],UB[od]=null,od--)}function Cn(t,e){od++,UB[od]=t.current,t.current=e}var rg={},Li=hg(rg),hr=hg(!1),wc=rg;function $d(t,e){var n=t.type.contextTypes;if(!n)return rg;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function fr(t){return t=t.childContextTypes,t!=null}function Mb(){Gn(hr),Gn(Li)}function Ox(t,e,n){if(Li.current!==rg)throw Error(Ze(168));Cn(Li,e),Cn(hr,n)}function hT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ze(108,U8(t)||"Unknown",r));return Hn({},n,i)}function Tb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rg,wc=Li.current,Cn(Li,t),Cn(hr,hr.current),!0}function Qx(t,e,n){var i=t.stateNode;if(!i)throw Error(Ze(169));n?(t=hT(t,e,wc),i.__reactInternalMemoizedMergedChildContext=t,Gn(hr),Gn(Li),Cn(Li,t)):Gn(hr),Cn(hr,n)}var ba=null,dy=!1,gZ=!1;function fT(t){ba===null?ba=[t]:ba.push(t)}function u6(t){dy=!0,fT(t)}function fg(){if(!gZ&&ba!==null){gZ=!0;var t=0,e=Qt;try{var n=ba;for(Qt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ba=null,dy=!1}catch(r){throw ba!==null&&(ba=ba.slice(t+1)),TM(w2,fg),r}finally{Qt=e,gZ=!1}}return null}var sd=[],ad=0,Lb=null,_b=0,mo=[],po=0,Wc=null,Ga=1,Ba="";function Pg(t,e){sd[ad++]=_b,sd[ad++]=Lb,Lb=t,_b=e}function mT(t,e,n){mo[po++]=Ga,mo[po++]=Ba,mo[po++]=Wc,Wc=t;var i=Ga;t=Ba;var r=32-es(i)-1;i&=~(1<<r),n+=1;var o=32-es(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Ga=1<<32-es(e)+r|n<<r|i,Ba=o+t}else Ga=1<<o|n<<r|i,Ba=t}function F2(t){t.return!==null&&(Pg(t,1),mT(t,1,0))}function M2(t){for(;t===Lb;)Lb=sd[--ad],sd[ad]=null,_b=sd[--ad],sd[ad]=null;for(;t===Wc;)Wc=mo[--po],mo[po]=null,Ba=mo[--po],mo[po]=null,Ga=mo[--po],mo[po]=null}var Nr=null,Xr=null,Rn=!1,jo=null;function pT(t,e){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $x(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nr=t,Xr=Kl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nr=t,Xr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wc!==null?{id:Ga,overflow:Ba}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nr=t,Xr=null,!0):!1;default:return!1}}function jB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function OB(t){if(Rn){var e=Xr;if(e){var n=e;if(!$x(t,e)){if(jB(t))throw Error(Ze(418));e=Kl(n.nextSibling);var i=Nr;e&&$x(t,e)?pT(i,n):(t.flags=t.flags&-4097|2,Rn=!1,Nr=t)}}else{if(jB(t))throw Error(Ze(418));t.flags=t.flags&-4097|2,Rn=!1,Nr=t}}}function qx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nr=t}function yp(t){if(t!==Nr)return!1;if(!Rn)return qx(t),Rn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KB(t.type,t.memoizedProps)),e&&(e=Xr)){if(jB(t))throw AT(),Error(Ze(418));for(;e;)pT(t,e),e=Kl(e.nextSibling)}if(qx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xr=Kl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xr=null}}else Xr=Nr?Kl(t.stateNode.nextSibling):null;return!0}function AT(){for(var t=Xr;t;)t=Kl(t.nextSibling)}function qd(){Xr=Nr=null,Rn=!1}function T2(t){jo===null?jo=[t]:jo.push(t)}var d6=ja.ReactCurrentBatchConfig;function zo(t,e){if(t&&t.defaultProps){e=Hn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Db=hg(null),Kb=null,ld=null,L2=null;function _2(){L2=ld=Kb=null}function D2(t){var e=Db.current;Gn(Db),t._currentValue=e}function QB(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wd(t,e){Kb=t,L2=ld=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Vo(t){var e=t._currentValue;if(L2!==t)if(t={context:t,memoizedValue:e,next:null},ld===null){if(Kb===null)throw Error(Ze(308));ld=t,Kb.dependencies={lanes:0,firstContext:t}}else ld=ld.next=t;return e}var ac=null;function K2(t){ac===null?ac=[t]:ac.push(t)}function bT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,K2(e)):(n.next=r.next,r.next=n),e.interleaved=n,Fa(t,i)}function Fa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vl=!1;function z2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Et&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fa(t,n)}return r=i.interleaved,r===null?(e.next=e,K2(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fa(t,n)}function MA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,W2(t,n)}}function eX(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zb(t,e,n,i){var r=t.updateQueue;vl=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,g=l.next;l.next=null,s===null?o=g:s.next=g,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=g:a.next=g,u.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;s=0,u=g=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var A=t,p=a;switch(h=e,f=n,p.tag){case 1:if(A=p.payload,typeof A=="function"){d=A.call(f,d,h);break e}d=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=p.payload,h=typeof A=="function"?A.call(f,d,h):A,h==null)break e;d=Hn({},d,h);break e;case 2:vl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(g=u=f,l=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=g,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Xc|=s,t.lanes=s,t.memoizedState=d}}function tX(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ze(191,r));r.call(i)}}}var vT=new bM.Component().refs;function $B(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Hn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iy={isMounted:function(t){return(t=t._reactInternals)?Qc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qi(),r=Ul(t),o=wa(i,r);o.payload=e,n!=null&&(o.callback=n),e=zl(t,o,r),e!==null&&(ts(e,t,r,i),MA(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qi(),r=Ul(t),o=wa(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zl(t,o,r),e!==null&&(ts(e,t,r,i),MA(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qi(),i=Ul(t),r=wa(n,i);r.tag=2,e!=null&&(r.callback=e),e=zl(t,r,i),e!==null&&(ts(e,t,i,n),MA(e,t,i))}};function nX(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!tf(n,i)||!tf(r,o):!0}function ST(t,e,n){var i=!1,r=rg,o=e.contextType;return typeof o=="object"&&o!==null?o=Vo(o):(r=fr(e)?wc:Li.current,i=e.contextTypes,o=(i=i!=null)?$d(t,r):rg),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function iX(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Iy.enqueueReplaceState(e,e.state,null)}function qB(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=vT,z2(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Vo(o):(o=fr(e)?wc:Li.current,r.context=$d(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&($B(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Iy.enqueueReplaceState(r,r.state,null),zb(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function pC(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ze(309));var i=n.stateNode}if(!i)throw Error(Ze(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=r.refs;a===vT&&(a=r.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ze(284));if(!n._owner)throw Error(Ze(290,t))}return t}function vp(t,e){throw t=Object.prototype.toString.call(e),Error(Ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rX(t){var e=t._init;return e(t._payload)}function ZT(t){function e(v,S){if(t){var Z=v.deletions;Z===null?(v.deletions=[S],v.flags|=16):Z.push(S)}}function n(v,S){if(!t)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=jl(v,S),v.index=0,v.sibling=null,v}function o(v,S,Z){return v.index=Z,t?(Z=v.alternate,Z!==null?(Z=Z.index,Z<S?(v.flags|=2,S):Z):(v.flags|=2,S)):(v.flags|=1048576,S)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,S,Z,R){return S===null||S.tag!==6?(S=fZ(Z,v.mode,R),S.return=v,S):(S=r(S,Z),S.return=v,S)}function l(v,S,Z,R){var W=Z.type;return W===ed?u(v,S,Z.props.children,R,Z.key):S!==null&&(S.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===yl&&rX(W)===S.type)?(R=r(S,Z.props),R.ref=pC(v,S,Z),R.return=v,R):(R=zA(Z.type,Z.key,Z.props,null,v.mode,R),R.ref=pC(v,S,Z),R.return=v,R)}function g(v,S,Z,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==Z.containerInfo||S.stateNode.implementation!==Z.implementation?(S=mZ(Z,v.mode,R),S.return=v,S):(S=r(S,Z.children||[]),S.return=v,S)}function u(v,S,Z,R,W){return S===null||S.tag!==7?(S=hc(Z,v.mode,R,W),S.return=v,S):(S=r(S,Z),S.return=v,S)}function d(v,S,Z){if(typeof S=="string"&&S!==""||typeof S=="number")return S=fZ(""+S,v.mode,Z),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case up:return Z=zA(S.type,S.key,S.props,null,v.mode,Z),Z.ref=pC(v,null,S),Z.return=v,Z;case qu:return S=mZ(S,v.mode,Z),S.return=v,S;case yl:var R=S._init;return d(v,R(S._payload),Z)}if(OC(S)||IC(S))return S=hc(S,v.mode,Z,null),S.return=v,S;vp(v,S)}return null}function h(v,S,Z,R){var W=S!==null?S.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return W!==null?null:a(v,S,""+Z,R);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case up:return Z.key===W?l(v,S,Z,R):null;case qu:return Z.key===W?g(v,S,Z,R):null;case yl:return W=Z._init,h(v,S,W(Z._payload),R)}if(OC(Z)||IC(Z))return W!==null?null:u(v,S,Z,R,null);vp(v,Z)}return null}function f(v,S,Z,R,W){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(Z)||null,a(S,v,""+R,W);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case up:return v=v.get(R.key===null?Z:R.key)||null,l(S,v,R,W);case qu:return v=v.get(R.key===null?Z:R.key)||null,g(S,v,R,W);case yl:var B=R._init;return f(v,S,Z,B(R._payload),W)}if(OC(R)||IC(R))return v=v.get(Z)||null,u(S,v,R,W,null);vp(S,R)}return null}function A(v,S,Z,R){for(var W=null,B=null,k=S,w=S=0,J=null;k!==null&&w<Z.length;w++){k.index>w?(J=k,k=null):J=k.sibling;var X=h(v,k,Z[w],R);if(X===null){k===null&&(k=J);break}t&&k&&X.alternate===null&&e(v,k),S=o(X,S,w),B===null?W=X:B.sibling=X,B=X,k=J}if(w===Z.length)return n(v,k),Rn&&Pg(v,w),W;if(k===null){for(;w<Z.length;w++)k=d(v,Z[w],R),k!==null&&(S=o(k,S,w),B===null?W=k:B.sibling=k,B=k);return Rn&&Pg(v,w),W}for(k=i(v,k);w<Z.length;w++)J=f(k,v,w,Z[w],R),J!==null&&(t&&J.alternate!==null&&k.delete(J.key===null?w:J.key),S=o(J,S,w),B===null?W=J:B.sibling=J,B=J);return t&&k.forEach(function(Y){return e(v,Y)}),Rn&&Pg(v,w),W}function p(v,S,Z,R){var W=IC(Z);if(typeof W!="function")throw Error(Ze(150));if(Z=W.call(Z),Z==null)throw Error(Ze(151));for(var B=W=null,k=S,w=S=0,J=null,X=Z.next();k!==null&&!X.done;w++,X=Z.next()){k.index>w?(J=k,k=null):J=k.sibling;var Y=h(v,k,X.value,R);if(Y===null){k===null&&(k=J);break}t&&k&&Y.alternate===null&&e(v,k),S=o(Y,S,w),B===null?W=Y:B.sibling=Y,B=Y,k=J}if(X.done)return n(v,k),Rn&&Pg(v,w),W;if(k===null){for(;!X.done;w++,X=Z.next())X=d(v,X.value,R),X!==null&&(S=o(X,S,w),B===null?W=X:B.sibling=X,B=X);return Rn&&Pg(v,w),W}for(k=i(v,k);!X.done;w++,X=Z.next())X=f(k,v,w,X.value,R),X!==null&&(t&&X.alternate!==null&&k.delete(X.key===null?w:X.key),S=o(X,S,w),B===null?W=X:B.sibling=X,B=X);return t&&k.forEach(function(z){return e(v,z)}),Rn&&Pg(v,w),W}function y(v,S,Z,R){if(typeof Z=="object"&&Z!==null&&Z.type===ed&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case up:e:{for(var W=Z.key,B=S;B!==null;){if(B.key===W){if(W=Z.type,W===ed){if(B.tag===7){n(v,B.sibling),S=r(B,Z.props.children),S.return=v,v=S;break e}}else if(B.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===yl&&rX(W)===B.type){n(v,B.sibling),S=r(B,Z.props),S.ref=pC(v,B,Z),S.return=v,v=S;break e}n(v,B);break}else e(v,B);B=B.sibling}Z.type===ed?(S=hc(Z.props.children,v.mode,R,Z.key),S.return=v,v=S):(R=zA(Z.type,Z.key,Z.props,null,v.mode,R),R.ref=pC(v,S,Z),R.return=v,v=R)}return s(v);case qu:e:{for(B=Z.key;S!==null;){if(S.key===B)if(S.tag===4&&S.stateNode.containerInfo===Z.containerInfo&&S.stateNode.implementation===Z.implementation){n(v,S.sibling),S=r(S,Z.children||[]),S.return=v,v=S;break e}else{n(v,S);break}else e(v,S);S=S.sibling}S=mZ(Z,v.mode,R),S.return=v,v=S}return s(v);case yl:return B=Z._init,y(v,S,B(Z._payload),R)}if(OC(Z))return A(v,S,Z,R);if(IC(Z))return p(v,S,Z,R);vp(v,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,S!==null&&S.tag===6?(n(v,S.sibling),S=r(S,Z),S.return=v,v=S):(n(v,S),S=fZ(Z,v.mode,R),S.return=v,v=S),s(v)):n(v,S)}return y}var eI=ZT(!0),GT=ZT(!1),Of={},xs=hg(Of),sf=hg(Of),af=hg(Of);function lc(t){if(t===Of)throw Error(Ze(174));return t}function P2(t,e){switch(Cn(af,e),Cn(sf,t),Cn(xs,Of),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=WB(e,t)}Gn(xs),Cn(xs,e)}function tI(){Gn(xs),Gn(sf),Gn(af)}function BT(t){lc(af.current);var e=lc(xs.current),n=WB(e,t.type);e!==n&&(Cn(sf,t),Cn(xs,n))}function U2(t){sf.current===t&&(Gn(xs),Gn(sf))}var xn=hg(0);function Pb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cZ=[];function j2(){for(var t=0;t<cZ.length;t++)cZ[t]._workInProgressVersionPrimary=null;cZ.length=0}var TA=ja.ReactCurrentDispatcher,uZ=ja.ReactCurrentBatchConfig,xc=0,En=null,ri=null,Ci=null,Ub=!1,ph=!1,lf=0,I6=0;function Xi(){throw Error(Ze(321))}function O2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ns(t[n],e[n]))return!1;return!0}function Q2(t,e,n,i,r,o){if(xc=o,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,TA.current=t===null||t.memoizedState===null?m6:p6,t=n(i,r),ph){o=0;do{if(ph=!1,lf=0,25<=o)throw Error(Ze(301));o+=1,Ci=ri=null,e.updateQueue=null,TA.current=A6,t=n(i,r)}while(ph)}if(TA.current=jb,e=ri!==null&&ri.next!==null,xc=0,Ci=ri=En=null,Ub=!1,e)throw Error(Ze(300));return t}function $2(){var t=lf!==0;return lf=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?En.memoizedState=Ci=t:Ci=Ci.next=t,Ci}function wo(){if(ri===null){var t=En.alternate;t=t!==null?t.memoizedState:null}else t=ri.next;var e=Ci===null?En.memoizedState:Ci.next;if(e!==null)Ci=e,ri=t;else{if(t===null)throw Error(Ze(310));ri=t,t={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},Ci===null?En.memoizedState=Ci=t:Ci=Ci.next=t}return Ci}function gf(t,e){return typeof e=="function"?e(t):e}function dZ(t){var e=wo(),n=e.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=t;var i=ri,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var a=s=null,l=null,g=o;do{var u=g.lane;if((xc&u)===u)l!==null&&(l=l.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var d={lane:u,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};l===null?(a=l=d,s=i):l=l.next=d,En.lanes|=u,Xc|=u}g=g.next}while(g!==null&&g!==o);l===null?s=i:l.next=a,ns(i,e.memoizedState)||(dr=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,En.lanes|=o,Xc|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function IZ(t){var e=wo(),n=e.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);ns(o,e.memoizedState)||(dr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function RT(){}function kT(t,e){var n=En,i=wo(),r=e(),o=!ns(i.memoizedState,r);if(o&&(i.memoizedState=r,dr=!0),i=i.queue,q2(WT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ci!==null&&Ci.memoizedState.tag&1){if(n.flags|=2048,cf(9,wT.bind(null,n,i,r,e),void 0,null),fi===null)throw Error(Ze(349));xc&30||VT(n,e,r)}return r}function VT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wT(t,e,n,i){e.value=n,e.getSnapshot=i,xT(e)&&XT(t)}function WT(t,e,n){return n(function(){xT(e)&&XT(t)})}function xT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ns(t,n)}catch{return!0}}function XT(t){var e=Fa(t,1);e!==null&&ts(e,t,1,-1)}function oX(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},e.queue=t,t=t.dispatch=f6.bind(null,En,t),[e.memoizedState,t]}function cf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function JT(){return wo().memoizedState}function LA(t,e,n,i){var r=ms();En.flags|=t,r.memoizedState=cf(1|e,n,void 0,i===void 0?null:i)}function Cy(t,e,n,i){var r=wo();i=i===void 0?null:i;var o=void 0;if(ri!==null){var s=ri.memoizedState;if(o=s.destroy,i!==null&&O2(i,s.deps)){r.memoizedState=cf(e,n,o,i);return}}En.flags|=t,r.memoizedState=cf(1|e,n,o,i)}function sX(t,e){return LA(8390656,8,t,e)}function q2(t,e){return Cy(2048,8,t,e)}function ET(t,e){return Cy(4,2,t,e)}function HT(t,e){return Cy(4,4,t,e)}function NT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YT(t,e,n){return n=n!=null?n.concat([t]):null,Cy(4,4,NT.bind(null,e,t),n)}function ek(){}function FT(t,e){var n=wo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&O2(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function MT(t,e){var n=wo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&O2(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function TT(t,e,n){return xc&21?(ns(n,e)||(n=DM(),En.lanes|=n,Xc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=n)}function C6(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var i=uZ.transition;uZ.transition={};try{t(!1),e()}finally{Qt=n,uZ.transition=i}}function LT(){return wo().memoizedState}function h6(t,e,n){var i=Ul(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_T(t))DT(e,n);else if(n=bT(t,e,n,i),n!==null){var r=qi();ts(n,t,i,r),KT(n,e,i)}}function f6(t,e,n){var i=Ul(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_T(t))DT(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ns(a,s)){var l=e.interleaved;l===null?(r.next=r,K2(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=bT(t,e,r,i),n!==null&&(r=qi(),ts(n,t,i,r),KT(n,e,i))}}function _T(t){var e=t.alternate;return t===En||e!==null&&e===En}function DT(t,e){ph=Ub=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,W2(t,n)}}var jb={readContext:Vo,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},m6={readContext:Vo,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:Vo,useEffect:sX,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,LA(4194308,4,NT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return LA(4194308,4,t,e)},useInsertionEffect:function(t,e){return LA(4,2,t,e)},useMemo:function(t,e){var n=ms();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ms();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=h6.bind(null,En,t),[i.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:oX,useDebugValue:ek,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=oX(!1),e=t[0];return t=C6.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=En,r=ms();if(Rn){if(n===void 0)throw Error(Ze(407));n=n()}else{if(n=e(),fi===null)throw Error(Ze(349));xc&30||VT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,sX(WT.bind(null,i,o,t),[t]),i.flags|=2048,cf(9,wT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ms(),e=fi.identifierPrefix;if(Rn){var n=Ba,i=Ga;n=(i&~(1<<32-es(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=lf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=I6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p6={readContext:Vo,useCallback:FT,useContext:Vo,useEffect:q2,useImperativeHandle:YT,useInsertionEffect:ET,useLayoutEffect:HT,useMemo:MT,useReducer:dZ,useRef:JT,useState:function(){return dZ(gf)},useDebugValue:ek,useDeferredValue:function(t){var e=wo();return TT(e,ri.memoizedState,t)},useTransition:function(){var t=dZ(gf)[0],e=wo().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:kT,useId:LT,unstable_isNewReconciler:!1},A6={readContext:Vo,useCallback:FT,useContext:Vo,useEffect:q2,useImperativeHandle:YT,useInsertionEffect:ET,useLayoutEffect:HT,useMemo:MT,useReducer:IZ,useRef:JT,useState:function(){return IZ(gf)},useDebugValue:ek,useDeferredValue:function(t){var e=wo();return ri===null?e.memoizedState=t:TT(e,ri.memoizedState,t)},useTransition:function(){var t=IZ(gf)[0],e=wo().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:kT,useId:LT,unstable_isNewReconciler:!1};function nI(t,e){try{var n="",i=e;do n+=P8(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function CZ(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b6=typeof WeakMap=="function"?WeakMap:Map;function zT(t,e,n){n=wa(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qb||(Qb=!0,cR=i),eR(t,e)},n}function PT(t,e,n){n=wa(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){eR(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){eR(t,e),typeof i!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function aX(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new b6;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=J6.bind(null,t,e,n),e.then(t,t))}function lX(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gX(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wa(-1,1),e.tag=2,zl(n,e,1))),n.lanes|=1),t)}var y6=ja.ReactCurrentOwner,dr=!1;function ji(t,e,n,i){e.child=t===null?GT(e,null,n,i):eI(e,t.child,n,i)}function cX(t,e,n,i,r){n=n.render;var o=e.ref;return Wd(e,r),i=Q2(t,e,n,i,o,r),n=$2(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ma(t,e,r)):(Rn&&n&&F2(e),e.flags|=1,ji(t,e,i,r),e.child)}function uX(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!lk(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,UT(t,e,o,i,r)):(t=zA(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:tf,n(s,i)&&t.ref===e.ref)return Ma(t,e,r)}return e.flags|=1,t=jl(o,i),t.ref=e.ref,t.return=e,e.child=t}function UT(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(tf(o,i)&&t.ref===e.ref)if(dr=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,Ma(t,e,r)}return tR(t,e,n,i,r)}function jT(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(cd,Wr),Wr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cn(cd,Wr),Wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Cn(cd,Wr),Wr|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Cn(cd,Wr),Wr|=i;return ji(t,e,r,n),e.child}function OT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tR(t,e,n,i,r){var o=fr(n)?wc:Li.current;return o=$d(e,o),Wd(e,r),n=Q2(t,e,n,i,o,r),i=$2(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ma(t,e,r)):(Rn&&i&&F2(e),e.flags|=1,ji(t,e,n,r),e.child)}function dX(t,e,n,i,r){if(fr(n)){var o=!0;Tb(e)}else o=!1;if(Wd(e,r),e.stateNode===null)_A(t,e),ST(e,n,i),qB(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,g=n.contextType;typeof g=="object"&&g!==null?g=Vo(g):(g=fr(n)?wc:Li.current,g=$d(e,g));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==i||l!==g)&&iX(e,s,i,g),vl=!1;var h=e.memoizedState;s.state=h,zb(e,i,s,r),l=e.memoizedState,a!==i||h!==l||hr.current||vl?(typeof u=="function"&&($B(e,n,u,i),l=e.memoizedState),(a=vl||nX(e,n,a,i,h,l,g))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=g,i=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,yT(t,e),a=e.memoizedProps,g=e.type===e.elementType?a:zo(e.type,a),s.props=g,d=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vo(l):(l=fr(n)?wc:Li.current,l=$d(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&iX(e,s,i,l),vl=!1,h=e.memoizedState,s.state=h,zb(e,i,s,r);var A=e.memoizedState;a!==d||h!==A||hr.current||vl?(typeof f=="function"&&($B(e,n,f,i),A=e.memoizedState),(g=vl||nX(e,n,g,i,h,A,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,A,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,A,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=A),s.props=i,s.state=A,s.context=l,i=g):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return nR(t,e,n,i,o,r)}function nR(t,e,n,i,r,o){OT(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&Qx(e,n,!1),Ma(t,e,o);i=e.stateNode,y6.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=eI(e,t.child,null,o),e.child=eI(e,null,a,o)):ji(t,e,a,o),e.memoizedState=i.state,r&&Qx(e,n,!0),e.child}function QT(t){var e=t.stateNode;e.pendingContext?Ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(t,e.context,!1),P2(t,e.containerInfo)}function IX(t,e,n,i,r){return qd(),T2(r),e.flags|=256,ji(t,e,n,i),e.child}var iR={dehydrated:null,treeContext:null,retryLane:0};function rR(t){return{baseLanes:t,cachePool:null,transitions:null}}function $T(t,e,n){var i=e.pendingProps,r=xn.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Cn(xn,r&1),t===null)return OB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=my(s,i,0,null),t=hc(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rR(n),e.memoizedState=iR,t):tk(e,s));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return v6(t,e,s,i,a,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=jl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=jl(a,o):(o=hc(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?rR(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=iR,i}return o=t.child,t=o.sibling,i=jl(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function tk(t,e){return e=my({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sp(t,e,n,i){return i!==null&&T2(i),eI(e,t.child,null,n),t=tk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v6(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=CZ(Error(Ze(422))),Sp(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=my({mode:"visible",children:i.children},r,0,null),o=hc(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&eI(e,t.child,null,s),e.child.memoizedState=rR(s),e.memoizedState=iR,o);if(!(e.mode&1))return Sp(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(Ze(419)),i=CZ(o,i,void 0),Sp(t,e,s,i)}if(a=(s&t.childLanes)!==0,dr||a){if(i=fi,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Fa(t,r),ts(i,t,r,-1))}return ak(),i=CZ(Error(Ze(421))),Sp(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=E6.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Xr=Kl(r.nextSibling),Nr=e,Rn=!0,jo=null,t!==null&&(mo[po++]=Ga,mo[po++]=Ba,mo[po++]=Wc,Ga=t.id,Ba=t.overflow,Wc=e),e=tk(e,i.children),e.flags|=4096,e)}function CX(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),QB(t.return,e,n)}function hZ(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function qT(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(ji(t,e,i.children,n),i=xn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&CX(t,n,e);else if(t.tag===19)CX(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Cn(xn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Pb(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),hZ(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Pb(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}hZ(e,!0,n,null,o);break;case"together":hZ(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _A(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ze(153));if(e.child!==null){for(t=e.child,n=jl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function S6(t,e,n){switch(e.tag){case 3:QT(e),qd();break;case 5:BT(e);break;case 1:fr(e.type)&&Tb(e);break;case 4:P2(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Cn(Db,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Cn(xn,xn.current&1),e.flags|=128,null):n&e.child.childLanes?$T(t,e,n):(Cn(xn,xn.current&1),t=Ma(t,e,n),t!==null?t.sibling:null);Cn(xn,xn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return qT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cn(xn,xn.current),i)break;return null;case 22:case 23:return e.lanes=0,jT(t,e,n)}return Ma(t,e,n)}var eL,oR,tL,nL;eL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oR=function(){};tL=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,lc(xs.current);var o=null;switch(n){case"input":r=RB(t,r),i=RB(t,i),o=[];break;case"select":r=Hn({},r,{value:void 0}),i=Hn({},i,{value:void 0}),o=[];break;case"textarea":r=wB(t,r),i=wB(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fb)}xB(n,i);var s;n=null;for(g in r)if(!i.hasOwnProperty(g)&&r.hasOwnProperty(g)&&r[g]!=null)if(g==="style"){var a=r[g];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Uh.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in i){var l=i[g];if(a=r!=null?r[g]:void 0,i.hasOwnProperty(g)&&l!==a&&(l!=null||a!=null))if(g==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(g,n)),n=l;else g==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(g,l)):g==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(g,""+l):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Uh.hasOwnProperty(g)?(l!=null&&g==="onScroll"&&An("scroll",t),o||a===l||(o=[])):(o=o||[]).push(g,l))}n&&(o=o||[]).push("style",n);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};nL=function(t,e,n,i){n!==i&&(e.flags|=4)};function AC(t,e){if(!Rn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ji(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Z6(t,e,n){var i=e.pendingProps;switch(M2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(e),null;case 1:return fr(e.type)&&Mb(),Ji(e),null;case 3:return i=e.stateNode,tI(),Gn(hr),Gn(Li),j2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jo!==null&&(IR(jo),jo=null))),oR(t,e),Ji(e),null;case 5:U2(e);var r=lc(af.current);if(n=e.type,t!==null&&e.stateNode!=null)tL(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ze(166));return Ji(e),null}if(t=lc(xs.current),yp(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Gs]=e,i[of]=o,t=(e.mode&1)!==0,n){case"dialog":An("cancel",i),An("close",i);break;case"iframe":case"object":case"embed":An("load",i);break;case"video":case"audio":for(r=0;r<$C.length;r++)An($C[r],i);break;case"source":An("error",i);break;case"img":case"image":case"link":An("error",i),An("load",i);break;case"details":An("toggle",i);break;case"input":Sx(i,o),An("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},An("invalid",i);break;case"textarea":Gx(i,o),An("invalid",i)}xB(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&bp(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&bp(i.textContent,a,t),r=["children",""+a]):Uh.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&An("scroll",i)}switch(n){case"input":dp(i),Zx(i,o,!0);break;case"textarea":dp(i),Bx(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Fb)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[Gs]=e,t[of]=i,eL(t,e,!1,!1),e.stateNode=t;e:{switch(s=XB(n,i),n){case"dialog":An("cancel",t),An("close",t),r=i;break;case"iframe":case"object":case"embed":An("load",t),r=i;break;case"video":case"audio":for(r=0;r<$C.length;r++)An($C[r],t);r=i;break;case"source":An("error",t),r=i;break;case"img":case"image":case"link":An("error",t),An("load",t),r=i;break;case"details":An("toggle",t),r=i;break;case"input":Sx(t,i),r=RB(t,i),An("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Hn({},i,{value:void 0}),An("invalid",t);break;case"textarea":Gx(t,i),r=wB(t,i),An("invalid",t);break;default:r=i}xB(n,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?xM(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wM(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&jh(t,l):typeof l=="number"&&jh(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Uh.hasOwnProperty(o)?l!=null&&o==="onScroll"&&An("scroll",t):l!=null&&G2(t,o,l,s))}switch(n){case"input":dp(t),Zx(t,i,!1);break;case"textarea":dp(t),Bx(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ig(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Rd(t,!!i.multiple,o,!1):i.defaultValue!=null&&Rd(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Fb)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ji(e),null;case 6:if(t&&e.stateNode!=null)nL(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ze(166));if(n=lc(af.current),lc(xs.current),yp(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gs]=e,(o=i.nodeValue!==n)&&(t=Nr,t!==null))switch(t.tag){case 3:bp(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bp(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gs]=e,e.stateNode=i}return Ji(e),null;case 13:if(Gn(xn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rn&&Xr!==null&&e.mode&1&&!(e.flags&128))AT(),qd(),e.flags|=98560,o=!1;else if(o=yp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Ze(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ze(317));o[Gs]=e}else qd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ji(e),o=!1}else jo!==null&&(IR(jo),jo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||xn.current&1?ai===0&&(ai=3):ak())),e.updateQueue!==null&&(e.flags|=4),Ji(e),null);case 4:return tI(),oR(t,e),t===null&&nf(e.stateNode.containerInfo),Ji(e),null;case 10:return D2(e.type._context),Ji(e),null;case 17:return fr(e.type)&&Mb(),Ji(e),null;case 19:if(Gn(xn),o=e.memoizedState,o===null)return Ji(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)AC(o,!1);else{if(ai!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Pb(t),s!==null){for(e.flags|=128,AC(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Cn(xn,xn.current&1|2),e.child}t=t.sibling}o.tail!==null&&zn()>iI&&(e.flags|=128,i=!0,AC(o,!1),e.lanes=4194304)}else{if(!i)if(t=Pb(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),AC(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Rn)return Ji(e),null}else 2*zn()-o.renderingStartTime>iI&&n!==1073741824&&(e.flags|=128,i=!0,AC(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=zn(),e.sibling=null,n=xn.current,Cn(xn,i?n&1|2:n&1),e):(Ji(e),null);case 22:case 23:return sk(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Wr&1073741824&&(Ji(e),e.subtreeFlags&6&&(e.flags|=8192)):Ji(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function G6(t,e){switch(M2(e),e.tag){case 1:return fr(e.type)&&Mb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tI(),Gn(hr),Gn(Li),j2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return U2(e),null;case 13:if(Gn(xn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));qd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gn(xn),null;case 4:return tI(),null;case 10:return D2(e.type._context),null;case 22:case 23:return sk(),null;case 24:return null;default:return null}}var Zp=!1,Yi=!1,B6=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function gd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ln(t,e,i)}else n.current=null}function sR(t,e,n){try{n()}catch(i){Ln(t,e,i)}}var hX=!1;function R6(t,e){if(_B=Hb,t=sT(),Y2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,g=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=s+r),d!==o||i!==0&&d.nodeType!==3||(l=s+i),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++g===r&&(a=s),h===o&&++u===i&&(l=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(DB={focusedElem:t,selectionRange:n},Hb=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var p=A.memoizedProps,y=A.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:zo(e.type,p),y);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var Z=e.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(R){Ln(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return A=hX,hX=!1,A}function Ah(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&sR(e,n,o)}r=r.next}while(r!==i)}}function hy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function aR(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iL(t){var e=t.alternate;e!==null&&(t.alternate=null,iL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gs],delete e[of],delete e[PB],delete e[g6],delete e[c6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rL(t){return t.tag===5||t.tag===3||t.tag===4}function fX(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lR(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fb));else if(i!==4&&(t=t.child,t!==null))for(lR(t,e,n),t=t.sibling;t!==null;)lR(t,e,n),t=t.sibling}function gR(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(gR(t,e,n),t=t.sibling;t!==null;)gR(t,e,n),t=t.sibling}var Si=null,Po=!1;function cl(t,e,n){for(n=n.child;n!==null;)oL(t,e,n),n=n.sibling}function oL(t,e,n){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(ay,n)}catch{}switch(n.tag){case 5:Yi||gd(n,e);case 6:var i=Si,r=Po;Si=null,cl(t,e,n),Si=i,Po=r,Si!==null&&(Po?(t=Si,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(Po?(t=Si,n=n.stateNode,t.nodeType===8?lZ(t.parentNode,n):t.nodeType===1&&lZ(t,n),qh(t)):lZ(Si,n.stateNode));break;case 4:i=Si,r=Po,Si=n.stateNode.containerInfo,Po=!0,cl(t,e,n),Si=i,Po=r;break;case 0:case 11:case 14:case 15:if(!Yi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&sR(n,e,s),r=r.next}while(r!==i)}cl(t,e,n);break;case 1:if(!Yi&&(gd(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ln(n,e,a)}cl(t,e,n);break;case 21:cl(t,e,n);break;case 22:n.mode&1?(Yi=(i=Yi)||n.memoizedState!==null,cl(t,e,n),Yi=i):cl(t,e,n);break;default:cl(t,e,n)}}function mX(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B6),e.forEach(function(i){var r=H6.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function _o(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Si=a.stateNode,Po=!1;break e;case 3:Si=a.stateNode.containerInfo,Po=!0;break e;case 4:Si=a.stateNode.containerInfo,Po=!0;break e}a=a.return}if(Si===null)throw Error(Ze(160));oL(o,s,r),Si=null,Po=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(g){Ln(r,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sL(e,t),e=e.sibling}function sL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_o(e,t),Is(t),i&4){try{Ah(3,t,t.return),hy(3,t)}catch(p){Ln(t,t.return,p)}try{Ah(5,t,t.return)}catch(p){Ln(t,t.return,p)}}break;case 1:_o(e,t),Is(t),i&512&&n!==null&&gd(n,n.return);break;case 5:if(_o(e,t),Is(t),i&512&&n!==null&&gd(n,n.return),t.flags&32){var r=t.stateNode;try{jh(r,"")}catch(p){Ln(t,t.return,p)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&RM(r,o),XB(a,s);var g=XB(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?xM(r,d):u==="dangerouslySetInnerHTML"?wM(r,d):u==="children"?jh(r,d):G2(r,u,d,g)}switch(a){case"input":kB(r,o);break;case"textarea":kM(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Rd(r,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Rd(r,!!o.multiple,o.defaultValue,!0):Rd(r,!!o.multiple,o.multiple?[]:"",!1))}r[of]=o}catch(p){Ln(t,t.return,p)}}break;case 6:if(_o(e,t),Is(t),i&4){if(t.stateNode===null)throw Error(Ze(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(p){Ln(t,t.return,p)}}break;case 3:if(_o(e,t),Is(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{qh(e.containerInfo)}catch(p){Ln(t,t.return,p)}break;case 4:_o(e,t),Is(t);break;case 13:_o(e,t),Is(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(rk=zn())),i&4&&mX(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Yi=(g=Yi)||u,_o(e,t),Yi=g):_o(e,t),Is(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:Ah(4,h,h.return);break;case 1:gd(h,h.return);var A=h.stateNode;if(typeof A.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(p){Ln(i,n,p)}}break;case 5:gd(h,h.return);break;case 22:if(h.memoizedState!==null){AX(d);continue}}f!==null?(f.return=h,Ke=f):AX(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,g?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WM("display",s))}catch(p){Ln(t,t.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=g?"":d.memoizedProps}catch(p){Ln(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_o(e,t),Is(t),i&4&&mX(t);break;case 21:break;default:_o(e,t),Is(t)}}function Is(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rL(n)){var i=n;break e}n=n.return}throw Error(Ze(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(jh(r,""),i.flags&=-33);var o=fX(t);gR(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,a=fX(t);lR(t,a,s);break;default:throw Error(Ze(161))}}catch(l){Ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k6(t,e,n){Ke=t,aL(t)}function aL(t,e,n){for(var i=(t.mode&1)!==0;Ke!==null;){var r=Ke,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||Zp;if(!s){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Yi;a=Zp;var g=Yi;if(Zp=s,(Yi=l)&&!g)for(Ke=r;Ke!==null;)s=Ke,l=s.child,s.tag===22&&s.memoizedState!==null?bX(r):l!==null?(l.return=s,Ke=l):bX(r);for(;o!==null;)Ke=o,aL(o),o=o.sibling;Ke=r,Zp=a,Yi=g}pX(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Ke=o):pX(t)}}function pX(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yi||hy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Yi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:zo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&tX(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tX(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var u=g.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&qh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}Yi||e.flags&512&&aR(e)}catch(h){Ln(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function AX(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function bX(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hy(4,e)}catch(l){Ln(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ln(e,r,l)}}var o=e.return;try{aR(e)}catch(l){Ln(e,o,l)}break;case 5:var s=e.return;try{aR(e)}catch(l){Ln(e,s,l)}}}catch(l){Ln(e,e.return,l)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var V6=Math.ceil,Ob=ja.ReactCurrentDispatcher,nk=ja.ReactCurrentOwner,So=ja.ReactCurrentBatchConfig,Et=0,fi=null,qn=null,Vi=0,Wr=0,cd=hg(0),ai=0,uf=null,Xc=0,fy=0,ik=0,bh=null,gr=null,rk=0,iI=1/0,Aa=null,Qb=!1,cR=null,Pl=null,Gp=!1,Wl=null,$b=0,yh=0,uR=null,DA=-1,KA=0;function qi(){return Et&6?zn():DA!==-1?DA:DA=zn()}function Ul(t){return t.mode&1?Et&2&&Vi!==0?Vi&-Vi:d6.transition!==null?(KA===0&&(KA=DM()),KA):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:QM(t.type)),t):1}function ts(t,e,n,i){if(50<yh)throw yh=0,uR=null,Error(Ze(185));Pf(t,n,i),(!(Et&2)||t!==fi)&&(t===fi&&(!(Et&2)&&(fy|=n),ai===4&&kl(t,Vi)),mr(t,i),n===1&&Et===0&&!(e.mode&1)&&(iI=zn()+500,dy&&fg()))}function mr(t,e){var n=t.callbackNode;d7(t,e);var i=Eb(t,t===fi?Vi:0);if(i===0)n!==null&&Vx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Vx(n),e===1)t.tag===0?u6(yX.bind(null,t)):fT(yX.bind(null,t)),a6(function(){!(Et&6)&&fg()}),n=null;else{switch(KM(i)){case 1:n=w2;break;case 4:n=LM;break;case 16:n=Jb;break;case 536870912:n=_M;break;default:n=Jb}n=hL(n,lL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lL(t,e){if(DA=-1,KA=0,Et&6)throw Error(Ze(327));var n=t.callbackNode;if(xd()&&t.callbackNode!==n)return null;var i=Eb(t,t===fi?Vi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=qb(t,i);else{e=i;var r=Et;Et|=2;var o=cL();(fi!==t||Vi!==e)&&(Aa=null,iI=zn()+500,Cc(t,e));do try{x6();break}catch(a){gL(t,a)}while(1);_2(),Ob.current=o,Et=r,qn!==null?e=0:(fi=null,Vi=0,e=ai)}if(e!==0){if(e===2&&(r=YB(t),r!==0&&(i=r,e=dR(t,r))),e===1)throw n=uf,Cc(t,0),kl(t,i),mr(t,zn()),n;if(e===6)kl(t,i);else{if(r=t.current.alternate,!(i&30)&&!w6(r)&&(e=qb(t,i),e===2&&(o=YB(t),o!==0&&(i=o,e=dR(t,o))),e===1))throw n=uf,Cc(t,0),kl(t,i),mr(t,zn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ze(345));case 2:Ug(t,gr,Aa);break;case 3:if(kl(t,i),(i&130023424)===i&&(e=rk+500-zn(),10<e)){if(Eb(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=zB(Ug.bind(null,t,gr,Aa),e);break}Ug(t,gr,Aa);break;case 4:if(kl(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-es(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=zn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*V6(i/1960))-i,10<i){t.timeoutHandle=zB(Ug.bind(null,t,gr,Aa),i);break}Ug(t,gr,Aa);break;case 5:Ug(t,gr,Aa);break;default:throw Error(Ze(329))}}}return mr(t,zn()),t.callbackNode===n?lL.bind(null,t):null}function dR(t,e){var n=bh;return t.current.memoizedState.isDehydrated&&(Cc(t,e).flags|=256),t=qb(t,e),t!==2&&(e=gr,gr=n,e!==null&&IR(e)),t}function IR(t){gr===null?gr=t:gr.push.apply(gr,t)}function w6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ns(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kl(t,e){for(e&=~ik,e&=~fy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-es(e),i=1<<n;t[n]=-1,e&=~i}}function yX(t){if(Et&6)throw Error(Ze(327));xd();var e=Eb(t,0);if(!(e&1))return mr(t,zn()),null;var n=qb(t,e);if(t.tag!==0&&n===2){var i=YB(t);i!==0&&(e=i,n=dR(t,i))}if(n===1)throw n=uf,Cc(t,0),kl(t,e),mr(t,zn()),n;if(n===6)throw Error(Ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ug(t,gr,Aa),mr(t,zn()),null}function ok(t,e){var n=Et;Et|=1;try{return t(e)}finally{Et=n,Et===0&&(iI=zn()+500,dy&&fg())}}function Jc(t){Wl!==null&&Wl.tag===0&&!(Et&6)&&xd();var e=Et;Et|=1;var n=So.transition,i=Qt;try{if(So.transition=null,Qt=1,t)return t()}finally{Qt=i,So.transition=n,Et=e,!(Et&6)&&fg()}}function sk(){Wr=cd.current,Gn(cd)}function Cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s6(n)),qn!==null)for(n=qn.return;n!==null;){var i=n;switch(M2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mb();break;case 3:tI(),Gn(hr),Gn(Li),j2();break;case 5:U2(i);break;case 4:tI();break;case 13:Gn(xn);break;case 19:Gn(xn);break;case 10:D2(i.type._context);break;case 22:case 23:sk()}n=n.return}if(fi=t,qn=t=jl(t.current,null),Vi=Wr=e,ai=0,uf=null,ik=fy=Xc=0,gr=bh=null,ac!==null){for(e=0;e<ac.length;e++)if(n=ac[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}ac=null}return t}function gL(t,e){do{var n=qn;try{if(_2(),TA.current=jb,Ub){for(var i=En.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ub=!1}if(xc=0,Ci=ri=En=null,ph=!1,lf=0,nk.current=null,n===null||n.return===null){ai=1,uf=e,qn=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Vi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var g=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=lX(s);if(f!==null){f.flags&=-257,gX(f,s,a,o,e),f.mode&1&&aX(o,g,e),e=f,l=g;var A=e.updateQueue;if(A===null){var p=new Set;p.add(l),e.updateQueue=p}else A.add(l);break e}else{if(!(e&1)){aX(o,g,e),ak();break e}l=Error(Ze(426))}}else if(Rn&&a.mode&1){var y=lX(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gX(y,s,a,o,e),T2(nI(l,a));break e}}o=l=nI(l,a),ai!==4&&(ai=2),bh===null?bh=[o]:bh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=zT(o,l,e);eX(o,v);break e;case 1:a=l;var S=o.type,Z=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Pl===null||!Pl.has(Z)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=PT(o,a,e);eX(o,R);break e}}o=o.return}while(o!==null)}dL(n)}catch(W){e=W,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(1)}function cL(){var t=Ob.current;return Ob.current=jb,t===null?jb:t}function ak(){(ai===0||ai===3||ai===2)&&(ai=4),fi===null||!(Xc&268435455)&&!(fy&268435455)||kl(fi,Vi)}function qb(t,e){var n=Et;Et|=2;var i=cL();(fi!==t||Vi!==e)&&(Aa=null,Cc(t,e));do try{W6();break}catch(r){gL(t,r)}while(1);if(_2(),Et=n,Ob.current=i,qn!==null)throw Error(Ze(261));return fi=null,Vi=0,ai}function W6(){for(;qn!==null;)uL(qn)}function x6(){for(;qn!==null&&!i7();)uL(qn)}function uL(t){var e=CL(t.alternate,t,Wr);t.memoizedProps=t.pendingProps,e===null?dL(t):qn=e,nk.current=null}function dL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=G6(n,e),n!==null){n.flags&=32767,qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ai=6,qn=null;return}}else if(n=Z6(n,e,Wr),n!==null){qn=n;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=t}while(e!==null);ai===0&&(ai=5)}function Ug(t,e,n){var i=Qt,r=So.transition;try{So.transition=null,Qt=1,X6(t,e,n,i)}finally{So.transition=r,Qt=i}return null}function X6(t,e,n,i){do xd();while(Wl!==null);if(Et&6)throw Error(Ze(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ze(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(I7(t,o),t===fi&&(qn=fi=null,Vi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gp||(Gp=!0,hL(Jb,function(){return xd(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=So.transition,So.transition=null;var s=Qt;Qt=1;var a=Et;Et|=4,nk.current=null,R6(t,n),sL(n,t),q7(DB),Hb=!!_B,DB=_B=null,t.current=n,k6(n),r7(),Et=a,Qt=s,So.transition=o}else t.current=n;if(Gp&&(Gp=!1,Wl=t,$b=r),o=t.pendingLanes,o===0&&(Pl=null),a7(n.stateNode),mr(t,zn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Qb)throw Qb=!1,t=cR,cR=null,t;return $b&1&&t.tag!==0&&xd(),o=t.pendingLanes,o&1?t===uR?yh++:(yh=0,uR=t):yh=0,fg(),null}function xd(){if(Wl!==null){var t=KM($b),e=So.transition,n=Qt;try{if(So.transition=null,Qt=16>t?16:t,Wl===null)var i=!1;else{if(t=Wl,Wl=null,$b=0,Et&6)throw Error(Ze(331));var r=Et;for(Et|=4,Ke=t.current;Ke!==null;){var o=Ke,s=o.child;if(Ke.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var g=a[l];for(Ke=g;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:Ah(8,u,o)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(iL(u),u===g){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var A=o.alternate;if(A!==null){var p=A.child;if(p!==null){A.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}Ke=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ke=s;else e:for(;Ke!==null;){if(o=Ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ah(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,Ke=v;break e}Ke=o.return}}var S=t.current;for(Ke=S;Ke!==null;){s=Ke;var Z=s.child;if(s.subtreeFlags&2064&&Z!==null)Z.return=s,Ke=Z;else e:for(s=S;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hy(9,a)}}catch(W){Ln(a,a.return,W)}if(a===s){Ke=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Ke=R;break e}Ke=a.return}}if(Et=r,fg(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(ay,t)}catch{}i=!0}return i}finally{Qt=n,So.transition=e}}return!1}function vX(t,e,n){e=nI(n,e),e=zT(t,e,1),t=zl(t,e,1),e=qi(),t!==null&&(Pf(t,1,e),mr(t,e))}function Ln(t,e,n){if(t.tag===3)vX(t,t,n);else for(;e!==null;){if(e.tag===3){vX(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pl===null||!Pl.has(i))){t=nI(n,t),t=PT(e,t,1),e=zl(e,t,1),t=qi(),e!==null&&(Pf(e,1,t),mr(e,t));break}}e=e.return}}function J6(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qi(),t.pingedLanes|=t.suspendedLanes&n,fi===t&&(Vi&n)===n&&(ai===4||ai===3&&(Vi&130023424)===Vi&&500>zn()-rk?Cc(t,0):ik|=n),mr(t,e)}function IL(t,e){e===0&&(t.mode&1?(e=hp,hp<<=1,!(hp&130023424)&&(hp=4194304)):e=1);var n=qi();t=Fa(t,e),t!==null&&(Pf(t,e,n),mr(t,n))}function E6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IL(t,n)}function H6(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ze(314))}i!==null&&i.delete(e),IL(t,n)}var CL;CL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hr.current)dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dr=!1,S6(t,e,n);dr=!!(t.flags&131072)}else dr=!1,Rn&&e.flags&1048576&&mT(e,_b,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_A(t,e),t=e.pendingProps;var r=$d(e,Li.current);Wd(e,n),r=Q2(null,e,i,t,r,n);var o=$2();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(i)?(o=!0,Tb(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,z2(e),r.updater=Iy,e.stateNode=r,r._reactInternals=e,qB(e,i,t,n),e=nR(null,e,i,!0,o,n)):(e.tag=0,Rn&&o&&F2(e),ji(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(_A(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Y6(i),t=zo(i,t),r){case 0:e=tR(null,e,i,t,n);break e;case 1:e=dX(null,e,i,t,n);break e;case 11:e=cX(null,e,i,t,n);break e;case 14:e=uX(null,e,i,zo(i.type,t),n);break e}throw Error(Ze(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zo(i,r),tR(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zo(i,r),dX(t,e,i,r,n);case 3:e:{if(QT(e),t===null)throw Error(Ze(387));i=e.pendingProps,o=e.memoizedState,r=o.element,yT(t,e),zb(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=nI(Error(Ze(423)),e),e=IX(t,e,i,n,r);break e}else if(i!==r){r=nI(Error(Ze(424)),e),e=IX(t,e,i,n,r);break e}else for(Xr=Kl(e.stateNode.containerInfo.firstChild),Nr=e,Rn=!0,jo=null,n=GT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qd(),i===r){e=Ma(t,e,n);break e}ji(t,e,i,n)}e=e.child}return e;case 5:return BT(e),t===null&&OB(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,KB(i,r)?s=null:o!==null&&KB(i,o)&&(e.flags|=32),OT(t,e),ji(t,e,s,n),e.child;case 6:return t===null&&OB(e),null;case 13:return $T(t,e,n);case 4:return P2(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=eI(e,null,i,n):ji(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zo(i,r),cX(t,e,i,r,n);case 7:return ji(t,e,e.pendingProps,n),e.child;case 8:return ji(t,e,e.pendingProps.children,n),e.child;case 12:return ji(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,Cn(Db,i._currentValue),i._currentValue=s,o!==null)if(ns(o.value,s)){if(o.children===r.children&&!hr.current){e=Ma(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=wa(-1,n&-n),l.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var u=g.pending;u===null?l.next=l:(l.next=u.next,u.next=l),g.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),QB(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Ze(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),QB(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ji(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wd(e,n),r=Vo(r),i=i(r),e.flags|=1,ji(t,e,i,n),e.child;case 14:return i=e.type,r=zo(i,e.pendingProps),r=zo(i.type,r),uX(t,e,i,r,n);case 15:return UT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zo(i,r),_A(t,e),e.tag=1,fr(i)?(t=!0,Tb(e)):t=!1,Wd(e,n),ST(e,i,r),qB(e,i,r,n),nR(null,e,i,!0,t,n);case 19:return qT(t,e,n);case 22:return jT(t,e,n)}throw Error(Ze(156,e.tag))};function hL(t,e){return TM(t,e)}function N6(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(t,e,n,i){return new N6(t,e,n,i)}function lk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y6(t){if(typeof t=="function")return lk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R2)return 11;if(t===k2)return 14}return 2}function jl(t,e){var n=t.alternate;return n===null?(n=bo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zA(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")lk(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ed:return hc(n.children,r,o,e);case B2:s=8,r|=8;break;case SB:return t=bo(12,n,e,r|2),t.elementType=SB,t.lanes=o,t;case ZB:return t=bo(13,n,e,r),t.elementType=ZB,t.lanes=o,t;case GB:return t=bo(19,n,e,r),t.elementType=GB,t.lanes=o,t;case ZM:return my(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vM:s=10;break e;case SM:s=9;break e;case R2:s=11;break e;case k2:s=14;break e;case yl:s=16,i=null;break e}throw Error(Ze(130,t==null?t:typeof t,""))}return e=bo(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function hc(t,e,n,i){return t=bo(7,t,i,e),t.lanes=n,t}function my(t,e,n,i){return t=bo(22,t,i,e),t.elementType=ZM,t.lanes=n,t.stateNode={isHidden:!1},t}function fZ(t,e,n){return t=bo(6,t,null,e),t.lanes=n,t}function mZ(t,e,n){return e=bo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F6(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QS(0),this.expirationTimes=QS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gk(t,e,n,i,r,o,s,a,l){return t=new F6(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bo(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},z2(o),t}function M6(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fL(t){if(!t)return rg;t=t._reactInternals;e:{if(Qc(t)!==t||t.tag!==1)throw Error(Ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(t.tag===1){var n=t.type;if(fr(n))return hT(t,n,e)}return e}function mL(t,e,n,i,r,o,s,a,l){return t=gk(n,i,!0,t,r,o,s,a,l),t.context=fL(null),n=t.current,i=qi(),r=Ul(n),o=wa(i,r),o.callback=e??null,zl(n,o,r),t.current.lanes=r,Pf(t,r,i),mr(t,i),t}function py(t,e,n,i){var r=e.current,o=qi(),s=Ul(r);return n=fL(n),e.context===null?e.context=n:e.pendingContext=n,e=wa(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zl(r,e,s),t!==null&&(ts(t,r,s,o),MA(t,r,s)),s}function e0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function SX(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ck(t,e){SX(t,e),(t=t.alternate)&&SX(t,e)}function T6(){return null}var pL=typeof reportError=="function"?reportError:function(t){console.error(t)};function uk(t){this._internalRoot=t}Ay.prototype.render=uk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ze(409));py(t,e,null,null)};Ay.prototype.unmount=uk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jc(function(){py(null,t,null,null)}),e[Ya]=null}};function Ay(t){this._internalRoot=t}Ay.prototype.unstable_scheduleHydration=function(t){if(t){var e=UM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rl.length&&e!==0&&e<Rl[n].priority;n++);Rl.splice(n,0,t),n===0&&OM(t)}};function dk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function by(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZX(){}function L6(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var g=e0(s);o.call(g)}}var s=mL(e,i,t,0,null,!1,!1,"",ZX);return t._reactRootContainer=s,t[Ya]=s.current,nf(t.nodeType===8?t.parentNode:t),Jc(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var g=e0(l);a.call(g)}}var l=gk(t,0,!1,null,null,!1,!1,"",ZX);return t._reactRootContainer=l,t[Ya]=l.current,nf(t.nodeType===8?t.parentNode:t),Jc(function(){py(e,l,n,i)}),l}function yy(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var a=r;r=function(){var l=e0(s);a.call(l)}}py(e,s,t,r)}else s=L6(n,e,t,r,i);return e0(s)}zM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=QC(e.pendingLanes);n!==0&&(W2(e,n|1),mr(e,zn()),!(Et&6)&&(iI=zn()+500,fg()))}break;case 13:Jc(function(){var i=Fa(t,1);if(i!==null){var r=qi();ts(i,t,1,r)}}),ck(t,1)}};x2=function(t){if(t.tag===13){var e=Fa(t,134217728);if(e!==null){var n=qi();ts(e,t,134217728,n)}ck(t,134217728)}};PM=function(t){if(t.tag===13){var e=Ul(t),n=Fa(t,e);if(n!==null){var i=qi();ts(n,t,e,i)}ck(t,e)}};UM=function(){return Qt};jM=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};EB=function(t,e,n){switch(e){case"input":if(kB(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=uy(i);if(!r)throw Error(Ze(90));BM(i),kB(i,r)}}}break;case"textarea":kM(t,n);break;case"select":e=n.value,e!=null&&Rd(t,!!n.multiple,e,!1)}};EM=ok;HM=Jc;var _6={usingClientEntryPoint:!1,Events:[jf,rd,uy,XM,JM,ok]},bC={findFiberByHostInstance:sc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},D6={bundleType:bC.bundleType,version:bC.version,rendererPackageName:bC.rendererPackageName,rendererConfig:bC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FM(t),t===null?null:t.stateNode},findFiberByHostInstance:bC.findFiberByHostInstance||T6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{ay=Bp.inject(D6),Ws=Bp}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_6;Kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dk(e))throw Error(Ze(200));return M6(t,e,null,n)};Kr.createRoot=function(t,e){if(!dk(t))throw Error(Ze(299));var n=!1,i="",r=pL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gk(t,1,!1,null,null,n,!1,i,r),t[Ya]=e.current,nf(t.nodeType===8?t.parentNode:t),new uk(e)};Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ze(188)):(t=Object.keys(t).join(","),Error(Ze(268,t)));return t=FM(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t){return Jc(t)};Kr.hydrate=function(t,e,n){if(!by(e))throw Error(Ze(200));return yy(null,t,e,!0,n)};Kr.hydrateRoot=function(t,e,n){if(!dk(t))throw Error(Ze(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=pL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=mL(e,null,t,1,n??null,r,!1,o,s),t[Ya]=e.current,nf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ay(e)};Kr.render=function(t,e,n){if(!by(e))throw Error(Ze(200));return yy(null,t,e,!1,n)};Kr.unmountComponentAtNode=function(t){if(!by(t))throw Error(Ze(40));return t._reactRootContainer?(Jc(function(){yy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ya]=null})}),!0):!1};Kr.unstable_batchedUpdates=ok;Kr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!by(n))throw Error(Ze(200));if(t==null||t._reactInternals===void 0)throw Error(Ze(38));return yy(t,e,n,!1,i)};Kr.version="18.2.0-next-9e3b772b8-20220608";function AL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AL)}catch(t){console.error(t)}}AL(),mM.exports=Kr;var Pr=mM.exports;const K6=Ig(Pr);var GX=Pr;yB.createRoot=GX.createRoot,yB.hydrateRoot=GX.hydrateRoot;function z6(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function P6(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var U6=function(){function t(n){var i=this;this._insertTag=function(r){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,o),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(P6(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var o=z6(r);try{o.insertRule(i,o.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Ei="-ms-",t0="-moz-",Lt="-webkit-",bL="comm",Ik="rule",Ck="decl",j6="@import",yL="@keyframes",O6="@layer",Q6=Math.abs,vy=String.fromCharCode,$6=Object.assign;function q6(t,e){return Bi(t,0)^45?(((e<<2^Bi(t,0))<<2^Bi(t,1))<<2^Bi(t,2))<<2^Bi(t,3):0}function vL(t){return t.trim()}function e$(t,e){return(t=e.exec(t))?t[0]:t}function _t(t,e,n){return t.replace(e,n)}function CR(t,e){return t.indexOf(e)}function Bi(t,e){return t.charCodeAt(e)|0}function df(t,e,n){return t.slice(e,n)}function vs(t){return t.length}function hk(t){return t.length}function Rp(t,e){return e.push(t),t}function t$(t,e){return t.map(e).join("")}var Sy=1,rI=1,SL=0,vr=0,$n=0,WI="";function Zy(t,e,n,i,r,o,s){return{value:t,root:e,parent:n,type:i,props:r,children:o,line:Sy,column:rI,length:s,return:""}}function yC(t,e){return $6(Zy("",null,null,"",null,null,0),t,{length:-t.length},e)}function n$(){return $n}function i$(){return $n=vr>0?Bi(WI,--vr):0,rI--,$n===10&&(rI=1,Sy--),$n}function Yr(){return $n=vr<SL?Bi(WI,vr++):0,rI++,$n===10&&(rI=1,Sy++),$n}function Xs(){return Bi(WI,vr)}function PA(){return vr}function Qf(t,e){return df(WI,t,e)}function If(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ZL(t){return Sy=rI=1,SL=vs(WI=t),vr=0,[]}function GL(t){return WI="",t}function UA(t){return vL(Qf(vr-1,hR(t===91?t+2:t===40?t+1:t)))}function r$(t){for(;($n=Xs())&&$n<33;)Yr();return If(t)>2||If($n)>3?"":" "}function o$(t,e){for(;--e&&Yr()&&!($n<48||$n>102||$n>57&&$n<65||$n>70&&$n<97););return Qf(t,PA()+(e<6&&Xs()==32&&Yr()==32))}function hR(t){for(;Yr();)switch($n){case t:return vr;case 34:case 39:t!==34&&t!==39&&hR($n);break;case 40:t===41&&hR(t);break;case 92:Yr();break}return vr}function s$(t,e){for(;Yr()&&t+$n!==47+10;)if(t+$n===42+42&&Xs()===47)break;return"/*"+Qf(e,vr-1)+"*"+vy(t===47?t:Yr())}function a$(t){for(;!If(Xs());)Yr();return Qf(t,vr)}function l$(t){return GL(jA("",null,null,null,[""],t=ZL(t),0,[0],t))}function jA(t,e,n,i,r,o,s,a,l){for(var g=0,u=0,d=s,h=0,f=0,A=0,p=1,y=1,v=1,S=0,Z="",R=r,W=o,B=i,k=Z;y;)switch(A=S,S=Yr()){case 40:if(A!=108&&Bi(k,d-1)==58){CR(k+=_t(UA(S),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:k+=UA(S);break;case 9:case 10:case 13:case 32:k+=r$(A);break;case 92:k+=o$(PA()-1,7);continue;case 47:switch(Xs()){case 42:case 47:Rp(g$(s$(Yr(),PA()),e,n),l);break;default:k+="/"}break;case 123*p:a[g++]=vs(k)*v;case 125*p:case 59:case 0:switch(S){case 0:case 125:y=0;case 59+u:v==-1&&(k=_t(k,/\f/g,"")),f>0&&vs(k)-d&&Rp(f>32?RX(k+";",i,n,d-1):RX(_t(k," ","")+";",i,n,d-2),l);break;case 59:k+=";";default:if(Rp(B=BX(k,e,n,g,u,r,a,Z,R=[],W=[],d),o),S===123)if(u===0)jA(k,e,B,B,R,o,d,a,W);else switch(h===99&&Bi(k,3)===110?100:h){case 100:case 108:case 109:case 115:jA(t,B,B,i&&Rp(BX(t,B,B,0,0,r,a,Z,r,R=[],d),W),r,W,d,a,i?R:W);break;default:jA(k,B,B,B,[""],W,0,a,W)}}g=u=f=0,p=v=1,Z=k="",d=s;break;case 58:d=1+vs(k),f=A;default:if(p<1){if(S==123)--p;else if(S==125&&p++==0&&i$()==125)continue}switch(k+=vy(S),S*p){case 38:v=u>0?1:(k+="\f",-1);break;case 44:a[g++]=(vs(k)-1)*v,v=1;break;case 64:Xs()===45&&(k+=UA(Yr())),h=Xs(),u=d=vs(Z=k+=a$(PA())),S++;break;case 45:A===45&&vs(k)==2&&(p=0)}}return o}function BX(t,e,n,i,r,o,s,a,l,g,u){for(var d=r-1,h=r===0?o:[""],f=hk(h),A=0,p=0,y=0;A<i;++A)for(var v=0,S=df(t,d+1,d=Q6(p=s[A])),Z=t;v<f;++v)(Z=vL(p>0?h[v]+" "+S:_t(S,/&\f/g,h[v])))&&(l[y++]=Z);return Zy(t,e,n,r===0?Ik:a,l,g,u)}function g$(t,e,n){return Zy(t,e,n,bL,vy(n$()),df(t,2,-2),0)}function RX(t,e,n,i){return Zy(t,e,n,Ck,df(t,0,i),df(t,i+1,-1),i)}function Xd(t,e){for(var n="",i=hk(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function c$(t,e,n,i){switch(t.type){case O6:if(t.children.length)break;case j6:case Ck:return t.return=t.return||t.value;case bL:return"";case yL:return t.return=t.value+"{"+Xd(t.children,i)+"}";case Ik:t.value=t.props.join(",")}return vs(n=Xd(t.children,i))?t.return=t.value+"{"+n+"}":""}function u$(t){var e=hk(t);return function(n,i,r,o){for(var s="",a=0;a<e;a++)s+=t[a](n,i,r,o)||"";return s}}function d$(t){return function(e){e.root||(e=e.return)&&t(e)}}var kX=function(e){var n=new WeakMap;return function(i){if(n.has(i))return n.get(i);var r=e(i);return n.set(i,r),r}};function BL(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var I$=function(e,n,i){for(var r=0,o=0;r=o,o=Xs(),r===38&&o===12&&(n[i]=1),!If(o);)Yr();return Qf(e,vr)},C$=function(e,n){var i=-1,r=44;do switch(If(r)){case 0:r===38&&Xs()===12&&(n[i]=1),e[i]+=I$(vr-1,n,i);break;case 2:e[i]+=UA(r);break;case 4:if(r===44){e[++i]=Xs()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=vy(r)}while(r=Yr());return e},h$=function(e,n){return GL(C$(ZL(e),n))},VX=new WeakMap,f$=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!VX.get(i))&&!r){VX.set(e,!0);for(var o=[],s=h$(n,o),a=i.props,l=0,g=0;l<s.length;l++)for(var u=0;u<a.length;u++,g++)e.props[g]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},m$=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function RL(t,e){switch(q6(t,e)){case 5103:return Lt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Lt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Lt+t+t0+t+Ei+t+t;case 6828:case 4268:return Lt+t+Ei+t+t;case 6165:return Lt+t+Ei+"flex-"+t+t;case 5187:return Lt+t+_t(t,/(\w+).+(:[^]+)/,Lt+"box-$1$2"+Ei+"flex-$1$2")+t;case 5443:return Lt+t+Ei+"flex-item-"+_t(t,/flex-|-self/,"")+t;case 4675:return Lt+t+Ei+"flex-line-pack"+_t(t,/align-content|flex-|-self/,"")+t;case 5548:return Lt+t+Ei+_t(t,"shrink","negative")+t;case 5292:return Lt+t+Ei+_t(t,"basis","preferred-size")+t;case 6060:return Lt+"box-"+_t(t,"-grow","")+Lt+t+Ei+_t(t,"grow","positive")+t;case 4554:return Lt+_t(t,/([^-])(transform)/g,"$1"+Lt+"$2")+t;case 6187:return _t(_t(_t(t,/(zoom-|grab)/,Lt+"$1"),/(image-set)/,Lt+"$1"),t,"")+t;case 5495:case 3959:return _t(t,/(image-set\([^]*)/,Lt+"$1$`$1");case 4968:return _t(_t(t,/(.+:)(flex-)?(.*)/,Lt+"box-pack:$3"+Ei+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Lt+t+t;case 4095:case 3583:case 4068:case 2532:return _t(t,/(.+)-inline(.+)/,Lt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vs(t)-1-e>6)switch(Bi(t,e+1)){case 109:if(Bi(t,e+4)!==45)break;case 102:return _t(t,/(.+:)(.+)-([^]+)/,"$1"+Lt+"$2-$3$1"+t0+(Bi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~CR(t,"stretch")?RL(_t(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Bi(t,e+1)!==115)break;case 6444:switch(Bi(t,vs(t)-3-(~CR(t,"!important")&&10))){case 107:return _t(t,":",":"+Lt)+t;case 101:return _t(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Lt+(Bi(t,14)===45?"inline-":"")+"box$3$1"+Lt+"$2$3$1"+Ei+"$2box$3")+t}break;case 5936:switch(Bi(t,e+11)){case 114:return Lt+t+Ei+_t(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Lt+t+Ei+_t(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Lt+t+Ei+_t(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Lt+t+Ei+t+t}return t}var p$=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case Ck:e.return=RL(e.value,e.length);break;case yL:return Xd([yC(e,{value:_t(e.value,"@","@"+Lt)})],r);case Ik:if(e.length)return t$(e.props,function(o){switch(e$(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xd([yC(e,{props:[_t(o,/:(read-\w+)/,":"+t0+"$1")]})],r);case"::placeholder":return Xd([yC(e,{props:[_t(o,/:(plac\w+)/,":"+Lt+"input-$1")]}),yC(e,{props:[_t(o,/:(plac\w+)/,":"+t0+"$1")]}),yC(e,{props:[_t(o,/:(plac\w+)/,Ei+"input-$1")]})],r)}return""})}},A$=[p$],b$=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(p){var y=p.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var r=e.stylisPlugins||A$,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var y=p.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)o[y[v]]=!0;a.push(p)});var l,g=[f$,m$];{var u,d=[c$,d$(function(p){u.insert(p)})],h=u$(g.concat(r,d)),f=function(y){return Xd(l$(y),h)};l=function(y,v,S,Z){u=S,f(y?y+"{"+v.styles+"}":v.styles),Z&&(A.inserted[v.name]=!0)}}var A={key:n,sheet:new U6({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return A.sheet.hydrate(a),A};function og(){return og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},og.apply(this,arguments)}var kL={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pi=typeof Symbol=="function"&&Symbol.for,fk=pi?Symbol.for("react.element"):60103,mk=pi?Symbol.for("react.portal"):60106,Gy=pi?Symbol.for("react.fragment"):60107,By=pi?Symbol.for("react.strict_mode"):60108,Ry=pi?Symbol.for("react.profiler"):60114,ky=pi?Symbol.for("react.provider"):60109,Vy=pi?Symbol.for("react.context"):60110,pk=pi?Symbol.for("react.async_mode"):60111,wy=pi?Symbol.for("react.concurrent_mode"):60111,Wy=pi?Symbol.for("react.forward_ref"):60112,xy=pi?Symbol.for("react.suspense"):60113,y$=pi?Symbol.for("react.suspense_list"):60120,Xy=pi?Symbol.for("react.memo"):60115,Jy=pi?Symbol.for("react.lazy"):60116,v$=pi?Symbol.for("react.block"):60121,S$=pi?Symbol.for("react.fundamental"):60117,Z$=pi?Symbol.for("react.responder"):60118,G$=pi?Symbol.for("react.scope"):60119;function Ur(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case fk:switch(t=t.type,t){case pk:case wy:case Gy:case Ry:case By:case xy:return t;default:switch(t=t&&t.$$typeof,t){case Vy:case Wy:case Jy:case Xy:case ky:return t;default:return e}}case mk:return e}}}function VL(t){return Ur(t)===wy}$t.AsyncMode=pk;$t.ConcurrentMode=wy;$t.ContextConsumer=Vy;$t.ContextProvider=ky;$t.Element=fk;$t.ForwardRef=Wy;$t.Fragment=Gy;$t.Lazy=Jy;$t.Memo=Xy;$t.Portal=mk;$t.Profiler=Ry;$t.StrictMode=By;$t.Suspense=xy;$t.isAsyncMode=function(t){return VL(t)||Ur(t)===pk};$t.isConcurrentMode=VL;$t.isContextConsumer=function(t){return Ur(t)===Vy};$t.isContextProvider=function(t){return Ur(t)===ky};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===fk};$t.isForwardRef=function(t){return Ur(t)===Wy};$t.isFragment=function(t){return Ur(t)===Gy};$t.isLazy=function(t){return Ur(t)===Jy};$t.isMemo=function(t){return Ur(t)===Xy};$t.isPortal=function(t){return Ur(t)===mk};$t.isProfiler=function(t){return Ur(t)===Ry};$t.isStrictMode=function(t){return Ur(t)===By};$t.isSuspense=function(t){return Ur(t)===xy};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gy||t===wy||t===Ry||t===By||t===xy||t===y$||typeof t=="object"&&t!==null&&(t.$$typeof===Jy||t.$$typeof===Xy||t.$$typeof===ky||t.$$typeof===Vy||t.$$typeof===Wy||t.$$typeof===S$||t.$$typeof===Z$||t.$$typeof===G$||t.$$typeof===v$)};$t.typeOf=Ur;kL.exports=$t;var B$=kL.exports,Ak=B$,R$={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},k$={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},V$={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wL={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bk={};bk[Ak.ForwardRef]=V$;bk[Ak.Memo]=wL;function wX(t){return Ak.isMemo(t)?wL:bk[t.$$typeof]||R$}var w$=Object.defineProperty,W$=Object.getOwnPropertyNames,WX=Object.getOwnPropertySymbols,x$=Object.getOwnPropertyDescriptor,X$=Object.getPrototypeOf,xX=Object.prototype;function WL(t,e,n){if(typeof e!="string"){if(xX){var i=X$(e);i&&i!==xX&&WL(t,i,n)}var r=W$(e);WX&&(r=r.concat(WX(e)));for(var o=wX(t),s=wX(e),a=0;a<r.length;++a){var l=r[a];if(!k$[l]&&!(n&&n[l])&&!(s&&s[l])&&!(o&&o[l])){var g=x$(e,l);try{w$(t,l,g)}catch{}}}}return t}var J$=WL;const E$=Ig(J$);var H$=!0;function N$(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var xL=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||H$===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},XL=function(e,n,i){xL(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+r:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Y$(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var F$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},M$=/[A-Z]|^ms/g,T$=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JL=function(e){return e.charCodeAt(1)===45},XX=function(e){return e!=null&&typeof e!="boolean"},pZ=BL(function(t){return JL(t)?t:t.replace(M$,"-$&").toLowerCase()}),JX=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(T$,function(i,r,o){return Ss={name:r,styles:o,next:Ss},r})}return F$[e]!==1&&!JL(e)&&typeof n=="number"&&n!==0?n+"px":n};function Cf(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ss={name:n.name,styles:n.styles,next:Ss},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Ss={name:i.name,styles:i.styles,next:Ss},i=i.next;var r=n.styles+";";return r}return L$(t,e,n)}case"function":{if(t!==void 0){var o=Ss,s=n(t);return Ss=o,Cf(t,e,s)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function L$(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=Cf(t,e,n[r])+";";else for(var o in n){var s=n[o];if(typeof s!="object")e!=null&&e[s]!==void 0?i+=o+"{"+e[s]+"}":XX(s)&&(i+=pZ(o)+":"+JX(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var a=0;a<s.length;a++)XX(s[a])&&(i+=pZ(o)+":"+JX(o,s[a])+";");else{var l=Cf(t,e,s);switch(o){case"animation":case"animationName":{i+=pZ(o)+":"+l+";";break}default:i+=o+"{"+l+"}"}}}return i}var EX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ss,yk=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";Ss=void 0;var s=e[0];s==null||s.raw===void 0?(r=!1,o+=Cf(i,n,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=Cf(i,n,e[a]),r&&(o+=s[a]);EX.lastIndex=0;for(var l="",g;(g=EX.exec(o))!==null;)l+="-"+g[1];var u=Y$(o)+l;return{name:u,styles:o,next:Ss}},_$=function(e){return e()},EL=bB["useInsertionEffect"]?bB["useInsertionEffect"]:!1,D$=EL||_$,HX=EL||m.useLayoutEffect,HL=m.createContext(typeof HTMLElement<"u"?b$({key:"css"}):null);HL.Provider;var NL=function(e){return m.forwardRef(function(n,i){var r=m.useContext(HL);return e(n,r,i)})},hf=m.createContext({}),K$=function(e,n){if(typeof n=="function"){var i=n(e);return i}return og({},e,n)},z$=kX(function(t){return kX(function(e){return K$(t,e)})}),P$=function(e){var n=m.useContext(hf);return e.theme!==n&&(n=z$(n)(e.theme)),m.createElement(hf.Provider,{value:n},e.children)},Ey=NL(function(t,e){var n=t.styles,i=yk([n],void 0,m.useContext(hf)),r=m.useRef();return HX(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),r.current=[s,a],function(){s.flush()}},[e]),HX(function(){var o=r.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(i.next!==void 0&&XL(e,i.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",i,s,!1)},[e,i.name]),null});function U$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return yk(e)}var xI=function(){var e=U$.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},YL=String.raw,FL=YL`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,j$=()=>C.jsx(Ey,{styles:FL}),O$=({scope:t=""})=>C.jsx(Ey,{styles:YL`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${FL}
    `});function Q$(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function ni(t={}){const{name:e,strict:n=!0,hookName:i="useContext",providerName:r="Provider",errorMessage:o,defaultValue:s}=t,a=m.createContext(s);a.displayName=e;function l(){var g;const u=m.useContext(a);if(!u&&n){const d=new Error(o??Q$(i,r));throw d.name="ContextError",(g=Error.captureStackTrace)==null||g.call(Error,d,l),d}return u}return[a.Provider,l,a]}var[$$,q$]=ni({strict:!1,name:"PortalManagerContext"});function ML(t){const{children:e,zIndex:n}=t;return C.jsx($$,{value:{zIndex:n},children:e})}ML.displayName="PortalManager";var Js=globalThis!=null&&globalThis.document?m.useLayoutEffect:m.useEffect,[TL,eq]=ni({strict:!1,name:"PortalContext"}),vk="chakra-portal",tq=".chakra-portal",nq=t=>C.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),iq=t=>{const{appendToParentPortal:e,children:n}=t,[i,r]=m.useState(null),o=m.useRef(null),[,s]=m.useState({});m.useEffect(()=>s({}),[]);const a=eq(),l=q$();Js(()=>{if(!i)return;const u=i.ownerDocument,d=e?a??u.body:u.body;if(!d)return;o.current=u.createElement("div"),o.current.className=vk,d.appendChild(o.current),s({});const h=o.current;return()=>{d.contains(h)&&d.removeChild(h)}},[i]);const g=l!=null&&l.zIndex?C.jsx(nq,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?Pr.createPortal(C.jsx(TL,{value:o.current,children:g}),o.current):C.jsx("span",{ref:u=>{u&&r(u)}})},rq=t=>{const{children:e,containerRef:n,appendToParentPortal:i}=t,r=n.current,o=r??(typeof window<"u"?document.body:void 0),s=m.useMemo(()=>{const l=r==null?void 0:r.ownerDocument.createElement("div");return l&&(l.className=vk),l},[r]),[,a]=m.useState({});return Js(()=>a({}),[]),Js(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?Pr.createPortal(C.jsx(TL,{value:i?s:null,children:e}),s):null};function XI(t){const e={appendToParentPortal:!0,...t},{containerRef:n,...i}=e;return n?C.jsx(rq,{containerRef:n,...i}):C.jsx(iq,{...i})}XI.className=vk;XI.selector=tq;XI.displayName="Portal";function Hy(){const t=m.useContext(hf);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}var Sk=m.createContext({});Sk.displayName="ColorModeContext";function $c(){const t=m.useContext(Sk);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function Ve(t,e){const{colorMode:n}=$c();return n==="dark"?e:t}var kp={light:"chakra-ui-light",dark:"chakra-ui-dark"};function oq(t={}){const{preventTransition:e=!0}=t,n={setDataset:i=>{const r=e?n.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,r==null||r()},setClassName(i){document.body.classList.add(i?kp.dark:kp.light),document.body.classList.remove(i?kp.light:kp.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){var r;return((r=n.query().matches)!=null?r:i==="dark")?"dark":"light"},addListener(i){const r=n.query(),o=s=>{i(s.matches?"dark":"light")};return typeof r.addListener=="function"?r.addListener(o):r.addEventListener("change",o),()=>{typeof r.removeListener=="function"?r.removeListener(o):r.removeEventListener("change",o)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return n}var sq="chakra-ui-color-mode";function aq(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let n;try{n=localStorage.getItem(t)||e}catch{}return n||e},set(e){try{localStorage.setItem(t,e)}catch{}}}}var lq=aq(sq),NX=()=>{};function YX(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}function LL(t){const{value:e,children:n,options:{useSystemColorMode:i,initialColorMode:r,disableTransitionOnChange:o}={},colorModeManager:s=lq}=t,a=r==="dark"?"dark":"light",[l,g]=m.useState(()=>YX(s,a)),[u,d]=m.useState(()=>YX(s)),{getSystemTheme:h,setClassName:f,setDataset:A,addListener:p}=m.useMemo(()=>oq({preventTransition:o}),[o]),y=r==="system"&&!l?u:l,v=m.useCallback(R=>{const W=R==="system"?h():R;g(W),f(W==="dark"),A(W),s.set(W)},[s,h,f,A]);Js(()=>{r==="system"&&d(h())},[]),m.useEffect(()=>{const R=s.get();if(R){v(R);return}if(r==="system"){v("system");return}v(a)},[s,a,r,v]);const S=m.useCallback(()=>{v(y==="dark"?"light":"dark")},[y,v]);m.useEffect(()=>{if(i)return p(v)},[i,p,v]);const Z=m.useMemo(()=>({colorMode:e??y,toggleColorMode:e?NX:S,setColorMode:e?NX:v,forced:e!==void 0}),[y,S,v,e]);return C.jsx(Sk.Provider,{value:Z,children:n})}LL.displayName="ColorModeProvider";var gq=new Set(["dark","light","system"]);function cq(t){let e=t;return gq.has(e)||(e="light"),e}function uq(t={}){const{initialColorMode:e="light",type:n="localStorage",storageKey:i="chakra-ui-color-mode"}=t,r=cq(e),o=n==="cookie",s=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="${r}",r="${i}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();
  `,a=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="${r}",e="${i}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();
  `;return`!${o?s:a}`.trim()}function dq(t={}){const{nonce:e}=t;return C.jsx("script",{id:"chakra-script",nonce:e,dangerouslySetInnerHTML:{__html:uq(t)}})}function _L(){const t=$c(),e=Hy();return{...t,theme:e}}function Iq(t,e,n){var i,r;if(e==null)return e;const o=s=>{var a,l;return(l=(a=t.__breakpoints)==null?void 0:a.asArray)==null?void 0:l[s]};return(r=(i=o(e))!=null?i:o(n))!=null?r:n}function Cq(t,e,n){var i,r;if(e==null)return e;const o=s=>{var a,l;return(l=(a=t.__cssMap)==null?void 0:a[s])==null?void 0:l.value};return(r=(i=o(e))!=null?i:o(n))!=null?r:n}function hq(t,e,n){const i=Hy();return fq(t,e,n)(i)}function fq(t,e,n){const i=Array.isArray(e)?e:[e],r=Array.isArray(n)?n:[n];return o=>{const s=r.filter(Boolean),a=i.map((l,g)=>{var u,d;if(t==="breakpoints")return Iq(o,l,(u=s[g])!=null?u:l);const h=`${t}.${l}`;return Cq(o,h,(d=s[g])!=null?d:l)});return Array.isArray(e)?a:a[0]}}var it=(...t)=>t.filter(Boolean).join(" ");function pr(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!Array.isArray(t)}function yo(t,...e){return mq(t)?t(...e):t}var mq=t=>typeof t=="function",Gt=t=>t?"":void 0,AZ=t=>t?!0:void 0;function Yt(...t){return function(n){t.some(i=>(i==null||i(n),n==null?void 0:n.defaultPrevented))}}function Zk(...t){return function(n){t.forEach(i=>{i==null||i(n)})}}var n0={exports:{}};n0.exports;(function(t,e){var n=200,i="__lodash_hash_undefined__",r=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",g="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Function]",A="[object GeneratorFunction]",p="[object Map]",y="[object Number]",v="[object Null]",S="[object Object]",Z="[object Proxy]",R="[object RegExp]",W="[object Set]",B="[object String]",k="[object Undefined]",w="[object WeakMap]",J="[object ArrayBuffer]",X="[object DataView]",Y="[object Float32Array]",z="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",oe="[object Int32Array]",q="[object Uint8Array]",K="[object Uint8ClampedArray]",_="[object Uint16Array]",de="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,M={};M[Y]=M[z]=M[P]=M[$]=M[oe]=M[q]=M[K]=M[_]=M[de]=!0,M[a]=M[l]=M[J]=M[u]=M[X]=M[d]=M[h]=M[f]=M[p]=M[y]=M[S]=M[R]=M[W]=M[B]=M[w]=!1;var T=typeof Za=="object"&&Za&&Za.Object===Object&&Za,U=typeof self=="object"&&self&&self.Object===Object&&self,H=T||U||Function("return this")(),ie=e&&!e.nodeType&&e,Ae=ie&&!0&&t&&!t.nodeType&&t,Ie=Ae&&Ae.exports===ie,xe=Ie&&T.process,Xe=function(){try{var N=Ae&&Ae.require&&Ae.require("util").types;return N||xe&&xe.binding&&xe.binding("util")}catch{}}(),Je=Xe&&Xe.isTypedArray;function Ne(N,Q,le){switch(le.length){case 0:return N.call(Q);case 1:return N.call(Q,le[0]);case 2:return N.call(Q,le[0],le[1]);case 3:return N.call(Q,le[0],le[1],le[2])}return N.apply(Q,le)}function et(N,Q){for(var le=-1,Le=Array(N);++le<N;)Le[le]=Q(le);return Le}function he(N){return function(Q){return N(Q)}}function Be(N,Q){return N==null?void 0:N[Q]}function Ge(N,Q){return function(le){return N(Q(le))}}var Me=Array.prototype,Oe=Function.prototype,Ye=Object.prototype,Ct=H["__core-js_shared__"],j=Oe.toString,be=Ye.hasOwnProperty,Ce=function(){var N=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),We=Ye.toString,je=j.call(Object),tt=RegExp("^"+j.call(be).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=Ie?H.Buffer:void 0,ut=H.Symbol,Yn=H.Uint8Array,gi=ft?ft.allocUnsafe:void 0,ci=Ge(Object.getPrototypeOf,Object),ui=Object.create,di=Ye.propertyIsEnumerable,te=Me.splice,O=ut?ut.toStringTag:void 0,me=function(){try{var N=xi(Object,"defineProperty");return N({},"",{}),N}catch{}}(),we=ft?ft.isBuffer:void 0,ke=Math.max,He=Date.now,pe=xi(H,"Map"),Ee=xi(Object,"create"),ze=function(){function N(){}return function(Q){if(!To(Q))return{};if(ui)return ui(Q);N.prototype=Q;var le=new N;return N.prototype=void 0,le}}();function ve(N){var Q=-1,le=N==null?0:N.length;for(this.clear();++Q<le;){var Le=N[Q];this.set(Le[0],Le[1])}}function st(){this.__data__=Ee?Ee(null):{},this.size=0}function Ht(N){var Q=this.has(N)&&delete this.__data__[N];return this.size-=Q?1:0,Q}function tn(N){var Q=this.__data__;if(Ee){var le=Q[N];return le===i?void 0:le}return be.call(Q,N)?Q[N]:void 0}function cn(N){var Q=this.__data__;return Ee?Q[N]!==void 0:be.call(Q,N)}function nn(N,Q){var le=this.__data__;return this.size+=this.has(N)?0:1,le[N]=Ee&&Q===void 0?i:Q,this}ve.prototype.clear=st,ve.prototype.delete=Ht,ve.prototype.get=tn,ve.prototype.has=cn,ve.prototype.set=nn;function Kn(N){var Q=-1,le=N==null?0:N.length;for(this.clear();++Q<le;){var Le=N[Q];this.set(Le[0],Le[1])}}function Rr(){this.__data__=[],this.size=0}function eo(N){var Q=this.__data__,le=il(Q,N);if(le<0)return!1;var Le=Q.length-1;return le==Le?Q.pop():te.call(Q,le,1),--this.size,!0}function to(N){var Q=this.__data__,le=il(Q,N);return le<0?void 0:Q[le][1]}function bi(N){return il(this.__data__,N)>-1}function Ue(N,Q){var le=this.__data__,Le=il(le,N);return Le<0?(++this.size,le.push([N,Q])):le[Le][1]=Q,this}Kn.prototype.clear=Rr,Kn.prototype.delete=eo,Kn.prototype.get=to,Kn.prototype.has=bi,Kn.prototype.set=Ue;function no(N){var Q=-1,le=N==null?0:N.length;for(this.clear();++Q<le;){var Le=N[Q];this.set(Le[0],Le[1])}}function qs(){this.size=0,this.__data__={hash:new ve,map:new(pe||Kn),string:new ve}}function kg(N){var Q=na(this,N).delete(N);return this.size-=Q?1:0,Q}function Vg(N){return na(this,N).get(N)}function tl(N){return na(this,N).has(N)}function wg(N,Q){var le=na(this,N),Le=le.size;return le.set(N,Q),this.size+=le.size==Le?0:1,this}no.prototype.clear=qs,no.prototype.delete=kg,no.prototype.get=Vg,no.prototype.has=tl,no.prototype.set=wg;function Wi(N){var Q=this.__data__=new Kn(N);this.size=Q.size}function ea(){this.__data__=new Kn,this.size=0}function bu(N){var Q=this.__data__,le=Q.delete(N);return this.size=Q.size,le}function yu(N){return this.__data__.get(N)}function nl(N){return this.__data__.has(N)}function vu(N,Q){var le=this.__data__;if(le instanceof Kn){var Le=le.__data__;if(!pe||Le.length<n-1)return Le.push([N,Q]),this.size=++le.size,this;le=this.__data__=new no(Le)}return le.set(N,Q),this.size=le.size,this}Wi.prototype.clear=ea,Wi.prototype.delete=bu,Wi.prototype.get=yu,Wi.prototype.has=nl,Wi.prototype.set=vu;function Wg(N,Q){var le=Ng(N),Le=!le&&Ru(N),Rt=!le&&!Le&&kr(N),Pe=!le&&!Le&&!Rt&&cs(N),un=le||Le||Rt||Pe,dt=un?et(N.length,String):[],Pt=dt.length;for(var Ki in N)(Q||be.call(N,Ki))&&!(un&&(Ki=="length"||Rt&&(Ki=="offset"||Ki=="parent")||Pe&&(Ki=="buffer"||Ki=="byteLength"||Ki=="byteOffset")||gs(Ki,Pt)))&&dt.push(Ki);return dt}function ls(N,Q,le){(le!==void 0&&!ra(N[Q],le)||le===void 0&&!(Q in N))&&Mo(N,Q,le)}function ta(N,Q,le){var Le=N[Q];(!(be.call(N,Q)&&ra(Le,le))||le===void 0&&!(Q in N))&&Mo(N,Q,le)}function il(N,Q){for(var le=N.length;le--;)if(ra(N[le][0],Q))return le;return-1}function Mo(N,Q,le){Q=="__proto__"&&me?me(N,Q,{configurable:!0,enumerable:!0,value:le,writable:!0}):N[Q]=le}var It=QI();function Su(N){return N==null?N===void 0?k:v:O&&O in Object(N)?ES(N):Eg(N)}function Um(N){return oa(N)&&Su(N)==a}function UI(N){if(!To(N)||Jg(N))return!1;var Q=zt(N)?tt:se;return Q.test(tC(N))}function xg(N){return oa(N)&&iC(N.length)&&!!M[Su(N)]}function jm(N){if(!To(N))return $I(N);var Q=sl(N),le=[];for(var Le in N)Le=="constructor"&&(Q||!be.call(N,Le))||le.push(Le);return le}function jI(N,Q,le,Le,Rt){N!==Q&&It(Q,function(Pe,un){if(Rt||(Rt=new Wi),To(Pe))Xg(N,Q,un,le,jI,Le,Rt);else{var dt=Le?Le(Hg(N,un),Pe,un+"",N,Q,Rt):void 0;dt===void 0&&(dt=Pe),ls(N,un,dt)}},al)}function Xg(N,Q,le,Le,Rt,Pe,un){var dt=Hg(N,le),Pt=Hg(Q,le),Ki=un.get(Pt);if(Ki){ls(N,le,Ki);return}var zi=Pe?Pe(dt,Pt,le+"",N,Q,un):void 0,aa=zi===void 0;if(aa){var aC=Ng(Pt),ku=!aC&&kr(Pt),Qm=!aC&&!ku&&cs(Pt);zi=Pt,aC||ku||Qm?Ng(dt)?zi=dt:ht(dt)?zi=OI(dt):ku?(aa=!1,zi=Zu(Pt,!0)):Qm?(aa=!1,zi=ol(Pt,!0)):zi=[]:rC(Pt)||Ru(Pt)?(zi=dt,Ru(dt)?zi=oC(dt):(!To(dt)||zt(dt))&&(zi=Gu(Pt))):aa=!1}aa&&(un.set(Pt,zi),Rt(zi,Pt,Le,Pe,un),un.delete(Pt)),ls(N,le,zi)}function Xt(N,Q){return Bu(qI(N,Q,sC),N+"")}var pn=me?function(N,Q){return me(N,"toString",{configurable:!0,enumerable:!1,value:sa(Q),writable:!0})}:sC;function Zu(N,Q){if(Q)return N.slice();var le=N.length,Le=gi?gi(le):new N.constructor(le);return N.copy(Le),Le}function rl(N){var Q=new N.constructor(N.byteLength);return new Yn(Q).set(new Yn(N)),Q}function ol(N,Q){var le=Q?rl(N.buffer):N.buffer;return new N.constructor(le,N.byteOffset,N.length)}function OI(N,Q){var le=-1,Le=N.length;for(Q||(Q=Array(Le));++le<Le;)Q[le]=N[le];return Q}function pt(N,Q,le,Le){var Rt=!le;le||(le={});for(var Pe=-1,un=Q.length;++Pe<un;){var dt=Q[Pe],Pt=Le?Le(le[dt],N[dt],dt,le,N):void 0;Pt===void 0&&(Pt=N[dt]),Rt?Mo(le,dt,Pt):ta(le,dt,Pt)}return le}function Wn(N){return Xt(function(Q,le){var Le=-1,Rt=le.length,Pe=Rt>1?le[Rt-1]:void 0,un=Rt>2?le[2]:void 0;for(Pe=N.length>3&&typeof Pe=="function"?(Rt--,Pe):void 0,un&&Fn(le[0],le[1],un)&&(Pe=Rt<3?void 0:Pe,Rt=1),Q=Object(Q);++Le<Rt;){var dt=le[Le];dt&&N(Q,dt,Le,Pe)}return Q})}function QI(N){return function(Q,le,Le){for(var Rt=-1,Pe=Object(Q),un=Le(Q),dt=un.length;dt--;){var Pt=un[N?dt:++Rt];if(le(Pe[Pt],Pt,Pe)===!1)break}return Q}}function na(N,Q){var le=N.__data__;return ia(Q)?le[typeof Q=="string"?"string":"hash"]:le.map}function xi(N,Q){var le=Be(N,Q);return UI(le)?le:void 0}function ES(N){var Q=be.call(N,O),le=N[O];try{N[O]=void 0;var Le=!0}catch{}var Rt=We.call(N);return Le&&(Q?N[O]=le:delete N[O]),Rt}function Gu(N){return typeof N.constructor=="function"&&!sl(N)?ze(ci(N)):{}}function gs(N,Q){var le=typeof N;return Q=Q??s,!!Q&&(le=="number"||le!="symbol"&&E.test(N))&&N>-1&&N%1==0&&N<Q}function Fn(N,Q,le){if(!To(le))return!1;var Le=typeof Q;return(Le=="number"?nC(le)&&gs(Q,le.length):Le=="string"&&Q in le)?ra(le[Q],N):!1}function ia(N){var Q=typeof N;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?N!=="__proto__":N===null}function Jg(N){return!!Ce&&Ce in N}function sl(N){var Q=N&&N.constructor,le=typeof Q=="function"&&Q.prototype||Ye;return N===le}function $I(N){var Q=[];if(N!=null)for(var le in Object(N))Q.push(le);return Q}function Eg(N){return We.call(N)}function qI(N,Q,le){return Q=ke(Q===void 0?N.length-1:Q,0),function(){for(var Le=arguments,Rt=-1,Pe=ke(Le.length-Q,0),un=Array(Pe);++Rt<Pe;)un[Rt]=Le[Q+Rt];Rt=-1;for(var dt=Array(Q+1);++Rt<Q;)dt[Rt]=Le[Rt];return dt[Q]=le(un),Ne(N,this,dt)}}function Hg(N,Q){if(!(Q==="constructor"&&typeof N[Q]=="function")&&Q!="__proto__")return N[Q]}var Bu=eC(pn);function eC(N){var Q=0,le=0;return function(){var Le=He(),Rt=o-(Le-le);if(le=Le,Rt>0){if(++Q>=r)return arguments[0]}else Q=0;return N.apply(void 0,arguments)}}function tC(N){if(N!=null){try{return j.call(N)}catch{}try{return N+""}catch{}}return""}function ra(N,Q){return N===Q||N!==N&&Q!==Q}var Ru=Um(function(){return arguments}())?Um:function(N){return oa(N)&&be.call(N,"callee")&&!di.call(N,"callee")},Ng=Array.isArray;function nC(N){return N!=null&&iC(N.length)&&!zt(N)}function ht(N){return oa(N)&&nC(N)}var kr=we||Om;function zt(N){if(!To(N))return!1;var Q=Su(N);return Q==f||Q==A||Q==g||Q==Z}function iC(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=s}function To(N){var Q=typeof N;return N!=null&&(Q=="object"||Q=="function")}function oa(N){return N!=null&&typeof N=="object"}function rC(N){if(!oa(N)||Su(N)!=S)return!1;var Q=ci(N);if(Q===null)return!0;var le=be.call(Q,"constructor")&&Q.constructor;return typeof le=="function"&&le instanceof le&&j.call(le)==je}var cs=Je?he(Je):xg;function oC(N){return pt(N,al(N))}function al(N){return nC(N)?Wg(N,!0):jm(N)}var ii=Wn(function(N,Q,le,Le){jI(N,Q,le,Le)});function sa(N){return function(){return N}}function sC(N){return N}function Om(){return!1}t.exports=ii})(n0,n0.exports);var pq=n0.exports;const vo=Ig(pq);var Aq=t=>/!(important)?$/.test(t),FX=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,bq=(t,e)=>n=>{const i=String(e),r=Aq(i),o=FX(i),s=t?`${t}.${o}`:o;let a=pr(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:e;return a=FX(a),r?`${a} !important`:a};function Gk(t){const{scale:e,transform:n,compose:i}=t;return(o,s)=>{var a;const l=bq(e,o)(s);let g=(a=n==null?void 0:n(l,s))!=null?a:l;return i&&(g=i(g,s)),g}}var Vp=(...t)=>e=>t.reduce((n,i)=>i(n),e);function oo(t,e){return n=>{const i={property:n,scale:t};return i.transform=Gk({scale:t,transform:e}),i}}var yq=({rtl:t,ltr:e})=>n=>n.direction==="rtl"?t:e;function vq(t){const{property:e,scale:n,transform:i}=t;return{scale:n,property:yq(e),transform:n?Gk({scale:n,compose:i}):i}}var DL=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function Sq(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...DL].join(" ")}function Zq(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...DL].join(" ")}var Gq={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Bq={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function Rq(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var kq={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},fR={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Vq=new Set(Object.values(fR)),mR=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),wq=t=>t.trim();function Wq(t,e){if(t==null||mR.has(t))return t;if(!(pR(t)||mR.has(t)))return`url('${t}')`;const r=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),o=r==null?void 0:r[1],s=r==null?void 0:r[2];if(!o||!s)return t;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...g]=s.split(",").map(wq).filter(Boolean);if((g==null?void 0:g.length)===0)return t;const u=l in fR?fR[l]:l;g.unshift(u);const d=g.map(h=>{if(Vq.has(h))return h;const f=h.indexOf(" "),[A,p]=f!==-1?[h.substr(0,f),h.substr(f+1)]:[h],y=pR(p)?p:p&&p.split(" "),v=`colors.${A}`,S=v in e.__cssMap?e.__cssMap[v].varRef:A;return y?[S,...Array.isArray(y)?y:[y]].join(" "):S});return`${a}(${d.join(", ")})`}var pR=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),xq=(t,e)=>Wq(t,e??{});function Xq(t){return/^var\(--.+\)$/.test(t)}var Jq=t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}},Cs=t=>e=>`${t}(${e})`,Wt={filter(t){return t!=="auto"?t:Gq},backdropFilter(t){return t!=="auto"?t:Bq},ring(t){return Rq(Wt.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?Sq():t==="auto-gpu"?Zq():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=Jq(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const n={left:"right",right:"left"};return e.direction==="rtl"?n[t]:t},degree(t){if(Xq(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:xq,blur:Cs("blur"),opacity:Cs("opacity"),brightness:Cs("brightness"),contrast:Cs("contrast"),dropShadow:Cs("drop-shadow"),grayscale:Cs("grayscale"),hueRotate:t=>Cs("hue-rotate")(Wt.degree(t)),invert:Cs("invert"),saturate:Cs("saturate"),sepia:Cs("sepia"),bgImage(t){return t==null||pR(t)||mR.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:i}=(e=kq[t])!=null?e:{},r={flexDirection:t};return n&&(r[n]=1),i&&(r[i]=1),r}},ee={borderWidths:oo("borderWidths"),borderStyles:oo("borderStyles"),colors:oo("colors"),borders:oo("borders"),gradients:oo("gradients",Wt.gradient),radii:oo("radii",Wt.px),space:oo("space",Vp(Wt.vh,Wt.px)),spaceT:oo("space",Vp(Wt.vh,Wt.px)),degreeT(t){return{property:t,transform:Wt.degree}},prop(t,e,n){return{property:t,scale:e,...e&&{transform:Gk({scale:e,transform:n})}}},propT(t,e){return{property:t,transform:e}},sizes:oo("sizes",Vp(Wt.vh,Wt.px)),sizesT:oo("sizes",Vp(Wt.vh,Wt.fraction)),shadows:oo("shadows"),logical:vq,blur:oo("blur",Wt.blur)},OA={background:ee.colors("background"),backgroundColor:ee.colors("backgroundColor"),backgroundImage:ee.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Wt.bgClip},bgSize:ee.prop("backgroundSize"),bgPosition:ee.prop("backgroundPosition"),bg:ee.colors("background"),bgColor:ee.colors("backgroundColor"),bgPos:ee.prop("backgroundPosition"),bgRepeat:ee.prop("backgroundRepeat"),bgAttachment:ee.prop("backgroundAttachment"),bgGradient:ee.gradients("backgroundImage"),bgClip:{transform:Wt.bgClip}};Object.assign(OA,{bgImage:OA.backgroundImage,bgImg:OA.backgroundImage});var Tt={border:ee.borders("border"),borderWidth:ee.borderWidths("borderWidth"),borderStyle:ee.borderStyles("borderStyle"),borderColor:ee.colors("borderColor"),borderRadius:ee.radii("borderRadius"),borderTop:ee.borders("borderTop"),borderBlockStart:ee.borders("borderBlockStart"),borderTopLeftRadius:ee.radii("borderTopLeftRadius"),borderStartStartRadius:ee.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:ee.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:ee.radii("borderTopRightRadius"),borderStartEndRadius:ee.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:ee.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:ee.borders("borderRight"),borderInlineEnd:ee.borders("borderInlineEnd"),borderBottom:ee.borders("borderBottom"),borderBlockEnd:ee.borders("borderBlockEnd"),borderBottomLeftRadius:ee.radii("borderBottomLeftRadius"),borderBottomRightRadius:ee.radii("borderBottomRightRadius"),borderLeft:ee.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:ee.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:ee.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:ee.borders(["borderLeft","borderRight"]),borderInline:ee.borders("borderInline"),borderY:ee.borders(["borderTop","borderBottom"]),borderBlock:ee.borders("borderBlock"),borderTopWidth:ee.borderWidths("borderTopWidth"),borderBlockStartWidth:ee.borderWidths("borderBlockStartWidth"),borderTopColor:ee.colors("borderTopColor"),borderBlockStartColor:ee.colors("borderBlockStartColor"),borderTopStyle:ee.borderStyles("borderTopStyle"),borderBlockStartStyle:ee.borderStyles("borderBlockStartStyle"),borderBottomWidth:ee.borderWidths("borderBottomWidth"),borderBlockEndWidth:ee.borderWidths("borderBlockEndWidth"),borderBottomColor:ee.colors("borderBottomColor"),borderBlockEndColor:ee.colors("borderBlockEndColor"),borderBottomStyle:ee.borderStyles("borderBottomStyle"),borderBlockEndStyle:ee.borderStyles("borderBlockEndStyle"),borderLeftWidth:ee.borderWidths("borderLeftWidth"),borderInlineStartWidth:ee.borderWidths("borderInlineStartWidth"),borderLeftColor:ee.colors("borderLeftColor"),borderInlineStartColor:ee.colors("borderInlineStartColor"),borderLeftStyle:ee.borderStyles("borderLeftStyle"),borderInlineStartStyle:ee.borderStyles("borderInlineStartStyle"),borderRightWidth:ee.borderWidths("borderRightWidth"),borderInlineEndWidth:ee.borderWidths("borderInlineEndWidth"),borderRightColor:ee.colors("borderRightColor"),borderInlineEndColor:ee.colors("borderInlineEndColor"),borderRightStyle:ee.borderStyles("borderRightStyle"),borderInlineEndStyle:ee.borderStyles("borderInlineEndStyle"),borderTopRadius:ee.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:ee.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:ee.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:ee.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Tt,{rounded:Tt.borderRadius,roundedTop:Tt.borderTopRadius,roundedTopLeft:Tt.borderTopLeftRadius,roundedTopRight:Tt.borderTopRightRadius,roundedTopStart:Tt.borderStartStartRadius,roundedTopEnd:Tt.borderStartEndRadius,roundedBottom:Tt.borderBottomRadius,roundedBottomLeft:Tt.borderBottomLeftRadius,roundedBottomRight:Tt.borderBottomRightRadius,roundedBottomStart:Tt.borderEndStartRadius,roundedBottomEnd:Tt.borderEndEndRadius,roundedLeft:Tt.borderLeftRadius,roundedRight:Tt.borderRightRadius,roundedStart:Tt.borderInlineStartRadius,roundedEnd:Tt.borderInlineEndRadius,borderStart:Tt.borderInlineStart,borderEnd:Tt.borderInlineEnd,borderTopStartRadius:Tt.borderStartStartRadius,borderTopEndRadius:Tt.borderStartEndRadius,borderBottomStartRadius:Tt.borderEndStartRadius,borderBottomEndRadius:Tt.borderEndEndRadius,borderStartRadius:Tt.borderInlineStartRadius,borderEndRadius:Tt.borderInlineEndRadius,borderStartWidth:Tt.borderInlineStartWidth,borderEndWidth:Tt.borderInlineEndWidth,borderStartColor:Tt.borderInlineStartColor,borderEndColor:Tt.borderInlineEndColor,borderStartStyle:Tt.borderInlineStartStyle,borderEndStyle:Tt.borderInlineEndStyle});var Eq={color:ee.colors("color"),textColor:ee.colors("color"),fill:ee.colors("fill"),stroke:ee.colors("stroke")},AR={boxShadow:ee.shadows("boxShadow"),mixBlendMode:!0,blendMode:ee.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:ee.prop("backgroundBlendMode"),opacity:!0};Object.assign(AR,{shadow:AR.boxShadow});var Hq={filter:{transform:Wt.filter},blur:ee.blur("--chakra-blur"),brightness:ee.propT("--chakra-brightness",Wt.brightness),contrast:ee.propT("--chakra-contrast",Wt.contrast),hueRotate:ee.propT("--chakra-hue-rotate",Wt.hueRotate),invert:ee.propT("--chakra-invert",Wt.invert),saturate:ee.propT("--chakra-saturate",Wt.saturate),dropShadow:ee.propT("--chakra-drop-shadow",Wt.dropShadow),backdropFilter:{transform:Wt.backdropFilter},backdropBlur:ee.blur("--chakra-backdrop-blur"),backdropBrightness:ee.propT("--chakra-backdrop-brightness",Wt.brightness),backdropContrast:ee.propT("--chakra-backdrop-contrast",Wt.contrast),backdropHueRotate:ee.propT("--chakra-backdrop-hue-rotate",Wt.hueRotate),backdropInvert:ee.propT("--chakra-backdrop-invert",Wt.invert),backdropSaturate:ee.propT("--chakra-backdrop-saturate",Wt.saturate)},i0={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Wt.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:ee.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:ee.space("gap"),rowGap:ee.space("rowGap"),columnGap:ee.space("columnGap")};Object.assign(i0,{flexDir:i0.flexDirection});var KL={gridGap:ee.space("gridGap"),gridColumnGap:ee.space("gridColumnGap"),gridRowGap:ee.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Nq={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Wt.outline},outlineOffset:!0,outlineColor:ee.colors("outlineColor")},Co={width:ee.sizesT("width"),inlineSize:ee.sizesT("inlineSize"),height:ee.sizes("height"),blockSize:ee.sizes("blockSize"),boxSize:ee.sizes(["width","height"]),minWidth:ee.sizes("minWidth"),minInlineSize:ee.sizes("minInlineSize"),minHeight:ee.sizes("minHeight"),minBlockSize:ee.sizes("minBlockSize"),maxWidth:ee.sizes("maxWidth"),maxInlineSize:ee.sizes("maxInlineSize"),maxHeight:ee.sizes("maxHeight"),maxBlockSize:ee.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,i,r;return{[`@media screen and (min-width: ${(r=(i=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:i.minW)!=null?r:t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,i,r;return{[`@media screen and (max-width: ${(r=(i=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:i._minW)!=null?r:t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:ee.propT("float",Wt.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Co,{w:Co.width,h:Co.height,minW:Co.minWidth,maxW:Co.maxWidth,minH:Co.minHeight,maxH:Co.maxHeight,overscroll:Co.overscrollBehavior,overscrollX:Co.overscrollBehaviorX,overscrollY:Co.overscrollBehaviorY});var Yq={listStyleType:!0,listStylePosition:!0,listStylePos:ee.prop("listStylePosition"),listStyleImage:!0,listStyleImg:ee.prop("listStyleImage")};function Fq(t,e,n,i){const r=typeof e=="string"?e.split("."):[e];for(i=0;i<r.length&&t;i+=1)t=t[r[i]];return t===void 0?n:t}var Mq=t=>{const e=new WeakMap;return(i,r,o,s)=>{if(typeof i>"u")return t(i,r,o);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const l=t(i,r,o,s);return a.set(r,l),l}},Tq=Mq(Fq),Lq={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},_q={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},bZ=(t,e,n)=>{const i={},r=Tq(t,e,{});for(const o in r)o in n&&n[o]!=null||(i[o]=r[o]);return i},Dq={srOnly:{transform(t){return t===!0?Lq:t==="focusable"?_q:{}}},layerStyle:{processResult:!0,transform:(t,e,n)=>bZ(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>bZ(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>bZ(e,t,n)}},vh={position:!0,pos:ee.prop("position"),zIndex:ee.prop("zIndex","zIndices"),inset:ee.spaceT("inset"),insetX:ee.spaceT(["left","right"]),insetInline:ee.spaceT("insetInline"),insetY:ee.spaceT(["top","bottom"]),insetBlock:ee.spaceT("insetBlock"),top:ee.spaceT("top"),insetBlockStart:ee.spaceT("insetBlockStart"),bottom:ee.spaceT("bottom"),insetBlockEnd:ee.spaceT("insetBlockEnd"),left:ee.spaceT("left"),insetInlineStart:ee.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:ee.spaceT("right"),insetInlineEnd:ee.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(vh,{insetStart:vh.insetInlineStart,insetEnd:vh.insetInlineEnd});var Kq={ring:{transform:Wt.ring},ringColor:ee.colors("--chakra-ring-color"),ringOffset:ee.prop("--chakra-ring-offset-width"),ringOffsetColor:ee.colors("--chakra-ring-offset-color"),ringInset:ee.prop("--chakra-ring-inset")},bn={margin:ee.spaceT("margin"),marginTop:ee.spaceT("marginTop"),marginBlockStart:ee.spaceT("marginBlockStart"),marginRight:ee.spaceT("marginRight"),marginInlineEnd:ee.spaceT("marginInlineEnd"),marginBottom:ee.spaceT("marginBottom"),marginBlockEnd:ee.spaceT("marginBlockEnd"),marginLeft:ee.spaceT("marginLeft"),marginInlineStart:ee.spaceT("marginInlineStart"),marginX:ee.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:ee.spaceT("marginInline"),marginY:ee.spaceT(["marginTop","marginBottom"]),marginBlock:ee.spaceT("marginBlock"),padding:ee.space("padding"),paddingTop:ee.space("paddingTop"),paddingBlockStart:ee.space("paddingBlockStart"),paddingRight:ee.space("paddingRight"),paddingBottom:ee.space("paddingBottom"),paddingBlockEnd:ee.space("paddingBlockEnd"),paddingLeft:ee.space("paddingLeft"),paddingInlineStart:ee.space("paddingInlineStart"),paddingInlineEnd:ee.space("paddingInlineEnd"),paddingX:ee.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:ee.space("paddingInline"),paddingY:ee.space(["paddingTop","paddingBottom"]),paddingBlock:ee.space("paddingBlock")};Object.assign(bn,{m:bn.margin,mt:bn.marginTop,mr:bn.marginRight,me:bn.marginInlineEnd,marginEnd:bn.marginInlineEnd,mb:bn.marginBottom,ml:bn.marginLeft,ms:bn.marginInlineStart,marginStart:bn.marginInlineStart,mx:bn.marginX,my:bn.marginY,p:bn.padding,pt:bn.paddingTop,py:bn.paddingY,px:bn.paddingX,pb:bn.paddingBottom,pl:bn.paddingLeft,ps:bn.paddingInlineStart,paddingStart:bn.paddingInlineStart,pr:bn.paddingRight,pe:bn.paddingInlineEnd,paddingEnd:bn.paddingInlineEnd});var zq={textDecorationColor:ee.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:ee.shadows("textShadow")},Pq={clipPath:!0,transform:ee.propT("transform",Wt.transform),transformOrigin:!0,translateX:ee.spaceT("--chakra-translate-x"),translateY:ee.spaceT("--chakra-translate-y"),skewX:ee.degreeT("--chakra-skew-x"),skewY:ee.degreeT("--chakra-skew-y"),scaleX:ee.prop("--chakra-scale-x"),scaleY:ee.prop("--chakra-scale-y"),scale:ee.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:ee.degreeT("--chakra-rotate")},Uq={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:ee.prop("transitionDuration","transition.duration"),transitionProperty:ee.prop("transitionProperty","transition.property"),transitionTimingFunction:ee.prop("transitionTimingFunction","transition.easing")},jq={fontFamily:ee.prop("fontFamily","fonts"),fontSize:ee.prop("fontSize","fontSizes",Wt.px),fontWeight:ee.prop("fontWeight","fontWeights"),lineHeight:ee.prop("lineHeight","lineHeights"),letterSpacing:ee.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Oq={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:ee.spaceT("scrollMargin"),scrollMarginTop:ee.spaceT("scrollMarginTop"),scrollMarginBottom:ee.spaceT("scrollMarginBottom"),scrollMarginLeft:ee.spaceT("scrollMarginLeft"),scrollMarginRight:ee.spaceT("scrollMarginRight"),scrollMarginX:ee.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:ee.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:ee.spaceT("scrollPadding"),scrollPaddingTop:ee.spaceT("scrollPaddingTop"),scrollPaddingBottom:ee.spaceT("scrollPaddingBottom"),scrollPaddingLeft:ee.spaceT("scrollPaddingLeft"),scrollPaddingRight:ee.spaceT("scrollPaddingRight"),scrollPaddingX:ee.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:ee.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function zL(t){return pr(t)&&t.reference?t.reference:String(t)}var Ny=(t,...e)=>e.map(zL).join(` ${t} `).replace(/calc/g,""),MX=(...t)=>`calc(${Ny("+",...t)})`,TX=(...t)=>`calc(${Ny("-",...t)})`,bR=(...t)=>`calc(${Ny("*",...t)})`,LX=(...t)=>`calc(${Ny("/",...t)})`,_X=t=>{const e=zL(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:bR(e,-1)},nc=Object.assign(t=>({add:(...e)=>nc(MX(t,...e)),subtract:(...e)=>nc(TX(t,...e)),multiply:(...e)=>nc(bR(t,...e)),divide:(...e)=>nc(LX(t,...e)),negate:()=>nc(_X(t)),toString:()=>t.toString()}),{add:MX,subtract:TX,multiply:bR,divide:LX,negate:_X});function Qq(t,e="-"){return t.replace(/\s+/g,e)}function $q(t){const e=Qq(t.toString());return eee(qq(e))}function qq(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function eee(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function tee(t,e=""){return[e,t].filter(Boolean).join("-")}function nee(t,e){return`var(${t}${e?`, ${e}`:""})`}function iee(t,e=""){return $q(`--${tee(t,e)}`)}function qe(t,e,n){const i=iee(t,n);return{variable:i,reference:nee(i,e)}}function ree(t,e){const n={};for(const i of e){if(Array.isArray(i)){const[r,o]=i;n[r]=qe(`${t}-${r}`,o);continue}n[i]=qe(`${t}-${i}`)}return n}function oee(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function see(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}function yR(t){if(t==null)return t;const{unitless:e}=see(t);return e||typeof t=="number"?`${t}px`:t}var PL=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,Bk=t=>Object.fromEntries(Object.entries(t).sort(PL));function DX(t){const e=Bk(t);return Object.assign(Object.values(e),e)}function aee(t){const e=Object.keys(Bk(t));return new Set(e)}function KX(t){var e;if(!t)return t;t=(e=yR(t))!=null?e:t;const n=-.02;return typeof t=="number"?`${t+n}`:t.replace(/(\d+\.?\d*)/u,i=>`${parseFloat(i)+n}`)}function qC(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${yR(t)})`),e&&n.push("and",`(max-width: ${yR(e)})`),n.join(" ")}function lee(t){var e;if(!t)return null;t.base=(e=t.base)!=null?e:"0px";const n=DX(t),i=Object.entries(t).sort(PL).map(([s,a],l,g)=>{var u;let[,d]=(u=g[l+1])!=null?u:[];return d=parseFloat(d)>0?KX(d):void 0,{_minW:KX(a),breakpoint:s,minW:a,maxW:d,maxWQuery:qC(null,d),minWQuery:qC(a),minMaxQuery:qC(a,d)}}),r=aee(t),o=Array.from(r.values());return{keys:r,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>r.has(l))},asObject:Bk(t),asArray:DX(t),details:i,get(s){return i.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>qC(s)).slice(1)],toArrayValue(s){if(!pr(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var g;return(g=s[l])!=null?g:null});for(;oee(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,g)=>{const u=o[g];return u!=null&&l!=null&&(a[u]=l),a},{})}}}var yi={hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,indeterminate:(t,e)=>`${t}:indeterminate ${e}, ${t}[aria-checked=mixed] ${e}, ${t}[data-indeterminate] ${e}`,readOnly:(t,e)=>`${t}:read-only ${e}, ${t}[readonly] ${e}, ${t}[data-read-only] ${e}`,expanded:(t,e)=>`${t}:read-only ${e}, ${t}[aria-expanded=true] ${e}, ${t}[data-expanded] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},ul=t=>UL(e=>t(e,"&"),"[role=group]","[data-group]",".group"),da=t=>UL(e=>t(e,"~ &"),"[data-peer]",".peer"),UL=(t,...e)=>e.map(t).join(", "),Yy={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:ul(yi.hover),_peerHover:da(yi.hover),_groupFocus:ul(yi.focus),_peerFocus:da(yi.focus),_groupFocusVisible:ul(yi.focusVisible),_peerFocusVisible:da(yi.focusVisible),_groupActive:ul(yi.active),_peerActive:da(yi.active),_groupDisabled:ul(yi.disabled),_peerDisabled:da(yi.disabled),_groupInvalid:ul(yi.invalid),_peerInvalid:da(yi.invalid),_groupChecked:ul(yi.checked),_peerChecked:da(yi.checked),_groupFocusWithin:ul(yi.focusWithin),_peerFocusWithin:da(yi.focusWithin),_peerPlaceholderShown:da(yi.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},jL=Object.keys(Yy);function zX(t,e){return qe(String(t).replace(/\./g,"-"),void 0,e)}function gee(t,e){let n={};const i={};for(const[r,o]of Object.entries(t)){const{isSemantic:s,value:a}=o,{variable:l,reference:g}=zX(r,e==null?void 0:e.cssVarPrefix);if(!s){if(r.startsWith("space")){const h=r.split("."),[f,...A]=h,p=`${f}.-${A.join(".")}`,y=nc.negate(a),v=nc.negate(g);i[p]={value:y,var:l,varRef:v}}n[l]=a,i[r]={value:a,var:l,varRef:g};continue}const u=h=>{const A=[String(r).split(".")[0],h].join(".");if(!t[A])return h;const{reference:y}=zX(A,e==null?void 0:e.cssVarPrefix);return y},d=pr(a)?a:{default:a};n=vo(n,Object.entries(d).reduce((h,[f,A])=>{var p,y;if(!A)return h;const v=u(`${A}`);if(f==="default")return h[l]=v,h;const S=(y=(p=Yy)==null?void 0:p[f])!=null?y:f;return h[S]={[l]:v},h},{})),i[r]={value:g,var:l,varRef:g}}return{cssVars:n,cssMap:i}}function cee(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}function uee(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function dee(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function PX(t,e,n={}){const{stop:i,getKey:r}=n;function o(s,a=[]){var l;if(dee(s)||Array.isArray(s)){const g={};for(const[u,d]of Object.entries(s)){const h=(l=r==null?void 0:r(u))!=null?l:u,f=[...a,h];if(i!=null&&i(s,f))return e(s,a);g[h]=o(d,f)}return g}return e(s,a)}return o(t)}var Iee=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function Cee(t){return uee(t,Iee)}function hee(t){return t.semanticTokens}function fee(t){const{__cssMap:e,__cssVars:n,__breakpoints:i,...r}=t;return r}var mee=t=>jL.includes(t)||t==="default";function pee({tokens:t,semanticTokens:e}){const n={};return PX(t,(i,r)=>{i!=null&&(n[r.join(".")]={isSemantic:!1,value:i})}),PX(e,(i,r)=>{i!=null&&(n[r.join(".")]={isSemantic:!0,value:i})},{stop:i=>Object.keys(i).every(mee)}),n}function Aee(t){var e;const n=fee(t),i=Cee(n),r=hee(n),o=pee({tokens:i,semanticTokens:r}),s=(e=n.config)==null?void 0:e.cssVarPrefix,{cssMap:a,cssVars:l}=gee(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:lee(n.breakpoints)}),n}var Rk=vo({},OA,Tt,Eq,i0,Co,Hq,Kq,Nq,KL,Dq,vh,AR,bn,Oq,jq,zq,Pq,Yq,Uq),bee=Object.assign({},bn,Co,i0,KL,vh),yee=Object.keys(bee),vee=[...Object.keys(Rk),...jL],See={...Rk,...Yy},Zee=t=>t in See,Gee=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:i,media:r}=e.__breakpoints,o={};for(const s in t){let a=yo(t[s],e);if(a==null)continue;if(a=pr(a)&&n(a)?i(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,r.length).length;for(let g=0;g<l;g+=1){const u=r==null?void 0:r[g];if(!u){o[s]=a[g];continue}o[u]=o[u]||{},a[g]!=null&&(o[u][s]=a[g])}}return o};function Bee(t){const e=[];let n="",i=!1;for(let r=0;r<t.length;r++){const o=t[r];o==="("?(i=!0,n+=o):o===")"?(i=!1,n+=o):o===","&&!i?(e.push(n),n=""):n+=o}return n=n.trim(),n&&e.push(n),e}function Ree(t){return/^var\(--.+\)$/.test(t)}var kee=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!Ree(e),Vee=(t,e)=>{var n,i;if(e==null)return e;const r=l=>{var g,u;return(u=(g=t.__cssMap)==null?void 0:g[l])==null?void 0:u.varRef},o=l=>{var g;return(g=r(l))!=null?g:l},[s,a]=Bee(e);return e=(i=(n=r(s))!=null?n:o(a))!=null?i:o(e),e};function wee(t){const{configs:e={},pseudos:n={},theme:i}=t,r=(o,s=!1)=>{var a,l,g;const u=yo(o,i),d=Gee(u)(i);let h={};for(let f in d){const A=d[f];let p=yo(A,i);f in n&&(f=n[f]),kee(f,p)&&(p=Vee(i,p));let y=e[f];if(y===!0&&(y={property:f}),pr(p)){h[f]=(a=h[f])!=null?a:{},h[f]=vo({},h[f],r(p,!0));continue}let v=(g=(l=y==null?void 0:y.transform)==null?void 0:l.call(y,p,i,u))!=null?g:p;v=y!=null&&y.processResult?r(v,!0):v;const S=yo(y==null?void 0:y.property,i);if(!s&&(y!=null&&y.static)){const Z=yo(y.static,i);h=vo({},h,Z)}if(S&&Array.isArray(S)){for(const Z of S)h[Z]=v;continue}if(S){S==="&"&&pr(v)?h=vo({},h,v):h[S]=v;continue}if(pr(v)){h=vo({},h,v);continue}h[f]=v}return h};return r}var OL=t=>e=>wee({theme:e,pseudos:Yy,configs:Rk})(t);function mn(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:t,...e}}}}function Wee(t,e){if(Array.isArray(t))return t;if(pr(t))return e(t);if(t!=null)return[t]}function xee(t,e){for(let n=e+1;n<t.length;n++)if(t[n]!=null)return n;return-1}function Xee(t){const e=t.__breakpoints;return function(i,r,o,s){var a,l;if(!e)return;const g={},u=Wee(o,e.toArrayValue);if(!u)return g;const d=u.length,h=d===1,f=!!i.parts;for(let A=0;A<d;A++){const p=e.details[A],y=e.details[xee(u,A)],v=qC(p.minW,y==null?void 0:y._minW),S=yo((a=i[r])==null?void 0:a[u[A]],s);if(S){if(f){(l=i.parts)==null||l.forEach(Z=>{vo(g,{[Z]:h?S[Z]:{[v]:S[Z]}})});continue}if(!f){h?vo(g,S):g[v]=S;continue}g[v]=S}}return g}}function Jee(t){return e=>{var n;const{variant:i,size:r,theme:o}=e,s=Xee(o);return vo({},yo((n=t.baseStyle)!=null?n:{},e),s(t,"sizes",r,e),s(t,"variants",i,e))}}function wn(t){return cee(t,["styleConfig","size","variant","colorScheme"])}var Eee=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Hee(t){return pr(t)?Eee.every(e=>Object.prototype.hasOwnProperty.call(t,e)):!1}var Nee={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},Yee={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Fee={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Mee={property:Nee,easing:Yee,duration:Fee},Tee=Mee,Lee={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},_ee=Lee,Dee={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Kee=Dee,zee={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Pee=zee,Uee={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},jee=Uee,Oee={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Qee=Oee,$ee={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},qee=$ee,ete={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},tte=ete,nte={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},QL=nte,$L={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},ite={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},rte={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},ote={...$L,...ite,container:rte},qL=ote,ste={breakpoints:Pee,zIndices:_ee,radii:Qee,blur:tte,colors:jee,...QL,sizes:qL,shadows:qee,space:$L,borders:Kee,transition:Tee},{defineMultiStyleConfig:ate,definePartsStyle:eh}=mn(["stepper","step","title","description","indicator","separator","icon","number"]),va=qe("stepper-indicator-size"),ud=qe("stepper-icon-size"),dd=qe("stepper-title-font-size"),th=qe("stepper-description-font-size"),vC=qe("stepper-accent-color"),lte=eh(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[vC.variable]:`colors.${t}.500`,_dark:{[vC.variable]:`colors.${t}.200`}},title:{fontSize:dd.reference,fontWeight:"medium"},description:{fontSize:th.reference,color:"chakra-subtle-text"},number:{fontSize:dd.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:ud.reference,height:ud.reference},indicator:{flexShrink:0,borderRadius:"full",width:va.reference,height:va.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:vC.reference},"&[data-status=complete]":{bg:vC.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:vC.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${va.reference} - 8px)`,top:`calc(${va.reference} + 4px)`,insetStart:`calc(${va.reference} / 2 - 1px)`}}})),gte=ate({baseStyle:lte,sizes:{xs:eh({stepper:{[va.variable]:"sizes.4",[ud.variable]:"sizes.3",[dd.variable]:"fontSizes.xs",[th.variable]:"fontSizes.xs"}}),sm:eh({stepper:{[va.variable]:"sizes.6",[ud.variable]:"sizes.4",[dd.variable]:"fontSizes.sm",[th.variable]:"fontSizes.xs"}}),md:eh({stepper:{[va.variable]:"sizes.8",[ud.variable]:"sizes.5",[dd.variable]:"fontSizes.md",[th.variable]:"fontSizes.sm"}}),lg:eh({stepper:{[va.variable]:"sizes.10",[ud.variable]:"sizes.6",[dd.variable]:"fontSizes.lg",[th.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Kt(t,e={}){let n=!1;function i(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function r(...u){i();for(const d of u)e[d]=l(d);return Kt(t,e)}function o(...u){for(const d of u)d in e||(e[d]=l(d));return Kt(t,e)}function s(){return Object.fromEntries(Object.entries(e).map(([d,h])=>[d,h.selector]))}function a(){return Object.fromEntries(Object.entries(e).map(([d,h])=>[d,h.className]))}function l(u){const f=`chakra-${(["container","root"].includes(u??"")?[t]:[t,u]).filter(Boolean).join("__")}`;return{className:f,selector:`.${f}`,toString:()=>u}}return{parts:r,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(e)},__type:{}}}var cte=Kt("accordion").parts("root","container","button","panel").extend("icon"),ute=Kt("alert").parts("title","description","container").extend("icon","spinner"),dte=Kt("avatar").parts("label","badge","container").extend("excessLabel","group"),Ite=Kt("breadcrumb").parts("link","item","container").extend("separator");Kt("button").parts();var Cte=Kt("checkbox").parts("control","icon","container").extend("label");Kt("progress").parts("track","filledTrack").extend("label");var hte=Kt("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),fte=Kt("editable").parts("preview","input","textarea"),mte=Kt("form").parts("container","requiredIndicator","helperText"),pte=Kt("formError").parts("text","icon"),Ate=Kt("input").parts("addon","field","element","group"),bte=Kt("list").parts("container","item","icon"),yte=Kt("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),vte=Kt("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Ste=Kt("numberinput").parts("root","field","stepperGroup","stepper");Kt("pininput").parts("field");var Zte=Kt("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),Gte=Kt("progress").parts("label","filledTrack","track"),Bte=Kt("radio").parts("container","control","label"),Rte=Kt("select").parts("field","icon"),kte=Kt("slider").parts("container","track","thumb","filledTrack","mark"),Vte=Kt("stat").parts("container","label","helpText","number","icon"),wte=Kt("switch").parts("container","track","thumb","label"),Wte=Kt("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),xte=Kt("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Xte=Kt("tag").parts("container","label","closeButton"),Jte=Kt("card").parts("container","header","body","footer");Kt("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function gc(t,e,n){return Math.min(Math.max(t,n),e)}class Ete extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var nh=Ete;function kk(t){if(typeof t!="string")throw new nh(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=_te.test(t)?Yte(t):t;const n=Fte.exec(e);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(ff(a,2),16)),parseInt(ff(s[3]||"f",2),16)/255]}const i=Mte.exec(e);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const r=Tte.exec(e);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=Lte.exec(e);if(o){const[s,a,l,g]=Array.from(o).slice(1).map(parseFloat);if(gc(0,100,a)!==a)throw new nh(t);if(gc(0,100,l)!==l)throw new nh(t);return[...Dte(s,a,l),Number.isNaN(g)?1:g]}throw new nh(t)}function Hte(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const UX=t=>parseInt(t.replace(/_/g,""),36),Nte="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=UX(e.substring(0,3)),i=UX(e.substring(3)).toString(16);let r="";for(let o=0;o<6-i.length;o++)r+="0";return t[n]=`${r}${i}`,t},{});function Yte(t){const e=t.toLowerCase().trim(),n=Nte[Hte(e)];if(!n)throw new nh(t);return`#${n}`}const ff=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),Fte=new RegExp(`^#${ff("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Mte=new RegExp(`^#${ff("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Tte=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${ff(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Lte=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,_te=/^[a-z]+$/i,jX=t=>Math.round(t*255),Dte=(t,e,n)=>{let i=n/100;if(e===0)return[i,i,i].map(jX);const r=(t%360+360)%360/60,o=(1-Math.abs(2*i-1))*(e/100),s=o*(1-Math.abs(r%2-1));let a=0,l=0,g=0;r>=0&&r<1?(a=o,l=s):r>=1&&r<2?(a=s,l=o):r>=2&&r<3?(l=o,g=s):r>=3&&r<4?(l=s,g=o):r>=4&&r<5?(a=s,g=o):r>=5&&r<6&&(a=o,g=s);const u=i-o/2,d=a+u,h=l+u,f=g+u;return[d,h,f].map(jX)};function Kte(t,e,n,i){return`rgba(${gc(0,255,t).toFixed()}, ${gc(0,255,e).toFixed()}, ${gc(0,255,n).toFixed()}, ${parseFloat(gc(0,1,i).toFixed(3))})`}function zte(t,e){const[n,i,r,o]=kk(t);return Kte(n,i,r,o-e)}function Pte(t){const[e,n,i,r]=kk(t);let o=s=>{const a=gc(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(e)}${o(n)}${o(i)}${r<1?o(Math.round(r*255)):""}`}function Ute(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}var jte=t=>Object.keys(t).length===0,$i=(t,e,n)=>{const i=Ute(t,`colors.${e}`,e);try{return Pte(i),i}catch{return n??"#000000"}},Ote=t=>{const[e,n,i]=kk(t);return(e*299+n*587+i*114)/1e3},Qte=t=>e=>{const n=$i(e,t);return Ote(n)<128?"dark":"light"},$te=t=>e=>Qte(t)(e)==="dark",oI=(t,e)=>n=>{const i=$i(n,t);return zte(i,1-e)};function OX(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}var qte=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function ene(t){const e=qte();return!t||jte(t)?e:t.string&&t.colors?nne(t.string,t.colors):t.string&&!t.colors?tne(t.string):t.colors&&!t.string?ine(t.colors):e}function tne(t){let e=0;if(t.length===0)return e.toString();for(let i=0;i<t.length;i+=1)e=t.charCodeAt(i)+((e<<5)-e),e=e&e;let n="#";for(let i=0;i<3;i+=1){const r=e>>i*8&255;n+=`00${r.toString(16)}`.substr(-2)}return n}function nne(t,e){let n=0;if(t.length===0)return e[0];for(let i=0;i<t.length;i+=1)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function ine(t){return t[Math.floor(Math.random()*t.length)]}function $e(t,e){return n=>n.colorMode==="dark"?e:t}function Vk(t){const{orientation:e,vertical:n,horizontal:i}=t;return e?e==="vertical"?n:i:{}}function e_(t){return pr(t)&&t.reference?t.reference:String(t)}var Fy=(t,...e)=>e.map(e_).join(` ${t} `).replace(/calc/g,""),QX=(...t)=>`calc(${Fy("+",...t)})`,$X=(...t)=>`calc(${Fy("-",...t)})`,vR=(...t)=>`calc(${Fy("*",...t)})`,qX=(...t)=>`calc(${Fy("/",...t)})`,eJ=t=>{const e=e_(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:vR(e,-1)},Sa=Object.assign(t=>({add:(...e)=>Sa(QX(t,...e)),subtract:(...e)=>Sa($X(t,...e)),multiply:(...e)=>Sa(vR(t,...e)),divide:(...e)=>Sa(qX(t,...e)),negate:()=>Sa(eJ(t)),toString:()=>t.toString()}),{add:QX,subtract:$X,multiply:vR,divide:qX,negate:eJ});function rne(t){return!Number.isInteger(parseFloat(t.toString()))}function one(t,e="-"){return t.replace(/\s+/g,e)}function t_(t){const e=one(t.toString());return e.includes("\\.")?t:rne(t)?e.replace(".","\\."):t}function sne(t,e=""){return[e,t_(t)].filter(Boolean).join("-")}function ane(t,e){return`var(${t_(t)}${e?`, ${e}`:""})`}function lne(t,e=""){return`--${sne(t,e)}`}function li(t,e){const n=lne(t,e==null?void 0:e.prefix);return{variable:n,reference:ane(n,gne(e==null?void 0:e.fallback))}}function gne(t){return typeof t=="string"?t:t==null?void 0:t.reference}var{defineMultiStyleConfig:cne,definePartsStyle:QA}=mn(wte.keys),Sh=li("switch-track-width"),fc=li("switch-track-height"),yZ=li("switch-track-diff"),une=Sa.subtract(Sh,fc),SR=li("switch-thumb-x"),SC=li("switch-bg"),dne=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[Sh.reference],height:[fc.reference],transitionProperty:"common",transitionDuration:"fast",[SC.variable]:"colors.gray.300",_dark:{[SC.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[SC.variable]:`colors.${e}.500`,_dark:{[SC.variable]:`colors.${e}.200`}},bg:SC.reference}},Ine={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[fc.reference],height:[fc.reference],_checked:{transform:`translateX(${SR.reference})`}},Cne=QA(t=>({container:{[yZ.variable]:une,[SR.variable]:yZ.reference,_rtl:{[SR.variable]:Sa(yZ).negate().toString()}},track:dne(t),thumb:Ine})),hne={sm:QA({container:{[Sh.variable]:"1.375rem",[fc.variable]:"sizes.3"}}),md:QA({container:{[Sh.variable]:"1.875rem",[fc.variable]:"sizes.4"}}),lg:QA({container:{[Sh.variable]:"2.875rem",[fc.variable]:"sizes.6"}})},fne=cne({baseStyle:Cne,sizes:hne,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:mne,definePartsStyle:Jd}=mn(Wte.keys),pne=Jd({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),r0={"&[data-is-numeric=true]":{textAlign:"end"}},Ane=Jd(t=>{const{colorScheme:e}=t;return{th:{color:$e("gray.600","gray.400")(t),borderBottom:"1px",borderColor:$e(`${e}.100`,`${e}.700`)(t),...r0},td:{borderBottom:"1px",borderColor:$e(`${e}.100`,`${e}.700`)(t),...r0},caption:{color:$e("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),bne=Jd(t=>{const{colorScheme:e}=t;return{th:{color:$e("gray.600","gray.400")(t),borderBottom:"1px",borderColor:$e(`${e}.100`,`${e}.700`)(t),...r0},td:{borderBottom:"1px",borderColor:$e(`${e}.100`,`${e}.700`)(t),...r0},caption:{color:$e("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:$e(`${e}.100`,`${e}.700`)(t)},td:{background:$e(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),yne={simple:Ane,striped:bne,unstyled:{}},vne={sm:Jd({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Jd({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Jd({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Sne=mne({baseStyle:pne,variants:yne,sizes:vne,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),cr=qe("tabs-color"),Oo=qe("tabs-bg"),wp=qe("tabs-border-color"),{defineMultiStyleConfig:Zne,definePartsStyle:Es}=mn(xte.keys),Gne=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},Bne=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Rne=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:n==="vertical"?"column":"row"}},kne={p:4},Vne=Es(t=>({root:Gne(t),tab:Bne(t),tablist:Rne(t),tabpanel:kne})),wne={sm:Es({tab:{py:1,px:4,fontSize:"sm"}}),md:Es({tab:{fontSize:"md",py:2,px:4}}),lg:Es({tab:{fontSize:"lg",py:3,px:4}})},Wne=Es(t=>{const{colorScheme:e,orientation:n}=t,i=n==="vertical",r=i?"borderStart":"borderBottom",o=i?"marginStart":"marginBottom";return{tablist:{[r]:"2px solid",borderColor:"inherit"},tab:{[r]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[cr.variable]:`colors.${e}.600`,_dark:{[cr.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[Oo.variable]:"colors.gray.200",_dark:{[Oo.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:cr.reference,bg:Oo.reference}}}),xne=Es(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[wp.variable]:"transparent",_selected:{[cr.variable]:`colors.${e}.600`,[wp.variable]:"colors.white",_dark:{[cr.variable]:`colors.${e}.300`,[wp.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:wp.reference},color:cr.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Xne=Es(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Oo.variable]:"colors.gray.50",_dark:{[Oo.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Oo.variable]:"colors.white",[cr.variable]:`colors.${e}.600`,_dark:{[Oo.variable]:"colors.gray.800",[cr.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:cr.reference,bg:Oo.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Jne=Es(t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:$i(n,`${e}.700`),bg:$i(n,`${e}.100`)}}}}),Ene=Es(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[cr.variable]:"colors.gray.600",_dark:{[cr.variable]:"inherit"},_selected:{[cr.variable]:"colors.white",[Oo.variable]:`colors.${e}.600`,_dark:{[cr.variable]:"colors.gray.800",[Oo.variable]:`colors.${e}.300`}},color:cr.reference,bg:Oo.reference}}}),Hne=Es({}),Nne={line:Wne,enclosed:xne,"enclosed-colored":Xne,"soft-rounded":Jne,"solid-rounded":Ene,unstyled:Hne},Yne=Zne({baseStyle:Vne,sizes:wne,variants:Nne,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Pn=ree("badge",["bg","color","shadow"]),Fne={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Pn.bg.reference,color:Pn.color.reference,boxShadow:Pn.shadow.reference},Mne=t=>{const{colorScheme:e,theme:n}=t,i=oI(`${e}.500`,.6)(n);return{[Pn.bg.variable]:`colors.${e}.500`,[Pn.color.variable]:"colors.white",_dark:{[Pn.bg.variable]:i,[Pn.color.variable]:"colors.whiteAlpha.800"}}},Tne=t=>{const{colorScheme:e,theme:n}=t,i=oI(`${e}.200`,.16)(n);return{[Pn.bg.variable]:`colors.${e}.100`,[Pn.color.variable]:`colors.${e}.800`,_dark:{[Pn.bg.variable]:i,[Pn.color.variable]:`colors.${e}.200`}}},Lne=t=>{const{colorScheme:e,theme:n}=t,i=oI(`${e}.200`,.8)(n);return{[Pn.color.variable]:`colors.${e}.500`,_dark:{[Pn.color.variable]:i},[Pn.shadow.variable]:`inset 0 0 0px 1px ${Pn.color.reference}`}},_ne={solid:Mne,subtle:Tne,outline:Lne},Zh={baseStyle:Fne,variants:_ne,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Dne,definePartsStyle:mc}=mn(Xte.keys),tJ=qe("tag-bg"),nJ=qe("tag-color"),vZ=qe("tag-shadow"),$A=qe("tag-min-height"),qA=qe("tag-min-width"),eb=qe("tag-font-size"),tb=qe("tag-padding-inline"),Kne={fontWeight:"medium",lineHeight:1.2,outline:0,[nJ.variable]:Pn.color.reference,[tJ.variable]:Pn.bg.reference,[vZ.variable]:Pn.shadow.reference,color:nJ.reference,bg:tJ.reference,boxShadow:vZ.reference,borderRadius:"md",minH:$A.reference,minW:qA.reference,fontSize:eb.reference,px:tb.reference,_focusVisible:{[vZ.variable]:"shadows.outline"}},zne={lineHeight:1.2,overflow:"visible"},Pne={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Une=mc({container:Kne,label:zne,closeButton:Pne}),jne={sm:mc({container:{[$A.variable]:"sizes.5",[qA.variable]:"sizes.5",[eb.variable]:"fontSizes.xs",[tb.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:mc({container:{[$A.variable]:"sizes.6",[qA.variable]:"sizes.6",[eb.variable]:"fontSizes.sm",[tb.variable]:"space.2"}}),lg:mc({container:{[$A.variable]:"sizes.8",[qA.variable]:"sizes.8",[eb.variable]:"fontSizes.md",[tb.variable]:"space.3"}})},One={subtle:mc(t=>{var e;return{container:(e=Zh.variants)==null?void 0:e.subtle(t)}}),solid:mc(t=>{var e;return{container:(e=Zh.variants)==null?void 0:e.solid(t)}}),outline:mc(t=>{var e;return{container:(e=Zh.variants)==null?void 0:e.outline(t)}})},Qne=Dne({variants:One,baseStyle:Une,sizes:jne,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Ra,defineMultiStyleConfig:$ne}=mn(Ate.keys),Id=qe("input-height"),Cd=qe("input-font-size"),hd=qe("input-padding"),fd=qe("input-border-radius"),qne=Ra({addon:{height:Id.reference,fontSize:Cd.reference,px:hd.reference,borderRadius:fd.reference},field:{width:"100%",height:Id.reference,fontSize:Cd.reference,px:hd.reference,borderRadius:fd.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),dl={lg:{[Cd.variable]:"fontSizes.lg",[hd.variable]:"space.4",[fd.variable]:"radii.md",[Id.variable]:"sizes.12"},md:{[Cd.variable]:"fontSizes.md",[hd.variable]:"space.4",[fd.variable]:"radii.md",[Id.variable]:"sizes.10"},sm:{[Cd.variable]:"fontSizes.sm",[hd.variable]:"space.3",[fd.variable]:"radii.sm",[Id.variable]:"sizes.8"},xs:{[Cd.variable]:"fontSizes.xs",[hd.variable]:"space.2",[fd.variable]:"radii.sm",[Id.variable]:"sizes.6"}},eie={lg:Ra({field:dl.lg,group:dl.lg}),md:Ra({field:dl.md,group:dl.md}),sm:Ra({field:dl.sm,group:dl.sm}),xs:Ra({field:dl.xs,group:dl.xs})};function wk(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||$e("blue.500","blue.300")(t),errorBorderColor:n||$e("red.500","red.300")(t)}}var tie=Ra(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=wk(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:$e("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:$i(e,i),boxShadow:`0 0 0 1px ${$i(e,i)}`},_focusVisible:{zIndex:1,borderColor:$i(e,n),boxShadow:`0 0 0 1px ${$i(e,n)}`}},addon:{border:"1px solid",borderColor:$e("inherit","whiteAlpha.50")(t),bg:$e("gray.100","whiteAlpha.300")(t)}}}),nie=Ra(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=wk(t);return{field:{border:"2px solid",borderColor:"transparent",bg:$e("gray.100","whiteAlpha.50")(t),_hover:{bg:$e("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:$i(e,i)},_focusVisible:{bg:"transparent",borderColor:$i(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:$e("gray.100","whiteAlpha.50")(t)}}}),iie=Ra(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=wk(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:$i(e,i),boxShadow:`0px 1px 0px 0px ${$i(e,i)}`},_focusVisible:{borderColor:$i(e,n),boxShadow:`0px 1px 0px 0px ${$i(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),rie=Ra({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),oie={outline:tie,filled:nie,flushed:iie,unstyled:rie},Dt=$ne({baseStyle:qne,sizes:eie,variants:oie,defaultProps:{size:"md",variant:"outline"}}),iJ,sie={...(iJ=Dt.baseStyle)==null?void 0:iJ.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},rJ,oJ,aie={outline:t=>{var e,n;return(n=(e=Dt.variants)==null?void 0:e.outline(t).field)!=null?n:{}},flushed:t=>{var e,n;return(n=(e=Dt.variants)==null?void 0:e.flushed(t).field)!=null?n:{}},filled:t=>{var e,n;return(n=(e=Dt.variants)==null?void 0:e.filled(t).field)!=null?n:{}},unstyled:(oJ=(rJ=Dt.variants)==null?void 0:rJ.unstyled.field)!=null?oJ:{}},sJ,aJ,lJ,gJ,cJ,uJ,dJ,IJ,lie={xs:(aJ=(sJ=Dt.sizes)==null?void 0:sJ.xs.field)!=null?aJ:{},sm:(gJ=(lJ=Dt.sizes)==null?void 0:lJ.sm.field)!=null?gJ:{},md:(uJ=(cJ=Dt.sizes)==null?void 0:cJ.md.field)!=null?uJ:{},lg:(IJ=(dJ=Dt.sizes)==null?void 0:dJ.lg.field)!=null?IJ:{}},gie={baseStyle:sie,sizes:lie,variants:aie,defaultProps:{size:"md",variant:"outline"}},Wp=li("tooltip-bg"),SZ=li("tooltip-fg"),cie=li("popper-arrow-bg"),uie={bg:Wp.reference,color:SZ.reference,[Wp.variable]:"colors.gray.700",[SZ.variable]:"colors.whiteAlpha.900",_dark:{[Wp.variable]:"colors.gray.300",[SZ.variable]:"colors.gray.900"},[cie.variable]:Wp.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},die={baseStyle:uie},{defineMultiStyleConfig:Iie,definePartsStyle:ih}=mn(Gte.keys),Cie=t=>{const{colorScheme:e,theme:n,isIndeterminate:i,hasStripe:r}=t,o=$e(OX(),OX("1rem","rgba(0,0,0,0.1)"))(t),s=$e(`${e}.500`,`${e}.200`)(t),a=`linear-gradient(
    to right,
    transparent 0%,
    ${$i(n,s)} 50%,
    transparent 100%
  )`;return{...!i&&r&&o,...i?{bgImage:a}:{bgColor:s}}},hie={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},fie=t=>({bg:$e("gray.100","whiteAlpha.300")(t)}),mie=t=>({transitionProperty:"common",transitionDuration:"slow",...Cie(t)}),pie=ih(t=>({label:hie,filledTrack:mie(t),track:fie(t)})),Aie={xs:ih({track:{h:"1"}}),sm:ih({track:{h:"2"}}),md:ih({track:{h:"3"}}),lg:ih({track:{h:"4"}})},bie=Iie({sizes:Aie,baseStyle:pie,defaultProps:{size:"md",colorScheme:"blue"}}),yie=t=>typeof t=="function";function er(t,...e){return yie(t)?t(...e):t}var{definePartsStyle:nb,defineMultiStyleConfig:vie}=mn(Cte.keys),Gh=qe("checkbox-size"),Sie=t=>{const{colorScheme:e}=t;return{w:Gh.reference,h:Gh.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:$e(`${e}.500`,`${e}.200`)(t),borderColor:$e(`${e}.500`,`${e}.200`)(t),color:$e("white","gray.900")(t),_hover:{bg:$e(`${e}.600`,`${e}.300`)(t),borderColor:$e(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:$e("gray.200","transparent")(t),bg:$e("gray.200","whiteAlpha.300")(t),color:$e("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:$e(`${e}.500`,`${e}.200`)(t),borderColor:$e(`${e}.500`,`${e}.200`)(t),color:$e("white","gray.900")(t)},_disabled:{bg:$e("gray.100","whiteAlpha.100")(t),borderColor:$e("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:$e("red.500","red.300")(t)}}},Zie={_disabled:{cursor:"not-allowed"}},Gie={userSelect:"none",_disabled:{opacity:.4}},Bie={transitionProperty:"transform",transitionDuration:"normal"},Rie=nb(t=>({icon:Bie,container:Zie,control:er(Sie,t),label:Gie})),kie={sm:nb({control:{[Gh.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:nb({control:{[Gh.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:nb({control:{[Gh.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},o0=vie({baseStyle:Rie,sizes:kie,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Vie,definePartsStyle:ib}=mn(Bte.keys),wie=t=>{var e;const n=(e=er(o0.baseStyle,t))==null?void 0:e.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Wie=ib(t=>{var e,n,i,r;return{label:(n=(e=o0).baseStyle)==null?void 0:n.call(e,t).label,container:(r=(i=o0).baseStyle)==null?void 0:r.call(i,t).container,control:wie(t)}}),xie={md:ib({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:ib({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:ib({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Xie=Vie({baseStyle:Wie,sizes:xie,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Jie,definePartsStyle:Eie}=mn(Rte.keys),xp=qe("select-bg"),CJ,Hie={...(CJ=Dt.baseStyle)==null?void 0:CJ.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:xp.reference,[xp.variable]:"colors.white",_dark:{[xp.variable]:"colors.gray.700"},"> option, > optgroup":{bg:xp.reference}},Nie={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Yie=Eie({field:Hie,icon:Nie}),Xp={paddingInlineEnd:"8"},hJ,fJ,mJ,pJ,AJ,bJ,yJ,vJ,Fie={lg:{...(hJ=Dt.sizes)==null?void 0:hJ.lg,field:{...(fJ=Dt.sizes)==null?void 0:fJ.lg.field,...Xp}},md:{...(mJ=Dt.sizes)==null?void 0:mJ.md,field:{...(pJ=Dt.sizes)==null?void 0:pJ.md.field,...Xp}},sm:{...(AJ=Dt.sizes)==null?void 0:AJ.sm,field:{...(bJ=Dt.sizes)==null?void 0:bJ.sm.field,...Xp}},xs:{...(yJ=Dt.sizes)==null?void 0:yJ.xs,field:{...(vJ=Dt.sizes)==null?void 0:vJ.xs.field,...Xp},icon:{insetEnd:"1"}}},Mie=Jie({baseStyle:Yie,sizes:Fie,variants:Dt.variants,defaultProps:Dt.defaultProps}),ZZ=qe("skeleton-start-color"),GZ=qe("skeleton-end-color"),Tie={[ZZ.variable]:"colors.gray.100",[GZ.variable]:"colors.gray.400",_dark:{[ZZ.variable]:"colors.gray.800",[GZ.variable]:"colors.gray.600"},background:ZZ.reference,borderColor:GZ.reference,opacity:.7,borderRadius:"sm"},Lie={baseStyle:Tie},BZ=qe("skip-link-bg"),_ie={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[BZ.variable]:"colors.white",_dark:{[BZ.variable]:"colors.gray.700"},bg:BZ.reference}},Die={baseStyle:_ie},{defineMultiStyleConfig:Kie,definePartsStyle:My}=mn(kte.keys),mf=qe("slider-thumb-size"),pf=qe("slider-track-size"),Vl=qe("slider-bg"),zie=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Vk({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Pie=t=>({...Vk({orientation:t.orientation,horizontal:{h:pf.reference},vertical:{w:pf.reference}}),overflow:"hidden",borderRadius:"sm",[Vl.variable]:"colors.gray.200",_dark:{[Vl.variable]:"colors.whiteAlpha.200"},_disabled:{[Vl.variable]:"colors.gray.300",_dark:{[Vl.variable]:"colors.whiteAlpha.300"}},bg:Vl.reference}),Uie=t=>{const{orientation:e}=t;return{...Vk({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:mf.reference,h:mf.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},jie=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[Vl.variable]:`colors.${e}.500`,_dark:{[Vl.variable]:`colors.${e}.200`},bg:Vl.reference}},Oie=My(t=>({container:zie(t),track:Pie(t),thumb:Uie(t),filledTrack:jie(t)})),Qie=My({container:{[mf.variable]:"sizes.4",[pf.variable]:"sizes.1"}}),$ie=My({container:{[mf.variable]:"sizes.3.5",[pf.variable]:"sizes.1"}}),qie=My({container:{[mf.variable]:"sizes.2.5",[pf.variable]:"sizes.0.5"}}),ere={lg:Qie,md:$ie,sm:qie},tre=Kie({baseStyle:Oie,sizes:ere,defaultProps:{size:"md",colorScheme:"blue"}}),ic=li("spinner-size"),nre={width:[ic.reference],height:[ic.reference]},ire={xs:{[ic.variable]:"sizes.3"},sm:{[ic.variable]:"sizes.4"},md:{[ic.variable]:"sizes.6"},lg:{[ic.variable]:"sizes.8"},xl:{[ic.variable]:"sizes.12"}},rre={baseStyle:nre,sizes:ire,defaultProps:{size:"md"}},{defineMultiStyleConfig:ore,definePartsStyle:n_}=mn(Vte.keys),sre={fontWeight:"medium"},are={opacity:.8,marginBottom:"2"},lre={verticalAlign:"baseline",fontWeight:"semibold"},gre={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},cre=n_({container:{},label:sre,helpText:are,number:lre,icon:gre}),ure={md:n_({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},dre=ore({baseStyle:cre,sizes:ure,defaultProps:{size:"md"}}),RZ=qe("kbd-bg"),Ire={[RZ.variable]:"colors.gray.100",_dark:{[RZ.variable]:"colors.whiteAlpha.100"},bg:RZ.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},Cre={baseStyle:Ire},hre={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},fre={baseStyle:hre},{defineMultiStyleConfig:mre,definePartsStyle:pre}=mn(bte.keys),Are={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},bre=pre({icon:Are}),yre=mre({baseStyle:bre}),{defineMultiStyleConfig:vre,definePartsStyle:Sre}=mn(yte.keys),As=qe("menu-bg"),kZ=qe("menu-shadow"),Zre={[As.variable]:"#fff",[kZ.variable]:"shadows.sm",_dark:{[As.variable]:"colors.gray.700",[kZ.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:As.reference,boxShadow:kZ.reference},Gre={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[As.variable]:"colors.gray.100",_dark:{[As.variable]:"colors.whiteAlpha.100"}},_active:{[As.variable]:"colors.gray.200",_dark:{[As.variable]:"colors.whiteAlpha.200"}},_expanded:{[As.variable]:"colors.gray.100",_dark:{[As.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:As.reference},Bre={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},Rre={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},kre={opacity:.6},Vre={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},wre={transitionProperty:"common",transitionDuration:"normal"},Wre=Sre({button:wre,list:Zre,item:Gre,groupTitle:Bre,icon:Rre,command:kre,divider:Vre}),xre=vre({baseStyle:Wre}),{defineMultiStyleConfig:Xre,definePartsStyle:ZR}=mn(vte.keys),VZ=qe("modal-bg"),wZ=qe("modal-shadow"),Jre={bg:"blackAlpha.600",zIndex:"modal"},Ere=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},Hre=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[VZ.variable]:"colors.white",[wZ.variable]:"shadows.lg",_dark:{[VZ.variable]:"colors.gray.700",[wZ.variable]:"shadows.dark-lg"},bg:VZ.reference,boxShadow:wZ.reference}},Nre={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Yre={position:"absolute",top:"2",insetEnd:"3"},Fre=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},Mre={px:"6",py:"4"},Tre=ZR(t=>({overlay:Jre,dialogContainer:er(Ere,t),dialog:er(Hre,t),header:Nre,closeButton:Yre,body:er(Fre,t),footer:Mre}));function Do(t){return ZR(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var Lre={xs:Do("xs"),sm:Do("sm"),md:Do("md"),lg:Do("lg"),xl:Do("xl"),"2xl":Do("2xl"),"3xl":Do("3xl"),"4xl":Do("4xl"),"5xl":Do("5xl"),"6xl":Do("6xl"),full:Do("full")},_re=Xre({baseStyle:Tre,sizes:Lre,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Dre,definePartsStyle:i_}=mn(Ste.keys),Wk=li("number-input-stepper-width"),r_=li("number-input-input-padding"),Kre=Sa(Wk).add("0.5rem").toString(),WZ=li("number-input-bg"),xZ=li("number-input-color"),XZ=li("number-input-border-color"),zre={[Wk.variable]:"sizes.6",[r_.variable]:Kre},Pre=t=>{var e,n;return(n=(e=er(Dt.baseStyle,t))==null?void 0:e.field)!=null?n:{}},Ure={width:Wk.reference},jre={borderStart:"1px solid",borderStartColor:XZ.reference,color:xZ.reference,bg:WZ.reference,[xZ.variable]:"colors.chakra-body-text",[XZ.variable]:"colors.chakra-border-color",_dark:{[xZ.variable]:"colors.whiteAlpha.800",[XZ.variable]:"colors.whiteAlpha.300"},_active:{[WZ.variable]:"colors.gray.200",_dark:{[WZ.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Ore=i_(t=>{var e;return{root:zre,field:(e=er(Pre,t))!=null?e:{},stepperGroup:Ure,stepper:jre}});function Jp(t){var e,n,i;const r=(e=Dt.sizes)==null?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(i=(n=r.field)==null?void 0:n.fontSize)!=null?i:"md",a=QL.fontSizes[s];return i_({field:{...r.field,paddingInlineEnd:r_.reference,verticalAlign:"top"},stepper:{fontSize:Sa(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var Qre={xs:Jp("xs"),sm:Jp("sm"),md:Jp("md"),lg:Jp("lg")},$re=Dre({baseStyle:Ore,sizes:Qre,variants:Dt.variants,defaultProps:Dt.defaultProps}),SJ,qre={...(SJ=Dt.baseStyle)==null?void 0:SJ.field,textAlign:"center"},eoe={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},ZJ,GJ,toe={outline:t=>{var e,n,i;return(i=(n=er((e=Dt.variants)==null?void 0:e.outline,t))==null?void 0:n.field)!=null?i:{}},flushed:t=>{var e,n,i;return(i=(n=er((e=Dt.variants)==null?void 0:e.flushed,t))==null?void 0:n.field)!=null?i:{}},filled:t=>{var e,n,i;return(i=(n=er((e=Dt.variants)==null?void 0:e.filled,t))==null?void 0:n.field)!=null?i:{}},unstyled:(GJ=(ZJ=Dt.variants)==null?void 0:ZJ.unstyled.field)!=null?GJ:{}},noe={baseStyle:qre,sizes:eoe,variants:toe,defaultProps:Dt.defaultProps},{defineMultiStyleConfig:ioe,definePartsStyle:roe}=mn(Zte.keys),Ep=li("popper-bg"),ooe=li("popper-arrow-bg"),BJ=li("popper-arrow-shadow-color"),soe={zIndex:10},aoe={[Ep.variable]:"colors.white",bg:Ep.reference,[ooe.variable]:Ep.reference,[BJ.variable]:"colors.gray.200",_dark:{[Ep.variable]:"colors.gray.700",[BJ.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},loe={px:3,py:2,borderBottomWidth:"1px"},goe={px:3,py:2},coe={px:3,py:2,borderTopWidth:"1px"},uoe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},doe=roe({popper:soe,content:aoe,header:loe,body:goe,footer:coe,closeButton:uoe}),Ioe=ioe({baseStyle:doe}),{definePartsStyle:GR,defineMultiStyleConfig:Coe}=mn(hte.keys),JZ=qe("drawer-bg"),EZ=qe("drawer-box-shadow");function Hu(t){return GR(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var hoe={bg:"blackAlpha.600",zIndex:"modal"},foe={display:"flex",zIndex:"modal",justifyContent:"center"},moe=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[JZ.variable]:"colors.white",[EZ.variable]:"shadows.lg",_dark:{[JZ.variable]:"colors.gray.700",[EZ.variable]:"shadows.dark-lg"},bg:JZ.reference,boxShadow:EZ.reference}},poe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Aoe={position:"absolute",top:"2",insetEnd:"3"},boe={px:"6",py:"2",flex:"1",overflow:"auto"},yoe={px:"6",py:"4"},voe=GR(t=>({overlay:hoe,dialogContainer:foe,dialog:er(moe,t),header:poe,closeButton:Aoe,body:boe,footer:yoe})),Soe={xs:Hu("xs"),sm:Hu("md"),md:Hu("lg"),lg:Hu("2xl"),xl:Hu("4xl"),full:Hu("full")},Zoe=Coe({baseStyle:voe,sizes:Soe,defaultProps:{size:"xs"}}),{definePartsStyle:Goe,defineMultiStyleConfig:Boe}=mn(fte.keys),Roe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},koe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Voe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},woe=Goe({preview:Roe,input:koe,textarea:Voe}),Woe=Boe({baseStyle:woe}),{definePartsStyle:xoe,defineMultiStyleConfig:Xoe}=mn(mte.keys),Ed=qe("form-control-color"),Joe={marginStart:"1",[Ed.variable]:"colors.red.500",_dark:{[Ed.variable]:"colors.red.300"},color:Ed.reference},Eoe={mt:"2",[Ed.variable]:"colors.gray.600",_dark:{[Ed.variable]:"colors.whiteAlpha.600"},color:Ed.reference,lineHeight:"normal",fontSize:"sm"},Hoe=xoe({container:{width:"100%",position:"relative"},requiredIndicator:Joe,helperText:Eoe}),Noe=Xoe({baseStyle:Hoe}),{definePartsStyle:Yoe,defineMultiStyleConfig:Foe}=mn(pte.keys),Hd=qe("form-error-color"),Moe={[Hd.variable]:"colors.red.500",_dark:{[Hd.variable]:"colors.red.300"},color:Hd.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Toe={marginEnd:"0.5em",[Hd.variable]:"colors.red.500",_dark:{[Hd.variable]:"colors.red.300"},color:Hd.reference},Loe=Yoe({text:Moe,icon:Toe}),_oe=Foe({baseStyle:Loe}),Doe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Koe={baseStyle:Doe},zoe={fontFamily:"heading",fontWeight:"bold"},Poe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Uoe={baseStyle:zoe,sizes:Poe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:joe,definePartsStyle:Ooe}=mn(Ite.keys),HZ=qe("breadcrumb-link-decor"),Qoe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:HZ.reference,[HZ.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[HZ.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},$oe=Ooe({link:Qoe}),qoe=joe({baseStyle:$oe}),ese={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},o_=t=>{const{colorScheme:e,theme:n}=t;if(e==="gray")return{color:$e("gray.800","whiteAlpha.900")(t),_hover:{bg:$e("gray.100","whiteAlpha.200")(t)},_active:{bg:$e("gray.200","whiteAlpha.300")(t)}};const i=oI(`${e}.200`,.12)(n),r=oI(`${e}.200`,.24)(n);return{color:$e(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:$e(`${e}.50`,i)(t)},_active:{bg:$e(`${e}.100`,r)(t)}}},tse=t=>{const{colorScheme:e}=t,n=$e("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:e==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...er(o_,t)}},nse={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},ise=t=>{var e;const{colorScheme:n}=t;if(n==="gray"){const l=$e("gray.100","whiteAlpha.200")(t);return{bg:l,color:$e("gray.800","whiteAlpha.900")(t),_hover:{bg:$e("gray.200","whiteAlpha.300")(t),_disabled:{bg:l}},_active:{bg:$e("gray.300","whiteAlpha.400")(t)}}}const{bg:i=`${n}.500`,color:r="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(e=nse[n])!=null?e:{},a=$e(i,`${n}.200`)(t);return{bg:a,color:$e(r,"gray.800")(t),_hover:{bg:$e(o,`${n}.300`)(t),_disabled:{bg:a}},_active:{bg:$e(s,`${n}.400`)(t)}}},rse=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:$e(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:$e(`${e}.700`,`${e}.500`)(t)}}},ose={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},sse={ghost:o_,outline:tse,solid:ise,link:rse,unstyled:ose},ase={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},lse={baseStyle:ese,variants:sse,sizes:ase,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:pc,defineMultiStyleConfig:gse}=mn(Jte.keys),s0=qe("card-bg"),Wa=qe("card-padding"),s_=qe("card-shadow"),rb=qe("card-radius"),a_=qe("card-border-width","0"),l_=qe("card-border-color"),cse=pc({container:{[s0.variable]:"colors.chakra-body-bg",backgroundColor:s0.reference,boxShadow:s_.reference,borderRadius:rb.reference,color:"chakra-body-text",borderWidth:a_.reference,borderColor:l_.reference},body:{padding:Wa.reference,flex:"1 1 0%"},header:{padding:Wa.reference},footer:{padding:Wa.reference}}),use={sm:pc({container:{[rb.variable]:"radii.base",[Wa.variable]:"space.3"}}),md:pc({container:{[rb.variable]:"radii.md",[Wa.variable]:"space.5"}}),lg:pc({container:{[rb.variable]:"radii.xl",[Wa.variable]:"space.7"}})},dse={elevated:pc({container:{[s_.variable]:"shadows.base",_dark:{[s0.variable]:"colors.gray.700"}}}),outline:pc({container:{[a_.variable]:"1px",[l_.variable]:"colors.chakra-border-color"}}),filled:pc({container:{[s0.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Wa.variable]:0},header:{[Wa.variable]:0},footer:{[Wa.variable]:0}}},Ise=gse({baseStyle:cse,variants:dse,sizes:use,defaultProps:{variant:"elevated",size:"md"}}),Bh=li("close-button-size"),ZC=li("close-button-bg"),Cse={w:[Bh.reference],h:[Bh.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[ZC.variable]:"colors.blackAlpha.100",_dark:{[ZC.variable]:"colors.whiteAlpha.100"}},_active:{[ZC.variable]:"colors.blackAlpha.200",_dark:{[ZC.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:ZC.reference},hse={lg:{[Bh.variable]:"sizes.10",fontSize:"md"},md:{[Bh.variable]:"sizes.8",fontSize:"xs"},sm:{[Bh.variable]:"sizes.6",fontSize:"2xs"}},fse={baseStyle:Cse,sizes:hse,defaultProps:{size:"md"}},{variants:mse,defaultProps:pse}=Zh,Ase={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Pn.bg.reference,color:Pn.color.reference,boxShadow:Pn.shadow.reference},bse={baseStyle:Ase,variants:mse,defaultProps:pse},yse={w:"100%",mx:"auto",maxW:"prose",px:"4"},vse={baseStyle:yse},Sse={opacity:.6,borderColor:"inherit"},Zse={borderStyle:"solid"},Gse={borderStyle:"dashed"},Bse={solid:Zse,dashed:Gse},Rse={baseStyle:Sse,variants:Bse,defaultProps:{variant:"solid"}},{definePartsStyle:kse,defineMultiStyleConfig:Vse}=mn(cte.keys),wse={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},Wse={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},xse={pt:"2",px:"4",pb:"5"},Xse={fontSize:"1.25em"},Jse=kse({container:wse,button:Wse,panel:xse,icon:Xse}),Ese=Vse({baseStyle:Jse}),{definePartsStyle:$f,defineMultiStyleConfig:Hse}=mn(ute.keys),Fr=qe("alert-fg"),Ta=qe("alert-bg"),Nse=$f({container:{bg:Ta.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Fr.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Fr.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function xk(t){const{theme:e,colorScheme:n}=t,i=oI(`${n}.200`,.16)(e);return{light:`colors.${n}.100`,dark:i}}var Yse=$f(t=>{const{colorScheme:e}=t,n=xk(t);return{container:{[Fr.variable]:`colors.${e}.600`,[Ta.variable]:n.light,_dark:{[Fr.variable]:`colors.${e}.200`,[Ta.variable]:n.dark}}}}),Fse=$f(t=>{const{colorScheme:e}=t,n=xk(t);return{container:{[Fr.variable]:`colors.${e}.600`,[Ta.variable]:n.light,_dark:{[Fr.variable]:`colors.${e}.200`,[Ta.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Fr.reference}}}),Mse=$f(t=>{const{colorScheme:e}=t,n=xk(t);return{container:{[Fr.variable]:`colors.${e}.600`,[Ta.variable]:n.light,_dark:{[Fr.variable]:`colors.${e}.200`,[Ta.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Fr.reference}}}),Tse=$f(t=>{const{colorScheme:e}=t;return{container:{[Fr.variable]:"colors.white",[Ta.variable]:`colors.${e}.600`,_dark:{[Fr.variable]:"colors.gray.900",[Ta.variable]:`colors.${e}.200`},color:Fr.reference}}}),Lse={subtle:Yse,"left-accent":Fse,"top-accent":Mse,solid:Tse},_se=Hse({baseStyle:Nse,variants:Lse,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:g_,defineMultiStyleConfig:Dse}=mn(dte.keys),Nd=qe("avatar-border-color"),Rh=qe("avatar-bg"),Af=qe("avatar-font-size"),sI=qe("avatar-size"),Kse={borderRadius:"full",border:"0.2em solid",borderColor:Nd.reference,[Nd.variable]:"white",_dark:{[Nd.variable]:"colors.gray.800"}},zse={bg:Rh.reference,fontSize:Af.reference,width:sI.reference,height:sI.reference,lineHeight:"1",[Rh.variable]:"colors.gray.200",_dark:{[Rh.variable]:"colors.whiteAlpha.400"}},Pse=t=>{const{name:e,theme:n}=t,i=e?ene({string:e}):"colors.gray.400",r=$te(i)(n);let o="white";return r||(o="gray.800"),{bg:Rh.reference,fontSize:Af.reference,color:o,borderColor:Nd.reference,verticalAlign:"top",width:sI.reference,height:sI.reference,"&:not([data-loaded])":{[Rh.variable]:i},[Nd.variable]:"colors.white",_dark:{[Nd.variable]:"colors.gray.800"}}},Use={fontSize:Af.reference,lineHeight:"1"},jse=g_(t=>({badge:er(Kse,t),excessLabel:er(zse,t),container:er(Pse,t),label:Use}));function Il(t){const e=t!=="100%"?qL[t]:void 0;return g_({container:{[sI.variable]:e??t,[Af.variable]:`calc(${e??t} / 2.5)`},excessLabel:{[sI.variable]:e??t,[Af.variable]:`calc(${e??t} / 2.5)`}})}var Ose={"2xs":Il(4),xs:Il(6),sm:Il(8),md:Il(12),lg:Il(16),xl:Il(24),"2xl":Il(32),full:Il("100%")},Qse=Dse({baseStyle:jse,sizes:Ose,defaultProps:{size:"md"}}),$se={Accordion:Ese,Alert:_se,Avatar:Qse,Badge:Zh,Breadcrumb:qoe,Button:lse,Checkbox:o0,CloseButton:fse,Code:bse,Container:vse,Divider:Rse,Drawer:Zoe,Editable:Woe,Form:Noe,FormError:_oe,FormLabel:Koe,Heading:Uoe,Input:Dt,Kbd:Cre,Link:fre,List:yre,Menu:xre,Modal:_re,NumberInput:$re,PinInput:noe,Popover:Ioe,Progress:bie,Radio:Xie,Select:Mie,Skeleton:Lie,SkipLink:Die,Slider:tre,Spinner:rre,Stat:dre,Switch:fne,Table:Sne,Tabs:Yne,Tag:Qne,Textarea:gie,Tooltip:die,Card:Ise,Stepper:gte},qse={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},eae={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},tae="ltr",nae={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},c_={semanticTokens:qse,direction:tae,...ste,components:$se,styles:eae,config:nae};function rh(t){return typeof t=="function"}function iae(...t){return e=>t.reduce((n,i)=>i(n),e)}var rae=t=>function(...n){let i=[...n],r=n[n.length-1];return Hee(r)&&i.length>1?i=i.slice(0,i.length-1):r=t,iae(...i.map(o=>s=>rh(o)?o(s):sae(s,o)))(r)},oae=rae(c_);function sae(...t){return vo({},...t,u_)}function u_(t,e,n,i){if((rh(t)||rh(e))&&Object.prototype.hasOwnProperty.call(i,n))return(...r)=>{const o=rh(t)?t(...r):t,s=rh(e)?e(...r):e;return vo({},o,s,u_)}}function aae(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var lae=aae();function gae(t,e){const n={};return Object.keys(t).forEach(i=>{e.includes(i)||(n[i]=t[i])}),n}function cae(t,e,n,i){const r=typeof e=="string"?e.split("."):[e];for(i=0;i<r.length&&t;i+=1)t=t[r[i]];return t===void 0?n:t}var uae=t=>{const e=new WeakMap;return(i,r,o,s)=>{if(typeof i>"u")return t(i,r,o);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const l=t(i,r,o,s);return a.set(r,l),l}},d_=uae(cae);function I_(t,e){const n={};return Object.keys(t).forEach(i=>{const r=t[i];e(r,i,t)&&(n[i]=r)}),n}var C_=t=>I_(t,e=>e!=null);function dae(t){return typeof t=="function"}function h_(t,...e){return dae(t)?t(...e):t}function Iae(...t){return function(n){t.some(i=>(i==null||i(n),n==null?void 0:n.defaultPrevented))}}var Cae=typeof Element<"u",hae=typeof Map=="function",fae=typeof Set=="function",mae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ob(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!ob(t[i],e[i]))return!1;return!0}var o;if(hae&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!ob(i.value[1],e.get(i.value[0])))return!1;return!0}if(fae&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(mae&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(t[i]!==e[i])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(Cae&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!((r[i]==="_owner"||r[i]==="__v"||r[i]==="__o")&&t.$$typeof)&&!ob(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}var pae=function(e,n){try{return ob(e,n)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}};const Aae=Ig(pae);function f_(t,e={}){var n;const{styleConfig:i,...r}=e,{theme:o,colorMode:s}=_L(),a=t?d_(o,`components.${t}`):void 0,l=i||a,g=vo({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},C_(gae(r,["children"]))),u=m.useRef({});if(l){const h=Jee(l)(g);Aae(u.current,h)||(u.current=h)}return u.current}function jr(t,e={}){return f_(t,e)}function Or(t,e={}){return f_(t,e)}var bae=new Set([...vee,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),yae=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function vae(t){return yae.has(t)||!bae.has(t)}function Sae(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const n={...t};for(const i of e)if(i!=null)for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(r in n&&delete n[r],n[r]=i[r]);return n}function m_(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}var Zae=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Gae=BL(function(t){return Zae.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Bae=Gae,Rae=function(e){return e!=="theme"},RJ=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Bae:Rae},kJ=function(e,n,i){var r;if(n){var o=n.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},kae=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return xL(n,i,r),D$(function(){return XL(n,i,r)}),null},Vae=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=kJ(e,n,i),l=a||RJ(r),g=!l("as");return function(){var u=arguments,d=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var h=u.length,f=1;f<h;f++)d.push(u[f],u[0][f])}var A=NL(function(p,y,v){var S=g&&p.as||r,Z="",R=[],W=p;if(p.theme==null){W={};for(var B in p)W[B]=p[B];W.theme=m.useContext(hf)}typeof p.className=="string"?Z=N$(y.registered,R,p.className):p.className!=null&&(Z=p.className+" ");var k=yk(d.concat(R),y.registered,W);Z+=y.key+"-"+k.name,s!==void 0&&(Z+=" "+s);var w=g&&a===void 0?RJ(S):l,J={};for(var X in p)g&&X==="as"||w(X)&&(J[X]=p[X]);return J.className=Z,J.ref=v,m.createElement(m.Fragment,null,m.createElement(kae,{cache:y,serialized:k,isStringTag:typeof S=="string"}),m.createElement(S,J))});return A.displayName=o!==void 0?o:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",A.defaultProps=e.defaultProps,A.__emotion_real=A,A.__emotion_base=r,A.__emotion_styles=d,A.__emotion_forwardProp=a,Object.defineProperty(A,"toString",{value:function(){return"."+s}}),A.withComponent=function(p,y){return t(p,og({},n,y,{shouldForwardProp:kJ(A,y,!0)})).apply(void 0,d)},A}},wae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],a0=Vae.bind();wae.forEach(function(t){a0[t]=a0(t)});var VJ,Wae=(VJ=a0.default)!=null?VJ:a0,xae=({baseStyle:t})=>e=>{const{theme:n,css:i,__css:r,sx:o,...s}=e,a=I_(s,(d,h)=>Zee(h)),l=h_(t,e),g=Sae({},r,l,C_(a),o),u=OL(g)(e.theme);return i?[u,i]:u};function NZ(t,e){const{baseStyle:n,...i}=e??{};i.shouldForwardProp||(i.shouldForwardProp=vae);const r=xae({baseStyle:n}),o=Wae(t,i)(r);return gt.forwardRef(function(l,g){const{colorMode:u,forced:d}=$c();return gt.createElement(o,{ref:g,"data-theme":d?u:void 0,...l})})}function Xae(){const t=new Map;return new Proxy(NZ,{apply(e,n,i){return NZ(...i)},get(e,n){return t.has(n)||t.set(n,NZ(n)),t.get(n)}})}var Re=Xae();function Fe(t){return m.forwardRef(t)}function Jae(t={}){const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=t,r=m.createContext(void 0);r.displayName=i;function o(){var s;const a=m.useContext(r);if(!a&&e){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[r.Provider,o,r]}function Eae(t){const{cssVarsRoot:e,theme:n,children:i}=t,r=m.useMemo(()=>Aee(n),[n]);return C.jsxs(P$,{theme:r,children:[C.jsx(Hae,{root:e}),i]})}function Hae({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return C.jsx(Ey,{styles:n=>({[e]:n.__cssVars})})}Jae({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Nae(){const{colorMode:t}=$c();return C.jsx(Ey,{styles:e=>{const n=d_(e,"styles.global"),i=h_(n,{theme:e,colorMode:t});return i?OL(i)(e):void 0}})}var Xk=m.createContext({getDocument(){return document},getWindow(){return window}});Xk.displayName="EnvironmentContext";function Yae({defer:t}={}){const[,e]=m.useReducer(n=>n+1,0);return Js(()=>{t&&e()},[t]),m.useContext(Xk)}function p_(t){const{children:e,environment:n,disabled:i}=t,r=m.useRef(null),o=m.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=r.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=r.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!i||!n;return C.jsxs(Xk.Provider,{value:o,children:[e,s&&C.jsx("span",{id:"__chakra_env",hidden:!0,ref:r})]})}p_.displayName="EnvironmentProvider";var Fae=t=>{const{children:e,colorModeManager:n,portalZIndex:i,resetScope:r,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:g,disableGlobalStyle:u}=t,d=C.jsx(p_,{environment:a,disabled:g,children:e});return C.jsx(Eae,{theme:s,cssVarsRoot:l,children:C.jsxs(LL,{colorModeManager:n,options:s.config,children:[o?C.jsx(O$,{scope:r}):C.jsx(j$,{}),!u&&C.jsx(Nae,{}),i?C.jsx(ML,{zIndex:i,children:d}):d]})})},Mae=(t,e)=>t.find(n=>n.id===e);function wJ(t,e){const n=A_(t,e),i=n?t[n].findIndex(r=>r.id===e):-1;return{position:n,index:i}}function A_(t,e){for(const[n,i]of Object.entries(t))if(Mae(i,e))return n}function Tae(t){const e=t.includes("right"),n=t.includes("left");let i="center";return e&&(i="flex-end"),n&&(i="flex-start"),{display:"flex",flexDirection:"column",alignItems:i}}function Lae(t){const n=t==="top"||t==="bottom"?"0 auto":void 0,i=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,r=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:i,bottom:r,right:o,left:s}}function Zo(t,e=[]){const n=m.useRef(t);return m.useEffect(()=>{n.current=t}),m.useCallback((...i)=>{var r;return(r=n.current)==null?void 0:r.call(n,...i)},e)}function _ae(t,e){const n=Zo(t);m.useEffect(()=>{if(e==null)return;let i=null;return i=window.setTimeout(()=>{n()},e),()=>{i&&window.clearTimeout(i)}},[e,n])}function Ec(t,e){const n=m.useRef(!1),i=m.useRef(!1);m.useEffect(()=>{if(n.current&&i.current)return t();i.current=!0},e),m.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const b_=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ty=m.createContext({}),qf=m.createContext(null),Ly=typeof document<"u",Jk=Ly?m.useLayoutEffect:m.useEffect,y_=m.createContext({strict:!1}),Ek=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Dae="framerAppearId",v_="data-"+Ek(Dae);function Kae(t,e,n,i){const{visualElement:r}=m.useContext(Ty),o=m.useContext(y_),s=m.useContext(qf),a=m.useContext(b_).reducedMotion,l=m.useRef();i=i||o.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const g=l.current;m.useInsertionEffect(()=>{g&&g.update(n,s)});const u=m.useRef(!!(n[v_]&&!window.HandoffComplete));return Jk(()=>{g&&(g.render(),u.current&&g.animationState&&g.animationState.animateChanges())}),m.useEffect(()=>{g&&(g.updateFeatures(),!u.current&&g.animationState&&g.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),g}function md(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zae(t,e,n){return m.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):md(n)&&(n.current=i))},[e])}function bf(t){return typeof t=="string"||Array.isArray(t)}function _y(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Hk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nk=["initial",...Hk];function Dy(t){return _y(t.animate)||Nk.some(e=>bf(t[e]))}function S_(t){return!!(Dy(t)||t.variants)}function Pae(t,e){if(Dy(t)){const{initial:n,animate:i}=t;return{initial:n===!1||bf(n)?n:void 0,animate:bf(i)?i:void 0}}return t.inherit!==!1?e:{}}function Uae(t){const{initial:e,animate:n}=Pae(t,m.useContext(Ty));return m.useMemo(()=>({initial:e,animate:n}),[WJ(e),WJ(n)])}function WJ(t){return Array.isArray(t)?t.join(" "):t}const xJ={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yf={};for(const t in xJ)yf[t]={isEnabled:e=>xJ[t].some(n=>!!e[n])};function jae(t){for(const e in t)yf[e]={...yf[e],...t[e]}}const Yk=m.createContext({}),Z_=m.createContext({}),Oae=Symbol.for("motionComponentSymbol");function Qae({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&jae(t);function o(a,l){let g;const u={...m.useContext(b_),...a,layoutId:$ae(a)},{isStatic:d}=u,h=Uae(a),f=i(a,d);if(!d&&Ly){h.visualElement=Kae(r,f,u,e);const A=m.useContext(Z_),p=m.useContext(y_).strict;h.visualElement&&(g=h.visualElement.loadFeatures(u,p,t,A))}return m.createElement(Ty.Provider,{value:h},g&&h.visualElement?m.createElement(g,{visualElement:h.visualElement,...u}):null,n(r,a,zae(f,h.visualElement,l),f,d,h.visualElement))}const s=m.forwardRef(o);return s[Oae]=r,s}function $ae({layoutId:t}){const e=m.useContext(Yk).id;return e&&t!==void 0?e+"-"+t:t}function qae(t){function e(i,r={}){return Qae(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const ele=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fk(t){return typeof t!="string"||t.includes("-")?!1:!!(ele.indexOf(t)>-1||/[A-Z]/.test(t))}const l0={};function tle(t){Object.assign(l0,t)}const em=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qc=new Set(em);function G_(t,{layout:e,layoutId:n}){return qc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!l0[t]||t==="opacity")}const Sr=t=>!!(t&&t.getVelocity),nle={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ile=em.length;function rle(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let s=0;s<ile;s++){const a=em[s];if(t[a]!==void 0){const l=nle[a]||a;o+=`${l}(${t[a]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const B_=t=>e=>typeof e=="string"&&e.startsWith(t),R_=B_("--"),BR=B_("var(--"),ole=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,sle=(t,e)=>e&&typeof t=="number"?e.transform(t):t,sg=(t,e,n)=>Math.min(Math.max(n,t),e),eu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kh={...eu,transform:t=>sg(0,1,t)},Hp={...eu,default:1},Vh=t=>Math.round(t*1e5)/1e5,Ky=/(-)?([\d]*\.?[\d])+/g,k_=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ale=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function tm(t){return typeof t=="string"}const nm=t=>({test:e=>tm(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Al=nm("deg"),Hs=nm("%"),lt=nm("px"),lle=nm("vh"),gle=nm("vw"),XJ={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},JJ={...eu,transform:Math.round},V_={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:Al,rotateX:Al,rotateY:Al,rotateZ:Al,scale:Hp,scaleX:Hp,scaleY:Hp,scaleZ:Hp,skew:Al,skewX:Al,skewY:Al,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:kh,originX:XJ,originY:XJ,originZ:lt,zIndex:JJ,fillOpacity:kh,strokeOpacity:kh,numOctaves:JJ};function Mk(t,e,n,i){const{style:r,vars:o,transform:s,transformOrigin:a}=t;let l=!1,g=!1,u=!0;for(const d in e){const h=e[d];if(R_(d)){o[d]=h;continue}const f=V_[d],A=sle(h,f);if(qc.has(d)){if(l=!0,s[d]=A,!u)continue;h!==(f.default||0)&&(u=!1)}else d.startsWith("origin")?(g=!0,a[d]=A):r[d]=A}if(e.transform||(l||i?r.transform=rle(t.transform,n,u,i):r.transform&&(r.transform="none")),g){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;r.transformOrigin=`${d} ${h} ${f}`}}const Tk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function w_(t,e,n){for(const i in e)!Sr(e[i])&&!G_(i,n)&&(t[i]=e[i])}function cle({transformTemplate:t},e,n){return m.useMemo(()=>{const i=Tk();return Mk(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function ule(t,e,n){const i=t.style||{},r={};return w_(r,i,t),Object.assign(r,cle(t,e,n)),t.transformValues?t.transformValues(r):r}function dle(t,e,n){const i={},r=ule(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const Ile=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function g0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ile.has(t)}let W_=t=>!g0(t);function Cle(t){t&&(W_=e=>e.startsWith("on")?!g0(e):t(e))}try{Cle(require("@emotion/is-prop-valid").default)}catch{}function hle(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(W_(r)||n===!0&&g0(r)||!e&&!g0(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function EJ(t,e,n){return typeof t=="string"?t:lt.transform(e+n*t)}function fle(t,e,n){const i=EJ(e,t.x,t.width),r=EJ(n,t.y,t.height);return`${i} ${r}`}const mle={offset:"stroke-dashoffset",array:"stroke-dasharray"},ple={offset:"strokeDashoffset",array:"strokeDasharray"};function Ale(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?mle:ple;t[o.offset]=lt.transform(-i);const s=lt.transform(e),a=lt.transform(n);t[o.array]=`${s} ${a}`}function Lk(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...g},u,d,h){if(Mk(t,g,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:A,dimensions:p}=t;f.transform&&(p&&(A.transform=f.transform),delete f.transform),p&&(r!==void 0||o!==void 0||A.transform)&&(A.transformOrigin=fle(p,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),s!==void 0&&Ale(f,s,a,l,!1)}const x_=()=>({...Tk(),attrs:{}}),_k=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ble(t,e,n,i){const r=m.useMemo(()=>{const o=x_();return Lk(o,e,{enableHardwareAcceleration:!1},_k(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};w_(o,t.style,t),r.style={...o,...r.style}}return r}function yle(t=!1){return(n,i,r,{latestValues:o},s)=>{const l=(Fk(n)?ble:dle)(i,o,s,n),u={...hle(i,typeof n=="string",t),...l,ref:r},{children:d}=i,h=m.useMemo(()=>Sr(d)?d.get():d,[d]);return m.createElement(n,{...u,children:h})}}function X_(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const J_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E_(t,e,n,i){X_(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(J_.has(r)?r:Ek(r),e.attrs[r])}function Dk(t,e){const{style:n}=t,i={};for(const r in n)(Sr(n[r])||e.style&&Sr(e.style[r])||G_(r,t))&&(i[r]=n[r]);return i}function H_(t,e){const n=Dk(t,e);for(const i in t)if(Sr(t[i])||Sr(e[i])){const r=em.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function Kk(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function N_(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const c0=t=>Array.isArray(t),vle=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Sle=t=>c0(t)?t[t.length-1]||0:t;function sb(t){const e=Sr(t)?t.get():t;return vle(e)?e.toValue():e}function Zle({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const s={latestValues:Gle(i,r,o,t),renderState:e()};return n&&(s.mount=a=>n(i,a,s)),s}const Y_=t=>(e,n)=>{const i=m.useContext(Ty),r=m.useContext(qf),o=()=>Zle(t,e,i,r);return n?o():N_(o)};function Gle(t,e,n,i){const r={},o=i(t,{});for(const h in o)r[h]=sb(o[h]);let{initial:s,animate:a}=t;const l=Dy(t),g=S_(t);e&&g&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const d=u?a:s;return d&&typeof d!="boolean"&&!_y(d)&&(Array.isArray(d)?d:[d]).forEach(f=>{const A=Kk(t,f);if(!A)return;const{transitionEnd:p,transition:y,...v}=A;for(const S in v){let Z=v[S];if(Array.isArray(Z)){const R=u?Z.length-1:0;Z=Z[R]}Z!==null&&(r[S]=Z)}for(const S in p)r[S]=p[S]}),r}const _n=t=>t;class HJ{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Ble(t){let e=new HJ,n=new HJ,i=0,r=!1,o=!1;const s=new WeakSet,a={schedule:(l,g=!1,u=!1)=>{const d=u&&r,h=d?e:n;return g&&s.add(l),h.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let g=0;g<i;g++){const u=e.order[g];u(l),s.has(u)&&(a.schedule(u),t())}r=!1,o&&(o=!1,a.process(l))}};return a}const Np=["prepare","read","update","preRender","render","postRender"],Rle=40;function kle(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Np.reduce((d,h)=>(d[h]=Ble(()=>n=!0),d),{}),s=d=>o[d].process(r),a=()=>{const d=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(d-r.timestamp,Rle),1),r.timestamp=d,r.isProcessing=!0,Np.forEach(s),r.isProcessing=!1,n&&e&&(i=!1,t(a))},l=()=>{n=!0,i=!0,r.isProcessing||t(a)};return{schedule:Np.reduce((d,h)=>{const f=o[h];return d[h]=(A,p=!1,y=!1)=>(n||l(),f.schedule(A,p,y)),d},{}),cancel:d=>Np.forEach(h=>o[h].cancel(d)),state:r,steps:o}}const{schedule:hn,cancel:La,state:Hi,steps:YZ}=kle(typeof requestAnimationFrame<"u"?requestAnimationFrame:_n,!0),Vle={useVisualState:Y_({scrapeMotionValuesFromProps:H_,createRenderState:x_,onMount:(t,e,{renderState:n,latestValues:i})=>{hn.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),hn.render(()=>{Lk(n,i,{enableHardwareAcceleration:!1},_k(e.tagName),t.transformTemplate),E_(e,n)})}})},wle={useVisualState:Y_({scrapeMotionValuesFromProps:Dk,createRenderState:Tk})};function Wle(t,{forwardMotionProps:e=!1},n,i){return{...Fk(t)?Vle:wle,preloadedFeatures:n,useRender:yle(e),createVisualElement:i,Component:t}}function ka(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const F_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function zy(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const xle=t=>e=>F_(e)&&t(e,zy(e));function xa(t,e,n,i){return ka(t,e,xle(n),i)}const Xle=(t,e)=>n=>e(t(n)),Ol=(...t)=>t.reduce(Xle);function M_(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const NJ=M_("dragHorizontal"),YJ=M_("dragVertical");function T_(t){let e=!1;if(t==="y")e=YJ();else if(t==="x")e=NJ();else{const n=NJ(),i=YJ();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function L_(){const t=T_(!0);return t?(t(),!1):!0}class mg{constructor(e){this.isMounted=!1,this.node=e}update(){}}function FJ(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,s)=>{if(o.pointerType==="touch"||L_())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&hn.update(()=>a[i](o,s))};return xa(t.current,n,r,{passive:!t.getProps()[i]})}class Jle extends mg{mount(){this.unmount=Ol(FJ(this.node,!0),FJ(this.node,!1))}unmount(){}}class Ele extends mg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ol(ka(this.node.current,"focus",()=>this.onFocus()),ka(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const __=(t,e)=>e?t===e?!0:__(t,e.parentElement):!1;function FZ(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,zy(n))}class Hle extends mg{constructor(){super(...arguments),this.removeStartListeners=_n,this.removeEndListeners=_n,this.removeAccessibleListeners=_n,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=xa(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:g,onTapCancel:u,globalTapTarget:d}=this.node.getProps();hn.update(()=>{!d&&!__(this.node.current,a.target)?u&&u(a,l):g&&g(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),s=xa(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Ol(o,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||FZ("up",(l,g)=>{const{onTap:u}=this.node.getProps();u&&hn.update(()=>u(l,g))})};this.removeEndListeners(),this.removeEndListeners=ka(this.node.current,"keyup",s),FZ("down",(a,l)=>{this.startPress(a,l)})},n=ka(this.node.current,"keydown",e),i=()=>{this.isPressing&&FZ("cancel",(o,s)=>this.cancelPress(o,s))},r=ka(this.node.current,"blur",i);this.removeAccessibleListeners=Ol(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&hn.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!L_()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&hn.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=xa(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ka(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ol(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const RR=new WeakMap,MZ=new WeakMap,Nle=t=>{const e=RR.get(t.target);e&&e(t)},Yle=t=>{t.forEach(Nle)};function Fle({root:t,...e}){const n=t||document;MZ.has(n)||MZ.set(n,{});const i=MZ.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Yle,{root:t,...e})),i[r]}function Mle(t,e,n){const i=Fle(e);return RR.set(t,n),i.observe(t),()=>{RR.delete(t),i.unobserve(t)}}const Tle={some:0,all:1};class Lle extends mg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Tle[r]},a=l=>{const{isIntersecting:g}=l;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=g?u:d;h&&h(l)};return Mle(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_le(e,n))&&this.startObserver()}unmount(){}}function _le({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Dle={inView:{Feature:Lle},tap:{Feature:Hle},focus:{Feature:Ele},hover:{Feature:Jle}};function D_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Kle(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function zle(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Py(t,e,n){const i=t.getProps();return Kk(i,e,n!==void 0?n:i.custom,Kle(t),zle(t))}let Ple=_n,zk=_n;const Ql=t=>t*1e3,Xa=t=>t/1e3,Ule={current:!1},K_=t=>Array.isArray(t)&&typeof t[0]=="number";function z_(t){return!!(!t||typeof t=="string"&&P_[t]||K_(t)||Array.isArray(t)&&t.every(z_))}const oh=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,P_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oh([0,.65,.55,1]),circOut:oh([.55,0,1,.45]),backIn:oh([.31,.01,.66,-.59]),backOut:oh([.33,1.53,.69,.99])};function U_(t){if(t)return K_(t)?oh(t):Array.isArray(t)?t.map(U_):P_[t]}function jle(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const g={[e]:n};l&&(g.offset=l);const u=U_(a);return Array.isArray(u)&&(g.easing=u),t.animate(g,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function Ole(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const j_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Qle=1e-7,$le=12;function qle(t,e,n,i,r){let o,s,a=0;do s=e+(n-e)/2,o=j_(s,i,r)-t,o>0?n=s:e=s;while(Math.abs(o)>Qle&&++a<$le);return s}function im(t,e,n,i){if(t===e&&n===i)return _n;const r=o=>qle(o,0,1,t,n);return o=>o===0||o===1?o:j_(r(o),e,i)}const ege=im(.42,0,1,1),tge=im(0,0,.58,1),O_=im(.42,0,.58,1),nge=t=>Array.isArray(t)&&typeof t[0]!="number",Q_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$_=t=>e=>1-t(1-e),Pk=t=>1-Math.sin(Math.acos(t)),q_=$_(Pk),ige=Q_(Pk),e3=im(.33,1.53,.69,.99),Uk=$_(e3),rge=Q_(Uk),oge=t=>(t*=2)<1?.5*Uk(t):.5*(2-Math.pow(2,-10*(t-1))),sge={linear:_n,easeIn:ege,easeInOut:O_,easeOut:tge,circIn:Pk,circInOut:ige,circOut:q_,backIn:Uk,backInOut:rge,backOut:e3,anticipate:oge},MJ=t=>{if(Array.isArray(t)){zk(t.length===4);const[e,n,i,r]=t;return im(e,n,i,r)}else if(typeof t=="string")return sge[t];return t},jk=(t,e)=>n=>!!(tm(n)&&ale.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),t3=(t,e,n)=>i=>{if(!tm(i))return i;const[r,o,s,a]=i.match(Ky);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},age=t=>sg(0,255,t),TZ={...eu,transform:t=>Math.round(age(t))},cc={test:jk("rgb","red"),parse:t3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+TZ.transform(t)+", "+TZ.transform(e)+", "+TZ.transform(n)+", "+Vh(kh.transform(i))+")"};function lge(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const kR={test:jk("#"),parse:lge,transform:cc.transform},pd={test:jk("hsl","hue"),parse:t3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Hs.transform(Vh(e))+", "+Hs.transform(Vh(n))+", "+Vh(kh.transform(i))+")"},Ui={test:t=>cc.test(t)||kR.test(t)||pd.test(t),parse:t=>cc.test(t)?cc.parse(t):pd.test(t)?pd.parse(t):kR.parse(t),transform:t=>tm(t)?t:t.hasOwnProperty("red")?cc.transform(t):pd.transform(t)},Xn=(t,e,n)=>-n*t+n*e+t;function LZ(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gge({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,s=0;if(!e)r=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=LZ(l,a,t+1/3),o=LZ(l,a,t),s=LZ(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:i}}const _Z=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},cge=[kR,cc,pd],uge=t=>cge.find(e=>e.test(t));function TJ(t){const e=uge(t);let n=e.parse(t);return e===pd&&(n=gge(n)),n}const n3=(t,e)=>{const n=TJ(t),i=TJ(e),r={...n};return o=>(r.red=_Z(n.red,i.red,o),r.green=_Z(n.green,i.green,o),r.blue=_Z(n.blue,i.blue,o),r.alpha=Xn(n.alpha,i.alpha,o),cc.transform(r))};function dge(t){var e,n;return isNaN(t)&&tm(t)&&(((e=t.match(Ky))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(k_))===null||n===void 0?void 0:n.length)||0)>0}const i3={regex:ole,countKey:"Vars",token:"${v}",parse:_n},r3={regex:k_,countKey:"Colors",token:"${c}",parse:Ui.parse},o3={regex:Ky,countKey:"Numbers",token:"${n}",parse:eu.parse};function DZ(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function u0(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&DZ(n,i3),DZ(n,r3),DZ(n,o3),n}function s3(t){return u0(t).values}function a3(t){const{values:e,numColors:n,numVars:i,tokenised:r}=u0(t),o=e.length;return s=>{let a=r;for(let l=0;l<o;l++)l<i?a=a.replace(i3.token,s[l]):l<i+n?a=a.replace(r3.token,Ui.transform(s[l])):a=a.replace(o3.token,Vh(s[l]));return a}}const Ige=t=>typeof t=="number"?0:t;function Cge(t){const e=s3(t);return a3(t)(e.map(Ige))}const ag={test:dge,parse:s3,createTransformer:a3,getAnimatableNone:Cge},l3=(t,e)=>n=>`${n>0?e:t}`;function g3(t,e){return typeof t=="number"?n=>Xn(t,e,n):Ui.test(t)?n3(t,e):t.startsWith("var(")?l3(t,e):u3(t,e)}const c3=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,s)=>g3(o,e[s]));return o=>{for(let s=0;s<i;s++)n[s]=r[s](o);return n}},hge=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=g3(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},u3=(t,e)=>{const n=ag.createTransformer(e),i=u0(t),r=u0(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Ol(c3(i.values,r.values),n):l3(t,e)},vf=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},LJ=(t,e)=>n=>Xn(t,e,n);function fge(t){return typeof t=="number"?LJ:typeof t=="string"?Ui.test(t)?n3:u3:Array.isArray(t)?c3:typeof t=="object"?hge:LJ}function mge(t,e,n){const i=[],r=n||fge(t[0]),o=t.length-1;for(let s=0;s<o;s++){let a=r(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||_n:e;a=Ol(l,a)}i.push(a)}return i}function d3(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(zk(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=mge(e,i,r),a=s.length,l=g=>{let u=0;if(a>1)for(;u<t.length-2&&!(g<t[u+1]);u++);const d=vf(t[u],t[u+1],g);return s[u](d)};return n?g=>l(sg(t[0],t[o-1],g)):l}function pge(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=vf(0,e,i);t.push(Xn(n,1,r))}}function Age(t){const e=[0];return pge(e,t.length-1),e}function bge(t,e){return t.map(n=>n*e)}function yge(t,e){return t.map(()=>e||O_).splice(0,t.length-1)}function d0({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=nge(i)?i.map(MJ):MJ(i),o={done:!1,value:e[0]},s=bge(n&&n.length===e.length?n:Age(e),t),a=d3(s,e,{ease:Array.isArray(r)?r:yge(e,r)});return{calculatedDuration:t,next:l=>(o.value=a(l),o.done=l>=t,o)}}function I3(t,e){return e?t*(1e3/e):0}const vge=5;function C3(t,e,n){const i=Math.max(e-vge,0);return I3(n-t(i),e-i)}const KZ=.001,Sge=.01,_J=10,Zge=.05,Gge=1;function Bge({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o;Ple(t<=Ql(_J));let s=1-e;s=sg(Zge,Gge,s),t=sg(Sge,_J,Xa(t)),s<1?(r=g=>{const u=g*s,d=u*t,h=u-n,f=VR(g,s),A=Math.exp(-d);return KZ-h/f*A},o=g=>{const d=g*s*t,h=d*n+n,f=Math.pow(s,2)*Math.pow(g,2)*t,A=Math.exp(-d),p=VR(Math.pow(g,2),s);return(-r(g)+KZ>0?-1:1)*((h-f)*A)/p}):(r=g=>{const u=Math.exp(-g*t),d=(g-n)*t+1;return-KZ+u*d},o=g=>{const u=Math.exp(-g*t),d=(n-g)*(t*t);return u*d});const a=5/t,l=kge(r,o,a);if(t=Ql(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const g=Math.pow(l,2)*i;return{stiffness:g,damping:s*2*Math.sqrt(i*g),duration:t}}}const Rge=12;function kge(t,e,n){let i=n;for(let r=1;r<Rge;r++)i=i-t(i)/e(i);return i}function VR(t,e){return t*Math.sqrt(1-e*e)}const Vge=["duration","bounce"],wge=["stiffness","damping","mass"];function DJ(t,e){return e.some(n=>t[n]!==void 0)}function Wge(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!DJ(t,wge)&&DJ(t,Vge)){const n=Bge(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function h3({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],s={done:!1,value:r},{stiffness:a,damping:l,mass:g,duration:u,velocity:d,isResolvedFromDuration:h}=Wge({...i,velocity:-Xa(i.velocity||0)}),f=d||0,A=l/(2*Math.sqrt(a*g)),p=o-r,y=Xa(Math.sqrt(a/g)),v=Math.abs(p)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let S;if(A<1){const Z=VR(y,A);S=R=>{const W=Math.exp(-A*y*R);return o-W*((f+A*y*p)/Z*Math.sin(Z*R)+p*Math.cos(Z*R))}}else if(A===1)S=Z=>o-Math.exp(-y*Z)*(p+(f+y*p)*Z);else{const Z=y*Math.sqrt(A*A-1);S=R=>{const W=Math.exp(-A*y*R),B=Math.min(Z*R,300);return o-W*((f+A*y*p)*Math.sinh(B)+Z*p*Math.cosh(B))/Z}}return{calculatedDuration:h&&u||null,next:Z=>{const R=S(Z);if(h)s.done=Z>=u;else{let W=f;Z!==0&&(A<1?W=C3(S,Z,R):W=0);const B=Math.abs(W)<=n,k=Math.abs(o-R)<=e;s.done=B&&k}return s.value=s.done?o:R,s}}}function KJ({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:g=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=w=>a!==void 0&&w<a||l!==void 0&&w>l,A=w=>a===void 0?l:l===void 0||Math.abs(a-w)<Math.abs(l-w)?a:l;let p=n*e;const y=d+p,v=s===void 0?y:s(y);v!==y&&(p=v-d);const S=w=>-p*Math.exp(-w/i),Z=w=>v+S(w),R=w=>{const J=S(w),X=Z(w);h.done=Math.abs(J)<=g,h.value=h.done?v:X};let W,B;const k=w=>{f(h.value)&&(W=w,B=h3({keyframes:[h.value,A(h.value)],velocity:C3(Z,w,h.value),damping:r,stiffness:o,restDelta:g,restSpeed:u}))};return k(0),{calculatedDuration:null,next:w=>{let J=!1;return!B&&W===void 0&&(J=!0,R(w),k(w)),W!==void 0&&w>W?B.next(w-W):(!J&&R(w),h)}}}const xge=t=>{const e=({timestamp:n})=>t(n);return{start:()=>hn.update(e,!0),stop:()=>La(e),now:()=>Hi.isProcessing?Hi.timestamp:performance.now()}},zJ=2e4;function PJ(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<zJ;)e+=n,i=t.next(e);return e>=zJ?1/0:e}const Xge={decay:KJ,inertia:KJ,tween:d0,keyframes:d0,spring:h3};function I0({autoplay:t=!0,delay:e=0,driver:n=xge,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:g,onComplete:u,onUpdate:d,...h}){let f=1,A=!1,p,y;const v=()=>{y=new Promise(se=>{p=se})};v();let S;const Z=Xge[r]||d0;let R;Z!==d0&&typeof i[0]!="number"&&(R=d3([0,100],i,{clamp:!1}),i=[0,100]);const W=Z({...h,keyframes:i});let B;a==="mirror"&&(B=Z({...h,keyframes:[...i].reverse(),velocity:-(h.velocity||0)}));let k="idle",w=null,J=null,X=null;W.calculatedDuration===null&&o&&(W.calculatedDuration=PJ(W));const{calculatedDuration:Y}=W;let z=1/0,P=1/0;Y!==null&&(z=Y+s,P=z*(o+1)-s);let $=0;const oe=se=>{if(J===null)return;f>0&&(J=Math.min(J,se)),f<0&&(J=Math.min(se-P/f,J)),w!==null?$=w:$=Math.round(se-J)*f;const E=$-e*(f>=0?1:-1),M=f>=0?E<0:E>P;$=Math.max(E,0),k==="finished"&&w===null&&($=P);let T=$,U=W;if(o){const Ie=Math.min($,P)/z;let xe=Math.floor(Ie),Xe=Ie%1;!Xe&&Ie>=1&&(Xe=1),Xe===1&&xe--,xe=Math.min(xe,o+1),!!(xe%2)&&(a==="reverse"?(Xe=1-Xe,s&&(Xe-=s/z)):a==="mirror"&&(U=B)),T=sg(0,1,Xe)*z}const H=M?{done:!1,value:i[0]}:U.next(T);R&&(H.value=R(H.value));let{done:ie}=H;!M&&Y!==null&&(ie=f>=0?$>=P:$<=0);const Ae=w===null&&(k==="finished"||k==="running"&&ie);return d&&d(H.value),Ae&&_(),H},q=()=>{S&&S.stop(),S=void 0},K=()=>{k="idle",q(),p(),v(),J=X=null},_=()=>{k="finished",u&&u(),q(),p()},de=()=>{if(A)return;S||(S=n(oe));const se=S.now();l&&l(),w!==null?J=se-w:(!J||k==="finished")&&(J=se),k==="finished"&&v(),X=J,w=null,k="running",S.start()};t&&de();const ne={then(se,E){return y.then(se,E)},get time(){return Xa($)},set time(se){se=Ql(se),$=se,w!==null||!S||f===0?w=se:J=S.now()-se/f},get duration(){const se=W.calculatedDuration===null?PJ(W):W.calculatedDuration;return Xa(se)},get speed(){return f},set speed(se){se===f||!S||(f=se,ne.time=Xa($))},get state(){return k},play:de,pause:()=>{k="paused",w=$},stop:()=>{A=!0,k!=="idle"&&(k="idle",g&&g(),K())},cancel:()=>{X!==null&&oe(X),K()},complete:()=>{k="finished"},sample:se=>(J=0,oe(se))};return ne}function Jge(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ege=Jge(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Hge=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Yp=10,Nge=2e4,Yge=(t,e)=>e.type==="spring"||t==="backgroundColor"||!z_(e.ease);function Fge(t,e,{onUpdate:n,onComplete:i,...r}){if(!(Ege()&&Hge.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let s=!1,a,l,g=!1;const u=()=>{l=new Promise(Z=>{a=Z})};u();let{keyframes:d,duration:h=300,ease:f,times:A}=r;if(Yge(e,r)){const Z=I0({...r,repeat:0,delay:0});let R={done:!1,value:d[0]};const W=[];let B=0;for(;!R.done&&B<Nge;)R=Z.sample(B),W.push(R.value),B+=Yp;A=void 0,d=W,h=B-Yp,f="linear"}const p=jle(t.owner.current,e,d,{...r,duration:h,ease:f,times:A}),y=()=>{g=!1,p.cancel()},v=()=>{g=!0,hn.update(y),a(),u()};return p.onfinish=()=>{g||(t.set(Ole(d,r)),i&&i(),v())},{then(Z,R){return l.then(Z,R)},attachTimeline(Z){return p.timeline=Z,p.onfinish=null,_n},get time(){return Xa(p.currentTime||0)},set time(Z){p.currentTime=Ql(Z)},get speed(){return p.playbackRate},set speed(Z){p.playbackRate=Z},get duration(){return Xa(h)},play:()=>{s||(p.play(),La(y))},pause:()=>p.pause(),stop:()=>{if(s=!0,p.playState==="idle")return;const{currentTime:Z}=p;if(Z){const R=I0({...r,autoplay:!1});t.setWithVelocity(R.sample(Z-Yp).value,R.sample(Z).value,Yp)}v()},complete:()=>{g||p.finish()},cancel:v}}function Mge({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:_n,pause:_n,stop:_n,then:o=>(o(),Promise.resolve()),cancel:_n,complete:_n});return e?I0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const Tge={type:"spring",stiffness:500,damping:25,restSpeed:10},Lge=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_ge={type:"keyframes",duration:.8},Dge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kge=(t,{keyframes:e})=>e.length>2?_ge:qc.has(t)?t.startsWith("scale")?Lge(e[1]):Tge:Dge,wR=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ag.test(e)||e==="0")&&!e.startsWith("url(")),zge=new Set(["brightness","contrast","saturate","opacity"]);function Pge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Ky)||[];if(!i)return t;const r=n.replace(i,"");let o=zge.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const Uge=/([a-z-]*)\(.*?\)/g,WR={...ag,getAnimatableNone:t=>{const e=t.match(Uge);return e?e.map(Pge).join(" "):t}},jge={...V_,color:Ui,backgroundColor:Ui,outlineColor:Ui,fill:Ui,stroke:Ui,borderColor:Ui,borderTopColor:Ui,borderRightColor:Ui,borderBottomColor:Ui,borderLeftColor:Ui,filter:WR,WebkitFilter:WR},Ok=t=>jge[t];function f3(t,e){let n=Ok(t);return n!==WR&&(n=ag),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const m3=t=>/^0[^.\s]+$/.test(t);function Oge(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||m3(t)}function Qge(t,e,n,i){const r=wR(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=i.from!==void 0?i.from:t.get();let a;const l=[];for(let g=0;g<o.length;g++)o[g]===null&&(o[g]=g===0?s:o[g-1]),Oge(o[g])&&l.push(g),typeof o[g]=="string"&&o[g]!=="none"&&o[g]!=="0"&&(a=o[g]);if(r&&l.length&&a)for(let g=0;g<l.length;g++){const u=l[g];o[u]=f3(e,a)}return o}function $ge({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:g,...u}){return!!Object.keys(u).length}function Qk(t,e){return t[e]||t.default||t}const qge={skipAnimations:!1},$k=(t,e,n,i={})=>r=>{const o=Qk(i,t)||{},s=o.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Ql(s);const l=Qge(e,t,n,o),g=l[0],u=l[l.length-1],d=wR(t,g),h=wR(t,u);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:A=>{e.set(A),o.onUpdate&&o.onUpdate(A)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if($ge(o)||(f={...f,...Kge(t,f)}),f.duration&&(f.duration=Ql(f.duration)),f.repeatDelay&&(f.repeatDelay=Ql(f.repeatDelay)),!d||!h||Ule.current||o.type===!1||qge.skipAnimations)return Mge(f);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=Fge(e,t,f);if(A)return A}return I0(f)};function C0(t){return!!(Sr(t)&&t.add)}const p3=t=>/^\-?\d*\.?\d+$/.test(t);function qk(t,e){t.indexOf(e)===-1&&t.push(e)}function eV(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tV{constructor(){this.subscriptions=[]}add(e){return qk(this.subscriptions,e),()=>eV(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const s=this.subscriptions[o];s&&s(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ece=t=>!isNaN(parseFloat(t));class tce{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:s}=Hi;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,hn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>hn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=ece(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tV);const i=this.events[e].add(n);return e==="change"?()=>{i(),hn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?I3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function aI(t,e){return new tce(t,e)}const A3=t=>e=>e.test(t),nce={test:t=>t==="auto",parse:t=>t},b3=[eu,lt,Hs,Al,gle,lle,nce],GC=t=>b3.find(A3(t)),ice=[...b3,Ui,ag],rce=t=>ice.find(A3(t));function oce(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,aI(n))}function sce(t,e){const n=Py(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const s in o){const a=Sle(o[s]);oce(t,s,a)}}function ace(t,e,n){var i,r;const o=Object.keys(e).filter(a=>!t.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],g=e[l];let u=null;Array.isArray(g)&&(u=g[0]),u===null&&(u=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),u!=null&&(typeof u=="string"&&(p3(u)||m3(u))?u=parseFloat(u):!rce(u)&&ag.test(g)&&(u=f3(l,g)),t.addValue(l,aI(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function lce(t,e){return e?(e[t]||e.default||e).from:void 0}function gce(t,e,n){const i={};for(const r in t){const o=lce(r,e);if(o!==void 0)i[r]=o;else{const s=n.getValue(r);s&&(i[r]=s.get())}}return i}function cce({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function uce(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function y3(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:s,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(o=i);const g=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const d in a){const h=t.getValue(d),f=a[d];if(!h||f===void 0||u&&cce(u,d))continue;const A={delay:n,elapsed:0,...Qk(o||{},d)};if(window.HandoffAppearAnimations){const v=t.getProps()[v_];if(v){const S=window.HandoffAppearAnimations(v,d,h,hn);S!==null&&(A.elapsed=S,A.isHandoff=!0)}}let p=!A.isHandoff&&!uce(h,f);if(A.type==="spring"&&(h.getVelocity()||A.velocity)&&(p=!1),h.animation&&(p=!1),p)continue;h.start($k(d,h,f,t.shouldReduceMotion&&qc.has(d)?{type:!1}:A));const y=h.animation;C0(l)&&(l.add(d),y.then(()=>l.remove(d))),g.push(y)}return s&&Promise.all(g).then(()=>{s&&sce(t,s)}),g}function xR(t,e,n={}){const i=Py(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(y3(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:g=0,staggerChildren:u,staggerDirection:d}=r;return dce(t,e,g+l,u,d,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,g]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>g())}else return Promise.all([o(),s(n.delay)])}function dce(t,e,n=0,i=0,r=1,o){const s=[],a=(t.variantChildren.size-1)*i,l=r===1?(g=0)=>g*i:(g=0)=>a-g*i;return Array.from(t.variantChildren).sort(Ice).forEach((g,u)=>{g.notify("AnimationStart",e),s.push(xR(g,e,{...o,delay:n+l(u)}).then(()=>g.notify("AnimationComplete",e)))}),Promise.all(s)}function Ice(t,e){return t.sortNodePosition(e)}function Cce(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>xR(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=xR(t,e,n);else{const r=typeof e=="function"?Py(t,e,n.custom):e;i=Promise.all(y3(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const hce=[...Hk].reverse(),fce=Hk.length;function mce(t){return e=>Promise.all(e.map(({animation:n,options:i})=>Cce(t,n,i)))}function pce(t){let e=mce(t);const n=bce();let i=!0;const r=(l,g)=>{const u=Py(t,g);if(u){const{transition:d,transitionEnd:h,...f}=u;l={...l,...f,...h}}return l};function o(l){e=l(t)}function s(l,g){const u=t.getProps(),d=t.getVariantContext(!0)||{},h=[],f=new Set;let A={},p=1/0;for(let v=0;v<fce;v++){const S=hce[v],Z=n[S],R=u[S]!==void 0?u[S]:d[S],W=bf(R),B=S===g?Z.isActive:null;B===!1&&(p=v);let k=R===d[S]&&R!==u[S]&&W;if(k&&i&&t.manuallyAnimateOnMount&&(k=!1),Z.protectedKeys={...A},!Z.isActive&&B===null||!R&&!Z.prevProp||_y(R)||typeof R=="boolean")continue;let J=Ace(Z.prevProp,R)||S===g&&Z.isActive&&!k&&W||v>p&&W,X=!1;const Y=Array.isArray(R)?R:[R];let z=Y.reduce(r,{});B===!1&&(z={});const{prevResolvedValues:P={}}=Z,$={...P,...z},oe=q=>{J=!0,f.has(q)&&(X=!0,f.delete(q)),Z.needsAnimating[q]=!0};for(const q in $){const K=z[q],_=P[q];if(A.hasOwnProperty(q))continue;let de=!1;c0(K)&&c0(_)?de=!D_(K,_):de=K!==_,de?K!==void 0?oe(q):f.add(q):K!==void 0&&f.has(q)?oe(q):Z.protectedKeys[q]=!0}Z.prevProp=R,Z.prevResolvedValues=z,Z.isActive&&(A={...A,...z}),i&&t.blockInitialAnimation&&(J=!1),J&&(!k||X)&&h.push(...Y.map(q=>({animation:q,options:{type:S,...l}})))}if(f.size){const v={};f.forEach(S=>{const Z=t.getBaseTarget(S);Z!==void 0&&(v[S]=Z)}),h.push({animation:v})}let y=!!h.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(h):Promise.resolve()}function a(l,g,u){var d;if(n[l].isActive===g)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var A;return(A=f.animationState)===null||A===void 0?void 0:A.setActive(l,g)}),n[l].isActive=g;const h=s(u,l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function Ace(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!D_(e,t):!1}function Fg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bce(){return{animate:Fg(!0),whileInView:Fg(),whileHover:Fg(),whileTap:Fg(),whileDrag:Fg(),whileFocus:Fg(),exit:Fg()}}class yce extends mg{constructor(e){super(e),e.animationState||(e.animationState=pce(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),_y(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let vce=0;class Sce extends mg{constructor(){super(...arguments),this.id=vce++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Zce={animation:{Feature:yce},exit:{Feature:Sce}},UJ=(t,e)=>Math.abs(t-e);function Gce(t,e){const n=UJ(t.x,e.x),i=UJ(t.y,e.y);return Math.sqrt(n**2+i**2)}class v3{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=PZ(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=Gce(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:A}=d,{timestamp:p}=Hi;this.history.push({...A,timestamp:p});const{onStart:y,onMove:v}=this.handlers;h||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=zZ(h,this.transformPagePoint),hn.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:A,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=PZ(d.type==="pointercancel"?this.lastMoveEventInfo:zZ(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,y),A&&A(d,y)},!F_(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const s=zy(e),a=zZ(s,this.transformPagePoint),{point:l}=a,{timestamp:g}=Hi;this.history=[{...l,timestamp:g}];const{onSessionStart:u}=n;u&&u(e,PZ(a,this.history)),this.removeListeners=Ol(xa(this.contextWindow,"pointermove",this.handlePointerMove),xa(this.contextWindow,"pointerup",this.handlePointerUp),xa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),La(this.updatePoint)}}function zZ(t,e){return e?{point:e(t.point)}:t}function jJ(t,e){return{x:t.x-e.x,y:t.y-e.y}}function PZ({point:t},e){return{point:t,delta:jJ(t,S3(e)),offset:jJ(t,Bce(e)),velocity:Rce(e,.1)}}function Bce(t){return t[0]}function S3(t){return t[t.length-1]}function Rce(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=S3(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ql(e)));)n--;if(!i)return{x:0,y:0};const o=Xa(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const s={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function _r(t){return t.max-t.min}function XR(t,e=0,n=.01){return Math.abs(t-e)<=n}function OJ(t,e,n,i=.5){t.origin=i,t.originPoint=Xn(e.min,e.max,t.origin),t.scale=_r(n)/_r(e),(XR(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Xn(n.min,n.max,t.origin)-t.originPoint,(XR(t.translate)||isNaN(t.translate))&&(t.translate=0)}function wh(t,e,n,i){OJ(t.x,e.x,n.x,i?i.originX:void 0),OJ(t.y,e.y,n.y,i?i.originY:void 0)}function QJ(t,e,n){t.min=n.min+e.min,t.max=t.min+_r(e)}function kce(t,e,n){QJ(t.x,e.x,n.x),QJ(t.y,e.y,n.y)}function $J(t,e,n){t.min=e.min-n.min,t.max=t.min+_r(e)}function Wh(t,e,n){$J(t.x,e.x,n.x),$J(t.y,e.y,n.y)}function Vce(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Xn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Xn(n,t,i.max):Math.min(t,n)),t}function qJ(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function wce(t,{top:e,left:n,bottom:i,right:r}){return{x:qJ(t.x,n,r),y:qJ(t.y,e,i)}}function eE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Wce(t,e){return{x:eE(t.x,e.x),y:eE(t.y,e.y)}}function xce(t,e){let n=.5;const i=_r(t),r=_r(e);return r>i?n=vf(e.min,e.max-i,t.min):i>r&&(n=vf(t.min,t.max-r,e.min)),sg(0,1,n)}function Xce(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const JR=.35;function Jce(t=JR){return t===!1?t=0:t===!0&&(t=JR),{x:tE(t,"left","right"),y:tE(t,"top","bottom")}}function tE(t,e,n){return{min:nE(t,e),max:nE(t,n)}}function nE(t,e){return typeof t=="number"?t:t[e]||0}const iE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ad=()=>({x:iE(),y:iE()}),rE=()=>({min:0,max:0}),Qn=()=>({x:rE(),y:rE()});function ho(t){return[t("x"),t("y")]}function Z3({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Ece({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hce(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function UZ(t){return t===void 0||t===1}function ER({scale:t,scaleX:e,scaleY:n}){return!UZ(t)||!UZ(e)||!UZ(n)}function jg(t){return ER(t)||G3(t)||t.z||t.rotate||t.rotateX||t.rotateY}function G3(t){return oE(t.x)||oE(t.y)}function oE(t){return t&&t!=="0%"}function h0(t,e,n){const i=t-n,r=e*i;return n+r}function sE(t,e,n,i,r){return r!==void 0&&(t=h0(t,r,i)),h0(t,n,i)+e}function HR(t,e=0,n=1,i,r){t.min=sE(t.min,e,n,i,r),t.max=sE(t.max,e,n,i,r)}function B3(t,{x:e,y:n}){HR(t.x,e.translate,e.scale,e.originPoint),HR(t.y,n.translate,n.scale,n.originPoint)}function Nce(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,s;for(let a=0;a<r;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&bd(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,B3(t,s)),i&&jg(o.latestValues)&&bd(t,o.latestValues))}e.x=aE(e.x),e.y=aE(e.y)}function aE(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Sl(t,e){t.min=t.min+e,t.max=t.max+e}function lE(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,s=Xn(t.min,t.max,o);HR(t,e[n],e[i],s,e.scale)}const Yce=["x","scaleX","originX"],Fce=["y","scaleY","originY"];function bd(t,e){lE(t.x,e,Yce),lE(t.y,e,Fce)}function R3(t,e){return Z3(Hce(t.getBoundingClientRect(),e))}function Mce(t,e,n){const i=R3(t,n),{scroll:r}=e;return r&&(Sl(i.x,r.offset.x),Sl(i.y,r.offset.y)),i}const k3=({current:t})=>t?t.ownerDocument.defaultView:null,Tce=new WeakMap;class Lce{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zy(u,"page").point)},o=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:A}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=T_(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ho(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Hs.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const Z=S.layout.layoutBox[y];Z&&(v=_r(Z)*(parseFloat(v)/100))}}this.originPoint[y]=v}),A&&hn.update(()=>A(u,d),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:A,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=d;if(f&&this.currentDirection===null){this.currentDirection=_ce(y),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),p&&p(u,d)},a=(u,d)=>this.stop(u,d),l=()=>ho(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new v3(e,{onSessionStart:r,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:k3(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&hn.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Fp(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(s=Vce(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&md(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=wce(r.layoutBox,n):this.constraints=!1,this.elastic=Jce(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ho(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Xce(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!md(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Mce(i,r.root,this.visualElement.getTransformPagePoint());let s=Wce(r.layout.layoutBox,o);if(n){const a=n(Ece(s));this.hasMutatedConstraints=!!a,a&&(s=Z3(a))}return s}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},g=ho(u=>{if(!Fp(u,n,this.currentDirection))return;let d=l&&l[u]||{};s&&(d={min:0,max:0});const h=r?200:1e6,f=r?40:1e7,A={type:"inertia",velocity:i?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(u,A)});return Promise.all(g).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start($k(e,i,0,n))}stopAnimation(){ho(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ho(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ho(n=>{const{drag:i}=this.getProps();if(!Fp(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:s,max:a}=r.layout.layoutBox[n];o.set(e[n]-Xn(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!md(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ho(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();r[s]=xce({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ho(s=>{if(!Fp(s,e,null))return;const a=this.getAxisMotionValue(s),{min:l,max:g}=this.constraints[s];a.set(Xn(l,g,r[s]))})}addListeners(){if(!this.visualElement.current)return;Tce.set(this.visualElement,this);const e=this.visualElement.current,n=xa(e,"pointerdown",l=>{const{drag:g,dragListener:u=!0}=this.getProps();g&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();md(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const s=ka(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:g})=>{this.isDragging&&g&&(ho(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:s=JR,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Fp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _ce(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Dce extends mg{constructor(e){super(e),this.removeGroupControls=_n,this.removeListeners=_n,this.controls=new Lce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_n}unmount(){this.removeGroupControls(),this.removeListeners()}}const gE=t=>(e,n)=>{t&&hn.update(()=>t(e,n))};class Kce extends mg{constructor(){super(...arguments),this.removePointerDownListener=_n}onPointerDown(e){this.session=new v3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:gE(e),onStart:gE(n),onMove:i,onEnd:(o,s)=>{delete this.session,r&&hn.update(()=>r(o,s))}}}mount(){this.removePointerDownListener=xa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function V3(){const t=m.useContext(qf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=m.useId();return m.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}function zce(){return Pce(m.useContext(qf))}function Pce(t){return t===null?!0:t.isPresent}const ab={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const BC={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=cE(t,e.target.x),i=cE(t,e.target.y);return`${n}% ${i}%`}},Uce={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ag.parse(t);if(r.length>5)return i;const o=ag.createTransformer(t),s=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+s]/=a,r[1+s]/=l;const g=Xn(a,l,.5);return typeof r[2+s]=="number"&&(r[2+s]/=g),typeof r[3+s]=="number"&&(r[3+s]/=g),o(r)}};class jce extends gt.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;tle(Oce),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ab.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,s=i.projection;return s&&(s.isPresent=o,r||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||hn.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function w3(t){const[e,n]=V3(),i=m.useContext(Yk);return gt.createElement(jce,{...t,layoutGroup:i,switchLayoutGroup:m.useContext(Z_),isPresent:e,safeToRemove:n})}const Oce={borderRadius:{...BC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:BC,borderTopRightRadius:BC,borderBottomLeftRadius:BC,borderBottomRightRadius:BC,boxShadow:Uce},W3=["TopLeft","TopRight","BottomLeft","BottomRight"],Qce=W3.length,uE=t=>typeof t=="string"?parseFloat(t):t,dE=t=>typeof t=="number"||lt.test(t);function $ce(t,e,n,i,r,o){r?(t.opacity=Xn(0,n.opacity!==void 0?n.opacity:1,qce(i)),t.opacityExit=Xn(e.opacity!==void 0?e.opacity:1,0,eue(i))):o&&(t.opacity=Xn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let s=0;s<Qce;s++){const a=`border${W3[s]}Radius`;let l=IE(e,a),g=IE(n,a);if(l===void 0&&g===void 0)continue;l||(l=0),g||(g=0),l===0||g===0||dE(l)===dE(g)?(t[a]=Math.max(Xn(uE(l),uE(g),i),0),(Hs.test(g)||Hs.test(l))&&(t[a]+="%")):t[a]=g}(e.rotate||n.rotate)&&(t.rotate=Xn(e.rotate||0,n.rotate||0,i))}function IE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qce=x3(0,.5,q_),eue=x3(.5,.95,_n);function x3(t,e,n){return i=>i<t?0:i>e?1:n(vf(t,e,i))}function CE(t,e){t.min=e.min,t.max=e.max}function so(t,e){CE(t.x,e.x),CE(t.y,e.y)}function hE(t,e,n,i,r){return t-=e,t=h0(t,1/n,i),r!==void 0&&(t=h0(t,1/r,i)),t}function tue(t,e=0,n=1,i=.5,r,o=t,s=t){if(Hs.test(e)&&(e=parseFloat(e),e=Xn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=Xn(o.min,o.max,i);t===o&&(a-=e),t.min=hE(t.min,e,n,a,r),t.max=hE(t.max,e,n,a,r)}function fE(t,e,[n,i,r],o,s){tue(t,e[n],e[i],e[r],e.scale,o,s)}const nue=["x","scaleX","originX"],iue=["y","scaleY","originY"];function mE(t,e,n,i){fE(t.x,e,nue,n?n.x:void 0,i?i.x:void 0),fE(t.y,e,iue,n?n.y:void 0,i?i.y:void 0)}function pE(t){return t.translate===0&&t.scale===1}function X3(t){return pE(t.x)&&pE(t.y)}function rue(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function J3(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function AE(t){return _r(t.x)/_r(t.y)}class oue{constructor(){this.members=[]}add(e){qk(this.members,e),e.scheduleRender()}remove(e){if(eV(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bE(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:g,rotateY:u}=n;l&&(i+=`rotate(${l}deg) `),g&&(i+=`rotateX(${g}deg) `),u&&(i+=`rotateY(${u}deg) `)}const s=t.x.scale*e.x,a=t.y.scale*e.y;return(s!==1||a!==1)&&(i+=`scale(${s}, ${a})`),i||"none"}const sue=(t,e)=>t.depth-e.depth;class aue{constructor(){this.children=[],this.isDirty=!1}add(e){qk(this.children,e),this.isDirty=!0}remove(e){eV(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sue),this.isDirty=!1,this.children.forEach(e)}}function lue(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(La(i),t(o-e))};return hn.read(i,!0),()=>La(i)}function gue(t){window.MotionDebug&&window.MotionDebug.record(t)}function cue(t){return t instanceof SVGElement&&t.tagName!=="svg"}function uue(t,e,n){const i=Sr(t)?t:aI(t);return i.start($k("",i,e,n)),i.animation}const yE=["","X","Y","Z"],due={visibility:"hidden"},vE=1e3;let Iue=0;const Og={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function E3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(s={},a=e==null?void 0:e()){this.id=Iue++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Og.totalNodes=Og.resolvedTargetDeltas=Og.recalculatedProjection=0,this.nodes.forEach(fue),this.nodes.forEach(yue),this.nodes.forEach(vue),this.nodes.forEach(mue),gue(Og)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new aue)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new tV),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=cue(s),this.instance=s;const{layoutId:l,layout:g,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(g||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=lue(h,250),ab.hasAnimatedSinceResize&&(ab.hasAnimatedSinceResize=!1,this.nodes.forEach(ZE))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||g)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Rue,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),S=!this.targetLayout||!J3(this.targetLayout,A)||f,Z=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Z||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,Z);const R={...Qk(p,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else h||ZE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,La(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Sue),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SE);return}this.isUpdating||this.nodes.forEach(Aue),this.isUpdating=!1,this.nodes.forEach(bue),this.nodes.forEach(Cue),this.nodes.forEach(hue),this.clearAllSnapshots();const a=performance.now();Hi.delta=sg(0,1e3/60,a-Hi.timestamp),Hi.timestamp=a,Hi.isProcessing=!0,YZ.update.process(Hi),YZ.preRender.process(Hi),YZ.render.process(Hi),Hi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pue),this.sharedNodes.forEach(Zue)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!X3(this.projectionDelta),l=this.getTransformTemplate(),g=l?l(this.latestValues,""):void 0,u=g!==this.prevTransformTemplateValue;s&&(a||jg(this.latestValues)||u)&&(r(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),kue(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Qn();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(Sl(a.x,l.offset.x),Sl(a.y,l.offset.y)),a}removeElementScroll(s){const a=Qn();so(a,s);for(let l=0;l<this.path.length;l++){const g=this.path[l],{scroll:u,options:d}=g;if(g!==this.root&&u&&d.layoutScroll){if(u.isRoot){so(a,s);const{scroll:h}=this.root;h&&(Sl(a.x,-h.offset.x),Sl(a.y,-h.offset.y))}Sl(a.x,u.offset.x),Sl(a.y,u.offset.y)}}return a}applyTransform(s,a=!1){const l=Qn();so(l,s);for(let g=0;g<this.path.length;g++){const u=this.path[g];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&bd(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),jg(u.latestValues)&&bd(l,u.latestValues)}return jg(this.latestValues)&&bd(l,this.latestValues),l}removeTransform(s){const a=Qn();so(a,s);for(let l=0;l<this.path.length;l++){const g=this.path[l];if(!g.instance||!jg(g.latestValues))continue;ER(g.latestValues)&&g.updateSnapshot();const u=Qn(),d=g.measurePageBox();so(u,d),mE(a,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,u)}return jg(this.latestValues)&&mE(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==l;if(!(s||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Hi.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),Wh(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),so(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qn(),this.targetWithTransforms=Qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):so(this.target,this.layout.layoutBox),B3(this.target,this.targetDelta)):so(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),Wh(this.relativeTargetOrigin,this.target,f.target),so(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Og.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ER(this.parent.latestValues)||G3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let g=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(g=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Hi.timestamp&&(g=!1),g)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;so(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Nce(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:A}=a;if(!A){this.projectionTransform&&(this.projectionDelta=Ad(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ad(),this.projectionDeltaWithTransform=Ad());const p=this.projectionTransform;wh(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=bE(this.projectionDelta,this.treeScale),(this.projectionTransform!==p||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Og.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,g=l?l.latestValues:{},u={...this.latestValues},d=Ad();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Qn(),f=l?l.source:void 0,A=this.layout?this.layout.source:void 0,p=f!==A,y=this.getStack(),v=!y||y.members.length<=1,S=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(Bue));this.animationProgress=0;let Z;this.mixTargetDelta=R=>{const W=R/1e3;GE(d.x,s.x,W),GE(d.y,s.y,W),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gue(this.relativeTarget,this.relativeTargetOrigin,h,W),Z&&rue(this.relativeTarget,Z)&&(this.isProjectionDirty=!1),Z||(Z=Qn()),so(Z,this.relativeTarget)),p&&(this.animationValues=u,$ce(u,g,this.latestValues,W,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(La(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hn.update(()=>{ab.hasAnimatedSinceResize=!0,this.currentAnimation=uue(0,vE,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:g,latestValues:u}=s;if(!(!a||!l||!g)){if(this!==s&&this.layout&&g&&H3(this.options.animationType,this.layout.layoutBox,g.layoutBox)){l=this.target||Qn();const d=_r(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const h=_r(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}so(a,l),bd(a,u),wh(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new oue),this.sharedNodes.get(s).add(a);const g=a.options.initialPromotionConfig;a.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const g=this.getStack();g&&g.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const g={};for(let u=0;u<yE.length;u++){const d="rotate"+yE[u];l[d]&&(g[d]=l[d],s.setStaticValue(d,0))}s.render();for(const u in g)s.setStaticValue(u,g[u]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return due;const g={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=sb(s==null?void 0:s.pointerEvents)||"",g.transform=u?u(this.latestValues,""):"none",g;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=sb(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!jg(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),g.transform=bE(this.projectionDeltaWithTransform,this.treeScale,h),u&&(g.transform=u(h,g.transform));const{x:f,y:A}=this.projectionDelta;g.transformOrigin=`${f.origin*100}% ${A.origin*100}% 0`,d.animationValues?g.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:g.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in l0){if(h[p]===void 0)continue;const{correct:y,applyTo:v}=l0[p],S=g.transform==="none"?h[p]:y(h[p],d);if(v){const Z=v.length;for(let R=0;R<Z;R++)g[v[R]]=S}else g[p]=S}return this.options.layoutId&&(g.pointerEvents=d===this?sb(s==null?void 0:s.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(SE),this.root.sharedNodes.clear()}}}function Cue(t){t.updateLayout()}function hue(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?ho(d=>{const h=s?n.measuredBox[d]:n.layoutBox[d],f=_r(h);h.min=i[d].min,h.max=h.min+f}):H3(o,n.layoutBox,i)&&ho(d=>{const h=s?n.measuredBox[d]:n.layoutBox[d],f=_r(i[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=Ad();wh(a,i,n.layoutBox);const l=Ad();s?wh(l,t.applyTransform(r,!0),n.measuredBox):wh(l,i,n.layoutBox);const g=!X3(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const A=Qn();Wh(A,n.layoutBox,h.layoutBox);const p=Qn();Wh(p,i,f.layoutBox),J3(A,p)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=A,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:g,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function fue(t){Og.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mue(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pue(t){t.clearSnapshot()}function SE(t){t.clearMeasurements()}function Aue(t){t.isLayoutDirty=!1}function bue(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yue(t){t.resolveTargetDelta()}function vue(t){t.calcProjection()}function Sue(t){t.resetRotation()}function Zue(t){t.removeLeadSnapshot()}function GE(t,e,n){t.translate=Xn(e.translate,0,n),t.scale=Xn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function BE(t,e,n,i){t.min=Xn(e.min,n.min,i),t.max=Xn(e.max,n.max,i)}function Gue(t,e,n,i){BE(t.x,e.x,n.x,i),BE(t.y,e.y,n.y,i)}function Bue(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Rue={duration:.45,ease:[.4,0,.1,1]},RE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),kE=RE("applewebkit/")&&!RE("chrome/")?Math.round:_n;function VE(t){t.min=kE(t.min),t.max=kE(t.max)}function kue(t){VE(t.x),VE(t.y)}function H3(t,e,n){return t==="position"||t==="preserve-aspect"&&!XR(AE(e),AE(n),.2)}const Vue=E3({attachResizeListener:(t,e)=>ka(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jZ={current:void 0},N3=E3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!jZ.current){const t=new Vue({});t.mount(window),t.setOptions({layoutScroll:!0}),jZ.current=t}return jZ.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wue={pan:{Feature:Kce},drag:{Feature:Dce,ProjectionNode:N3,MeasureLayout:w3}},Wue=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function xue(t){const e=Wue.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function NR(t,e,n=1){const[i,r]=xue(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const s=o.trim();return p3(s)?parseFloat(s):s}else return BR(r)?NR(r,e,n+1):r}function Xue(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!BR(o))return;const s=NR(o,i);s&&r.set(s)});for(const r in e){const o=e[r];if(!BR(o))continue;const s=NR(o,i);s&&(e[r]=s,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const Jue=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Y3=t=>Jue.has(t),Eue=t=>Object.keys(t).some(Y3),wE=t=>t===eu||t===lt,WE=(t,e)=>parseFloat(t.split(", ")[e]),xE=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return WE(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?WE(o[1],t):0}},Hue=new Set(["x","y","z"]),Nue=em.filter(t=>!Hue.has(t));function Yue(t){const e=[];return Nue.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const lI={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:xE(4,13),y:xE(5,14)};lI.translateX=lI.x;lI.translateY=lI.y;const Fue=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:s}=o,a={};s==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(g=>{a[g]=lI[g](i,o)}),e.render();const l=e.measureViewportBox();return n.forEach(g=>{const u=e.getValue(g);u&&u.jump(a[g]),t[g]=lI[g](l,o)}),t},Mue=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(Y3);let o=[],s=!1;const a=[];if(r.forEach(l=>{const g=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=GC(u);const h=e[l];let f;if(c0(h)){const A=h.length,p=h[0]===null?1:0;u=h[p],d=GC(u);for(let y=p;y<A&&h[y]!==null;y++)f?zk(GC(h[y])===f):f=GC(h[y])}else f=GC(h);if(d!==f)if(wE(d)&&wE(f)){const A=g.get();typeof A=="string"&&g.set(parseFloat(A)),typeof h=="string"?e[l]=parseFloat(h):Array.isArray(h)&&f===lt&&(e[l]=h.map(parseFloat))}else d!=null&&d.transform&&(f!=null&&f.transform)&&(u===0||h===0)?u===0?g.set(f.transform(u)):e[l]=d.transform(h):(s||(o=Yue(t),s=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],g.jump(h))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,g=Fue(e,t,a);return o.length&&o.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),Ly&&l!==null&&window.scrollTo({top:l}),{target:g,transitionEnd:i}}else return{target:e,transitionEnd:i}};function Tue(t,e,n,i){return Eue(e)?Mue(t,e,n,i):{target:e,transitionEnd:i}}const Lue=(t,e,n,i)=>{const r=Xue(t,e,i);return e=r.target,i=r.transitionEnd,Tue(t,e,n,i)},YR={current:null},F3={current:!1};function _ue(){if(F3.current=!0,!!Ly)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>YR.current=t.matches;t.addListener(e),e()}else YR.current=!1}function Due(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],s=n[r];if(Sr(o))t.addValue(r,o),C0(i)&&i.add(r);else if(Sr(s))t.addValue(r,aI(o,{owner:t})),C0(i)&&i.remove(r);else if(s!==o)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(o)}else{const a=t.getStaticValue(r);t.addValue(r,aI(a!==void 0?a:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const XE=new WeakMap,M3=Object.keys(yf),Kue=M3.length,JE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],zue=Nk.length;class Pue{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>hn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.isControllingVariants=Dy(n),this.isVariantNode=S_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const h=u[d];a[d]!==void 0&&Sr(h)&&(h.set(a[d],!1),C0(g)&&g.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,XE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),F3.current||_ue(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:YR.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){XE.delete(this.current),this.projection&&this.projection.unmount(),La(this.notifyUpdate),La(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=qc.has(e),r=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&hn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let s,a;for(let l=0;l<Kue;l++){const g=M3[l],{isEnabled:u,Feature:d,ProjectionNode:h,MeasureLayout:f}=yf[g];h&&(s=h),u(n)&&(!this.features[g]&&d&&(this.features[g]=new d(this)),f&&(a=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:g,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f}=n;this.projection.setOptions({layoutId:l,layout:g,alwaysMeasureLayout:!!u||d&&md(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof g=="string"?g:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<JE.length;i++){const r=JE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Due(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<zue;i++){const r=Nk[i],o=this.props[r];(bf(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=aI(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=Kk(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Sr(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tV),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class T3 extends Pue{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let s=gce(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),s&&(s=r(s))),o){ace(this,i,s);const a=Lue(this,i,s,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function Uue(t){return window.getComputedStyle(t)}class jue extends T3{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(qc.has(n)){const i=Ok(n);return i&&i.default||0}else{const i=Uue(e),r=(R_(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return R3(e,n)}build(e,n,i,r){Mk(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Dk(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Sr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){X_(e,n,i,r)}}class Oue extends T3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(qc.has(n)){const i=Ok(n);return i&&i.default||0}return n=J_.has(n)?n:Ek(n),e.getAttribute(n)}measureInstanceViewportBox(){return Qn()}scrapeMotionValuesFromProps(e,n){return H_(e,n)}build(e,n,i,r){Lk(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){E_(e,n,i,r)}mount(e){this.isSVGTag=_k(e.tagName),super.mount(e)}}const Que=(t,e)=>Fk(t)?new Oue(e,{enableHardwareAcceleration:!1}):new jue(e,{enableHardwareAcceleration:!0}),$ue={layout:{ProjectionNode:N3,MeasureLayout:w3}},que={...Zce,...Dle,...wue,...$ue},pg=qae((t,e)=>Wle(t,e,que,Que));function L3(){const t=m.useRef(!1);return Jk(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ede(){const t=L3(),[e,n]=m.useState(0),i=m.useCallback(()=>{t.current&&n(e+1)},[e]);return[m.useCallback(()=>hn.postRender(i),[i]),e]}class tde extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function nde({children:t,isPresent:e}){const n=m.useId(),i=m.useRef(null),r=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=r.current;if(e||!i.current||!o||!s)return;i.current.dataset.motionPopId=n;const g=document.createElement("style");return document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[e]),m.createElement(tde,{isPresent:e,childRef:i,sizeRef:r},m.cloneElement(t,{ref:i}))}const OZ=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:s})=>{const a=N_(ide),l=m.useId(),g=m.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;i&&i()},register:u=>(a.set(u,!1),()=>a.delete(u))}),o?void 0:[n]);return m.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),m.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),s==="popLayout"&&(t=m.createElement(nde,{isPresent:n},t)),m.createElement(qf.Provider,{value:g},t)};function ide(){return new Map}function rde(t){return m.useEffect(()=>()=>t(),[])}const Qg=t=>t.key||"";function ode(t,e){t.forEach(n=>{const i=Qg(n);e.set(i,n)})}function sde(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const rm=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=m.useContext(Yk).forceRender||ede()[0],l=L3(),g=sde(t);let u=g;const d=m.useRef(new Map).current,h=m.useRef(u),f=m.useRef(new Map).current,A=m.useRef(!0);if(Jk(()=>{A.current=!1,ode(g,f),h.current=u}),rde(()=>{A.current=!0,f.clear(),d.clear()}),A.current)return m.createElement(m.Fragment,null,u.map(S=>m.createElement(OZ,{key:Qg(S),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},S)));u=[...u];const p=h.current.map(Qg),y=g.map(Qg),v=p.length;for(let S=0;S<v;S++){const Z=p[S];y.indexOf(Z)===-1&&!d.has(Z)&&d.set(Z,void 0)}return s==="wait"&&d.size&&(u=[]),d.forEach((S,Z)=>{if(y.indexOf(Z)!==-1)return;const R=f.get(Z);if(!R)return;const W=p.indexOf(Z);let B=S;if(!B){const k=()=>{d.delete(Z);const w=Array.from(f.keys()).filter(J=>!y.includes(J));if(w.forEach(J=>f.delete(J)),h.current=g.filter(J=>{const X=Qg(J);return X===Z||w.includes(X)}),!d.size){if(l.current===!1)return;a(),i&&i()}};B=m.createElement(OZ,{key:Qg(R),isPresent:!1,onExitComplete:k,custom:e,presenceAffectsLayout:o,mode:s},R),d.set(Z,B)}u.splice(W,0,B)}),u=u.map(S=>{const Z=S.key;return d.has(Z)?S:m.createElement(OZ,{key:Qg(S),isPresent:!0,presenceAffectsLayout:o,mode:s},S)}),m.createElement(m.Fragment,null,d.size?u:u.map(S=>m.cloneElement(S)))};var ade={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let i=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(i=1),{opacity:0,[n]:i*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},_3=m.memo(t=>{const{id:e,message:n,onCloseComplete:i,onRequestRemove:r,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:g=ade,toastSpacing:u="0.5rem"}=t,[d,h]=m.useState(a),f=zce();Ec(()=>{f||i==null||i()},[f]),Ec(()=>{h(a)},[a]);const A=()=>h(null),p=()=>h(a),y=()=>{f&&r()};m.useEffect(()=>{f&&o&&r()},[f,o,r]),_ae(y,d);const v=m.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:u,...l}),[l,u]),S=m.useMemo(()=>Tae(s),[s]);return C.jsx(pg.div,{layout:!0,className:"chakra-toast",variants:g,initial:"initial",animate:"animate",exit:"exit",onHoverStart:A,onHoverEnd:p,custom:{position:s},style:S,children:C.jsx(Re.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:v,children:yo(n,{id:e,onClose:y})})})});_3.displayName="ToastComponent";function lde(t,e){var n;const i=t??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[i];return(n=o==null?void 0:o[e])!=null?n:i}var EE={path:C.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[C.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),C.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),C.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},tu=Fe((t,e)=>{const{as:n,viewBox:i,color:r="currentColor",focusable:o=!1,children:s,className:a,__css:l,...g}=t,u=it("chakra-icon",a),d=jr("Icon",t),h={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:r,...l,...d},f={ref:e,focusable:o,className:u,__css:h},A=i??EE.viewBox;if(n&&typeof n!="string")return C.jsx(Re.svg,{as:n,...f,...g});const p=s??EE.path;return C.jsx(Re.svg,{verticalAlign:"middle",viewBox:A,...f,...g,children:p})});tu.displayName="Icon";function os(t){const{viewBox:e="0 0 24 24",d:n,displayName:i,defaultProps:r={}}=t,o=m.Children.toArray(t.path),s=Fe((a,l)=>C.jsx(tu,{ref:l,viewBox:e,...r,...a,children:o.length?o:C.jsx("path",{fill:"currentColor",d:n})}));return s.displayName=i,s}function gde(t){return C.jsx(tu,{viewBox:"0 0 24 24",...t,children:C.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function cde(t){return C.jsx(tu,{viewBox:"0 0 24 24",...t,children:C.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function HE(t){return C.jsx(tu,{viewBox:"0 0 24 24",...t,children:C.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var ude=xI({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),nr=Fe((t,e)=>{const n=jr("Spinner",t),{label:i="Loading...",thickness:r="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=wn(t),g=it("chakra-spinner",a),u={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:r,borderBottomColor:s,borderLeftColor:s,animation:`${ude} ${o} linear infinite`,...n};return C.jsx(Re.div,{ref:e,__css:u,className:g,...l,children:i&&C.jsx(Re.span,{srOnly:!0,children:i})})});nr.displayName="Spinner";var[dde,nV]=ni({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Ide,iV]=ni({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),D3={info:{icon:cde,colorScheme:"blue"},warning:{icon:HE,colorScheme:"orange"},success:{icon:gde,colorScheme:"green"},error:{icon:HE,colorScheme:"red"},loading:{icon:nr,colorScheme:"blue"}};function Cde(t){return D3[t].colorScheme}function hde(t){return D3[t].icon}var K3=Fe(function(e,n){const i=iV(),{status:r}=nV(),o={display:"inline",...i.description};return C.jsx(Re.div,{ref:n,"data-status":r,...e,className:it("chakra-alert__desc",e.className),__css:o})});K3.displayName="AlertDescription";function Ac(t){const{status:e}=nV(),n=hde(e),i=iV(),r=e==="loading"?i.spinner:i.icon;return C.jsx(Re.span,{display:"inherit","data-status":e,...t,className:it("chakra-alert__icon",t.className),__css:r,children:t.children||C.jsx(n,{h:"100%",w:"100%"})})}Ac.displayName="AlertIcon";var z3=Fe(function(e,n){const i=iV(),{status:r}=nV();return C.jsx(Re.div,{ref:n,"data-status":r,...e,className:it("chakra-alert__title",e.className),__css:i.title})});z3.displayName="AlertTitle";var bc=Fe(function(e,n){var i;const{status:r="info",addRole:o=!0,...s}=wn(e),a=(i=e.colorScheme)!=null?i:Cde(r),l=Or("Alert",{...e,colorScheme:a}),g={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return C.jsx(dde,{value:{status:r},children:C.jsx(Ide,{value:l,children:C.jsx(Re.div,{"data-status":r,role:o?"alert":void 0,ref:n,...s,className:it("chakra-alert",e.className),__css:g})})})});bc.displayName="Alert";function fde(t){return C.jsx(tu,{focusable:"false","aria-hidden":!0,...t,children:C.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var JI=Fe(function(e,n){const i=jr("CloseButton",e),{children:r,isDisabled:o,__css:s,...a}=wn(e),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return C.jsx(Re.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...i,...s},...a,children:r||C.jsx(fde,{width:"1em",height:"1em"})})});JI.displayName="CloseButton";var mde={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Bs=pde(mde);function pde(t){let e=t;const n=new Set,i=r=>{e=r(e),n.forEach(o=>o())};return{getState:()=>e,subscribe:r=>(n.add(r),()=>{i(()=>t),n.delete(r)}),removeToast:(r,o)=>{i(s=>({...s,[o]:s[o].filter(a=>a.id!=r)}))},notify:(r,o)=>{const s=Ade(r,o),{position:a,id:l}=s;return i(g=>{var u,d;const f=a.includes("top")?[s,...(u=g[a])!=null?u:[]]:[...(d=g[a])!=null?d:[],s];return{...g,[a]:f}}),l},update:(r,o)=>{r&&i(s=>{const a={...s},{position:l,index:g}=wJ(a,r);return l&&g!==-1&&(a[l][g]={...a[l][g],...o,message:P3(o)}),a})},closeAll:({positions:r}={})=>{i(o=>(r??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,g)=>(l[g]=o[g].map(u=>({...u,requestClose:!0})),l),{...o}))},close:r=>{i(o=>{const s=A_(o,r);return s?{...o,[s]:o[s].map(a=>a.id==r?{...a,requestClose:!0}:a)}:o})},isActive:r=>!!wJ(Bs.getState(),r).position}}var NE=0;function Ade(t,e={}){var n,i;NE+=1;const r=(n=e.id)!=null?n:NE,o=(i=e.position)!=null?i:"bottom";return{id:r,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>Bs.removeToast(String(r),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var bde=t=>{const{status:e,variant:n="solid",id:i,title:r,isClosable:o,onClose:s,description:a,colorScheme:l,icon:g}=t,u=i?{root:`toast-${i}`,title:`toast-${i}-title`,description:`toast-${i}-description`}:void 0;return C.jsxs(bc,{addRole:!1,status:e,variant:n,id:u==null?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[C.jsx(Ac,{children:g}),C.jsxs(Re.div,{flex:"1",maxWidth:"100%",children:[r&&C.jsx(z3,{id:u==null?void 0:u.title,children:r}),a&&C.jsx(K3,{id:u==null?void 0:u.description,display:"block",children:a})]}),o&&C.jsx(JI,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function P3(t={}){const{render:e,toastComponent:n=bde}=t;return r=>typeof e=="function"?e({...r,...t}):C.jsx(n,{...r,...t})}function yde(t,e){const n=r=>{var o;return{...e,...r,position:lde((o=r==null?void 0:r.position)!=null?o:e==null?void 0:e.position,t)}},i=r=>{const o=n(r),s=P3(o);return Bs.notify(s,o)};return i.update=(r,o)=>{Bs.update(r,n(o))},i.promise=(r,o)=>{const s=i({...o.loading,status:"loading",duration:null});r.then(a=>i.update(s,{status:"success",duration:5e3,...yo(o.success,a)})).catch(a=>i.update(s,{status:"error",duration:5e3,...yo(o.error,a)}))},i.closeAll=Bs.closeAll,i.close=Bs.close,i.isActive=Bs.isActive,i}var[vde,Sde]=ni({name:"ToastOptionsContext",strict:!1}),Zde=t=>{const e=m.useSyncExternalStore(Bs.subscribe,Bs.getState,Bs.getState),{motionVariants:n,component:i=_3,portalProps:r}=t,s=Object.keys(e).map(a=>{const l=e[a];return C.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:Lae(a),children:C.jsx(rm,{initial:!1,children:l.map(g=>C.jsx(i,{motionVariants:n,...g},g.id))})},a)});return C.jsx(XI,{...r,children:s})};function rV(t){const{theme:e}=_L(),n=Sde();return m.useMemo(()=>yde(e.direction,{...n,...t}),[t,e.direction,n])}var Gde=t=>function({children:n,theme:i=t,toastOptions:r,...o}){return C.jsxs(Fae,{theme:i,...o,children:[C.jsx(vde,{value:r==null?void 0:r.defaultOptions,children:n}),C.jsx(Zde,{...r})]})},Bde=Gde(c_),Rde=Object.defineProperty,kde=(t,e,n)=>e in t?Rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>(kde(t,typeof e!="symbol"?e+"":e,n),n);function YE(t){return t.sort((e,n)=>{const i=e.compareDocumentPosition(n);if(i&Node.DOCUMENT_POSITION_FOLLOWING||i&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(i&Node.DOCUMENT_POSITION_PRECEDING||i&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(i&Node.DOCUMENT_POSITION_DISCONNECTED||i&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var Vde=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function FE(t,e,n){let i=t+1;return n&&i>=e&&(i=0),i}function ME(t,e,n){let i=t-1;return n&&i<0&&(i=e),i}var FR=typeof window<"u"?m.useLayoutEffect:m.useEffect,f0=t=>t,wde=class{constructor(){Mn(this,"descendants",new Map),Mn(this,"register",t=>{if(t!=null)return Vde(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),Mn(this,"unregister",t=>{this.descendants.delete(t);const e=YE(Array.from(this.descendants.keys()));this.assignIndex(e)}),Mn(this,"destroy",()=>{this.descendants.clear()}),Mn(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),Mn(this,"count",()=>this.descendants.size),Mn(this,"enabledCount",()=>this.enabledValues().length),Mn(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),Mn(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),Mn(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),Mn(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),Mn(this,"first",()=>this.item(0)),Mn(this,"firstEnabled",()=>this.enabledItem(0)),Mn(this,"last",()=>this.item(this.descendants.size-1)),Mn(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),Mn(this,"indexOf",t=>{var e,n;return t&&(n=(e=this.descendants.get(t))==null?void 0:e.index)!=null?n:-1}),Mn(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),Mn(this,"next",(t,e=!0)=>{const n=FE(t,this.count(),e);return this.item(n)}),Mn(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const i=this.enabledIndexOf(n.node),r=FE(i,this.enabledCount(),e);return this.enabledItem(r)}),Mn(this,"prev",(t,e=!0)=>{const n=ME(t,this.count()-1,e);return this.item(n)}),Mn(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const i=this.enabledIndexOf(n.node),r=ME(i,this.enabledCount()-1,e);return this.enabledItem(r)}),Mn(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),i=YE(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const r={node:t,index:-1,...e};this.descendants.set(t,r),this.assignIndex(i)})}};function Wde(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function si(...t){return e=>{t.forEach(n=>{Wde(n,e)})}}function xde(...t){return m.useMemo(()=>si(...t),t)}function Xde(){const t=m.useRef(new wde);return FR(()=>()=>t.current.destroy()),t.current}var[Jde,U3]=ni({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function Ede(t){const e=U3(),[n,i]=m.useState(-1),r=m.useRef(null);FR(()=>()=>{r.current&&e.unregister(r.current)},[]),FR(()=>{if(!r.current)return;const s=Number(r.current.dataset.index);n!=s&&!Number.isNaN(s)&&i(s)});const o=f0(t?e.register(t):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(r.current),register:si(o,r)}}function Hde(){return[f0(Jde),()=>f0(U3()),()=>Xde(),r=>Ede(r)]}function Nde(t){const{value:e,defaultValue:n,onChange:i,shouldUpdate:r=(h,f)=>h!==f}=t,o=Zo(i),s=Zo(r),[a,l]=m.useState(n),g=e!==void 0,u=g?e:a,d=Zo(h=>{const A=typeof h=="function"?h(u):h;s(u,A)&&(g||l(A),o(A))},[g,o,u,s]);return[u,d]}var TE={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},yc={enter:{duration:.2,ease:TE.easeOut},exit:{duration:.1,ease:TE.easeIn}},vc={enter:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.exit})},Yde={enter:({transition:t,transitionEnd:e,delay:n}={})=>{var i;return{opacity:1,transition:(i=t==null?void 0:t.enter)!=null?i:vc.enter(yc.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({transition:t,transitionEnd:e,delay:n}={})=>{var i;return{opacity:0,transition:(i=t==null?void 0:t.exit)!=null?i:vc.exit(yc.exit,n),transitionEnd:e==null?void 0:e.exit}}},j3={initial:"exit",animate:"enter",exit:"exit",variants:Yde},Fde=m.forwardRef(function(e,n){const{unmountOnExit:i,in:r,className:o,transition:s,transitionEnd:a,delay:l,...g}=e,u=r||i?"enter":"exit",d=i?r&&i:!0,h={transition:s,transitionEnd:a,delay:l};return C.jsx(rm,{custom:h,children:d&&C.jsx(pg.div,{ref:n,className:it("chakra-fade",o),custom:h,...j3,animate:u,...g})})});Fde.displayName="Fade";var Mde={exit:({reverse:t,initialScale:e,transition:n,transitionEnd:i,delay:r})=>{var o;return{opacity:0,...t?{scale:e,transitionEnd:i==null?void 0:i.exit}:{transitionEnd:{scale:e,...i==null?void 0:i.exit}},transition:(o=n==null?void 0:n.exit)!=null?o:vc.exit(yc.exit,r)}},enter:({transitionEnd:t,transition:e,delay:n})=>{var i;return{opacity:1,scale:1,transition:(i=e==null?void 0:e.enter)!=null?i:vc.enter(yc.enter,n),transitionEnd:t==null?void 0:t.enter}}},O3={initial:"exit",animate:"enter",exit:"exit",variants:Mde},Tde=m.forwardRef(function(e,n){const{unmountOnExit:i,in:r,reverse:o=!0,initialScale:s=.95,className:a,transition:l,transitionEnd:g,delay:u,...d}=e,h=i?r&&i:!0,f=r||i?"enter":"exit",A={initialScale:s,reverse:o,transition:l,transitionEnd:g,delay:u};return C.jsx(rm,{custom:A,children:h&&C.jsx(pg.div,{ref:n,className:it("chakra-offset-slide",a),...O3,animate:f,custom:A,...d})})});Tde.displayName="ScaleFade";var Lde={initial:({offsetX:t,offsetY:e,transition:n,transitionEnd:i,delay:r})=>{var o;return{opacity:0,x:t,y:e,transition:(o=n==null?void 0:n.exit)!=null?o:vc.exit(yc.exit,r),transitionEnd:i==null?void 0:i.exit}},enter:({transition:t,transitionEnd:e,delay:n})=>{var i;return{opacity:1,x:0,y:0,transition:(i=t==null?void 0:t.enter)!=null?i:vc.enter(yc.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({offsetY:t,offsetX:e,transition:n,transitionEnd:i,reverse:r,delay:o})=>{var s;const a={x:e,y:t};return{opacity:0,transition:(s=n==null?void 0:n.exit)!=null?s:vc.exit(yc.exit,o),...r?{...a,transitionEnd:i==null?void 0:i.exit}:{transitionEnd:{...a,...i==null?void 0:i.exit}}}}},sh={initial:"initial",animate:"enter",exit:"exit",variants:Lde},_de=m.forwardRef(function(e,n){const{unmountOnExit:i,in:r,reverse:o=!0,className:s,offsetX:a=0,offsetY:l=8,transition:g,transitionEnd:u,delay:d,...h}=e,f=i?r&&i:!0,A=r||i?"enter":"exit",p={offsetX:a,offsetY:l,reverse:o,transition:g,transitionEnd:u,delay:d};return C.jsx(rm,{custom:p,children:f&&C.jsx(pg.div,{ref:n,className:it("chakra-offset-slide",s),custom:p,...sh,animate:A,...h})})});_de.displayName="SlideFade";var[Dde,Q3]=ni({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"}),Kde={"top-start":{top:"0",insetStart:"0",transform:"translate(-25%, -25%)"},"top-end":{top:"0",insetEnd:"0",transform:"translate(25%, -25%)"},"bottom-start":{bottom:"0",insetStart:"0",transform:"translate(-25%, 25%)"},"bottom-end":{bottom:"0",insetEnd:"0",transform:"translate(25%, 25%)"}},$3=Fe(function(e,n){const{placement:i="bottom-end",className:r,...o}=e,s=Q3(),l={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",...Kde[i],...s.badge};return C.jsx(Re.div,{ref:n,...o,className:it("chakra-avatar__badge",r),__css:l})});$3.displayName="AvatarBadge";function zde(t){var e;const n=t.split(" "),i=(e=n[0])!=null?e:"",r=n.length>1?n[n.length-1]:"";return i&&r?`${i.charAt(0)}${r.charAt(0)}`:i.charAt(0)}function q3(t){const{name:e,getInitials:n,...i}=t,r=Q3();return C.jsx(Re.div,{role:"img","aria-label":e,...i,__css:r.label,children:e?n==null?void 0:n(e):null})}q3.displayName="AvatarName";var eD=t=>C.jsxs(Re.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...t,children:[C.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),C.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}),MR=Fe(function(e,n){const{htmlWidth:i,htmlHeight:r,alt:o,...s}=e;return C.jsx("img",{width:i,height:r,ref:n,alt:o,...s})});MR.displayName="NativeImage";function tD(t){const{loading:e,src:n,srcSet:i,onLoad:r,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=t,[g,u]=m.useState("pending");m.useEffect(()=>{u(n?"loading":"pending")},[n]);const d=m.useRef(),h=m.useCallback(()=>{if(!n)return;f();const A=new Image;A.src=n,s&&(A.crossOrigin=s),i&&(A.srcset=i),a&&(A.sizes=a),e&&(A.loading=e),A.onload=p=>{f(),u("loaded"),r==null||r(p)},A.onerror=p=>{f(),u("failed"),o==null||o(p)},d.current=A},[n,s,i,a,r,o,e]),f=()=>{d.current&&(d.current.onload=null,d.current.onerror=null,d.current=null)};return Js(()=>{if(!l)return g==="loading"&&h(),()=>{f()}},[g,h,l]),l?"loaded":g}var Pde=(t,e)=>t!=="loaded"&&e==="beforeLoadOrError"||t==="failed"&&e==="onError";function Ude(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}var oi=Fe(function(e,n){const{fallbackSrc:i,fallback:r,src:o,srcSet:s,align:a,fit:l,loading:g,ignoreFallback:u,crossOrigin:d,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:f,...A}=e,p=i!==void 0||r!==void 0,y=g!=null||u||!p,v=tD({...e,crossOrigin:d,ignoreFallback:y}),S=Pde(v,h),Z={ref:n,objectFit:l,objectPosition:a,...y?A:Ude(A,["onError","onLoad"])};return S?r||C.jsx(Re.img,{as:MR,className:"chakra-image__placeholder",src:i,...Z}):C.jsx(Re.img,{as:MR,src:o,srcSet:s,crossOrigin:d,loading:g,referrerPolicy:f,className:"chakra-image",...Z})});oi.displayName="Image";function nD(t){const{src:e,srcSet:n,onError:i,onLoad:r,getInitials:o,name:s,borderRadius:a,loading:l,iconLabel:g,icon:u=C.jsx(eD,{}),ignoreFallback:d,referrerPolicy:h,crossOrigin:f}=t,p=tD({src:e,onError:i,crossOrigin:f,ignoreFallback:d})==="loaded";return!e||!p?s?C.jsx(q3,{className:"chakra-avatar__initials",getInitials:o,name:s}):m.cloneElement(u,{role:"img","aria-label":g}):C.jsx(Re.img,{src:e,srcSet:n,alt:s,onLoad:r,referrerPolicy:h,crossOrigin:f??void 0,className:"chakra-avatar__img",loading:l,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:a}})}nD.displayName="AvatarImage";var jde={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},Ni=Fe((t,e)=>{const n=Or("Avatar",t),[i,r]=m.useState(!1),{src:o,srcSet:s,name:a,showBorder:l,borderRadius:g="full",onError:u,onLoad:d,getInitials:h=zde,icon:f=C.jsx(eD,{}),iconLabel:A=" avatar",loading:p,children:y,borderColor:v,ignoreFallback:S,crossOrigin:Z,referrerPolicy:R,...W}=wn(t),B={borderRadius:g,borderWidth:l?"2px":void 0,...jde,...n.container};return v&&(B.borderColor=v),C.jsx(Re.span,{ref:e,...W,className:it("chakra-avatar",t.className),"data-loaded":Gt(i),__css:B,children:C.jsxs(Dde,{value:n,children:[C.jsx(nD,{src:o,srcSet:s,loading:p,onLoad:Yt(d,()=>{r(!0)}),onError:u,getInitials:h,name:a,borderRadius:g,icon:f,iconLabel:A,ignoreFallback:S,crossOrigin:Z,referrerPolicy:R}),y]})})});Ni.displayName="Avatar";function oV(t){return m.Children.toArray(t).filter(e=>m.isValidElement(e))}var[xze,Ode]=ni({strict:!1,name:"ButtonGroupContext"});function Qde(t){const[e,n]=m.useState(!t);return{ref:m.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:e?"button":void 0}}function TR(t){const{children:e,className:n,...i}=t,r=m.isValidElement(e)?m.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,o=it("chakra-button__icon",n);return C.jsx(Re.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:o,children:r})}TR.displayName="ButtonIcon";function LR(t){const{label:e,placement:n,spacing:i="0.5rem",children:r=C.jsx(nr,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=t,l=it("chakra-button__spinner",o),g=n==="start"?"marginEnd":"marginStart",u=m.useMemo(()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[g]:e?i:0,fontSize:"1em",lineHeight:"normal",...s}),[s,e,g,i]);return C.jsx(Re.div,{className:l,...a,__css:u,children:r})}LR.displayName="ButtonSpinner";var De=Fe((t,e)=>{const n=Ode(),i=jr("Button",{...n,...t}),{isDisabled:r=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:g,loadingText:u,iconSpacing:d="0.5rem",type:h,spinner:f,spinnerPlacement:A="start",className:p,as:y,...v}=wn(t),S=m.useMemo(()=>{const B={...i==null?void 0:i._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!n&&{_focus:B}}},[i,n]),{ref:Z,type:R}=Qde(y),W={rightIcon:g,leftIcon:l,iconSpacing:d,children:a};return C.jsxs(Re.button,{ref:xde(e,Z),as:y,type:h??R,"data-active":Gt(s),"data-loading":Gt(o),__css:S,className:it("chakra-button",p),...v,disabled:r||o,children:[o&&A==="start"&&C.jsx(LR,{className:"chakra-button__spinner--start",label:u,placement:"start",spacing:d,children:f}),o?u||C.jsx(Re.span,{opacity:0,children:C.jsx(LE,{...W})}):C.jsx(LE,{...W}),o&&A==="end"&&C.jsx(LR,{className:"chakra-button__spinner--end",label:u,placement:"end",spacing:d,children:f})]})});De.displayName="Button";function LE(t){const{leftIcon:e,rightIcon:n,children:i,iconSpacing:r}=t;return C.jsxs(C.Fragment,{children:[e&&C.jsx(TR,{marginEnd:r,children:e}),i,n&&C.jsx(TR,{marginStart:r,children:n})]})}var iD=Fe((t,e)=>{const{icon:n,children:i,isRound:r,"aria-label":o,...s}=t,a=n||i,l=m.isValidElement(a)?m.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return C.jsx(De,{padding:"0",borderRadius:r?"full":void 0,ref:e,"aria-label":o,...s,children:l})});iD.displayName="IconButton";var[$de,qde]=ni({name:"CheckboxGroupContext",strict:!1});function _E(t){return t&&pr(t)&&pr(t.target)}function eIe(t={}){const{defaultValue:e,value:n,onChange:i,isDisabled:r,isNative:o}=t,s=Zo(i),[a,l]=Nde({value:n,defaultValue:e||[],onChange:s}),g=m.useCallback(d=>{if(!a)return;const h=_E(d)?d.target.checked:!a.includes(d),f=_E(d)?d.target.value:d,A=h?[...a,f]:a.filter(p=>String(p)!==String(f));l(A)},[l,a]),u=m.useCallback((d={})=>({...d,[o?"checked":"isChecked"]:a.some(f=>String(d.value)===String(f)),onChange:g}),[g,o,a]);return{value:a,isDisabled:r,onChange:g,setValue:l,getCheckboxProps:u}}function rD(t){const{colorScheme:e,size:n,variant:i,children:r,isDisabled:o}=t,{value:s,onChange:a}=eIe(t),l=m.useMemo(()=>({size:n,onChange:a,colorScheme:e,value:s,variant:i,isDisabled:o}),[n,a,e,s,i,o]);return C.jsx($de,{value:l,children:r})}rD.displayName="CheckboxGroup";function tIe(t){const[e,n]=m.useState(t),[i,r]=m.useState(!1);return t!==e&&(r(!0),n(t)),i}function nIe(t){return C.jsx(Re.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:C.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function iIe(t){return C.jsx(Re.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:C.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function rIe(t){const{isIndeterminate:e,isChecked:n,...i}=t,r=e?iIe:nIe;return n||e?C.jsx(Re.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:C.jsx(r,{...i})}):null}var[oIe,oD]=ni({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[sIe,Uy]=ni({strict:!1,name:"FormControlContext"});function aIe(t){const{id:e,isRequired:n,isInvalid:i,isDisabled:r,isReadOnly:o,...s}=t,a=m.useId(),l=e||`field-${a}`,g=`${l}-label`,u=`${l}-feedback`,d=`${l}-helptext`,[h,f]=m.useState(!1),[A,p]=m.useState(!1),[y,v]=m.useState(!1),S=m.useCallback((k={},w=null)=>({id:d,...k,ref:si(w,J=>{J&&p(!0)})}),[d]),Z=m.useCallback((k={},w=null)=>({...k,ref:w,"data-focus":Gt(y),"data-disabled":Gt(r),"data-invalid":Gt(i),"data-readonly":Gt(o),id:k.id!==void 0?k.id:g,htmlFor:k.htmlFor!==void 0?k.htmlFor:l}),[l,r,y,i,o,g]),R=m.useCallback((k={},w=null)=>({id:u,...k,ref:si(w,J=>{J&&f(!0)}),"aria-live":"polite"}),[u]),W=m.useCallback((k={},w=null)=>({...k,...s,ref:w,role:"group","data-focus":Gt(y),"data-disabled":Gt(r),"data-invalid":Gt(i),"data-readonly":Gt(o)}),[s,r,y,i,o]),B=m.useCallback((k={},w=null)=>({...k,ref:w,role:"presentation","aria-hidden":!0,children:k.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!i,isReadOnly:!!o,isDisabled:!!r,isFocused:!!y,onFocus:()=>v(!0),onBlur:()=>v(!1),hasFeedbackText:h,setHasFeedbackText:f,hasHelpText:A,setHasHelpText:p,id:l,labelId:g,feedbackId:u,helpTextId:d,htmlProps:s,getHelpTextProps:S,getErrorMessageProps:R,getRootProps:W,getLabelProps:Z,getRequiredIndicatorProps:B}}var mt=Fe(function(e,n){const i=Or("Form",e),r=wn(e),{getRootProps:o,htmlProps:s,...a}=aIe(r),l=it("chakra-form-control",e.className);return C.jsx(sIe,{value:a,children:C.jsx(oIe,{value:i,children:C.jsx(Re.div,{...o({},n),className:l,__css:i.container})})})});mt.displayName="FormControl";var lIe=Fe(function(e,n){const i=Uy(),r=oD(),o=it("chakra-form__helper-text",e.className);return C.jsx(Re.div,{...i==null?void 0:i.getHelpTextProps(e,n),__css:r.helperText,className:o})});lIe.displayName="FormHelperText";var nt=Fe(function(e,n){var i;const r=jr("FormLabel",e),o=wn(e),{className:s,children:a,requiredIndicator:l=C.jsx(sD,{}),optionalIndicator:g=null,...u}=o,d=Uy(),h=(i=d==null?void 0:d.getLabelProps(u,n))!=null?i:{ref:n,...u};return C.jsxs(Re.label,{...h,className:it("chakra-form__label",o.className),__css:{display:"block",textAlign:"start",...r},children:[a,d!=null&&d.isRequired?l:g]})});nt.displayName="FormLabel";var sD=Fe(function(e,n){const i=Uy(),r=oD();if(!(i!=null&&i.isRequired))return null;const o=it("chakra-form__required-indicator",e.className);return C.jsx(Re.span,{...i==null?void 0:i.getRequiredIndicatorProps(e,n),__css:r.requiredIndicator,className:o})});sD.displayName="RequiredIndicator";function sV(t){const{isDisabled:e,isInvalid:n,isReadOnly:i,isRequired:r,...o}=aD(t);return{...o,disabled:e,readOnly:i,required:r,"aria-invalid":AZ(n),"aria-required":AZ(r),"aria-readonly":AZ(i)}}function aD(t){var e,n,i;const r=Uy(),{id:o,disabled:s,readOnly:a,required:l,isRequired:g,isInvalid:u,isReadOnly:d,isDisabled:h,onFocus:f,onBlur:A,...p}=t,y=t["aria-describedby"]?[t["aria-describedby"]]:[];return r!=null&&r.hasFeedbackText&&(r!=null&&r.isInvalid)&&y.push(r.feedbackId),r!=null&&r.hasHelpText&&y.push(r.helpTextId),{...p,"aria-describedby":y.join(" ")||void 0,id:o??(r==null?void 0:r.id),isDisabled:(e=s??h)!=null?e:r==null?void 0:r.isDisabled,isReadOnly:(n=a??d)!=null?n:r==null?void 0:r.isReadOnly,isRequired:(i=l??g)!=null?i:r==null?void 0:r.isRequired,isInvalid:u??(r==null?void 0:r.isInvalid),onFocus:Yt(r==null?void 0:r.onFocus,f),onBlur:Yt(r==null?void 0:r.onBlur,A)}}var gIe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},cIe=()=>typeof document<"u",DE=!1,om=null,Hc=!1,_R=!1,DR=new Set;function aV(t,e){DR.forEach(n=>n(t,e))}var uIe=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function dIe(t){return!(t.metaKey||!uIe&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function KE(t){Hc=!0,dIe(t)&&(om="keyboard",aV("keyboard",t))}function Nu(t){if(om="pointer",t.type==="mousedown"||t.type==="pointerdown"){Hc=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch{}if(n)return;aV("pointer",t)}}function IIe(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function CIe(t){IIe(t)&&(Hc=!0,om="virtual")}function hIe(t){t.target===window||t.target===document||(!Hc&&!_R&&(om="virtual",aV("virtual",t)),Hc=!1,_R=!1)}function fIe(){Hc=!1,_R=!0}function zE(){return om!=="pointer"}function mIe(){if(!cIe()||DE)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){Hc=!0,t.apply(this,n)},document.addEventListener("keydown",KE,!0),document.addEventListener("keyup",KE,!0),document.addEventListener("click",CIe,!0),window.addEventListener("focus",hIe,!0),window.addEventListener("blur",fIe,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",Nu,!0),document.addEventListener("pointermove",Nu,!0),document.addEventListener("pointerup",Nu,!0)):(document.addEventListener("mousedown",Nu,!0),document.addEventListener("mousemove",Nu,!0),document.addEventListener("mouseup",Nu,!0)),DE=!0}function pIe(t){mIe(),t(zE());const e=()=>t(zE());return DR.add(e),()=>{DR.delete(e)}}function AIe(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}function lD(t={}){const e=aD(t),{isDisabled:n,isReadOnly:i,isRequired:r,isInvalid:o,id:s,onBlur:a,onFocus:l,"aria-describedby":g}=e,{defaultChecked:u,isChecked:d,isFocusable:h,onChange:f,isIndeterminate:A,name:p,value:y,tabIndex:v=void 0,"aria-label":S,"aria-labelledby":Z,"aria-invalid":R,...W}=t,B=AIe(W,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),k=Zo(f),w=Zo(a),J=Zo(l),[X,Y]=m.useState(!1),[z,P]=m.useState(!1),[$,oe]=m.useState(!1),[q,K]=m.useState(!1);m.useEffect(()=>pIe(Y),[]);const _=m.useRef(null),[de,ne]=m.useState(!0),[se,E]=m.useState(!!u),M=d!==void 0,T=M?d:se,U=m.useCallback(he=>{if(i||n){he.preventDefault();return}M||E(T?he.target.checked:A?!0:he.target.checked),k==null||k(he)},[i,n,T,M,A,k]);Js(()=>{_.current&&(_.current.indeterminate=!!A)},[A]),Ec(()=>{n&&P(!1)},[n,P]),Js(()=>{const he=_.current;if(!(he!=null&&he.form))return;const Be=()=>{E(!!u)};return he.form.addEventListener("reset",Be),()=>{var Ge;return(Ge=he.form)==null?void 0:Ge.removeEventListener("reset",Be)}},[]);const H=n&&!h,ie=m.useCallback(he=>{he.key===" "&&K(!0)},[K]),Ae=m.useCallback(he=>{he.key===" "&&K(!1)},[K]);Js(()=>{if(!_.current)return;_.current.checked!==T&&E(_.current.checked)},[_.current]);const Ie=m.useCallback((he={},Be=null)=>{const Ge=Me=>{z&&Me.preventDefault(),K(!0)};return{...he,ref:Be,"data-active":Gt(q),"data-hover":Gt($),"data-checked":Gt(T),"data-focus":Gt(z),"data-focus-visible":Gt(z&&X),"data-indeterminate":Gt(A),"data-disabled":Gt(n),"data-invalid":Gt(o),"data-readonly":Gt(i),"aria-hidden":!0,onMouseDown:Yt(he.onMouseDown,Ge),onMouseUp:Yt(he.onMouseUp,()=>K(!1)),onMouseEnter:Yt(he.onMouseEnter,()=>oe(!0)),onMouseLeave:Yt(he.onMouseLeave,()=>oe(!1))}},[q,T,n,z,X,$,A,o,i]),xe=m.useCallback((he={},Be=null)=>({...he,ref:Be,"data-active":Gt(q),"data-hover":Gt($),"data-checked":Gt(T),"data-focus":Gt(z),"data-focus-visible":Gt(z&&X),"data-indeterminate":Gt(A),"data-disabled":Gt(n),"data-invalid":Gt(o),"data-readonly":Gt(i)}),[q,T,n,z,X,$,A,o,i]),Xe=m.useCallback((he={},Be=null)=>({...B,...he,ref:si(Be,Ge=>{Ge&&ne(Ge.tagName==="LABEL")}),onClick:Yt(he.onClick,()=>{var Ge;de||((Ge=_.current)==null||Ge.click(),requestAnimationFrame(()=>{var Me;(Me=_.current)==null||Me.focus({preventScroll:!0})}))}),"data-disabled":Gt(n),"data-checked":Gt(T),"data-invalid":Gt(o)}),[B,n,T,o,de]),Je=m.useCallback((he={},Be=null)=>({...he,ref:si(_,Be),type:"checkbox",name:p,value:y,id:s,tabIndex:v,onChange:Yt(he.onChange,U),onBlur:Yt(he.onBlur,w,()=>P(!1)),onFocus:Yt(he.onFocus,J,()=>P(!0)),onKeyDown:Yt(he.onKeyDown,ie),onKeyUp:Yt(he.onKeyUp,Ae),required:r,checked:T,disabled:H,readOnly:i,"aria-label":S,"aria-labelledby":Z,"aria-invalid":R?!!R:o,"aria-describedby":g,"aria-disabled":n,style:gIe}),[p,y,s,U,w,J,ie,Ae,r,T,H,i,S,Z,R,o,g,n,v]),Ne=m.useCallback((he={},Be=null)=>({...he,ref:Be,onMouseDown:Yt(he.onMouseDown,bIe),"data-disabled":Gt(n),"data-checked":Gt(T),"data-invalid":Gt(o)}),[T,n,o]);return{state:{isInvalid:o,isFocused:z,isChecked:T,isActive:q,isHovered:$,isIndeterminate:A,isDisabled:n,isReadOnly:i,isRequired:r},getRootProps:Xe,getCheckboxProps:Ie,getIndicatorProps:xe,getInputProps:Je,getLabelProps:Ne,htmlProps:B}}function bIe(t){t.preventDefault(),t.stopPropagation()}var yIe={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},vIe={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},SIe=xI({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),ZIe=xI({from:{opacity:0},to:{opacity:1}}),GIe=xI({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Yd=Fe(function(e,n){const i=qde(),r={...i,...e},o=Or("Checkbox",r),s=wn(e),{spacing:a="0.5rem",className:l,children:g,iconColor:u,iconSize:d,icon:h=C.jsx(rIe,{}),isChecked:f,isDisabled:A=i==null?void 0:i.isDisabled,onChange:p,inputProps:y,...v}=s;let S=f;i!=null&&i.value&&s.value&&(S=i.value.includes(s.value));let Z=p;i!=null&&i.onChange&&s.value&&(Z=Zk(i.onChange,p));const{state:R,getInputProps:W,getCheckboxProps:B,getLabelProps:k,getRootProps:w}=lD({...v,isDisabled:A,isChecked:S,onChange:Z}),J=tIe(R.isChecked),X=m.useMemo(()=>({animation:J?R.isIndeterminate?`${ZIe} 20ms linear, ${GIe} 200ms linear`:`${SIe} 200ms linear`:void 0,fontSize:d,color:u,...o.icon}),[u,d,J,R.isIndeterminate,o.icon]),Y=m.cloneElement(h,{__css:X,isIndeterminate:R.isIndeterminate,isChecked:R.isChecked});return C.jsxs(Re.label,{__css:{...vIe,...o.container},className:it("chakra-checkbox",l),...w(),children:[C.jsx("input",{className:"chakra-checkbox__input",...W(y,n)}),C.jsx(Re.span,{__css:{...yIe,...o.control},className:"chakra-checkbox__control",...B(),children:Y}),g&&C.jsx(Re.span,{className:"chakra-checkbox__label",...k(),__css:{marginStart:a,...o.label},children:g})]})});Yd.displayName="Checkbox";function lV(t,e,n,i){const r=Zo(n);return m.useEffect(()=>{const o=typeof t=="function"?t():t??document;if(!(!n||!o))return o.addEventListener(e,r,i),()=>{o.removeEventListener(e,r,i)}},[e,t,i,r,n]),()=>{const o=typeof t=="function"?t():t??document;o==null||o.removeEventListener(e,r,i)}}function BIe(t){return"current"in t}var gD=()=>typeof window<"u";function RIe(){var t;const e=navigator.userAgentData;return(t=e==null?void 0:e.platform)!=null?t:navigator.platform}var kIe=t=>gD()&&t.test(navigator.vendor),VIe=t=>gD()&&t.test(RIe()),wIe=()=>VIe(/mac|iphone|ipad|ipod/i),WIe=()=>wIe()&&kIe(/apple/i);function xIe(t){const{ref:e,elements:n,enabled:i}=t,r=()=>{var o,s;return(s=(o=e.current)==null?void 0:o.ownerDocument)!=null?s:document};lV(r,"pointerdown",o=>{if(!WIe()||!i)return;const s=o.target,l=(n??[e]).some(g=>{const u=BIe(g)?g.current:g;return(u==null?void 0:u.contains(s))||u===s});r().activeElement!==s&&l&&(o.preventDefault(),s.focus())})}function cD(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var uD={exports:{}},XIe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",JIe=XIe,EIe=JIe;function dD(){}function ID(){}ID.resetWarningCache=dD;var HIe=function(){function t(i,r,o,s,a,l){if(l!==EIe){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ID,resetWarningCache:dD};return n.PropTypes=n,n};uD.exports=HIe();var CD=uD.exports,KR="data-focus-lock",hD="data-focus-lock-disabled",NIe="data-no-focus-lock",YIe="data-autofocus-inside",FIe="data-no-autofocus";function QZ(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function MIe(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var TIe=typeof window<"u"?m.useLayoutEffect:m.useEffect,PE=new WeakMap;function fD(t,e){var n=MIe(e||null,function(i){return t.forEach(function(r){return QZ(r,i)})});return TIe(function(){var i=PE.get(n);if(i){var r=new Set(i),o=new Set(t),s=n.current;r.forEach(function(a){o.has(a)||QZ(a,null)}),o.forEach(function(a){r.has(a)||QZ(a,s)})}PE.set(n,t)},[t]),n}var $Z={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Rs=function(){return Rs=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rs.apply(this,arguments)};function mD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function LIe(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function pD(t){return t}function AD(t,e){e===void 0&&(e=pD);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,i);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(i=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){i=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},g=function(){return Promise.resolve().then(l)};g(),n={push:function(u){s.push(u),g()},filter:function(u){return s=s.filter(u),n}}}};return r}function gV(t,e){return e===void 0&&(e=pD),AD(t,e)}function bD(t){t===void 0&&(t={});var e=AD(null);return e.options=Rs({async:!0,ssr:!1},t),e}var yD=function(t){var e=t.sideCar,n=mD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return m.createElement(i,Rs({},n))};yD.isSideCarExport=!0;function _Ie(t,e){return t.useMedium(e),yD}var vD=gV({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),SD=gV(),DIe=gV(),KIe=bD({async:!0,ssr:typeof document<"u"}),zIe=m.createContext(void 0),PIe=[],ZD=m.forwardRef(function(e,n){var i,r=m.useState(),o=r[0],s=r[1],a=m.useRef(),l=m.useRef(!1),g=m.useRef(null),u=m.useState({}),d=u[1],h=e.children,f=e.disabled,A=f===void 0?!1:f,p=e.noFocusGuards,y=p===void 0?!1:p,v=e.persistentFocus,S=v===void 0?!1:v,Z=e.crossFrame,R=Z===void 0?!0:Z,W=e.autoFocus,B=W===void 0?!0:W;e.allowTextSelection;var k=e.group,w=e.className,J=e.whiteList,X=e.hasPositiveIndices,Y=e.shards,z=Y===void 0?PIe:Y,P=e.as,$=P===void 0?"div":P,oe=e.lockProps,q=oe===void 0?{}:oe,K=e.sideCar,_=e.returnFocus,de=_===void 0?!1:_,ne=e.focusOptions,se=e.onActivation,E=e.onDeactivation,M=m.useState({}),T=M[0],U=m.useCallback(function(Be){var Ge=Be.captureFocusRestore;if(!g.current){var Me,Oe=(Me=document)==null?void 0:Me.activeElement;g.current=Oe,Oe!==document.body&&(g.current=Ge(Oe))}a.current&&se&&se(a.current),l.current=!0,d()},[se]),H=m.useCallback(function(){l.current=!1,E&&E(a.current),d()},[E]),ie=m.useCallback(function(Be){var Ge=g.current;if(Ge){var Me=(typeof Ge=="function"?Ge():Ge)||document.body,Oe=typeof de=="function"?de(Me):de;if(Oe){var Ye=typeof Oe=="object"?Oe:void 0;g.current=null,Be?Promise.resolve().then(function(){return Me.focus(Ye)}):Me.focus(Ye)}}},[de]),Ae=m.useCallback(function(Be){l.current&&vD.useMedium(Be)},[]),Ie=SD.useMedium,xe=m.useCallback(function(Be){a.current!==Be&&(a.current=Be,s(Be))},[]),Xe=og((i={},i[hD]=A&&"disabled",i[KR]=k,i),q),Je=y!==!0,Ne=Je&&y!=="tail",et=fD([n,xe]),he=m.useMemo(function(){return{observed:a,shards:z,enabled:!A,active:l.current}},[A,l.current,z,o]);return m.createElement(m.Fragment,null,Je&&[m.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:A?-1:0,style:$Z}),X?m.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:A?-1:1,style:$Z}):null],!A&&m.createElement(K,{id:T,sideCar:KIe,observed:o,disabled:A,persistentFocus:S,crossFrame:R,autoFocus:B,whiteList:J,shards:z,onActivation:U,onDeactivation:H,returnFocus:ie,focusOptions:ne}),m.createElement($,og({ref:et},Xe,{className:w,onBlur:Ie,onFocus:Ae}),m.createElement(zIe.Provider,{value:he},h)),Ne&&m.createElement("div",{"data-focus-guard":!0,tabIndex:A?-1:0,style:$Z}))});ZD.propTypes={};const GD=ZD;function zR(t,e){return zR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},zR(t,e)}function UIe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zR(t,e)}function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function jIe(t,e){if(Sf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(Sf(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OIe(t){var e=jIe(t,"string");return Sf(e)==="symbol"?e:String(e)}function BD(t,e,n){return e=OIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QIe(t,e){function n(i){return i.displayName||i.name||"Component"}return function(r){var o=[],s;function a(){s=t(o.map(function(g){return g.props})),e(s)}var l=function(g){UIe(u,g);function u(){return g.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var f=o.indexOf(this);o.splice(f,1),a()},d.render=function(){return gt.createElement(r,this.props)},u}(m.PureComponent);return BD(l,"displayName","SideEffect("+n(r)+")"),l}}var zs=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},Nc=function(t){return Array.isArray(t)?t:[t]},RD=function(t){return Array.isArray(t)?t[0]:t},$Ie=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},kD=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},VD=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},qIe=function(t){return t.hasAttribute("inert")},eCe=function(t,e){return!t||VD(t)||!$Ie(t)&&!qIe(t)&&e(kD(t))},wD=function(t,e){var n=t.get(e);if(n!==void 0)return n;var i=eCe(e,wD.bind(void 0,t));return t.set(e,i),i},tCe=function(t,e){return t&&!VD(t)?rCe(t)?e(kD(t)):!1:!0},WD=function(t,e){var n=t.get(e);if(n!==void 0)return n;var i=tCe(e,WD.bind(void 0,t));return t.set(e,i),i},xD=function(t){return t.dataset},nCe=function(t){return t.tagName==="BUTTON"},XD=function(t){return t.tagName==="INPUT"},JD=function(t){return XD(t)&&t.type==="radio"},iCe=function(t){return!((XD(t)||nCe(t))&&(t.type==="hidden"||t.disabled))},rCe=function(t){var e=t.getAttribute(FIe);return![!0,"true",""].includes(e)},cV=function(t){var e;return!!(t&&(!((e=xD(t))===null||e===void 0)&&e.focusGuard))},PR=function(t){return!cV(t)},oCe=function(t){return!!t},sCe=function(t,e){var n=Math.max(0,t.tabIndex),i=Math.max(0,e.tabIndex),r=n-i,o=t.index-e.index;if(r){if(!n)return 1;if(!i)return-1}return r||o},aCe=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},uV=function(t,e,n){return zs(t).map(function(i,r){var o=aCe(i);return{node:i,index:r,tabIndex:n&&o===-1?(i.dataset||{}).focusGuard?0:-1:o}}).filter(function(i){return!e||i.tabIndex>=0}).sort(sCe)},lCe=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],dV=lCe.join(","),gCe="".concat(dV,", [data-focus-guard]"),ED=function(t,e){return zs((t.shadowRoot||t).children).reduce(function(n,i){return n.concat(i.matches(e?gCe:dV)?[i]:[],ED(i))},[])},cCe=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?gI([t.contentDocument.body],e):[t]},gI=function(t,e){return t.reduce(function(n,i){var r,o=ED(i,e),s=(r=[]).concat.apply(r,o.map(function(a){return cCe(a,e)}));return n.concat(s,i.parentNode?zs(i.parentNode.querySelectorAll(dV)).filter(function(a){return a===i}):[])},[])},uCe=function(t){var e=t.querySelectorAll("[".concat(YIe,"]"));return zs(e).map(function(n){return gI([n])}).reduce(function(n,i){return n.concat(i)},[])},IV=function(t,e){return zs(t).filter(function(n){return wD(e,n)}).filter(function(n){return iCe(n)})},UE=function(t,e){return e===void 0&&(e=new Map),zs(t).filter(function(n){return WD(e,n)})},CV=function(t,e,n){return uV(IV(gI(t,n),e),!0,n)},m0=function(t,e){return uV(IV(gI(t),e),!1)},dCe=function(t,e){return IV(uCe(t),e)},Sc=function(t,e){return t.shadowRoot?Sc(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:zs(t.children).some(function(n){var i;if(n instanceof HTMLIFrameElement){var r=(i=n.contentDocument)===null||i===void 0?void 0:i.body;return r?Sc(r,e):!1}return Sc(n,e)})},ICe=function(t){for(var e=new Set,n=t.length,i=0;i<n;i+=1)for(var r=i+1;r<n;r+=1){var o=t[i].compareDocumentPosition(t[r]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(r),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(i)}return t.filter(function(s,a){return!e.has(a)})},HD=function(t){return t.parentNode?HD(t.parentNode):t},hV=function(t){var e=Nc(t);return e.filter(Boolean).reduce(function(n,i){var r=i.getAttribute(KR);return n.push.apply(n,r?ICe(zs(HD(i).querySelectorAll("[".concat(KR,'="').concat(r,'"]:not([').concat(hD,'="disabled"])')))):[i]),n},[])},CCe=function(t){try{return t()}catch{return}},Zf=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?Zf(e.shadowRoot):e instanceof HTMLIFrameElement&&CCe(function(){return e.contentWindow.document})?Zf(e.contentWindow.document):e}},hCe=function(t,e){return t===e},fCe=function(t,e){return!!zs(t.querySelectorAll("iframe")).some(function(n){return hCe(n,e)})},ND=function(t,e){return e===void 0&&(e=Zf(RD(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:hV(t).some(function(n){return Sc(n,e)||fCe(n,e)})},mCe=function(t){t===void 0&&(t=document);var e=Zf(t);return e?zs(t.querySelectorAll("[".concat(NIe,"]"))).some(function(n){return Sc(n,e)}):!1},pCe=function(t,e){return e.filter(JD).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},fV=function(t,e){return JD(t)&&t.name?pCe(t,e):t},ACe=function(t){var e=new Set;return t.forEach(function(n){return e.add(fV(n,t))}),t.filter(function(n){return e.has(n)})},jE=function(t){return t[0]&&t.length>1?fV(t[0],t):t[0]},OE=function(t,e){return t.indexOf(fV(e,t))},UR="NEW_FOCUS",bCe=function(t,e,n,i,r){var o=t.length,s=t[0],a=t[o-1],l=cV(i);if(!(i&&t.indexOf(i)>=0)){var g=i!==void 0?n.indexOf(i):-1,u=r?n.indexOf(r):g,d=r?t.indexOf(r):-1;if(g===-1)return d!==-1?d:UR;if(d===-1)return UR;var h=g-u,f=n.indexOf(s),A=n.indexOf(a),p=ACe(n),y=i!==void 0?p.indexOf(i):-1,v=y-(r?p.indexOf(r):g);if(!h&&d>=0||e.length===0)return d;var S=OE(t,e[0]),Z=OE(t,e[e.length-1]);if(g<=f&&l&&Math.abs(h)>1)return Z;if(g>=A&&l&&Math.abs(h)>1)return S;if(h&&Math.abs(v)>1)return d;if(g<=f)return Z;if(g>A)return S;if(h)return Math.abs(h)>1?d:(o+d+h)%o}},yCe=function(t){return function(e){var n,i=(n=xD(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||i!==void 0&&i!=="false"||t.indexOf(e)>=0}},QE=function(t,e,n){var i=t.map(function(o){var s=o.node;return s}),r=UE(i.filter(yCe(n)));return r&&r.length?jE(r):jE(UE(e))},jR=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&jR(t.parentNode.host||t.parentNode,e),e},qZ=function(t,e){for(var n=jR(t),i=jR(e),r=0;r<n.length;r+=1){var o=n[r];if(i.indexOf(o)>=0)return o}return!1},YD=function(t,e,n){var i=Nc(t),r=Nc(e),o=i[0],s=!1;return r.filter(Boolean).forEach(function(a){s=qZ(s||a,a)||s,n.filter(Boolean).forEach(function(l){var g=qZ(o,l);g&&(!s||Sc(g,s)?s=g:s=qZ(g,s))})}),s},$E=function(t,e){return t.reduce(function(n,i){return n.concat(dCe(i,e))},[])},vCe=function(t,e){var n=new Map;return e.forEach(function(i){return n.set(i.node,i)}),t.map(function(i){return n.get(i)}).filter(oCe)},SCe=function(t,e){var n=Zf(Nc(t).length>0?document:RD(t).ownerDocument),i=hV(t).filter(PR),r=YD(n||t,t,i),o=new Map,s=m0(i,o),a=s.filter(function(A){var p=A.node;return PR(p)});if(a[0]){var l=m0([r],o).map(function(A){var p=A.node;return p}),g=vCe(l,a),u=g.map(function(A){var p=A.node;return p}),d=g.filter(function(A){var p=A.tabIndex;return p>=0}).map(function(A){var p=A.node;return p}),h=bCe(u,d,l,n,e);if(h===UR){var f=QE(s,d,$E(i,o))||QE(s,u,$E(i,o));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return h===void 0?h:g[h]}},ZCe=function(t){var e=hV(t).filter(PR),n=YD(t,t,e),i=uV(gI([n],!0),!0,!0),r=gI(e,!1);return i.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:r.indexOf(s)>=0,guard:cV(s)}})},mV=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},eG=0,tG=!1,FD=function(t,e,n){n===void 0&&(n={});var i=SCe(t,e);if(!tG&&i){if(eG>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),tG=!0,setTimeout(function(){tG=!1},1);return}eG++,mV(i.node,n.focusOptions),eG--}};function RC(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var GCe=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:RC(n),parent:RC(n.parentElement),left:RC(n.previousElementSibling),right:RC(n.nextElementSibling)}),n=n.parentElement;return{element:RC(t),stack:e,ownerDocument:t.ownerDocument}},BCe=function(t){var e,n,i,r,o;if(t)for(var s=t.stack,a=t.ownerDocument,l=new Map,g=0,u=s;g<u.length;g++){var d=u[g],h=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(h&&a.contains(h)){for(var f=(n=d.left)===null||n===void 0?void 0:n.call(d),A=d.current(),p=h.contains(A)?A:void 0,y=(i=d.right)===null||i===void 0?void 0:i.call(d),v=CV([h],l),S=(o=(r=p??(f==null?void 0:f.nextElementSibling))!==null&&r!==void 0?r:y)!==null&&o!==void 0?o:f;S;){for(var Z=0,R=v;Z<R.length;Z++){var W=R[Z];if(S!=null&&S.contains(W.node))return W.node}S=S.nextElementSibling}if(v.length)return v[0].node}}},RCe=function(t){var e=GCe(t);return function(){return BCe(e)}},kCe=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var i=Nc(e);if(i.every(function(s){return!Sc(s,t)}))return console.error("Active element is not contained in the scope"),{};var r=n?CV(i,new Map):m0(i,new Map),o=r.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:r[o-1],next:r[o+1],first:r[0],last:r[r.length-1]}},VCe=function(t,e){var n=e?CV(Nc(t),new Map):m0(Nc(t),new Map);return{first:n[0],last:n[n.length-1]}},wCe=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},MD=function(t,e,n){e===void 0&&(e={});var i=wCe(e),r=kCe(t,i.scope,i.onlyTabbable);if(r){var o=n(r,i.cycle);o&&mV(o.node,i.focusOptions)}},WCe=function(t,e){e===void 0&&(e={}),MD(t,e,function(n,i){var r=n.next,o=n.first;return r||i&&o})},xCe=function(t,e){e===void 0&&(e={}),MD(t,e,function(n,i){var r=n.prev,o=n.last;return r||i&&o})},TD=function(t,e,n){var i,r=VCe(t,(i=e.onlyTabbable)!==null&&i!==void 0?i:!0),o=r[n];o&&mV(o.node,e.focusOptions)},XCe=function(t,e){e===void 0&&(e={}),TD(t,e,"first")},JCe=function(t,e){e===void 0&&(e={}),TD(t,e,"last")};function pV(t){setTimeout(t,1)}var ECe=function(e){return e&&"current"in e?e.current:e},HCe=function(){return document&&document.activeElement===document.body},NCe=function(){return HCe()||mCe()},Fd=null,yd=null,Md=null,Gf=!1,YCe=function(){return!0},FCe=function(e){return(Fd.whiteList||YCe)(e)},MCe=function(e,n){Md={observerNode:e,portaledElement:n}},TCe=function(e){return Md&&Md.portaledElement===e};function qE(t,e,n,i){var r=null,o=t;do{var s=i[o];if(s.guard)s.node.dataset.focusAutoGuard&&(r=s);else if(s.lockItem){if(o!==t)return;r=null}else break}while((o+=n)!==e);r&&(r.node.tabIndex=0)}var LCe=function(e){return e?!!Gf:Gf==="meanwhile"},_Ce=function t(e,n,i){return n&&(n.host===e&&(!n.activeElement||i.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,i))},DCe=function(e,n){return n.some(function(i){return _Ce(e,i,i)})},p0=function(){var e=!1;if(Fd){var n=Fd,i=n.observed,r=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,l=n.focusOptions,g=i||Md&&Md.portaledElement,u=document&&document.activeElement;if(g){var d=[g].concat(s.map(ECe).filter(Boolean));if((!u||FCe(u))&&(r||LCe(a)||!NCe()||!yd&&o)&&(g&&!(ND(d)||u&&DCe(u,d)||TCe(u))&&(document&&!yd&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(e=FD(d,yd,{focusOptions:l}),Md={})),Gf=!1,yd=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,f=ZCe(d),A=f.map(function(p){var y=p.node;return y}).indexOf(h);A>-1&&(f.filter(function(p){var y=p.guard,v=p.node;return y&&v.dataset.focusAutoGuard}).forEach(function(p){var y=p.node;return y.removeAttribute("tabIndex")}),qE(A,f.length,1,f),qE(A,-1,-1,f))}}}return e},LD=function(e){p0()&&e&&(e.stopPropagation(),e.preventDefault())},AV=function(){return pV(p0)},KCe=function(e){var n=e.target,i=e.currentTarget;i.contains(n)||MCe(i,n)},zCe=function(){return null},_D=function(){Gf="just",pV(function(){Gf="meanwhile"})},PCe=function(){document.addEventListener("focusin",LD),document.addEventListener("focusout",AV),window.addEventListener("blur",_D)},UCe=function(){document.removeEventListener("focusin",LD),document.removeEventListener("focusout",AV),window.removeEventListener("blur",_D)};function jCe(t){return t.filter(function(e){var n=e.disabled;return!n})}var DD={moveFocusInside:FD,focusInside:ND,focusNextElement:WCe,focusPrevElement:xCe,focusFirstElement:XCe,focusLastElement:JCe,captureFocusRestore:RCe};function OCe(t){var e=t.slice(-1)[0];e&&!Fd&&PCe();var n=Fd,i=n&&e&&e.id===n.id;Fd=e,n&&!i&&(n.onDeactivation(),t.filter(function(r){var o=r.id;return o===n.id}).length||n.returnFocus(!e)),e?(yd=null,(!i||n.observed!==e.observed)&&e.onActivation(DD),p0(),pV(p0)):(UCe(),yd=null)}vD.assignSyncMedium(KCe);SD.assignMedium(AV);DIe.assignMedium(function(t){return t(DD)});const QCe=QIe(jCe,OCe)(zCe);var KD=m.forwardRef(function(e,n){return m.createElement(GD,og({sideCar:QCe,ref:n},e))}),zD=GD.propTypes||{};zD.sideCar;cD(zD,["sideCar"]);KD.propTypes={};const e5=KD;function PD(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function UD(t){var e;if(!PD(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function $Ce(t){var e,n;return(n=(e=jD(t))==null?void 0:e.defaultView)!=null?n:window}function jD(t){return PD(t)?t.ownerDocument:document}function qCe(t){return jD(t).activeElement}var OD=t=>t.hasAttribute("tabindex"),ehe=t=>OD(t)&&t.tabIndex===-1;function the(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function QD(t){return t.parentElement&&QD(t.parentElement)?!0:t.hidden}function nhe(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function $D(t){if(!UD(t)||QD(t)||the(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const i={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in i?i[e]():nhe(t)?!0:OD(t)}function ihe(t){return t?UD(t)&&$D(t)&&!ehe(t):!1}var rhe=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],ohe=rhe.join(),she=t=>t.offsetWidth>0&&t.offsetHeight>0;function qD(t){const e=Array.from(t.querySelectorAll(ohe));return e.unshift(t),e.filter(n=>$D(n)&&she(n))}var t5,ahe=(t5=e5.default)!=null?t5:e5,eK=t=>{const{initialFocusRef:e,finalFocusRef:n,contentRef:i,restoreFocus:r,children:o,isDisabled:s,autoFocus:a,persistentFocus:l,lockFocusAcrossFrames:g}=t,u=m.useCallback(()=>{e!=null&&e.current?e.current.focus():i!=null&&i.current&&qD(i.current).length===0&&requestAnimationFrame(()=>{var A;(A=i.current)==null||A.focus()})},[e,i]),d=m.useCallback(()=>{var f;(f=n==null?void 0:n.current)==null||f.focus()},[n]),h=r&&!n;return C.jsx(ahe,{crossFrame:g,persistentFocus:l,autoFocus:a,disabled:s,onActivation:u,onDeactivation:d,returnFocus:h,children:o})};eK.displayName="FocusLock";var lhe=lae?m.useLayoutEffect:m.useEffect;function n5(t,e=[]){const n=m.useRef(t);return lhe(()=>{n.current=t}),m.useCallback((...i)=>{var r;return(r=n.current)==null?void 0:r.call(n,...i)},e)}function ghe(t,e){const n=m.useId();return m.useMemo(()=>t||[e,n].filter(Boolean).join("-"),[t,e,n])}function che(t,e){const n=t!==void 0;return[n,n&&typeof t<"u"?t:e]}function Go(t={}){const{onClose:e,onOpen:n,isOpen:i,id:r}=t,o=n5(n),s=n5(e),[a,l]=m.useState(t.defaultIsOpen||!1),[g,u]=che(i,a),d=ghe(r,"disclosure"),h=m.useCallback(()=>{g||l(!1),s==null||s()},[g,s]),f=m.useCallback(()=>{g||l(!0),o==null||o()},[g,o]),A=m.useCallback(()=>{(u?h:f)()},[u,f,h]);return{isOpen:!!u,onOpen:f,onClose:h,onToggle:A,isControlled:g,getButtonProps:(p={})=>({...p,"aria-expanded":u,"aria-controls":d,onClick:Iae(p.onClick,A)}),getDisclosureProps:(p={})=>({...p,hidden:!u,id:d})}}var[uhe,dhe]=ni({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),bV=Fe(function(e,n){const i=Or("Input",e),{children:r,className:o,...s}=wn(e),a=it("chakra-input__group",o),l={},g=oV(r),u=i.field;g.forEach(h=>{var f,A;i&&(u&&h.type.id==="InputLeftElement"&&(l.paddingStart=(f=u.height)!=null?f:u.h),u&&h.type.id==="InputRightElement"&&(l.paddingEnd=(A=u.height)!=null?A:u.h),h.type.id==="InputRightAddon"&&(l.borderEndRadius=0),h.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const d=g.map(h=>{var f,A;const p=m_({size:((f=h.props)==null?void 0:f.size)||e.size,variant:((A=h.props)==null?void 0:A.variant)||e.variant});return h.type.id!=="Input"?m.cloneElement(h,p):m.cloneElement(h,Object.assign(p,l,h.props))});return C.jsx(Re.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...i.group},"data-group":!0,...s,children:C.jsx(uhe,{value:i,children:d})})});bV.displayName="InputGroup";var Ihe=Re("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),jy=Fe(function(e,n){var i,r;const{placement:o="left",...s}=e,a=dhe(),l=a.field,u={[o==="left"?"insetStart":"insetEnd"]:"0",width:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,height:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return C.jsx(Ihe,{ref:n,__css:u,...s})});jy.id="InputElement";jy.displayName="InputElement";var tK=Fe(function(e,n){const{className:i,...r}=e,o=it("chakra-input__left-element",i);return C.jsx(jy,{ref:n,placement:"left",className:o,...r})});tK.id="InputLeftElement";tK.displayName="InputLeftElement";var Oy=Fe(function(e,n){const{className:i,...r}=e,o=it("chakra-input__right-element",i);return C.jsx(jy,{ref:n,placement:"right",className:o,...r})});Oy.id="InputRightElement";Oy.displayName="InputRightElement";var _e=Fe(function(e,n){const{htmlSize:i,...r}=e,o=Or("Input",r),s=wn(r),a=sV(s),l=it("chakra-input",e.className);return C.jsx(Re.input,{size:i,...a,__css:o.field,ref:n,className:l})});_e.displayName="Input";_e.id="Input";var Tn=Fe(function(e,n){const i=jr("Link",e),{className:r,isExternal:o,...s}=wn(e);return C.jsx(Re.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:it("chakra-link",r),...s,__css:i})});Tn.displayName="Link";var[Che,nK]=ni({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),_a=Fe(function(e,n){const i=Or("List",e),{children:r,styleType:o="none",stylePosition:s,spacing:a,...l}=wn(e),g=oV(r),d=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return C.jsx(Che,{value:i,children:C.jsx(Re.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...i.container,...d},...l,children:g})})});_a.displayName="List";var hhe=Fe((t,e)=>{const{as:n,...i}=t;return C.jsx(_a,{ref:e,as:"ol",styleType:"decimal",marginStart:"1em",...i})});hhe.displayName="OrderedList";var fhe=Fe(function(e,n){const{as:i,...r}=e;return C.jsx(_a,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...r})});fhe.displayName="UnorderedList";var Yc=Fe(function(e,n){const i=nK();return C.jsx(Re.li,{ref:n,...e,__css:i.item})});Yc.displayName="ListItem";var OR=Fe(function(e,n){const i=nK();return C.jsx(tu,{ref:n,role:"presentation",...e,__css:i.icon})});OR.displayName="ListIcon";var Ts=Fe(function(e,n){const{templateAreas:i,gap:r,rowGap:o,columnGap:s,column:a,row:l,autoFlow:g,autoRows:u,templateRows:d,autoColumns:h,templateColumns:f,...A}=e,p={display:"grid",gridTemplateAreas:i,gridGap:r,gridRowGap:o,gridColumnGap:s,gridAutoColumns:h,gridColumn:a,gridRow:l,gridAutoFlow:g,gridAutoRows:u,gridTemplateRows:d,gridTemplateColumns:f};return C.jsx(Re.div,{ref:n,__css:p,...A})});Ts.displayName="Grid";function mhe(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):pr(t)?Object.keys(t).reduce((n,i)=>(n[i]=e(t[i]),n),{}):t!=null?e(t):null}var ue=Fe(function(e,n){const i=jr("Text",e),{className:r,align:o,decoration:s,casing:a,...l}=wn(e),g=m_({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return C.jsx(Re.p,{ref:n,className:it("chakra-text",e.className),...g,...l,__css:i})});ue.displayName="Text";var phe=Fe(function(e,n){const{spacing:i="0.5rem",spacingX:r,spacingY:o,children:s,justify:a,direction:l,align:g,className:u,shouldWrapChildren:d,...h}=e,f=m.useMemo(()=>d?m.Children.map(s,(A,p)=>C.jsx(yV,{children:A},p)):s,[s,d]);return C.jsx(Re.div,{ref:n,className:it("chakra-wrap",u),...h,children:C.jsx(Re.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:a,alignItems:g,flexDirection:l,listStyleType:"none",gap:i,columnGap:r,rowGap:o,padding:"0"},children:f})})});phe.displayName="Wrap";var yV=Fe(function(e,n){const{className:i,...r}=e;return C.jsx(Re.li,{ref:n,__css:{display:"flex",alignItems:"flex-start"},className:it("chakra-wrap__listitem",i),...r})});yV.displayName="WrapItem";var iK=t=>C.jsx(Re.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});iK.displayName="StackItem";function Ahe(t){const{spacing:e,direction:n}=t,i={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":mhe(n,r=>i[r])}}var Qi=Fe((t,e)=>{const{isInline:n,direction:i,align:r,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:g,className:u,shouldWrapChildren:d,...h}=t,f=n?"row":i??"column",A=m.useMemo(()=>Ahe({spacing:s,direction:f}),[s,f]),p=!!g,y=!d&&!p,v=m.useMemo(()=>{const Z=oV(l);return y?Z:Z.map((R,W)=>{const B=typeof R.key<"u"?R.key:W,k=W+1===Z.length,J=d?C.jsx(iK,{children:R},B):R;if(!p)return J;const X=m.cloneElement(g,{__css:A}),Y=k?null:X;return C.jsxs(m.Fragment,{children:[J,Y]},B)})},[g,A,p,y,d,l]),S=it("chakra-stack",u);return C.jsx(Re.div,{ref:e,display:"flex",alignItems:r,justifyContent:o,flexDirection:f,flexWrap:a,gap:p?void 0:s,className:S,...h,children:v})});Qi.displayName="Stack";var sm=Fe((t,e)=>C.jsx(Qi,{align:"center",...t,direction:"column",ref:e}));sm.displayName="VStack";var Fc=Fe((t,e)=>C.jsx(Qi,{align:"center",...t,direction:"row",ref:e}));Fc.displayName="HStack";var Wo=Fe(function(e,n){const i=jr("Heading",e),{className:r,...o}=wn(e);return C.jsx(Re.h2,{ref:n,className:it("chakra-heading",e.className),...o,__css:i})});Wo.displayName="Heading";var Se=Re("div");Se.displayName="Box";var rK=Fe(function(e,n){const{size:i,centerContent:r=!0,...o}=e,s=r?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return C.jsx(Se,{ref:n,boxSize:i,__css:{...s,flexShrink:0,flexGrow:0},...o})});rK.displayName="Square";var bhe=Fe(function(e,n){const{size:i,...r}=e;return C.jsx(rK,{size:i,ref:n,borderRadius:"9999px",...r})});bhe.displayName="Circle";var oK=Fe(function(e,n){const i=jr("Badge",e),{className:r,...o}=wn(e);return C.jsx(Re.span,{ref:n,className:it("chakra-badge",e.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...i}})});oK.displayName="Badge";var A0=Re("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});A0.displayName="Center";var yhe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Fe(function(e,n){const{axis:i="both",...r}=e;return C.jsx(Re.div,{ref:n,__css:yhe[i],...r,position:"absolute"})});var sK=Fe(function(e,n){const{className:i,centerContent:r,...o}=wn(e),s=jr("Container",e);return C.jsx(Re.div,{ref:n,className:it("chakra-container",i),...o,__css:{...s,...r&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});sK.displayName="Container";var aK=Fe(function(e,n){const{borderLeftWidth:i,borderBottomWidth:r,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:g,...u}=jr("Divider",e),{className:d,orientation:h="horizontal",__css:f,...A}=wn(e),p={vertical:{borderLeftWidth:i||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:r||o||a||"1px",width:"100%"}};return C.jsx(Re.hr,{ref:n,"aria-orientation":h,...A,__css:{...u,border:"0",borderColor:g,borderStyle:l,...p[h],...f},className:it("chakra-divider",d)})});aK.displayName="Divider";var ae=Fe(function(e,n){const{direction:i,align:r,justify:o,wrap:s,basis:a,grow:l,shrink:g,...u}=e,d={display:"flex",flexDirection:i,alignItems:r,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:g};return C.jsx(Re.div,{ref:n,__css:d,...u})});ae.displayName="Flex";function i5(t,e={}){const{ssr:n=!0,fallback:i}=e,{getWindow:r}=Yae(),o=Array.isArray(t)?t:[t];let s=Array.isArray(i)?i:[i];s=s.filter(g=>g!=null);const[a,l]=m.useState(()=>o.map((g,u)=>({media:g,matches:n?!!s[u]:r().matchMedia(g).matches})));return m.useEffect(()=>{const g=r();l(o.map(h=>({media:h,matches:g.matchMedia(h).matches})));const u=o.map(h=>g.matchMedia(h)),d=h=>{l(f=>f.slice().map(A=>A.media===h.media?{...A,matches:h.matches}:A))};return u.forEach(h=>{typeof h.addListener=="function"?h.addListener(d):h.addEventListener("change",d)}),()=>{u.forEach(h=>{typeof h.removeListener=="function"?h.removeListener(d):h.removeEventListener("change",d)})}},[r]),a.map(g=>g.matches)}function vhe(t){const{key:e}=t;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function She(t={}){const{timeout:e=300,preventDefault:n=()=>!0}=t,[i,r]=m.useState([]),o=m.useRef(),s=()=>{o.current&&(clearTimeout(o.current),o.current=null)},a=()=>{s(),o.current=setTimeout(()=>{r([]),o.current=null},e)};m.useEffect(()=>s,[]);function l(g){return u=>{if(u.key==="Backspace"){const d=[...i];d.pop(),r(d);return}if(vhe(u)){const d=i.concat(u.key);n(u)&&(u.preventDefault(),u.stopPropagation()),r(d),g(d.join("")),a()}}}return l}function Zhe(t,e,n,i){if(e==null)return i;if(!i)return t.find(s=>n(s).toLowerCase().startsWith(e.toLowerCase()));const r=t.filter(o=>n(o).toLowerCase().startsWith(e.toLowerCase()));if(r.length>0){let o;return r.includes(i)?(o=r.indexOf(i)+1,o===r.length&&(o=0),r[o]):(o=t.indexOf(r[0]),t[o])}return i}function Ghe(){const t=m.useRef(new Map),e=t.current,n=m.useCallback((r,o,s,a)=>{t.current.set(s,{type:o,el:r,options:a}),r.addEventListener(o,s,a)},[]),i=m.useCallback((r,o,s,a)=>{r.removeEventListener(o,s,a),t.current.delete(s)},[]);return m.useEffect(()=>()=>{e.forEach((r,o)=>{i(r.el,r.type,o,r.options)})},[i,e]),{add:n,remove:i}}function nG(t){const e=t.target,{tagName:n,isContentEditable:i}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&i!==!0}function Bhe(t={}){const{ref:e,isDisabled:n,isFocusable:i,clickOnEnter:r=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:g,onKeyUp:u,tabIndex:d,onMouseOver:h,onMouseLeave:f,...A}=t,[p,y]=m.useState(!0),[v,S]=m.useState(!1),Z=Ghe(),R=K=>{K&&K.tagName!=="BUTTON"&&y(!1)},W=p?d:d||0,B=n&&!i,k=m.useCallback(K=>{if(n){K.stopPropagation(),K.preventDefault();return}K.currentTarget.focus(),l==null||l(K)},[n,l]),w=m.useCallback(K=>{v&&nG(K)&&(K.preventDefault(),K.stopPropagation(),S(!1),Z.remove(document,"keyup",w,!1))},[v,Z]),J=m.useCallback(K=>{if(g==null||g(K),n||K.defaultPrevented||K.metaKey||!nG(K.nativeEvent)||p)return;const _=r&&K.key==="Enter";o&&K.key===" "&&(K.preventDefault(),S(!0)),_&&(K.preventDefault(),K.currentTarget.click()),Z.add(document,"keyup",w,!1)},[n,p,g,r,o,Z,w]),X=m.useCallback(K=>{if(u==null||u(K),n||K.defaultPrevented||K.metaKey||!nG(K.nativeEvent)||p)return;o&&K.key===" "&&(K.preventDefault(),S(!1),K.currentTarget.click())},[o,p,n,u]),Y=m.useCallback(K=>{K.button===0&&(S(!1),Z.remove(document,"mouseup",Y,!1))},[Z]),z=m.useCallback(K=>{if(K.button!==0)return;if(n){K.stopPropagation(),K.preventDefault();return}p||S(!0),K.currentTarget.focus({preventScroll:!0}),Z.add(document,"mouseup",Y,!1),s==null||s(K)},[n,p,s,Z,Y]),P=m.useCallback(K=>{K.button===0&&(p||S(!1),a==null||a(K))},[a,p]),$=m.useCallback(K=>{if(n){K.preventDefault();return}h==null||h(K)},[n,h]),oe=m.useCallback(K=>{v&&(K.preventDefault(),S(!1)),f==null||f(K)},[v,f]),q=si(e,R);return p?{...A,ref:q,type:"button","aria-disabled":B?void 0:n,disabled:B,onClick:k,onMouseDown:s,onMouseUp:a,onKeyUp:u,onKeyDown:g,onMouseOver:h,onMouseLeave:f}:{...A,ref:q,role:"button","data-active":Gt(v),"aria-disabled":n?"true":void 0,tabIndex:B?void 0:W,onClick:k,onMouseDown:z,onMouseUp:P,onKeyUp:X,onKeyDown:J,onMouseOver:$,onMouseLeave:oe}}function Rhe(t){const e=t.current;if(!e)return!1;const n=qCe(e);return!n||e.contains(n)?!1:!!ihe(n)}function lK(t,e){const{shouldFocus:n,visible:i,focusRef:r}=e,o=n&&!i;Ec(()=>{if(!o||Rhe(t))return;const s=(r==null?void 0:r.current)||t.current;let a;if(s)return a=requestAnimationFrame(()=>{s.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(a)}},[o,t,r])}var khe={preventScroll:!0,shouldFocus:!1};function Vhe(t,e=khe){const{focusRef:n,preventScroll:i,shouldFocus:r,visible:o}=e,s=whe(t)?t.current:t,a=r&&o,l=m.useRef(a),g=m.useRef(o);Js(()=>{!g.current&&o&&(l.current=a),g.current=o},[o,a]);const u=m.useCallback(()=>{if(!(!o||!s||!l.current)&&(l.current=!1,!s.contains(document.activeElement)))if(n!=null&&n.current)requestAnimationFrame(()=>{var d;(d=n.current)==null||d.focus({preventScroll:i})});else{const d=qD(s);d.length>0&&requestAnimationFrame(()=>{d[0].focus({preventScroll:i})})}},[o,i,s,n]);Ec(()=>{u()},[u]),lV(s,"transitionend",u)}function whe(t){return"current"in t}var Yu=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),Fi={arrowShadowColor:Yu("--popper-arrow-shadow-color"),arrowSize:Yu("--popper-arrow-size","8px"),arrowSizeHalf:Yu("--popper-arrow-size-half"),arrowBg:Yu("--popper-arrow-bg"),transformOrigin:Yu("--popper-transform-origin"),arrowOffset:Yu("--popper-arrow-offset")};function Whe(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var xhe={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},Xhe=t=>xhe[t],r5={scroll:!0,resize:!0};function Jhe(t){let e;return typeof t=="object"?e={enabled:!0,options:{...r5,...t}}:e={enabled:t,options:r5},e}var Ehe={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},Hhe={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{o5(t)},effect:({state:t})=>()=>{o5(t)}},o5=t=>{t.elements.popper.style.setProperty(Fi.transformOrigin.var,Xhe(t.placement))},Nhe={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{Yhe(t)}},Yhe=t=>{var e;if(!t.placement)return;const n=Fhe(t.placement);if((e=t.elements)!=null&&e.arrow&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:Fi.arrowSize.varRef,height:Fi.arrowSize.varRef,zIndex:-1});const i={[Fi.arrowSizeHalf.var]:`calc(${Fi.arrowSize.varRef} / 2 - 1px)`,[Fi.arrowOffset.var]:`calc(${Fi.arrowSizeHalf.varRef} * -1)`};for(const r in i)t.elements.arrow.style.setProperty(r,i[r])}},Fhe=t=>{if(t.startsWith("top"))return{property:"bottom",value:Fi.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:Fi.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:Fi.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:Fi.arrowOffset.varRef}},Mhe={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{s5(t)},effect:({state:t})=>()=>{s5(t)}},s5=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=Whe(t.placement);n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:Fi.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},The={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},Lhe={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function _he(t,e="ltr"){var n,i;const r=((n=The[t])==null?void 0:n[e])||t;return e==="ltr"?r:(i=Lhe[t])!=null?i:r}var Ar="top",xo="bottom",Xo="right",br="left",vV="auto",am=[Ar,xo,Xo,br],cI="start",Bf="end",Dhe="clippingParents",gK="viewport",kC="popper",Khe="reference",a5=am.reduce(function(t,e){return t.concat([e+"-"+cI,e+"-"+Bf])},[]),cK=[].concat(am,[vV]).reduce(function(t,e){return t.concat([e,e+"-"+cI,e+"-"+Bf])},[]),zhe="beforeRead",Phe="read",Uhe="afterRead",jhe="beforeMain",Ohe="main",Qhe="afterMain",$he="beforeWrite",qhe="write",efe="afterWrite",tfe=[zhe,Phe,Uhe,jhe,Ohe,Qhe,$he,qhe,efe];function Ls(t){return t?(t.nodeName||"").toLowerCase():null}function Dr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Mc(t){var e=Dr(t).Element;return t instanceof e||t instanceof Element}function Bo(t){var e=Dr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function SV(t){if(typeof ShadowRoot>"u")return!1;var e=Dr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function nfe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!Bo(o)||!Ls(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(s){var a=r[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function ife(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},s=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=s.reduce(function(l,g){return l[g]="",l},{});!Bo(r)||!Ls(r)||(Object.assign(r.style,a),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}const rfe={name:"applyStyles",enabled:!0,phase:"write",fn:nfe,effect:ife,requires:["computeStyles"]};function Ns(t){return t.split("-")[0]}var Zc=Math.max,b0=Math.min,uI=Math.round;function QR(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function uK(){return!/^((?!chrome|android).)*safari/i.test(QR())}function dI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&Bo(t)&&(r=t.offsetWidth>0&&uI(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&uI(i.height)/t.offsetHeight||1);var s=Mc(t)?Dr(t):window,a=s.visualViewport,l=!uK()&&n,g=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/o,d=i.width/r,h=i.height/o;return{width:d,height:h,top:u,right:g+d,bottom:u+h,left:g,x:g,y:u}}function ZV(t){var e=dI(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function dK(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&SV(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Da(t){return Dr(t).getComputedStyle(t)}function ofe(t){return["table","td","th"].indexOf(Ls(t))>=0}function Ag(t){return((Mc(t)?t.ownerDocument:t.document)||window.document).documentElement}function Qy(t){return Ls(t)==="html"?t:t.assignedSlot||t.parentNode||(SV(t)?t.host:null)||Ag(t)}function l5(t){return!Bo(t)||Da(t).position==="fixed"?null:t.offsetParent}function sfe(t){var e=/firefox/i.test(QR()),n=/Trident/i.test(QR());if(n&&Bo(t)){var i=Da(t);if(i.position==="fixed")return null}var r=Qy(t);for(SV(r)&&(r=r.host);Bo(r)&&["html","body"].indexOf(Ls(r))<0;){var o=Da(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function lm(t){for(var e=Dr(t),n=l5(t);n&&ofe(n)&&Da(n).position==="static";)n=l5(n);return n&&(Ls(n)==="html"||Ls(n)==="body"&&Da(n).position==="static")?e:n||sfe(t)||e}function GV(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xh(t,e,n){return Zc(t,b0(e,n))}function afe(t,e,n){var i=xh(t,e,n);return i>n?n:i}function IK(){return{top:0,right:0,bottom:0,left:0}}function CK(t){return Object.assign({},IK(),t)}function hK(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var lfe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,CK(typeof e!="number"?e:hK(e,am))};function gfe(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Ns(n.placement),l=GV(a),g=[br,Xo].indexOf(a)>=0,u=g?"height":"width";if(!(!o||!s)){var d=lfe(r.padding,n),h=ZV(o),f=l==="y"?Ar:br,A=l==="y"?xo:Xo,p=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],y=s[l]-n.rects.reference[l],v=lm(o),S=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,Z=p/2-y/2,R=d[f],W=S-h[u]-d[A],B=S/2-h[u]/2+Z,k=xh(R,B,W),w=l;n.modifiersData[i]=(e={},e[w]=k,e.centerOffset=k-B,e)}}function cfe(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||dK(e.elements.popper,r)&&(e.elements.arrow=r))}const ufe={name:"arrow",enabled:!0,phase:"main",fn:gfe,effect:cfe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function II(t){return t.split("-")[1]}var dfe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ife(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:uI(n*r)/r||0,y:uI(i*r)/r||0}}function g5(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,g=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,f=h===void 0?0:h,A=s.y,p=A===void 0?0:A,y=typeof u=="function"?u({x:f,y:p}):{x:f,y:p};f=y.x,p=y.y;var v=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),Z=br,R=Ar,W=window;if(g){var B=lm(n),k="clientHeight",w="clientWidth";if(B===Dr(n)&&(B=Ag(n),Da(B).position!=="static"&&a==="absolute"&&(k="scrollHeight",w="scrollWidth")),B=B,r===Ar||(r===br||r===Xo)&&o===Bf){R=xo;var J=d&&B===W&&W.visualViewport?W.visualViewport.height:B[k];p-=J-i.height,p*=l?1:-1}if(r===br||(r===Ar||r===xo)&&o===Bf){Z=Xo;var X=d&&B===W&&W.visualViewport?W.visualViewport.width:B[w];f-=X-i.width,f*=l?1:-1}}var Y=Object.assign({position:a},g&&dfe),z=u===!0?Ife({x:f,y:p},Dr(n)):{x:f,y:p};if(f=z.x,p=z.y,l){var P;return Object.assign({},Y,(P={},P[R]=S?"0":"",P[Z]=v?"0":"",P.transform=(W.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",P))}return Object.assign({},Y,(e={},e[R]=S?p+"px":"",e[Z]=v?f+"px":"",e.transform="",e))}function Cfe(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,g={placement:Ns(e.placement),variation:II(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,g5(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,g5(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const hfe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Cfe,data:{}};var Mp={passive:!0};function ffe(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,s=i.resize,a=s===void 0?!0:s,l=Dr(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&g.forEach(function(u){u.addEventListener("scroll",n.update,Mp)}),a&&l.addEventListener("resize",n.update,Mp),function(){o&&g.forEach(function(u){u.removeEventListener("scroll",n.update,Mp)}),a&&l.removeEventListener("resize",n.update,Mp)}}const mfe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ffe,data:{}};var pfe={left:"right",right:"left",bottom:"top",top:"bottom"};function lb(t){return t.replace(/left|right|bottom|top/g,function(e){return pfe[e]})}var Afe={start:"end",end:"start"};function c5(t){return t.replace(/start|end/g,function(e){return Afe[e]})}function BV(t){var e=Dr(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function RV(t){return dI(Ag(t)).left+BV(t).scrollLeft}function bfe(t,e){var n=Dr(t),i=Ag(t),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var g=uK();(g||!g&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+RV(t),y:l}}function yfe(t){var e,n=Ag(t),i=BV(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Zc(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Zc(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+RV(t),l=-i.scrollTop;return Da(r||n).direction==="rtl"&&(a+=Zc(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function kV(t){var e=Da(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function fK(t){return["html","body","#document"].indexOf(Ls(t))>=0?t.ownerDocument.body:Bo(t)&&kV(t)?t:fK(Qy(t))}function Xh(t,e){var n;e===void 0&&(e=[]);var i=fK(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Dr(i),s=r?[o].concat(o.visualViewport||[],kV(i)?i:[]):i,a=e.concat(s);return r?a:a.concat(Xh(Qy(s)))}function $R(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function vfe(t,e){var n=dI(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function u5(t,e,n){return e===gK?$R(bfe(t,n)):Mc(e)?vfe(e,n):$R(yfe(Ag(t)))}function Sfe(t){var e=Xh(Qy(t)),n=["absolute","fixed"].indexOf(Da(t).position)>=0,i=n&&Bo(t)?lm(t):t;return Mc(i)?e.filter(function(r){return Mc(r)&&dK(r,i)&&Ls(r)!=="body"}):[]}function Zfe(t,e,n,i){var r=e==="clippingParents"?Sfe(t):[].concat(e),o=[].concat(r,[n]),s=o[0],a=o.reduce(function(l,g){var u=u5(t,g,i);return l.top=Zc(u.top,l.top),l.right=b0(u.right,l.right),l.bottom=b0(u.bottom,l.bottom),l.left=Zc(u.left,l.left),l},u5(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mK(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ns(i):null,o=i?II(i):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case Ar:l={x:s,y:e.y-n.height};break;case xo:l={x:s,y:e.y+e.height};break;case Xo:l={x:e.x+e.width,y:a};break;case br:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var g=r?GV(r):null;if(g!=null){var u=g==="y"?"height":"width";switch(o){case cI:l[g]=l[g]-(e[u]/2-n[u]/2);break;case Bf:l[g]=l[g]+(e[u]/2-n[u]/2);break}}return l}function Rf(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?Dhe:a,g=n.rootBoundary,u=g===void 0?gK:g,d=n.elementContext,h=d===void 0?kC:d,f=n.altBoundary,A=f===void 0?!1:f,p=n.padding,y=p===void 0?0:p,v=CK(typeof y!="number"?y:hK(y,am)),S=h===kC?Khe:kC,Z=t.rects.popper,R=t.elements[A?S:h],W=Zfe(Mc(R)?R:R.contextElement||Ag(t.elements.popper),l,u,s),B=dI(t.elements.reference),k=mK({reference:B,element:Z,strategy:"absolute",placement:r}),w=$R(Object.assign({},Z,k)),J=h===kC?w:B,X={top:W.top-J.top+v.top,bottom:J.bottom-W.bottom+v.bottom,left:W.left-J.left+v.left,right:J.right-W.right+v.right},Y=t.modifiersData.offset;if(h===kC&&Y){var z=Y[r];Object.keys(X).forEach(function(P){var $=[Xo,xo].indexOf(P)>=0?1:-1,oe=[Ar,xo].indexOf(P)>=0?"y":"x";X[P]+=z[oe]*$})}return X}function Gfe(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,g=l===void 0?cK:l,u=II(i),d=u?a?a5:a5.filter(function(A){return II(A)===u}):am,h=d.filter(function(A){return g.indexOf(A)>=0});h.length===0&&(h=d);var f=h.reduce(function(A,p){return A[p]=Rf(t,{placement:p,boundary:r,rootBoundary:o,padding:s})[Ns(p)],A},{});return Object.keys(f).sort(function(A,p){return f[A]-f[p]})}function Bfe(t){if(Ns(t)===vV)return[];var e=lb(t);return[c5(t),e,c5(e)]}function Rfe(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,g=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,A=f===void 0?!0:f,p=n.allowedAutoPlacements,y=e.options.placement,v=Ns(y),S=v===y,Z=l||(S||!A?[lb(y)]:Bfe(y)),R=[y].concat(Z).reduce(function(T,U){return T.concat(Ns(U)===vV?Gfe(e,{placement:U,boundary:u,rootBoundary:d,padding:g,flipVariations:A,allowedAutoPlacements:p}):U)},[]),W=e.rects.reference,B=e.rects.popper,k=new Map,w=!0,J=R[0],X=0;X<R.length;X++){var Y=R[X],z=Ns(Y),P=II(Y)===cI,$=[Ar,xo].indexOf(z)>=0,oe=$?"width":"height",q=Rf(e,{placement:Y,boundary:u,rootBoundary:d,altBoundary:h,padding:g}),K=$?P?Xo:br:P?xo:Ar;W[oe]>B[oe]&&(K=lb(K));var _=lb(K),de=[];if(o&&de.push(q[z]<=0),a&&de.push(q[K]<=0,q[_]<=0),de.every(function(T){return T})){J=Y,w=!1;break}k.set(Y,de)}if(w)for(var ne=A?3:1,se=function(U){var H=R.find(function(ie){var Ae=k.get(ie);if(Ae)return Ae.slice(0,U).every(function(Ie){return Ie})});if(H)return J=H,"break"},E=ne;E>0;E--){var M=se(E);if(M==="break")break}e.placement!==J&&(e.modifiersData[i]._skip=!0,e.placement=J,e.reset=!0)}}const kfe={name:"flip",enabled:!0,phase:"main",fn:Rfe,requiresIfExists:["offset"],data:{_skip:!1}};function d5(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function I5(t){return[Ar,Xo,xo,br].some(function(e){return t[e]>=0})}function Vfe(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=Rf(e,{elementContext:"reference"}),a=Rf(e,{altBoundary:!0}),l=d5(s,i),g=d5(a,r,o),u=I5(l),d=I5(g);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:g,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const wfe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vfe};function Wfe(t,e,n){var i=Ns(t),r=[br,Ar].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[br,Xo].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function xfe(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,s=cK.reduce(function(u,d){return u[d]=Wfe(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,g=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=g),e.modifiersData[i]=s}const Xfe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xfe};function Jfe(t){var e=t.state,n=t.name;e.modifiersData[n]=mK({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Efe={name:"popperOffsets",enabled:!0,phase:"read",fn:Jfe,data:{}};function Hfe(t){return t==="x"?"y":"x"}function Nfe(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,g=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,A=n.tetherOffset,p=A===void 0?0:A,y=Rf(e,{boundary:l,rootBoundary:g,padding:d,altBoundary:u}),v=Ns(e.placement),S=II(e.placement),Z=!S,R=GV(v),W=Hfe(R),B=e.modifiersData.popperOffsets,k=e.rects.reference,w=e.rects.popper,J=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,X=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(B){if(o){var P,$=R==="y"?Ar:br,oe=R==="y"?xo:Xo,q=R==="y"?"height":"width",K=B[R],_=K+y[$],de=K-y[oe],ne=f?-w[q]/2:0,se=S===cI?k[q]:w[q],E=S===cI?-w[q]:-k[q],M=e.elements.arrow,T=f&&M?ZV(M):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:IK(),H=U[$],ie=U[oe],Ae=xh(0,k[q],T[q]),Ie=Z?k[q]/2-ne-Ae-H-X.mainAxis:se-Ae-H-X.mainAxis,xe=Z?-k[q]/2+ne+Ae+ie+X.mainAxis:E+Ae+ie+X.mainAxis,Xe=e.elements.arrow&&lm(e.elements.arrow),Je=Xe?R==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,Ne=(P=Y==null?void 0:Y[R])!=null?P:0,et=K+Ie-Ne-Je,he=K+xe-Ne,Be=xh(f?b0(_,et):_,K,f?Zc(de,he):de);B[R]=Be,z[R]=Be-K}if(a){var Ge,Me=R==="x"?Ar:br,Oe=R==="x"?xo:Xo,Ye=B[W],Ct=W==="y"?"height":"width",j=Ye+y[Me],be=Ye-y[Oe],Ce=[Ar,br].indexOf(v)!==-1,We=(Ge=Y==null?void 0:Y[W])!=null?Ge:0,je=Ce?j:Ye-k[Ct]-w[Ct]-We+X.altAxis,tt=Ce?Ye+k[Ct]+w[Ct]-We-X.altAxis:be,ft=f&&Ce?afe(je,Ye,tt):xh(f?je:j,Ye,f?tt:be);B[W]=ft,z[W]=ft-Ye}e.modifiersData[i]=z}}const Yfe={name:"preventOverflow",enabled:!0,phase:"main",fn:Nfe,requiresIfExists:["offset"]};function Ffe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Mfe(t){return t===Dr(t)||!Bo(t)?BV(t):Ffe(t)}function Tfe(t){var e=t.getBoundingClientRect(),n=uI(e.width)/t.offsetWidth||1,i=uI(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Lfe(t,e,n){n===void 0&&(n=!1);var i=Bo(e),r=Bo(e)&&Tfe(e),o=Ag(e),s=dI(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Ls(e)!=="body"||kV(o))&&(a=Mfe(e)),Bo(e)?(l=dI(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=RV(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function _fe(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function Dfe(t){var e=_fe(t);return tfe.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Kfe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function zfe(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var C5={placement:"bottom",modifiers:[],strategy:"absolute"};function h5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Pfe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?C5:r;return function(a,l,g){g===void 0&&(g=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},C5,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(v){var S=typeof v=="function"?v(u.options):v;p(),u.options=Object.assign({},o,u.options,S),u.scrollParents={reference:Mc(a)?Xh(a):a.contextElement?Xh(a.contextElement):[],popper:Xh(l)};var Z=Dfe(zfe([].concat(i,u.options.modifiers)));return u.orderedModifiers=Z.filter(function(R){return R.enabled}),A(),f.update()},forceUpdate:function(){if(!h){var v=u.elements,S=v.reference,Z=v.popper;if(h5(S,Z)){u.rects={reference:Lfe(S,lm(Z),u.options.strategy==="fixed"),popper:ZV(Z)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(X){return u.modifiersData[X.name]=Object.assign({},X.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var W=u.orderedModifiers[R],B=W.fn,k=W.options,w=k===void 0?{}:k,J=W.name;typeof B=="function"&&(u=B({state:u,options:w,name:J,instance:f})||u)}}}},update:Kfe(function(){return new Promise(function(y){f.forceUpdate(),y(u)})}),destroy:function(){p(),h=!0}};if(!h5(a,l))return f;f.setOptions(g).then(function(y){!h&&g.onFirstUpdate&&g.onFirstUpdate(y)});function A(){u.orderedModifiers.forEach(function(y){var v=y.name,S=y.options,Z=S===void 0?{}:S,R=y.effect;if(typeof R=="function"){var W=R({state:u,name:v,instance:f,options:Z}),B=function(){};d.push(W||B)}})}function p(){d.forEach(function(y){return y()}),d=[]}return f}}var Ufe=[mfe,Efe,hfe,rfe,Xfe,kfe,Yfe,ufe,wfe],jfe=Pfe({defaultModifiers:Ufe});function pK(t={}){const{enabled:e=!0,modifiers:n,placement:i="bottom",strategy:r="absolute",arrowPadding:o=8,eventListeners:s=!0,offset:a,gutter:l=8,flip:g=!0,boundary:u="clippingParents",preventOverflow:d=!0,matchWidth:h,direction:f="ltr"}=t,A=m.useRef(null),p=m.useRef(null),y=m.useRef(null),v=_he(i,f),S=m.useRef(()=>{}),Z=m.useCallback(()=>{var X;!e||!A.current||!p.current||((X=S.current)==null||X.call(S),y.current=jfe(A.current,p.current,{placement:v,modifiers:[Mhe,Nhe,Hhe,{...Ehe,enabled:!!h},{name:"eventListeners",...Jhe(s)},{name:"arrow",options:{padding:o}},{name:"offset",options:{offset:a??[0,l]}},{name:"flip",enabled:!!g,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:u}},...n??[]],strategy:r}),y.current.forceUpdate(),S.current=y.current.destroy)},[v,e,n,h,s,o,a,l,g,d,u,r]);m.useEffect(()=>()=>{var X;!A.current&&!p.current&&((X=y.current)==null||X.destroy(),y.current=null)},[]);const R=m.useCallback(X=>{A.current=X,Z()},[Z]),W=m.useCallback((X={},Y=null)=>({...X,ref:si(R,Y)}),[R]),B=m.useCallback(X=>{p.current=X,Z()},[Z]),k=m.useCallback((X={},Y=null)=>({...X,ref:si(B,Y),style:{...X.style,position:r,minWidth:h?void 0:"max-content",inset:"0 auto auto 0"}}),[r,B,h]),w=m.useCallback((X={},Y=null)=>{const{size:z,shadowColor:P,bg:$,style:oe,...q}=X;return{...q,ref:Y,"data-popper-arrow":"",style:Ofe(X)}},[]),J=m.useCallback((X={},Y=null)=>({...X,ref:Y,"data-popper-arrow-inner":""}),[]);return{update(){var X;(X=y.current)==null||X.update()},forceUpdate(){var X;(X=y.current)==null||X.forceUpdate()},transformOrigin:Fi.transformOrigin.varRef,referenceRef:R,popperRef:B,getPopperProps:k,getArrowProps:w,getArrowInnerProps:J,getReferenceProps:W}}function Ofe(t){const{size:e,shadowColor:n,bg:i,style:r}=t,o={...r,position:"absolute"};return e&&(o["--popper-arrow-size"]=e),n&&(o["--popper-arrow-shadow-color"]=n),i&&(o["--popper-arrow-bg"]=i),o}function AK(t={}){const{onClose:e,onOpen:n,isOpen:i,id:r}=t,o=Zo(n),s=Zo(e),[a,l]=m.useState(t.defaultIsOpen||!1),g=i!==void 0?i:a,u=i!==void 0,d=m.useId(),h=r??`disclosure-${d}`,f=m.useCallback(()=>{u||l(!1),s==null||s()},[u,s]),A=m.useCallback(()=>{u||l(!0),o==null||o()},[u,o]),p=m.useCallback(()=>{g?f():A()},[g,A,f]);function y(S={}){return{...S,"aria-expanded":g,"aria-controls":h,onClick(Z){var R;(R=S.onClick)==null||R.call(S,Z),p()}}}function v(S={}){return{...S,hidden:!g,id:h}}return{isOpen:g,onOpen:A,onClose:f,onToggle:p,isControlled:u,getButtonProps:y,getDisclosureProps:v}}function Qfe(t){const{ref:e,handler:n,enabled:i=!0}=t,r=Zo(n),s=m.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;m.useEffect(()=>{if(!i)return;const a=d=>{iG(d,e)&&(s.isPointerDown=!0)},l=d=>{if(s.ignoreEmulatedMouseEvents){s.ignoreEmulatedMouseEvents=!1;return}s.isPointerDown&&n&&iG(d,e)&&(s.isPointerDown=!1,r(d))},g=d=>{s.ignoreEmulatedMouseEvents=!0,n&&s.isPointerDown&&iG(d,e)&&(s.isPointerDown=!1,r(d))},u=bK(e.current);return u.addEventListener("mousedown",a,!0),u.addEventListener("mouseup",l,!0),u.addEventListener("touchstart",a,!0),u.addEventListener("touchend",g,!0),()=>{u.removeEventListener("mousedown",a,!0),u.removeEventListener("mouseup",l,!0),u.removeEventListener("touchstart",a,!0),u.removeEventListener("touchend",g,!0)}},[n,e,r,s,i])}function iG(t,e){var n;const i=t.target;return i&&!bK(i).contains(i)?!1:!((n=e.current)!=null&&n.contains(i))}function bK(t){var e;return(e=t==null?void 0:t.ownerDocument)!=null?e:document}function yK(t){const{isOpen:e,ref:n}=t,[i,r]=m.useState(e),[o,s]=m.useState(!1);return m.useEffect(()=>{o||(r(e),s(!0))},[e,o,i]),lV(()=>n.current,"animationend",()=>{r(e)}),{present:!(e?!1:!i),onComplete(){var l;const g=$Ce(n.current),u=new g.CustomEvent("animationend",{bubbles:!0});(l=n.current)==null||l.dispatchEvent(u)}}}function vK(t){const{wasSelected:e,enabled:n,isSelected:i,mode:r="unmount"}=t;return!!(!n||i||r==="keepMounted"&&e)}var[$fe,qfe,eme,tme]=Hde(),[nme,gm]=ni({strict:!1,name:"MenuContext"});function ime(t,...e){const n=m.useId(),i=t||n;return m.useMemo(()=>e.map(r=>`${r}-${i}`),[i,e])}function SK(t){var e;return(e=t==null?void 0:t.ownerDocument)!=null?e:document}function f5(t){return SK(t).activeElement===t}function rme(t={}){const{id:e,closeOnSelect:n=!0,closeOnBlur:i=!0,initialFocusRef:r,autoSelect:o=!0,isLazy:s,isOpen:a,defaultIsOpen:l,onClose:g,onOpen:u,placement:d="bottom-start",lazyBehavior:h="unmount",direction:f,computePositionOnMount:A=!1,...p}=t,y=m.useRef(null),v=m.useRef(null),S=eme(),Z=m.useCallback(()=>{requestAnimationFrame(()=>{var M;(M=y.current)==null||M.focus({preventScroll:!1})})},[]),R=m.useCallback(()=>{const M=setTimeout(()=>{var T;if(r)(T=r.current)==null||T.focus();else{const U=S.firstEnabled();U&&P(U.index)}});_.current.add(M)},[S,r]),W=m.useCallback(()=>{const M=setTimeout(()=>{const T=S.lastEnabled();T&&P(T.index)});_.current.add(M)},[S]),B=m.useCallback(()=>{u==null||u(),o?R():Z()},[o,R,Z,u]),{isOpen:k,onOpen:w,onClose:J,onToggle:X}=AK({isOpen:a,defaultIsOpen:l,onClose:g,onOpen:B});Qfe({enabled:k&&i,ref:y,handler:M=>{var T;(T=v.current)!=null&&T.contains(M.target)||J()}});const Y=pK({...p,enabled:k||A,placement:d,direction:f}),[z,P]=m.useState(-1);Ec(()=>{k||P(-1)},[k]),lK(y,{focusRef:v,visible:k,shouldFocus:!0});const $=yK({isOpen:k,ref:y}),[oe,q]=ime(e,"menu-button","menu-list"),K=m.useCallback(()=>{w(),Z()},[w,Z]),_=m.useRef(new Set([]));m.useEffect(()=>{const M=_.current;return()=>{M.forEach(T=>clearTimeout(T)),M.clear()}},[]);const de=m.useCallback(()=>{w(),R()},[R,w]),ne=m.useCallback(()=>{w(),W()},[w,W]),se=m.useCallback(()=>{var M,T;const U=SK(y.current),H=(M=y.current)==null?void 0:M.contains(U.activeElement);if(!(k&&!H))return;const Ae=(T=S.item(z))==null?void 0:T.node;Ae==null||Ae.focus({preventScroll:!0})},[k,z,S]),E=m.useRef(null);return{openAndFocusMenu:K,openAndFocusFirstItem:de,openAndFocusLastItem:ne,onTransitionEnd:se,unstable__animationState:$,descendants:S,popper:Y,buttonId:oe,menuId:q,forceUpdate:Y.forceUpdate,orientation:"vertical",isOpen:k,onToggle:X,onOpen:w,onClose:J,menuRef:y,buttonRef:v,focusedIndex:z,closeOnSelect:n,closeOnBlur:i,autoSelect:o,setFocusedIndex:P,isLazy:s,lazyBehavior:h,initialFocusRef:r,rafId:E}}function ome(t={},e=null){const n=gm(),{onToggle:i,popper:r,openAndFocusFirstItem:o,openAndFocusLastItem:s}=n,a=m.useCallback(l=>{const g=l.key,d={Enter:o,ArrowDown:o,ArrowUp:s}[g];d&&(l.preventDefault(),l.stopPropagation(),d(l))},[o,s]);return{...t,ref:si(n.buttonRef,e,r.referenceRef),id:n.buttonId,"data-active":Gt(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:Yt(t.onClick,i),onKeyDown:Yt(t.onKeyDown,a)}}function qR(t){var e;return gme(t)&&!!((e=t==null?void 0:t.getAttribute("role"))!=null&&e.startsWith("menuitem"))}function sme(t={},e=null){const n=gm();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:i,setFocusedIndex:r,menuRef:o,isOpen:s,onClose:a,menuId:l,isLazy:g,lazyBehavior:u,unstable__animationState:d}=n,h=qfe(),f=She({preventDefault:v=>v.key!==" "&&qR(v.target)}),A=m.useCallback(v=>{if(!v.currentTarget.contains(v.target))return;const S=v.key,R={Tab:B=>B.preventDefault(),Escape:a,ArrowDown:()=>{const B=h.nextEnabled(i);B&&r(B.index)},ArrowUp:()=>{const B=h.prevEnabled(i);B&&r(B.index)}}[S];if(R){v.preventDefault(),R(v);return}const W=f(B=>{const k=Zhe(h.values(),B,w=>{var J,X;return(X=(J=w==null?void 0:w.node)==null?void 0:J.textContent)!=null?X:""},h.item(i));if(k){const w=h.indexOf(k.node);r(w)}});qR(v.target)&&W(v)},[h,i,f,a,r]),p=m.useRef(!1);s&&(p.current=!0);const y=vK({wasSelected:p.current,enabled:g,mode:u,isSelected:d.present});return{...t,ref:si(o,e),children:y?t.children:null,tabIndex:-1,role:"menu",id:l,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:Yt(t.onKeyDown,A)}}function ame(t={}){const{popper:e,isOpen:n}=gm();return e.getPopperProps({...t,style:{visibility:n?"visible":"hidden",...t.style}})}function lme(t={},e=null){const{onMouseEnter:n,onMouseMove:i,onMouseLeave:r,onClick:o,onFocus:s,isDisabled:a,isFocusable:l,closeOnSelect:g,type:u,...d}=t,h=gm(),{setFocusedIndex:f,focusedIndex:A,closeOnSelect:p,onClose:y,menuRef:v,isOpen:S,menuId:Z,rafId:R}=h,W=m.useRef(null),B=`${Z}-menuitem-${m.useId()}`,{index:k,register:w}=tme({disabled:a&&!l}),J=m.useCallback(K=>{n==null||n(K),!a&&f(k)},[f,k,a,n]),X=m.useCallback(K=>{i==null||i(K),W.current&&!f5(W.current)&&J(K)},[J,i]),Y=m.useCallback(K=>{r==null||r(K),!a&&f(-1)},[f,a,r]),z=m.useCallback(K=>{o==null||o(K),qR(K.currentTarget)&&(g??p)&&y()},[y,o,p,g]),P=m.useCallback(K=>{s==null||s(K),f(k)},[f,s,k]),$=k===A,oe=a&&!l;Ec(()=>{if(S)return $&&!oe&&W.current?(R.current&&cancelAnimationFrame(R.current),R.current=requestAnimationFrame(()=>{var K;(K=W.current)==null||K.focus({preventScroll:!0}),R.current=null})):v.current&&!f5(v.current)&&v.current.focus({preventScroll:!0}),()=>{R.current&&cancelAnimationFrame(R.current)}},[$,oe,v,S]);const q=Bhe({onClick:z,onFocus:P,onMouseEnter:J,onMouseMove:X,onMouseLeave:Y,ref:si(w,W,e),isDisabled:a,isFocusable:l});return{...d,...q,type:u??q.type,id:B,role:"menuitem",tabIndex:$?0:-1}}function gme(t){var e;if(!cme(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function cme(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}var[ume,cm]=ni({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),ZK=t=>{const{children:e}=t,n=Or("Menu",t),i=wn(t),{direction:r}=Hy(),{descendants:o,...s}=rme({...i,direction:r}),a=m.useMemo(()=>s,[s]),{isOpen:l,onClose:g,forceUpdate:u}=a;return C.jsx($fe,{value:o,children:C.jsx(nme,{value:a,children:C.jsx(ume,{value:n,children:yo(e,{isOpen:l,onClose:g,forceUpdate:u})})})})};ZK.displayName="Menu";var GK=Fe((t,e)=>{const n=cm();return C.jsx(Re.span,{ref:e,...t,__css:n.command,className:"chakra-menu__command"})});GK.displayName="MenuCommand";var dme=Fe((t,e)=>{const{type:n,...i}=t,r=cm(),o=i.as||n?n??void 0:"button",s=m.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...r.item}),[r.item]);return C.jsx(Re.button,{ref:e,type:o,...i,__css:s})}),BK=t=>{const{className:e,children:n,...i}=t,r=cm(),o=m.Children.only(n),s=m.isValidElement(o)?m.cloneElement(o,{focusable:"false","aria-hidden":!0,className:it("chakra-menu__icon",o.props.className)}):null,a=it("chakra-menu__icon-wrapper",e);return C.jsx(Re.span,{className:a,...i,__css:r.icon,children:s})};BK.displayName="MenuIcon";var e1=Fe((t,e)=>{const{icon:n,iconSpacing:i="0.75rem",command:r,commandSpacing:o="0.75rem",children:s,...a}=t,l=lme(a,e),u=n||r?C.jsx("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return C.jsxs(dme,{...l,className:it("chakra-menu__menuitem",l.className),children:[n&&C.jsx(BK,{fontSize:"0.8em",marginEnd:i,children:n}),u,r&&C.jsx(GK,{marginStart:o,children:r})]})});e1.displayName="MenuItem";var Ime={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},Cme=Re(pg.div),RK=Fe(function(e,n){var i,r;const{rootProps:o,motionProps:s,...a}=e,{isOpen:l,onTransitionEnd:g,unstable__animationState:u}=gm(),d=sme(a,n),h=ame(o),f=cm();return C.jsx(Re.div,{...h,__css:{zIndex:(r=e.zIndex)!=null?r:(i=f.list)==null?void 0:i.zIndex},children:C.jsx(Cme,{variants:Ime,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...f.list},...s,className:it("chakra-menu__menu-list",d.className),...d,onUpdate:g,onAnimationComplete:Zk(u.onComplete,d.onAnimationComplete)})})});RK.displayName="MenuList";var hme=Fe((t,e)=>{const n=cm();return C.jsx(Re.button,{ref:e,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),kK=Fe((t,e)=>{const{children:n,as:i,...r}=t,o=ome(r,e),s=i||hme;return C.jsx(s,{...o,className:it("chakra-menu__menu-button",t.className),children:C.jsx(Re.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})});kK.displayName="MenuButton";var fme={slideInBottom:{...sh,custom:{offsetY:16,reverse:!0}},slideInRight:{...sh,custom:{offsetX:16,reverse:!0}},slideInTop:{...sh,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...sh,custom:{offsetX:-16,reverse:!0}},scale:{...O3,custom:{initialScale:.95,reverse:!0}},none:{}},mme=Re(pg.section),pme=t=>fme[t||"none"],VK=m.forwardRef((t,e)=>{const{preset:n,motionProps:i=pme(n),...r}=t;return C.jsx(mme,{ref:e,...i,...r})});VK.displayName="ModalTransition";var Ame=Object.defineProperty,bme=(t,e,n)=>e in t?Ame(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yme=(t,e,n)=>(bme(t,typeof e!="symbol"?e+"":e,n),n),vme=class{constructor(){yme(this,"modals"),this.modals=new Map}add(t){return this.modals.set(t,this.modals.size+1),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){return t?this.modals.get(t)===this.modals.size:!1}},t1=new vme;function wK(t,e){const[n,i]=m.useState(0);return m.useEffect(()=>{const r=t.current;if(r){if(e){const o=t1.add(r);i(o)}return()=>{t1.remove(r),i(0)}}},[e,t]),n}var Sme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fu=new WeakMap,Tp=new WeakMap,Lp={},rG=0,WK=function(t){return t&&(t.host||WK(t.parentNode))},Zme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=WK(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Gme=function(t,e,n,i){var r=Zme(e,Array.isArray(t)?t:[t]);Lp[n]||(Lp[n]=new WeakMap);var o=Lp[n],s=[],a=new Set,l=new Set(r),g=function(d){!d||a.has(d)||(a.add(d),g(d.parentNode))};r.forEach(g);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(i),A=f!==null&&f!=="false",p=(Fu.get(h)||0)+1,y=(o.get(h)||0)+1;Fu.set(h,p),o.set(h,y),s.push(h),p===1&&A&&Tp.set(h,!0),y===1&&h.setAttribute(n,"true"),A||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),rG++,function(){s.forEach(function(d){var h=Fu.get(d)-1,f=o.get(d)-1;Fu.set(d,h),o.set(d,f),h||(Tp.has(d)||d.removeAttribute(i),Tp.delete(d)),f||d.removeAttribute(n)}),rG--,rG||(Fu=new WeakMap,Fu=new WeakMap,Tp=new WeakMap,Lp={})}},Bme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||Sme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Gme(i,r,n,"aria-hidden")):function(){return null}};function Rme(t){const{isOpen:e,onClose:n,id:i,closeOnOverlayClick:r=!0,closeOnEsc:o=!0,useInert:s=!0,onOverlayClick:a,onEsc:l}=t,g=m.useRef(null),u=m.useRef(null),[d,h,f]=Vme(i,"chakra-modal","chakra-modal--header","chakra-modal--body");kme(g,e&&s);const A=wK(g,e),p=m.useRef(null),y=m.useCallback(J=>{p.current=J.target},[]),v=m.useCallback(J=>{J.key==="Escape"&&(J.stopPropagation(),o&&(n==null||n()),l==null||l())},[o,n,l]),[S,Z]=m.useState(!1),[R,W]=m.useState(!1),B=m.useCallback((J={},X=null)=>({role:"dialog",...J,ref:si(X,g),id:d,tabIndex:-1,"aria-modal":!0,"aria-labelledby":S?h:void 0,"aria-describedby":R?f:void 0,onClick:Yt(J.onClick,Y=>Y.stopPropagation())}),[f,R,d,h,S]),k=m.useCallback(J=>{J.stopPropagation(),p.current===J.target&&t1.isTopModal(g.current)&&(r&&(n==null||n()),a==null||a())},[n,r,a]),w=m.useCallback((J={},X=null)=>({...J,ref:si(X,u),onClick:Yt(J.onClick,k),onKeyDown:Yt(J.onKeyDown,v),onMouseDown:Yt(J.onMouseDown,y)}),[v,y,k]);return{isOpen:e,onClose:n,headerId:h,bodyId:f,setBodyMounted:W,setHeaderMounted:Z,dialogRef:g,overlayRef:u,getDialogProps:B,getDialogContainerProps:w,index:A}}function kme(t,e){const n=t.current;m.useEffect(()=>{if(!(!t.current||!e))return Bme(t.current)},[e,t,n])}function Vme(t,...e){const n=m.useId(),i=t||n;return m.useMemo(()=>e.map(r=>`${r}-${i}`),[i,e])}var[wme,EI]=ni({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[Wme,Tc]=ni({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Jo=t=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0,...t},{portalProps:n,children:i,autoFocus:r,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:g,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:f,onCloseComplete:A}=e,p=Or("Modal",e),v={...Rme(e),autoFocus:r,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:g,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:h,lockFocusAcrossFrames:f};return C.jsx(Wme,{value:v,children:C.jsx(wme,{value:p,children:C.jsx(rm,{onExitComplete:A,children:v.isOpen&&C.jsx(XI,{...n,children:i})})})})};Jo.displayName="Modal";var gb="right-scroll-bar-position",cb="width-before-scroll-bar",xme="with-scroll-bars-hidden",Xme="--removed-body-scroll-bar-size",xK=bD(),oG=function(){},$y=m.forwardRef(function(t,e){var n=m.useRef(null),i=m.useState({onScrollCapture:oG,onWheelCapture:oG,onTouchMoveCapture:oG}),r=i[0],o=i[1],s=t.forwardProps,a=t.children,l=t.className,g=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,A=t.inert,p=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,S=t.gapMode,Z=mD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=h,W=fD([n,e]),B=Rs(Rs({},Z),r);return m.createElement(m.Fragment,null,u&&m.createElement(R,{sideCar:xK,removeScrollBar:g,shards:d,noIsolation:f,inert:A,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:S}),s?m.cloneElement(m.Children.only(a),Rs(Rs({},B),{ref:W})):m.createElement(v,Rs({},B,{className:l,ref:W}),a))});$y.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$y.classNames={fullWidth:cb,zeroRight:gb};var m5,Jme=function(){if(m5)return m5;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Eme(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Jme();return e&&t.setAttribute("nonce",e),t}function Hme(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Nme(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Yme=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Eme())&&(Hme(e,n),Nme(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Fme=function(){var t=Yme();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},XK=function(){var t=Fme(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Mme={left:0,top:0,right:0,gap:0},sG=function(t){return parseInt(t||"",10)||0},Tme=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[sG(n),sG(i),sG(r)]},Lme=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Mme;var e=Tme(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},_me=XK(),Td="data-scroll-locked",Dme=function(t,e,n,i){var r=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(xme,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Td,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gb,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(cb,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(gb," .").concat(gb,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(cb," .").concat(cb,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Td,`] {
    `).concat(Xme,": ").concat(a,`px;
  }
`)},p5=function(){var t=parseInt(document.body.getAttribute(Td)||"0",10);return isFinite(t)?t:0},Kme=function(){m.useEffect(function(){return document.body.setAttribute(Td,(p5()+1).toString()),function(){var t=p5()-1;t<=0?document.body.removeAttribute(Td):document.body.setAttribute(Td,t.toString())}},[])},zme=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Kme();var o=m.useMemo(function(){return Lme(r)},[r]);return m.createElement(_me,{styles:Dme(o,!e,r,n?"":"!important")})},n1=!1;if(typeof window<"u")try{var _p=Object.defineProperty({},"passive",{get:function(){return n1=!0,!0}});window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,_p)}catch{n1=!1}var Mu=n1?{passive:!1}:!1,Pme=function(t){return t.tagName==="TEXTAREA"},JK=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Pme(t)&&n[e]==="visible")},Ume=function(t){return JK(t,"overflowY")},jme=function(t){return JK(t,"overflowX")},A5=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=EK(t,i);if(r){var o=HK(t,i),s=o[1],a=o[2];if(s>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Ome=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Qme=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},EK=function(t,e){return t==="v"?Ume(e):jme(e)},HK=function(t,e){return t==="v"?Ome(e):Qme(e)},$me=function(t,e){return t==="h"&&e==="rtl"?-1:1},qme=function(t,e,n,i,r){var o=$me(t,window.getComputedStyle(e).direction),s=o*i,a=n.target,l=e.contains(a),g=!1,u=s>0,d=0,h=0;do{var f=HK(t,a),A=f[0],p=f[1],y=f[2],v=p-y-o*A;(A||v)&&EK(t,a)&&(d+=v,h+=A),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(r&&Math.abs(d)<1||!r&&s>d)||!u&&(r&&Math.abs(h)<1||!r&&-s>h))&&(g=!0),g},Dp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},b5=function(t){return[t.deltaX,t.deltaY]},y5=function(t){return t&&"current"in t?t.current:t},epe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},tpe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},npe=0,Tu=[];function ipe(t){var e=m.useRef([]),n=m.useRef([0,0]),i=m.useRef(),r=m.useState(npe++)[0],o=m.useState(XK)[0],s=m.useRef(t);m.useEffect(function(){s.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var p=LIe([t.lockRef.current],(t.shards||[]).map(y5),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(p,y){if("touches"in p&&p.touches.length===2)return!s.current.allowPinchZoom;var v=Dp(p),S=n.current,Z="deltaX"in p?p.deltaX:S[0]-v[0],R="deltaY"in p?p.deltaY:S[1]-v[1],W,B=p.target,k=Math.abs(Z)>Math.abs(R)?"h":"v";if("touches"in p&&k==="h"&&B.type==="range")return!1;var w=A5(k,B);if(!w)return!0;if(w?W=k:(W=k==="v"?"h":"v",w=A5(k,B)),!w)return!1;if(!i.current&&"changedTouches"in p&&(Z||R)&&(i.current=W),!W)return!0;var J=i.current||W;return qme(J,y,p,J==="h"?Z:R,!0)},[]),l=m.useCallback(function(p){var y=p;if(!(!Tu.length||Tu[Tu.length-1]!==o)){var v="deltaY"in y?b5(y):Dp(y),S=e.current.filter(function(W){return W.name===y.type&&(W.target===y.target||y.target===W.shadowParent)&&epe(W.delta,v)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var Z=(s.current.shards||[]).map(y5).filter(Boolean).filter(function(W){return W.contains(y.target)}),R=Z.length>0?a(y,Z[0]):!s.current.noIsolation;R&&y.cancelable&&y.preventDefault()}}},[]),g=m.useCallback(function(p,y,v,S){var Z={name:p,delta:y,target:v,should:S,shadowParent:rpe(v)};e.current.push(Z),setTimeout(function(){e.current=e.current.filter(function(R){return R!==Z})},1)},[]),u=m.useCallback(function(p){n.current=Dp(p),i.current=void 0},[]),d=m.useCallback(function(p){g(p.type,b5(p),p.target,a(p,t.lockRef.current))},[]),h=m.useCallback(function(p){g(p.type,Dp(p),p.target,a(p,t.lockRef.current))},[]);m.useEffect(function(){return Tu.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Mu),document.addEventListener("touchmove",l,Mu),document.addEventListener("touchstart",u,Mu),function(){Tu=Tu.filter(function(p){return p!==o}),document.removeEventListener("wheel",l,Mu),document.removeEventListener("touchmove",l,Mu),document.removeEventListener("touchstart",u,Mu)}},[]);var f=t.removeScrollBar,A=t.inert;return m.createElement(m.Fragment,null,A?m.createElement(o,{styles:tpe(r)}):null,f?m.createElement(zme,{gapMode:t.gapMode}):null)}function rpe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ope=_Ie(xK,ipe);var NK=m.forwardRef(function(t,e){return m.createElement($y,Rs({},t,{ref:e,sideCar:ope}))});NK.classNames=$y.classNames;const spe=NK;function ape(t){const{autoFocus:e,trapFocus:n,dialogRef:i,initialFocusRef:r,blockScrollOnMount:o,allowPinchZoom:s,finalFocusRef:a,returnFocusOnClose:l,preserveScrollBarGap:g,lockFocusAcrossFrames:u,isOpen:d}=Tc(),[h,f]=V3();m.useEffect(()=>{!h&&f&&setTimeout(f)},[h,f]);const A=wK(i,d);return C.jsx(eK,{autoFocus:e,isDisabled:!n,initialFocusRef:r,finalFocusRef:a,restoreFocus:l,contentRef:i,lockFocusAcrossFrames:u,children:C.jsx(spe,{removeScrollBar:!g,allowPinchZoom:s,enabled:A===1&&o,forwardProps:!0,children:t.children})})}var Eo=Fe((t,e)=>{const{className:n,children:i,containerProps:r,motionProps:o,...s}=t,{getDialogProps:a,getDialogContainerProps:l}=Tc(),g=a(s,e),u=l(r),d=it("chakra-modal__content",n),h=EI(),f={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...h.dialog},A={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...h.dialogContainer},{motionPreset:p}=Tc();return C.jsx(ape,{children:C.jsx(Re.div,{...u,className:"chakra-modal__content-container",tabIndex:-1,__css:A,children:C.jsx(VK,{preset:p,motionProps:o,className:d,...g,__css:f,children:i})})})});Eo.displayName="ModalContent";var is=Fe((t,e)=>{const{className:n,...i}=t,r=it("chakra-modal__footer",n),s={display:"flex",alignItems:"center",justifyContent:"flex-end",...EI().footer};return C.jsx(Re.footer,{ref:e,...i,__css:s,className:r})});is.displayName="ModalFooter";var Ho=Fe((t,e)=>{const{className:n,...i}=t,{headerId:r,setHeaderMounted:o}=Tc();m.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=it("chakra-modal__header",n),l={flex:0,...EI().header};return C.jsx(Re.header,{ref:e,className:s,id:r,...i,__css:l})});Ho.displayName="ModalHeader";var lpe=Re(pg.div),No=Fe((t,e)=>{const{className:n,transition:i,motionProps:r,...o}=t,s=it("chakra-modal__overlay",n),l={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...EI().overlay},{motionPreset:g}=Tc(),d=r||(g==="none"?{}:j3);return C.jsx(lpe,{...d,__css:l,ref:e,className:s,...o})});No.displayName="ModalOverlay";var ss=Fe((t,e)=>{const{className:n,...i}=t,{bodyId:r,setBodyMounted:o}=Tc();m.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=it("chakra-modal__body",n),a=EI();return C.jsx(Re.div,{ref:e,className:s,id:r,...i,__css:a.body})});ss.displayName="ModalBody";var Yo=Fe((t,e)=>{const{onClick:n,className:i,...r}=t,{onClose:o}=Tc(),s=it("chakra-modal__close-btn",i),a=EI();return C.jsx(JI,{ref:e,__css:a.closeButton,className:s,onClick:Yt(n,l=>{l.stopPropagation(),o()}),...r})});Yo.displayName="ModalCloseButton";var[gpe,nu]=ni({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[cpe,um]=ni({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),VV=Fe(function(e,n){const{getHeaderProps:i}=nu(),r=um();return C.jsx(Re.header,{...i(e,n),className:it("chakra-popover__header",e.className),__css:r.header})});VV.displayName="PopoverHeader";function Ld(t){const e=m.Children.only(t.children),{getTriggerProps:n}=nu();return m.cloneElement(e,n(e.props,e.ref))}Ld.displayName="PopoverTrigger";var Lu={click:"click",hover:"hover"};function upe(t={}){const{closeOnBlur:e=!0,closeOnEsc:n=!0,initialFocusRef:i,id:r,returnFocusOnClose:o=!0,autoFocus:s=!0,arrowSize:a,arrowShadowColor:l,trigger:g=Lu.click,openDelay:u=200,closeDelay:d=200,isLazy:h,lazyBehavior:f="unmount",computePositionOnMount:A,...p}=t,{isOpen:y,onClose:v,onOpen:S,onToggle:Z}=AK(t),R=m.useRef(null),W=m.useRef(null),B=m.useRef(null),k=m.useRef(!1),w=m.useRef(!1);y&&(w.current=!0);const[J,X]=m.useState(!1),[Y,z]=m.useState(!1),P=m.useId(),$=r??P,[oe,q,K,_]=["popover-trigger","popover-content","popover-header","popover-body"].map(he=>`${he}-${$}`),{referenceRef:de,getArrowProps:ne,getPopperProps:se,getArrowInnerProps:E,forceUpdate:M}=pK({...p,enabled:y||!!A}),T=yK({isOpen:y,ref:B});xIe({enabled:y,ref:W}),lK(B,{focusRef:W,visible:y,shouldFocus:o&&g===Lu.click}),Vhe(B,{focusRef:i,visible:y,shouldFocus:s&&g===Lu.click});const U=vK({wasSelected:w.current,enabled:h,mode:f,isSelected:T.present}),H=m.useCallback((he={},Be=null)=>{const Ge={...he,style:{...he.style,transformOrigin:Fi.transformOrigin.varRef,[Fi.arrowSize.var]:a?`${a}px`:void 0,[Fi.arrowShadowColor.var]:l},ref:si(B,Be),children:U?he.children:null,id:q,tabIndex:-1,role:"dialog",onKeyDown:Yt(he.onKeyDown,Me=>{n&&Me.key==="Escape"&&v()}),onBlur:Yt(he.onBlur,Me=>{const Oe=v5(Me),Ye=aG(B.current,Oe),Ct=aG(W.current,Oe);y&&e&&(!Ye&&!Ct)&&v()}),"aria-labelledby":J?K:void 0,"aria-describedby":Y?_:void 0};return g===Lu.hover&&(Ge.role="tooltip",Ge.onMouseEnter=Yt(he.onMouseEnter,()=>{k.current=!0}),Ge.onMouseLeave=Yt(he.onMouseLeave,Me=>{Me.nativeEvent.relatedTarget!==null&&(k.current=!1,setTimeout(()=>v(),d))})),Ge},[U,q,J,K,Y,_,g,n,v,y,e,d,l,a]),ie=m.useCallback((he={},Be=null)=>se({...he,style:{visibility:y?"visible":"hidden",...he.style}},Be),[y,se]),Ae=m.useCallback((he,Be=null)=>({...he,ref:si(Be,R,de)}),[R,de]),Ie=m.useRef(),xe=m.useRef(),Xe=m.useCallback(he=>{R.current==null&&de(he)},[de]),Je=m.useCallback((he={},Be=null)=>{const Ge={...he,ref:si(W,Be,Xe),id:oe,"aria-haspopup":"dialog","aria-expanded":y,"aria-controls":q};return g===Lu.click&&(Ge.onClick=Yt(he.onClick,Z)),g===Lu.hover&&(Ge.onFocus=Yt(he.onFocus,()=>{Ie.current===void 0&&S()}),Ge.onBlur=Yt(he.onBlur,Me=>{const Oe=v5(Me),Ye=!aG(B.current,Oe);y&&e&&Ye&&v()}),Ge.onKeyDown=Yt(he.onKeyDown,Me=>{Me.key==="Escape"&&v()}),Ge.onMouseEnter=Yt(he.onMouseEnter,()=>{k.current=!0,Ie.current=window.setTimeout(()=>S(),u)}),Ge.onMouseLeave=Yt(he.onMouseLeave,()=>{k.current=!1,Ie.current&&(clearTimeout(Ie.current),Ie.current=void 0),xe.current=window.setTimeout(()=>{k.current===!1&&v()},d)})),Ge},[oe,y,q,g,Xe,Z,S,e,v,u,d]);m.useEffect(()=>()=>{Ie.current&&clearTimeout(Ie.current),xe.current&&clearTimeout(xe.current)},[]);const Ne=m.useCallback((he={},Be=null)=>({...he,id:K,ref:si(Be,Ge=>{X(!!Ge)})}),[K]),et=m.useCallback((he={},Be=null)=>({...he,id:_,ref:si(Be,Ge=>{z(!!Ge)})}),[_]);return{forceUpdate:M,isOpen:y,onAnimationComplete:T.onComplete,onClose:v,getAnchorProps:Ae,getArrowProps:ne,getArrowInnerProps:E,getPopoverPositionerProps:ie,getPopoverProps:H,getTriggerProps:Je,getHeaderProps:Ne,getBodyProps:et}}function aG(t,e){return t===e||(t==null?void 0:t.contains(e))}function v5(t){var e;const n=t.currentTarget.ownerDocument.activeElement;return(e=t.relatedTarget)!=null?e:n}function _d(t){const e=Or("Popover",t),{children:n,...i}=wn(t),r=Hy(),o=upe({...i,direction:r.direction});return C.jsx(gpe,{value:o,children:C.jsx(cpe,{value:e,children:yo(n,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}_d.displayName="Popover";var lG=(t,e)=>e?`${t}.${e}, ${e}`:void 0;function kf(t){var e;const{bg:n,bgColor:i,backgroundColor:r,shadow:o,boxShadow:s,shadowColor:a}=t,{getArrowProps:l,getArrowInnerProps:g}=nu(),u=um(),d=(e=n??i)!=null?e:r,h=o??s;return C.jsx(Re.div,{...l(),className:"chakra-popover__arrow-positioner",children:C.jsx(Re.div,{className:it("chakra-popover__arrow",t.className),...g(t),__css:{"--popper-arrow-shadow-color":lG("colors",a),"--popper-arrow-bg":lG("colors",d),"--popper-arrow-shadow":lG("shadows",h),...u.arrow}})})}kf.displayName="PopoverArrow";var Dd=Fe(function(e,n){const{getBodyProps:i}=nu(),r=um();return C.jsx(Re.div,{...i(e,n),className:it("chakra-popover__body",e.className),__css:r.body})});Dd.displayName="PopoverBody";var YK=Fe(function(e,n){const{onClose:i}=nu(),r=um();return C.jsx(JI,{size:"sm",onClick:i,className:it("chakra-popover__close-btn",e.className),__css:r.closeButton,ref:n,...e})});YK.displayName="PopoverCloseButton";function dpe(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}var Ipe={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Cpe=Re(pg.section),FK=Fe(function(e,n){const{variants:i=Ipe,...r}=e,{isOpen:o}=nu();return C.jsx(Cpe,{ref:n,variants:dpe(i),initial:!1,animate:o?"enter":"exit",...r})});FK.displayName="PopoverTransition";var Kd=Fe(function(e,n){const{rootProps:i,motionProps:r,...o}=e,{getPopoverProps:s,getPopoverPositionerProps:a,onAnimationComplete:l}=nu(),g=um(),u={position:"relative",display:"flex",flexDirection:"column",...g.content};return C.jsx(Re.div,{...a(i),__css:g.popper,className:"chakra-popover__popper",children:C.jsx(FK,{...r,...s(o,n),onAnimationComplete:Zk(l,o.onAnimationComplete),className:it("chakra-popover__content",e.className),__css:u})})});Kd.displayName="PopoverContent";var MK=Fe(function(e,n){const{children:i,placeholder:r,className:o,...s}=e;return C.jsxs(Re.select,{...s,ref:n,className:it("chakra-select",o),children:[r&&C.jsx("option",{value:"",children:r}),i]})});MK.displayName="SelectField";function hpe(t,e){const n={},i={};for(const[r,o]of Object.entries(t))e.includes(r)?n[r]=o:i[r]=o;return[n,i]}var Ir=Fe((t,e)=>{var n;const i=Or("Select",t),{rootProps:r,placeholder:o,icon:s,color:a,height:l,h:g,minH:u,minHeight:d,iconColor:h,iconSize:f,...A}=wn(t),[p,y]=hpe(A,yee),v=sV(y),S={width:"100%",height:"fit-content",position:"relative",color:a},Z={paddingEnd:"2rem",...i.field,_focus:{zIndex:"unset",...(n=i.field)==null?void 0:n._focus}};return C.jsxs(Re.div,{className:"chakra-select__wrapper",__css:S,...p,...r,children:[C.jsx(MK,{ref:e,height:g??l,minH:u??d,placeholder:o,...v,__css:Z,children:t.children}),C.jsx(TK,{"data-disabled":Gt(v.disabled),...(h||a)&&{color:h||a},__css:i.icon,...f&&{fontSize:f},children:s})]})});Ir.displayName="Select";var fpe=t=>C.jsx("svg",{viewBox:"0 0 24 24",...t,children:C.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),mpe=Re("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),TK=t=>{const{children:e=C.jsx(fpe,{}),...n}=t,i=m.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return C.jsx(mpe,{...n,className:"chakra-select__icon-wrapper",children:m.isValidElement(e)?i:null})};TK.displayName="SelectIcon";function ppe(){const t=m.useRef(!0);return m.useEffect(()=>{t.current=!1},[]),t.current}function Ape(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}var bpe=Re("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),i1=qe("skeleton-start-color"),r1=qe("skeleton-end-color"),ype=xI({from:{opacity:0},to:{opacity:1}}),vpe=xI({from:{borderColor:i1.reference,background:i1.reference},to:{borderColor:r1.reference,background:r1.reference}}),Ro=Fe((t,e)=>{const n={...t,fadeDuration:typeof t.fadeDuration=="number"?t.fadeDuration:.4,speed:typeof t.speed=="number"?t.speed:.8},i=jr("Skeleton",n),r=ppe(),{startColor:o="",endColor:s="",isLoaded:a,fadeDuration:l,speed:g,className:u,fitContent:d,...h}=wn(n),[f,A]=hq("colors",[o,s]),p=Ape(a),y=it("chakra-skeleton",u),v={...f&&{[i1.variable]:f},...A&&{[r1.variable]:A}};if(a){const S=r||p?"none":`${ype} ${l}s`;return C.jsx(Re.div,{ref:e,className:y,__css:{animation:S},...h})}return C.jsx(bpe,{ref:e,className:y,...h,__css:{width:d?"fit-content":void 0,...i,...v,_dark:{...i._dark,...v},animation:`${g}s linear infinite alternate ${vpe}`}})});Ro.displayName="Skeleton";var Vf=({size:t="2rem",...e})=>C.jsx(Ro,{borderRadius:"full",boxSize:t,...e});Vf.displayName="SkeletonCircle";var Ka=Fe(function(e,n){const i=Or("Switch",e),{spacing:r="0.5rem",children:o,...s}=wn(e),{getIndicatorProps:a,getInputProps:l,getCheckboxProps:g,getRootProps:u,getLabelProps:d}=lD(s),h=m.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container}),[i.container]),f=m.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track}),[i.track]),A=m.useMemo(()=>({userSelect:"none",marginStart:r,...i.label}),[r,i.label]);return C.jsxs(Re.label,{...u(),className:it("chakra-switch",e.className),__css:h,children:[C.jsx("input",{className:"chakra-switch__input",...l({},n)}),C.jsx(Re.span,{...g(),className:"chakra-switch__track",__css:f,children:C.jsx(Re.span,{__css:i.thumb,className:"chakra-switch__thumb",...a()})}),o&&C.jsx(Re.span,{className:"chakra-switch__label",...d(),__css:A,children:o})]})});Ka.displayName="Switch";var[Spe,dm]=ni({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),LK=Fe((t,e)=>{const n=Or("Table",t),{className:i,layout:r,...o}=wn(t);return C.jsx(Spe,{value:n,children:C.jsx(Re.table,{ref:e,__css:{tableLayout:r,...n.table},className:it("chakra-table",i),...o})})});LK.displayName="Table";var Zpe=Fe((t,e)=>{const n=dm();return C.jsx(Re.thead,{...t,ref:e,__css:n.thead})}),S5=Fe((t,e)=>{const n=dm();return C.jsx(Re.tr,{...t,ref:e,__css:n.tr})}),Gpe=Fe((t,e)=>{const n=dm();return C.jsx(Re.tbody,{...t,ref:e,__css:n.tbody})}),Cl=Fe(({isNumeric:t,...e},n)=>{const i=dm();return C.jsx(Re.td,{...e,ref:n,__css:i.td,"data-is-numeric":t})}),hl=Fe(({isNumeric:t,...e},n)=>{const i=dm();return C.jsx(Re.th,{...e,ref:n,__css:i.th,"data-is-numeric":t})});function Bpe(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}var Rpe=["h","minH","height","minHeight"],_K=Fe((t,e)=>{const n=jr("Textarea",t),{className:i,rows:r,...o}=wn(t),s=sV(o),a=r?Bpe(n,Rpe):n;return C.jsx(Re.textarea,{ref:e,rows:r,...s,className:it("chakra-textarea",i),__css:a})});_K.displayName="Textarea";/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wf.apply(this,arguments)}var xl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xl||(xl={}));const Z5="popstate";function kpe(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:s,hash:a}=i.location;return o1("",{pathname:o,search:s,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:y0(r)}return wpe(e,n,null,t)}function Un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wV(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vpe(){return Math.random().toString(36).substr(2,8)}function G5(t,e){return{usr:t.state,key:t.key,idx:e}}function o1(t,e,n,i){return n===void 0&&(n=null),wf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?HI(e):e,{state:n,key:e&&e.key||i||Vpe()})}function y0(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function HI(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function wpe(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,a=xl.Pop,l=null,g=u();g==null&&(g=0,s.replaceState(wf({},s.state,{idx:g}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=xl.Pop;let y=u(),v=y==null?null:y-g;g=y,l&&l({action:a,location:p.location,delta:v})}function h(y,v){a=xl.Push;let S=o1(p.location,y,v);n&&n(S,y),g=u()+1;let Z=G5(S,g),R=p.createHref(S);try{s.pushState(Z,"",R)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;r.location.assign(R)}o&&l&&l({action:a,location:p.location,delta:1})}function f(y,v){a=xl.Replace;let S=o1(p.location,y,v);n&&n(S,y),g=u();let Z=G5(S,g),R=p.createHref(S);s.replaceState(Z,"",R),o&&l&&l({action:a,location:p.location,delta:0})}function A(y){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof y=="string"?y:y0(y);return Un(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let p={get action(){return a},get location(){return t(r,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Z5,d),l=y,()=>{r.removeEventListener(Z5,d),l=null}},createHref(y){return e(r,y)},createURL:A,encodeLocation(y){let v=A(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(y){return s.go(y)}};return p}var B5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(B5||(B5={}));function Wpe(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?HI(e):e,r=WV(i.pathname||"/",n);if(r==null)return null;let o=DK(t);xpe(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=Tpe(o[a],Dpe(r));return s}function DK(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Un(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let g=$l([i,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Un(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),DK(o.children,e,u,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:Fpe(g,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))r(o,s);else for(let l of KK(o.path))r(o,s,l)}),e}function KK(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let s=KK(i.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),r&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function xpe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Mpe(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Xpe=/^:\w+$/,Jpe=3,Epe=2,Hpe=1,Npe=10,Ype=-2,R5=t=>t==="*";function Fpe(t,e){let n=t.split("/"),i=n.length;return n.some(R5)&&(i+=Ype),e&&(i+=Epe),n.filter(r=>!R5(r)).reduce((r,o)=>r+(Xpe.test(o)?Jpe:o===""?Hpe:Npe),i)}function Mpe(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Tpe(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1,g=r==="/"?e:e.slice(r.length)||"/",u=Lpe({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},g);if(!u)return null;Object.assign(i,u.params);let d=a.route;o.push({params:i,pathname:$l([r,u.pathname]),pathnameBase:Upe($l([r,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(r=$l([r,u.pathnameBase]))}return o}function Lpe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=_pe(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((g,u,d)=>{if(u==="*"){let h=a[d]||"";s=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return g[u]=Kpe(a[d]||"",u),g},{}),pathname:o,pathnameBase:s,pattern:t}}function _pe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wV(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Dpe(t){try{return decodeURI(t)}catch(e){return wV(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kpe(t,e){try{return decodeURIComponent(t)}catch(n){return wV(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function WV(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function zpe(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?HI(t):t;return{pathname:n?n.startsWith("/")?n:Ppe(n,e):e,search:jpe(i),hash:Ope(r)}}function Ppe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function gG(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XV(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=HI(t):(r=wf({},t),Un(!r.pathname||!r.pathname.includes("?"),gG("?","pathname","search",r)),Un(!r.pathname||!r.pathname.includes("#"),gG("#","pathname","hash",r)),Un(!r.search||!r.search.includes("#"),gG("#","search","hash",r)));let o=t===""||r.pathname==="",s=o?"/":r.pathname,a;if(i||s==null)a=n;else{let d=e.length-1;if(s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=zpe(r,a),g=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(g||u)&&(l.pathname+="/"),l}const $l=t=>t.join("/").replace(/\/\/+/g,"/"),Upe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jpe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ope=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qpe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zK=["post","put","patch","delete"];new Set(zK);const $pe=["get",...zK];new Set($pe);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v0(){return v0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v0.apply(this,arguments)}const JV=m.createContext(null),PK=m.createContext(null),iu=m.createContext(null),qy=m.createContext(null),Oa=m.createContext({outlet:null,matches:[],isDataRoute:!1}),UK=m.createContext(null);function qpe(t,e){let{relative:n}=e===void 0?{}:e;NI()||Un(!1);let{basename:i,navigator:r}=m.useContext(iu),{hash:o,pathname:s,search:a}=EV(t,{relative:n}),l=s;return i!=="/"&&(l=s==="/"?i:$l([i,s])),r.createHref({pathname:l,search:a,hash:o})}function NI(){return m.useContext(qy)!=null}function bg(){return NI()||Un(!1),m.useContext(qy).location}function jK(t){m.useContext(iu).static||m.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=m.useContext(Oa);return t?dAe():eAe()}function eAe(){NI()||Un(!1);let t=m.useContext(JV),{basename:e,navigator:n}=m.useContext(iu),{matches:i}=m.useContext(Oa),{pathname:r}=bg(),o=JSON.stringify(xV(i).map(l=>l.pathnameBase)),s=m.useRef(!1);return jK(()=>{s.current=!0}),m.useCallback(function(l,g){if(g===void 0&&(g={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=XV(l,JSON.parse(o),r,g.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:$l([e,u.pathname])),(g.replace?n.replace:n.push)(u,g.state,g)},[e,n,o,r,t])}function Im(){let{matches:t}=m.useContext(Oa),e=t[t.length-1];return e?e.params:{}}function EV(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=m.useContext(Oa),{pathname:r}=bg(),o=JSON.stringify(xV(i).map(s=>s.pathnameBase));return m.useMemo(()=>XV(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function tAe(t,e){return nAe(t,e)}function nAe(t,e,n){NI()||Un(!1);let{navigator:i}=m.useContext(iu),{matches:r}=m.useContext(Oa),o=r[r.length-1],s=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let l=bg(),g;if(e){var u;let p=typeof e=="string"?HI(e):e;a==="/"||(u=p.pathname)!=null&&u.startsWith(a)||Un(!1),g=p}else g=l;let d=g.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=Wpe(t,{pathname:h}),A=aAe(f&&f.map(p=>Object.assign({},p,{params:Object.assign({},s,p.params),pathname:$l([a,i.encodeLocation?i.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?a:$l([a,i.encodeLocation?i.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),r,n);return e&&A?m.createElement(qy.Provider,{value:{location:v0({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:xl.Pop}},A):A}function iAe(){let t=uAe(),e=Qpe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:r},n):null,o)}const rAe=m.createElement(iAe,null);class oAe extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?m.createElement(Oa.Provider,{value:this.props.routeContext},m.createElement(UK.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sAe(t){let{routeContext:e,match:n,children:i}=t,r=m.useContext(JV);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Oa.Provider,{value:e},i)}function aAe(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let o=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let a=o.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id]));a>=0||Un(!1),o=o.slice(0,Math.min(o.length,a+1))}return o.reduceRight((a,l,g)=>{let u=l.route.id?s==null?void 0:s[l.route.id]:null,d=null;n&&(d=l.route.errorElement||rAe);let h=e.concat(o.slice(0,g+1)),f=()=>{let A;return u?A=d:l.route.Component?A=m.createElement(l.route.Component,null):l.route.element?A=l.route.element:A=a,m.createElement(sAe,{match:l,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:A})};return n&&(l.route.ErrorBoundary||l.route.errorElement||g===0)?m.createElement(oAe,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var s1;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(s1||(s1={}));var Wf;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Wf||(Wf={}));function lAe(t){let e=m.useContext(JV);return e||Un(!1),e}function gAe(t){let e=m.useContext(PK);return e||Un(!1),e}function cAe(t){let e=m.useContext(Oa);return e||Un(!1),e}function OK(t){let e=cAe(),n=e.matches[e.matches.length-1];return n.route.id||Un(!1),n.route.id}function uAe(){var t;let e=m.useContext(UK),n=gAe(Wf.UseRouteError),i=OK(Wf.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function dAe(){let{router:t}=lAe(s1.UseNavigateStable),e=OK(Wf.UseNavigateStable),n=m.useRef(!1);return jK(()=>{n.current=!0}),m.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,v0({fromRouteId:e},o)))},[t,e])}function hs(t){let{to:e,replace:n,state:i,relative:r}=t;NI()||Un(!1);let{matches:o}=m.useContext(Oa),{pathname:s}=bg(),a=Qr(),l=XV(e,xV(o).map(u=>u.pathnameBase),s,r==="path"),g=JSON.stringify(l);return m.useEffect(()=>a(JSON.parse(g),{replace:n,state:i,relative:r}),[a,g,r,n,i]),null}function yn(t){Un(!1)}function IAe(t){let{basename:e="/",children:n=null,location:i,navigationType:r=xl.Pop,navigator:o,static:s=!1}=t;NI()&&Un(!1);let a=e.replace(/^\/*/,"/"),l=m.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof i=="string"&&(i=HI(i));let{pathname:g="/",search:u="",hash:d="",state:h=null,key:f="default"}=i,A=m.useMemo(()=>{let p=WV(g,a);return p==null?null:{location:{pathname:p,search:u,hash:d,state:h,key:f},navigationType:r}},[a,g,u,d,h,f,r]);return A==null?null:m.createElement(iu.Provider,{value:l},m.createElement(qy.Provider,{children:n,value:A}))}function QK(t){let{children:e,location:n}=t;return tAe(a1(e),n)}var k5;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(k5||(k5={}));new Promise(()=>{});function a1(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(i,r)=>{if(!m.isValidElement(i))return;let o=[...e,r];if(i.type===m.Fragment){n.push.apply(n,a1(i.props.children,o));return}i.type!==yn&&Un(!1),!i.props.index||!i.props.children||Un(!1);let s={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=a1(i.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function S0(){return S0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},S0.apply(this,arguments)}function $K(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function CAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hAe(t,e){return t.button===0&&(!e||e==="_self")&&!CAe(t)}const fAe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],mAe=["aria-current","caseSensitive","className","end","style","to","children"],pAe="startTransition",V5=bB[pAe];function AAe(t){let{basename:e,children:n,future:i,window:r}=t,o=m.useRef();o.current==null&&(o.current=kpe({window:r,v5Compat:!0}));let s=o.current,[a,l]=m.useState({action:s.action,location:s.location}),{v7_startTransition:g}=i||{},u=m.useCallback(d=>{g&&V5?V5(()=>l(d)):l(d)},[l,g]);return m.useLayoutEffect(()=>s.listen(u),[s,u]),m.createElement(IAe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s})}const bAe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yAe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zi=m.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:s,state:a,target:l,to:g,preventScrollReset:u}=e,d=$K(e,fAe),{basename:h}=m.useContext(iu),f,A=!1;if(typeof g=="string"&&yAe.test(g)&&(f=g,bAe))try{let S=new URL(window.location.href),Z=g.startsWith("//")?new URL(S.protocol+g):new URL(g),R=WV(Z.pathname,h);Z.origin===S.origin&&R!=null?g=R+Z.search+Z.hash:A=!0}catch{}let p=qpe(g,{relative:r}),y=SAe(g,{replace:s,state:a,target:l,preventScrollReset:u,relative:r});function v(S){i&&i(S),S.defaultPrevented||y(S)}return m.createElement("a",S0({},d,{href:f||p,onClick:A||o?i:v,ref:n,target:l}))}),vAe=m.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:s=!1,style:a,to:l,children:g}=e,u=$K(e,mAe),d=EV(l,{relative:u.relative}),h=bg(),f=m.useContext(PK),{navigator:A}=m.useContext(iu),p=A.encodeLocation?A.encodeLocation(d).pathname:d.pathname,y=h.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(y=y.toLowerCase(),v=v?v.toLowerCase():null,p=p.toLowerCase());let S=y===p||!s&&y.startsWith(p)&&y.charAt(p.length)==="/",Z=v!=null&&(v===p||!s&&v.startsWith(p)&&v.charAt(p.length)==="/"),R=S?i:void 0,W;typeof o=="function"?W=o({isActive:S,isPending:Z}):W=[o,S?"active":null,Z?"pending":null].filter(Boolean).join(" ");let B=typeof a=="function"?a({isActive:S,isPending:Z}):a;return m.createElement(Zi,S0({},u,{"aria-current":R,className:W,ref:n,style:B,to:l}),typeof g=="function"?g({isActive:S,isPending:Z}):g)});var w5;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(w5||(w5={}));var W5;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(W5||(W5={}));function SAe(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:s}=e===void 0?{}:e,a=Qr(),l=bg(),g=EV(t,{relative:s});return m.useCallback(u=>{if(hAe(u,n)){u.preventDefault();let d=i!==void 0?i:y0(l)===y0(g);a(t,{replace:d,state:r,preventScrollReset:o,relative:s})}},[l,a,g,i,r,n,t,o,s])}var qK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x5=gt.createContext&&gt.createContext(qK),ZAe=["attr","size","title"];function GAe(t,e){if(t==null)return{};var n=BAe(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function BAe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Z0.apply(this,arguments)}function X5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function G0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(n),!0).forEach(function(i){RAe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RAe(t,e,n){return e=kAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kAe(t){var e=VAe(t,"string");return typeof e=="symbol"?e:e+""}function VAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ez(t){return t&&t.map((e,n)=>gt.createElement(e.tag,G0({key:n},e.attr),ez(e.child)))}function ct(t){return e=>gt.createElement(wAe,Z0({attr:G0({},t.attr)},e),ez(t.child))}function wAe(t){var e=n=>{var{attr:i,size:r,title:o}=t,s=GAe(t,ZAe),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),gt.createElement("svg",Z0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:l,style:G0(G0({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&gt.createElement("title",null,o),t.children)};return x5!==void 0?gt.createElement(x5.Consumer,null,n=>e(n)):e(qK)}function WAe(t){return ct({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8c0 3.866-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7M7.194 6.766a1.7 1.7 0 0 0-.227-.272 1.5 1.5 0 0 0-.469-.324l-.008-.004A1.8 1.8 0 0 0 5.734 6C4.776 6 4 6.746 4 7.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.5 2.5 0 0 0-.227-.4zM11 9.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.5 2.5 0 0 0-.228-.4 1.7 1.7 0 0 0-.227-.273 1.5 1.5 0 0 0-.469-.324l-.008-.004A1.8 1.8 0 0 0 10.07 6c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z"},child:[]}]})(t)}function HV(t){return ct({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"},child:[]}]})(t)}function l1(t){return ct({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0"},child:[]},{tag:"path",attr:{d:"m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708"},child:[]}]})(t)}function xAe(t){return ct({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m7.5-6.923c-.67.204-1.335.82-1.887 1.855q-.215.403-.395.872c.705.157 1.472.257 2.282.287zM4.249 3.539q.214-.577.481-1.078a7 7 0 0 1 .597-.933A7 7 0 0 0 3.051 3.05q.544.277 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9 9 0 0 1-1.565-.667A6.96 6.96 0 0 0 1.018 7.5zm1.4-2.741a12.3 12.3 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332M8.5 5.09V7.5h2.99a12.3 12.3 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.6 13.6 0 0 1 7.5 10.91V8.5zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741zm-3.282 3.696q.18.469.395.872c.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a7 7 0 0 1-.598-.933 9 9 0 0 1-.481-1.079 8.4 8.4 0 0 0-1.198.49 7 7 0 0 0 2.276 1.522zm-1.383-2.964A13.4 13.4 0 0 1 3.508 8.5h-2.49a6.96 6.96 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667m6.728 2.964a7 7 0 0 0 2.275-1.521 8.4 8.4 0 0 0-1.197-.49 9 9 0 0 1-.481 1.078 7 7 0 0 1-.597.933M8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855q.216-.403.395-.872A12.6 12.6 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.96 6.96 0 0 0 14.982 8.5h-2.49a13.4 13.4 0 0 1-.437 3.008M14.982 7.5a6.96 6.96 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008zM11.27 2.461q.266.502.482 1.078a8.4 8.4 0 0 0 1.196-.49 7 7 0 0 0-2.275-1.52c.218.283.418.597.597.932m-.488 1.343a8 8 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"},child:[]}]})(t)}function XAe(t){return ct({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"},child:[]}]})(t)}function JAe(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var EAe=JAe,vt=EAe;function HAe(t){return!!t&&typeof t.then=="function"}var Sn=HAe;function NAe(t,e){if(t!=null)return t;throw vt(e??"Got unexpected null or undefined")}var kn=NAe;function At(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ev{getValue(){throw vt("BaseLoadable")}toPromise(){throw vt("BaseLoadable")}valueMaybe(){throw vt("BaseLoadable")}valueOrThrow(){throw vt(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw vt("BaseLoadable")}promiseOrThrow(){throw vt(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw vt("BaseLoadable")}errorOrThrow(){throw vt(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw vt("BaseLoadable")}}class YAe extends ev{constructor(e){super(),At(this,"state","hasValue"),At(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Sn(n)?Lc(n):CI(n)?n:Cm(n)}catch(n){return Sn(n)?Lc(n.next(()=>this.map(e))):tv(n)}}}class FAe extends ev{constructor(e){super(),At(this,"state","hasError"),At(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class tz extends ev{constructor(e){super(),At(this,"state","loading"),At(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Lc(this.contents.then(n=>{const i=e(n);if(CI(i)){const r=i;switch(r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":return r.contents}}return i}).catch(n=>{if(Sn(n))return n.then(()=>this.map(e).contents);throw n}))}}function Cm(t){return Object.freeze(new YAe(t))}function tv(t){return Object.freeze(new FAe(t))}function Lc(t){return Object.freeze(new tz(t))}function nz(){return Object.freeze(new tz(new Promise(()=>{})))}function MAe(t){return t.every(e=>e.state==="hasValue")?Cm(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?tv(kn(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Lc(Promise.all(t.map(e=>e.contents)))}function iz(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(r=>t[r])).map(r=>CI(r)?r:Sn(r)?Lc(r):Cm(r)),i=MAe(n);return Array.isArray(t)?i:i.map(r=>Object.getOwnPropertyNames(t).reduce((o,s,a)=>({...o,[s]:r[a]}),{}))}function CI(t){return t instanceof ev}const TAe={of:t=>Sn(t)?Lc(t):CI(t)?t:Cm(t),error:t=>tv(t),loading:()=>nz(),all:iz,isLoadable:CI};var ru={loadableWithValue:Cm,loadableWithError:tv,loadableWithPromise:Lc,loadableLoading:nz,loadableAll:iz,isLoadable:CI,RecoilLoadable:TAe},LAe=ru.loadableWithValue,_Ae=ru.loadableWithError,DAe=ru.loadableWithPromise,KAe=ru.loadableLoading,zAe=ru.loadableAll,PAe=ru.isLoadable,UAe=ru.RecoilLoadable,hm=Object.freeze({__proto__:null,loadableWithValue:LAe,loadableWithError:_Ae,loadableWithPromise:DAe,loadableLoading:KAe,loadableAll:zAe,isLoadable:PAe,RecoilLoadable:UAe});const g1={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function jAe(t,e){var n,i;const r=(n=process.env[t])===null||n===void 0||(i=n.toLowerCase())===null||i===void 0?void 0:i.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw vt(`({}).${t} value must be 'true', 'false', or empty: ${r}`);e(r==="true")}function OAe(t,e){var n;const i=(n=process.env[t])===null||n===void 0?void 0:n.trim();i==null||i===""||e(i.split(/\s*,\s*|\s+/))}function QAe(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(jAe("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{g1.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),OAe("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{g1.RECOIL_GKS_ENABLED.add(n)})}))}QAe();var YI=g1;function nv(t){return YI.RECOIL_GKS_ENABLED.has(t)}nv.setPass=t=>{YI.RECOIL_GKS_ENABLED.add(t)};nv.setFail=t=>{YI.RECOIL_GKS_ENABLED.delete(t)};nv.clear=()=>{YI.RECOIL_GKS_ENABLED.clear()};var rn=nv;function $Ae(t,e,{error:n}={}){return null}var qAe=$Ae,NV=qAe,cG,uG,dG;const ebe=(cG=gt.createMutableSource)!==null&&cG!==void 0?cG:gt.unstable_createMutableSource,rz=(uG=gt.useMutableSource)!==null&&uG!==void 0?uG:gt.unstable_useMutableSource,oz=(dG=gt.useSyncExternalStore)!==null&&dG!==void 0?dG:gt.unstable_useSyncExternalStore;function tbe(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function nbe(){return rn("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:rn("recoil_sync_external_store")&&oz!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:rn("recoil_mutable_source")&&rz!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?rn("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:rn("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function ibe(){return!1}var fm={createMutableSource:ebe,useMutableSource:rz,useSyncExternalStore:oz,currentRendererSupportsUseSyncExternalStore:tbe,reactMode:nbe,isFastRefreshEnabled:ibe};class YV{constructor(e){At(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class sz extends YV{}class az extends YV{}function rbe(t){return t instanceof sz||t instanceof az}var iv={AbstractRecoilValue:YV,RecoilState:sz,RecoilValueReadOnly:az,isRecoilValue:rbe},obe=iv.AbstractRecoilValue,sbe=iv.RecoilState,abe=iv.RecoilValueReadOnly,lbe=iv.isRecoilValue,hI=Object.freeze({__proto__:null,AbstractRecoilValue:obe,RecoilState:sbe,RecoilValueReadOnly:abe,isRecoilValue:lbe});function gbe(t,e){return function*(){let n=0;for(const i of t)yield e(i,n++)}()}var rv=gbe;class lz{}const cbe=new lz,_c=new Map,FV=new Map;function ube(t){return rv(t,e=>kn(FV.get(e)))}function dbe(t){if(_c.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function Ibe(t){YI.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&dbe(t.key),_c.set(t.key,t);const e=t.set==null?new hI.RecoilValueReadOnly(t.key):new hI.RecoilState(t.key);return FV.set(t.key,e),e}class gz extends Error{}function Cbe(t){const e=_c.get(t);if(e==null)throw new gz(`Missing definition for RecoilValue: "${t}""`);return e}function hbe(t){return _c.get(t)}const B0=new Map;function fbe(t){var e;if(!rn("recoil_memory_managament_2020"))return;const n=_c.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var i;_c.delete(t),(i=cz(t))===null||i===void 0||i(),B0.delete(t)}}function mbe(t,e){rn("recoil_memory_managament_2020")&&(e===void 0?B0.delete(t):B0.set(t,e))}function cz(t){return B0.get(t)}var Zr={nodes:_c,recoilValues:FV,registerNode:Ibe,getNode:Cbe,getNodeMaybe:hbe,deleteNodeConfigIfPossible:fbe,setConfigDeletionHandler:mbe,getConfigDeletionHandler:cz,recoilValuesForKeys:ube,NodeMissingError:gz,DefaultValue:lz,DEFAULT_VALUE:cbe};function pbe(t,e){e()}var Abe={enqueueExecution:pbe};function bbe(t,e){return e={exports:{}},t(e,e.exports),e.exports}var ybe=bbe(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},n={},i=5,r=Math.pow(2,i),o=r-1,s=r/2,a=r/4,l={},g=function(O){return function(){return O}},u=n.hash=function(te){var O=typeof te>"u"?"undefined":e(te);if(O==="number")return te;O!=="string"&&(te+="");for(var me=0,we=0,ke=te.length;we<ke;++we){var He=te.charCodeAt(we);me=(me<<5)-me+He|0}return me},d=function(O){return O-=O>>1&1431655765,O=(O&858993459)+(O>>2&858993459),O=O+(O>>4)&252645135,O+=O>>8,O+=O>>16,O&127},h=function(O,me){return me>>>O&o},f=function(O){return 1<<O},A=function(O,me){return d(O&me-1)},p=function(O,me,we,ke){var He=ke;if(!O){var pe=ke.length;He=new Array(pe);for(var Ee=0;Ee<pe;++Ee)He[Ee]=ke[Ee]}return He[me]=we,He},y=function(O,me,we){var ke=we.length-1,He=0,pe=0,Ee=we;if(O)He=pe=me;else for(Ee=new Array(ke);He<me;)Ee[pe++]=we[He++];for(++He;He<=ke;)Ee[pe++]=we[He++];return O&&(Ee.length=ke),Ee},v=function(O,me,we,ke){var He=ke.length;if(O){for(var pe=He;pe>=me;)ke[pe--]=ke[pe];return ke[me]=we,ke}for(var Ee=0,ze=0,ve=new Array(He+1);Ee<me;)ve[ze++]=ke[Ee++];for(ve[me]=we;Ee<He;)ve[++ze]=ke[Ee++];return ve},S=1,Z=2,R=3,W=4,B={__hamt_isEmpty:!0},k=function(O){return O===B||O&&O.__hamt_isEmpty},w=function(O,me,we,ke){return{type:S,edit:O,hash:me,key:we,value:ke,_modify:_}},J=function(O,me,we){return{type:Z,edit:O,hash:me,children:we,_modify:de}},X=function(O,me,we){return{type:R,edit:O,mask:me,children:we,_modify:ne}},Y=function(O,me,we){return{type:W,edit:O,size:me,children:we,_modify:se}},z=function(O){return O===B||O.type===S||O.type===Z},P=function(O,me,we,ke,He){for(var pe=[],Ee=ke,ze=0,ve=0;Ee;++ve)Ee&1&&(pe[ve]=He[ze++]),Ee>>>=1;return pe[me]=we,Y(O,ze+1,pe)},$=function(O,me,we,ke){for(var He=new Array(me-1),pe=0,Ee=0,ze=0,ve=ke.length;ze<ve;++ze)if(ze!==we){var st=ke[ze];st&&!k(st)&&(He[pe++]=st,Ee|=1<<ze)}return X(O,Ee,He)},oe=function te(O,me,we,ke,He,pe){if(we===He)return J(O,we,[pe,ke]);var Ee=h(me,we),ze=h(me,He);return X(O,f(Ee)|f(ze),Ee===ze?[te(O,me+i,we,ke,He,pe)]:Ee<ze?[ke,pe]:[pe,ke])},q=function(O,me,we,ke,He,pe,Ee,ze){for(var ve=He.length,st=0;st<ve;++st){var Ht=He[st];if(we(Ee,Ht.key)){var tn=Ht.value,cn=pe(tn);return cn===tn?He:cn===l?(--ze.value,y(O,st,He)):p(O,st,w(me,ke,Ee,cn),He)}}var nn=pe();return nn===l?He:(++ze.value,p(O,ve,w(me,ke,Ee,nn),He))},K=function(O,me){return O===me.edit},_=function(O,me,we,ke,He,pe,Ee){if(me(pe,this.key)){var ze=ke(this.value);return ze===this.value?this:ze===l?(--Ee.value,B):K(O,this)?(this.value=ze,this):w(O,He,pe,ze)}var ve=ke();return ve===l?this:(++Ee.value,oe(O,we,this.hash,this,He,w(O,He,pe,ve)))},de=function(O,me,we,ke,He,pe,Ee){if(He===this.hash){var ze=K(O,this),ve=q(ze,O,me,this.hash,this.children,ke,pe,Ee);return ve===this.children?this:ve.length>1?J(O,this.hash,ve):ve[0]}var st=ke();return st===l?this:(++Ee.value,oe(O,we,this.hash,this,He,w(O,He,pe,st)))},ne=function(O,me,we,ke,He,pe,Ee){var ze=this.mask,ve=this.children,st=h(we,He),Ht=f(st),tn=A(ze,Ht),cn=ze&Ht,nn=cn?ve[tn]:B,Kn=nn._modify(O,me,we+i,ke,He,pe,Ee);if(nn===Kn)return this;var Rr=K(O,this),eo=ze,to=void 0;if(cn&&k(Kn)){if(eo&=~Ht,!eo)return B;if(ve.length<=2&&z(ve[tn^1]))return ve[tn^1];to=y(Rr,tn,ve)}else if(!cn&&!k(Kn)){if(ve.length>=s)return P(O,st,Kn,ze,ve);eo|=Ht,to=v(Rr,tn,Kn,ve)}else to=p(Rr,tn,Kn,ve);return Rr?(this.mask=eo,this.children=to,this):X(O,eo,to)},se=function(O,me,we,ke,He,pe,Ee){var ze=this.size,ve=this.children,st=h(we,He),Ht=ve[st],tn=(Ht||B)._modify(O,me,we+i,ke,He,pe,Ee);if(Ht===tn)return this;var cn=K(O,this),nn=void 0;if(k(Ht)&&!k(tn))++ze,nn=p(cn,st,tn,ve);else if(!k(Ht)&&k(tn)){if(--ze,ze<=a)return $(O,ze,st,ve);nn=p(cn,st,B,ve)}else nn=p(cn,st,tn,ve);return cn?(this.size=ze,this.children=nn,this):Y(O,ze,nn)};B._modify=function(te,O,me,we,ke,He,pe){var Ee=we();return Ee===l?B:(++pe.value,w(te,ke,He,Ee))};function E(te,O,me,we,ke){this._editable=te,this._edit=O,this._config=me,this._root=we,this._size=ke}E.prototype.setTree=function(te,O){return this._editable?(this._root=te,this._size=O,this):te===this._root?this:new E(this._editable,this._edit,this._config,te,O)};var M=n.tryGetHash=function(te,O,me,we){for(var ke=we._root,He=0,pe=we._config.keyEq;;)switch(ke.type){case S:return pe(me,ke.key)?ke.value:te;case Z:{if(O===ke.hash)for(var Ee=ke.children,ze=0,ve=Ee.length;ze<ve;++ze){var st=Ee[ze];if(pe(me,st.key))return st.value}return te}case R:{var Ht=h(He,O),tn=f(Ht);if(ke.mask&tn){ke=ke.children[A(ke.mask,tn)],He+=i;break}return te}case W:{if(ke=ke.children[h(He,O)],ke){He+=i;break}return te}default:return te}};E.prototype.tryGetHash=function(te,O,me){return M(te,O,me,this)};var T=n.tryGet=function(te,O,me){return M(te,me._config.hash(O),O,me)};E.prototype.tryGet=function(te,O){return T(te,O,this)};var U=n.getHash=function(te,O,me){return M(void 0,te,O,me)};E.prototype.getHash=function(te,O){return U(te,O,this)},n.get=function(te,O){return M(void 0,O._config.hash(te),te,O)},E.prototype.get=function(te,O){return T(O,te,this)};var H=n.has=function(te,O,me){return M(l,te,O,me)!==l};E.prototype.hasHash=function(te,O){return H(te,O,this)};var ie=n.has=function(te,O){return H(O._config.hash(te),te,O)};E.prototype.has=function(te){return ie(te,this)};var Ae=function(O,me){return O===me};n.make=function(te){return new E(0,0,{keyEq:te&&te.keyEq||Ae,hash:te&&te.hash||u},B,0)},n.empty=n.make();var Ie=n.isEmpty=function(te){return te&&!!k(te._root)};E.prototype.isEmpty=function(){return Ie(this)};var xe=n.modifyHash=function(te,O,me,we){var ke={value:we._size},He=we._root._modify(we._editable?we._edit:NaN,we._config.keyEq,0,te,O,me,ke);return we.setTree(He,ke.value)};E.prototype.modifyHash=function(te,O,me){return xe(me,te,O,this)};var Xe=n.modify=function(te,O,me){return xe(te,me._config.hash(O),O,me)};E.prototype.modify=function(te,O){return Xe(O,te,this)};var Je=n.setHash=function(te,O,me,we){return xe(g(me),te,O,we)};E.prototype.setHash=function(te,O,me){return Je(te,O,me,this)};var Ne=n.set=function(te,O,me){return Je(me._config.hash(te),te,O,me)};E.prototype.set=function(te,O){return Ne(te,O,this)};var et=g(l),he=n.removeHash=function(te,O,me){return xe(et,te,O,me)};E.prototype.removeHash=E.prototype.deleteHash=function(te,O){return he(te,O,this)};var Be=n.remove=function(te,O){return he(O._config.hash(te),te,O)};E.prototype.remove=E.prototype.delete=function(te){return Be(te,this)};var Ge=n.beginMutation=function(te){return new E(te._editable+1,te._edit+1,te._config,te._root,te._size)};E.prototype.beginMutation=function(){return Ge(this)};var Me=n.endMutation=function(te){return te._editable=te._editable&&te._editable-1,te};E.prototype.endMutation=function(){return Me(this)};var Oe=n.mutate=function(te,O){var me=Ge(O);return te(me),Me(me)};E.prototype.mutate=function(te){return Oe(te,this)};var Ye=function(O){return O&&Ct(O[0],O[1],O[2],O[3],O[4])},Ct=function(O,me,we,ke,He){for(;we<O;){var pe=me[we++];if(pe&&!k(pe))return j(pe,ke,[O,me,we,ke,He])}return Ye(He)},j=function(O,me,we){switch(O.type){case S:return{value:me(O),rest:we};case Z:case W:case R:var ke=O.children;return Ct(ke.length,ke,0,me,we);default:return Ye(we)}},be={done:!0};function Ce(te){this.v=te}Ce.prototype.next=function(){if(!this.v)return be;var te=this.v;return this.v=Ye(te.rest),te},Ce.prototype[Symbol.iterator]=function(){return this};var We=function(O,me){return new Ce(j(O._root,me))},je=function(O){return[O.key,O.value]},tt=n.entries=function(te){return We(te,je)};E.prototype.entries=E.prototype[Symbol.iterator]=function(){return tt(this)};var ft=function(O){return O.key},ut=n.keys=function(te){return We(te,ft)};E.prototype.keys=function(){return ut(this)};var Yn=function(O){return O.value},gi=n.values=E.prototype.values=function(te){return We(te,Yn)};E.prototype.values=function(){return gi(this)};var ci=n.fold=function(te,O,me){var we=me._root;if(we.type===S)return te(O,we.value,we.key);for(var ke=[we.children],He=void 0;He=ke.pop();)for(var pe=0,Ee=He.length;pe<Ee;){var ze=He[pe++];ze&&ze.type&&(ze.type===S?O=te(O,ze.value,ze.key):ke.push(ze.children))}return O};E.prototype.fold=function(te,O){return ci(te,O,this)};var ui=n.forEach=function(te,O){return ci(function(me,we,ke){return te(we,ke,O)},null,O)};E.prototype.forEach=function(te){return ui(te,this)};var di=n.count=function(te){return te._size};E.prototype.count=function(){return di(this)},Object.defineProperty(E.prototype,"size",{get:E.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class vbe{constructor(e){At(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return TV(this)}toMap(){return new Map(this._map)}}class MV{constructor(e){if(At(this,"_hamt",ybe.empty.beginMutation()),e instanceof MV){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,i]of e.entries())this._hamt.set(n,i)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return TV(this)}toMap(){return new Map(this._hamt)}}function TV(t){return rn("recoil_hamt_2020")?new MV(t):new vbe(t)}var Sbe={persistentMap:TV},Zbe=Sbe.persistentMap,Gbe=Object.freeze({__proto__:null,persistentMap:Zbe});function Bbe(t,...e){const n=new Set;e:for(const i of t){for(const r of e)if(r.has(i))continue e;n.add(i)}return n}var Jh=Bbe;function Rbe(t,e){const n=new Map;return t.forEach((i,r)=>{n.set(r,e(i,r))}),n}var R0=Rbe;function kbe(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function Vbe(t){return{nodeDeps:R0(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:R0(t.nodeToNodeSubscriptions,e=>new Set(e))}}function IG(t,e,n,i){const{nodeDeps:r,nodeToNodeSubscriptions:o}=n,s=r.get(t);if(s&&i&&s!==i.nodeDeps.get(t))return;r.set(t,e);const a=s==null?e:Jh(e,s);for(const l of a)o.has(l)||o.set(l,new Set),kn(o.get(l)).add(t);if(s){const l=Jh(s,e);for(const g of l){if(!o.has(g))return;const u=kn(o.get(g));u.delete(t),u.size===0&&o.delete(g)}}}function wbe(t,e,n,i){var r,o,s,a;const l=n.getState();i===l.currentTree.version||i===((r=l.nextTree)===null||r===void 0?void 0:r.version)||((o=l.previousTree)===null||o===void 0||o.version);const g=n.getGraph(i);if(IG(t,e,g),i===((s=l.previousTree)===null||s===void 0?void 0:s.version)){const d=n.getGraph(l.currentTree.version);IG(t,e,d,g)}if(i===((a=l.previousTree)===null||a===void 0?void 0:a.version)||i===l.currentTree.version){var u;const d=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const h=n.getGraph(d);IG(t,e,h,g)}}}var mm={cloneGraph:Vbe,graph:kbe,saveDepsToStore:wbe};let Wbe=0;const xbe=()=>Wbe++;let Xbe=0;const Jbe=()=>Xbe++;let Ebe=0;const Hbe=()=>Ebe++;var ov={getNextTreeStateVersion:xbe,getNextStoreID:Jbe,getNextComponentID:Hbe};const{persistentMap:J5}=Gbe,{graph:Nbe}=mm,{getNextTreeStateVersion:uz}=ov;function dz(){const t=uz();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:J5(),nonvalidatedAtoms:J5()}}function Ybe(){const t=dz();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,Nbe()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Iz={makeEmptyTreeState:dz,makeEmptyStoreState:Ybe,getNextTreeStateVersion:uz};class Cz{}function Fbe(){return new Cz}var sv={RetentionZone:Cz,retentionZone:Fbe};function Mbe(t,e){const n=new Set(t);return n.add(e),n}function Tbe(t,e){const n=new Set(t);return n.delete(e),n}function Lbe(t,e,n){const i=new Map(t);return i.set(e,n),i}function _be(t,e,n){const i=new Map(t);return i.set(e,n(i.get(e))),i}function Dbe(t,e){const n=new Map(t);return n.delete(e),n}function Kbe(t,e){const n=new Map(t);return e.forEach(i=>n.delete(i)),n}var hz={setByAddingToSet:Mbe,setByDeletingFromSet:Tbe,mapBySettingInMap:Lbe,mapByUpdatingInMap:_be,mapByDeletingFromMap:Dbe,mapByDeletingMultipleFromMap:Kbe};function*zbe(t,e){let n=0;for(const i of t)e(i,n++)&&(yield i)}var LV=zbe;function Pbe(t,e){return new Proxy(t,{get:(i,r)=>(!(r in i)&&r in e&&(i[r]=e[r]()),i[r]),ownKeys:i=>Object.keys(i)})}var fz=Pbe;const{getNode:pm,getNodeMaybe:Ube,recoilValuesForKeys:E5}=Zr,{RetentionZone:H5}=sv,{setByAddingToSet:jbe}=hz,Obe=Object.freeze(new Set);class Qbe extends Error{}function $be(t,e,n){if(!rn("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:i}=t.getState().retention;function r(o){let s=i.get(o);s||i.set(o,s=new Set),s.add(e)}if(n instanceof H5)r(n);else if(Array.isArray(n))for(const o of n)r(o);return()=>{if(!rn("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function s(a){const l=o.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&o.nodesRetainedByZone.delete(a)}if(n instanceof H5)s(n);else if(Array.isArray(n))for(const a of n)s(a)}}function _V(t,e,n,i){const r=t.getState();if(r.nodeCleanupFunctions.has(n))return;const o=pm(n),s=$be(t,n,o.retainedBy),a=o.init(t,e,i);r.nodeCleanupFunctions.set(n,()=>{a(),s()})}function qbe(t,e,n){_V(t,t.getState().currentTree,e,n)}function e0e(t,e){var n;const i=t.getState();(n=i.nodeCleanupFunctions.get(e))===null||n===void 0||n(),i.nodeCleanupFunctions.delete(e)}function t0e(t,e,n){return _V(t,e,n,"get"),pm(n).get(t,e)}function mz(t,e,n){return pm(n).peek(t,e)}function n0e(t,e,n){var i;const r=Ube(e);return r==null||(i=r.invalidate)===null||i===void 0||i.call(r,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:jbe(t.dirtyAtoms,e)}}function i0e(t,e,n,i){const r=pm(n);if(r.set==null)throw new Qbe(`Attempt to set read-only RecoilValue: ${n}`);const o=r.set;return _V(t,e,n,"set"),o(t,e,i)}function r0e(t,e,n){const i=t.getState(),r=t.getGraph(e.version),o=pm(n).nodeType;return fz({type:o},{loadable:()=>mz(t,e,n),isActive:()=>i.knownAtoms.has(n)||i.knownSelectors.has(n),isSet:()=>o==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var s;return E5((s=r.nodeDeps.get(n))!==null&&s!==void 0?s:[])},subscribers:()=>{var s,a;return{nodes:E5(LV(pz(t,e,new Set([n])),l=>l!==n)),components:rv((s=(a=i.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&s!==void 0?s:[],([l])=>({name:l}))}}})}function pz(t,e,n){const i=new Set,r=Array.from(n),o=t.getGraph(e.version);for(let a=r.pop();a;a=r.pop()){var s;i.add(a);const l=(s=o.nodeToNodeSubscriptions.get(a))!==null&&s!==void 0?s:Obe;for(const g of l)i.has(g)||r.push(g)}return i}var yg={getNodeLoadable:t0e,peekNodeLoadable:mz,setNodeValue:i0e,initializeNode:qbe,cleanUpNode:e0e,setUnvalidatedAtomValue_DEPRECATED:n0e,peekNodeInfo:r0e,getDownstreamNodes:pz};let Az=null;function o0e(t){Az=t}function s0e(){var t;(t=Az)===null||t===void 0||t()}var bz={setInvalidateMemoizedSnapshot:o0e,invalidateMemoizedSnapshot:s0e};const{getDownstreamNodes:a0e,getNodeLoadable:yz,setNodeValue:l0e}=yg,{getNextComponentID:g0e}=ov,{getNode:c0e,getNodeMaybe:vz}=Zr,{DefaultValue:DV}=Zr,{reactMode:u0e}=fm,{AbstractRecoilValue:d0e,RecoilState:I0e,RecoilValueReadOnly:C0e,isRecoilValue:h0e}=hI,{invalidateMemoizedSnapshot:f0e}=bz;function m0e(t,{key:e},n=t.getState().currentTree){var i,r;const o=t.getState();n.version===o.currentTree.version||n.version===((i=o.nextTree)===null||i===void 0?void 0:i.version)||(n.version,(r=o.previousTree)===null||r===void 0||r.version);const s=yz(t,n,e);return s.state==="loading"&&s.contents.catch(()=>{}),s}function p0e(t,e){const n=t.clone();return e.forEach((i,r)=>{i.state==="hasValue"&&i.contents instanceof DV?n.delete(r):n.set(r,i)}),n}function A0e(t,e,{key:n},i){if(typeof i=="function"){const r=yz(t,e,n);if(r.state==="loading"){const o=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw vt(o)}else if(r.state==="hasError")throw r.contents;return i(r.contents)}else return i}function b0e(t,e,n){if(n.type==="set"){const{recoilValue:r,valueOrUpdater:o}=n,s=A0e(t,e,r,o),a=l0e(t,e,r.key,s);for(const[l,g]of a.entries())c1(e,l,g)}else if(n.type==="setLoadable"){const{recoilValue:{key:r},loadable:o}=n;c1(e,r,o)}else if(n.type==="markModified"){const{recoilValue:{key:r}}=n;e.dirtyAtoms.add(r)}else if(n.type==="setUnvalidated"){var i;const{recoilValue:{key:r},unvalidatedValue:o}=n,s=vz(r);s==null||(i=s.invalidate)===null||i===void 0||i.call(s,e),e.atomValues.delete(r),e.nonvalidatedAtoms.set(r,o),e.dirtyAtoms.add(r)}else NV(`Unknown action ${n.type}`)}function c1(t,e,n){n.state==="hasValue"&&n.contents instanceof DV?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function Sz(t,e){t.replaceState(n=>{const i=Zz(n);for(const r of e)b0e(t,i,r);return Gz(t,i),f0e(),i})}function av(t,e){if(Eh.length){const n=Eh[Eh.length-1];let i=n.get(t);i||n.set(t,i=[]),i.push(e)}else Sz(t,[e])}const Eh=[];function y0e(){const t=new Map;return Eh.push(t),()=>{for(const[e,n]of t)Sz(e,n);Eh.pop()}}function Zz(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function Gz(t,e){const n=a0e(t,e,e.dirtyAtoms);for(const o of n){var i,r;(i=vz(o))===null||i===void 0||(r=i.invalidate)===null||r===void 0||r.call(i,e)}}function Bz(t,e,n){av(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function v0e(t,e,n){if(n instanceof DV)return Bz(t,e,n);av(t,{type:"setLoadable",recoilValue:e,loadable:n})}function S0e(t,e){av(t,{type:"markModified",recoilValue:e})}function Z0e(t,e,n){av(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function G0e(t,{key:e},n,i=null){const r=g0e(),o=t.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),kn(o.nodeToComponentSubscriptions.get(e)).set(r,[i??"<not captured>",n]);const s=u0e();if(s.early&&(s.mode==="LEGACY"||s.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(r)||(l.delete(r),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function B0e(t,e){var n;const{currentTree:i}=t.getState(),r=c0e(e.key);(n=r.clearCache)===null||n===void 0||n.call(r,t,i)}var Ps={RecoilValueReadOnly:C0e,AbstractRecoilValue:d0e,RecoilState:I0e,getRecoilValueAsLoadable:m0e,setRecoilValue:Bz,setRecoilValueLoadable:v0e,markRecoilValueModified:S0e,setUnvalidatedRecoilValue:Z0e,subscribeToRecoilValue:G0e,isRecoilValue:h0e,applyAtomValueWrites:p0e,batchStart:y0e,writeLoadableToTreeState:c1,invalidateDownstreams:Gz,copyTreeState:Zz,refreshRecoilValue:B0e};function R0e(t,e,n){const i=t.entries();let r=i.next();for(;!r.done;){const o=r.value;if(e.call(n,o[1],o[0],t))return!0;r=i.next()}return!1}var k0e=R0e;const{cleanUpNode:V0e}=yg,{deleteNodeConfigIfPossible:w0e,getNode:Rz}=Zr,{RetentionZone:kz}=sv,W0e=12e4,Vz=new Set;function wz(t,e){const n=t.getState(),i=n.currentTree;if(n.nextTree)return;const r=new Set;for(const s of e)if(s instanceof kz)for(const a of E0e(n,s))r.add(a);else r.add(s);const o=x0e(t,r);for(const s of o)J0e(t,i,s)}function x0e(t,e){const n=t.getState(),i=n.currentTree,r=t.getGraph(i.version),o=new Set,s=new Set;return a(e),o;function a(l){const g=new Set,u=X0e(t,i,l,o,s);for(const A of u){var d;if(Rz(A).retainedBy==="recoilRoot"){s.add(A);continue}if(((d=n.retention.referenceCounts.get(A))!==null&&d!==void 0?d:0)>0){s.add(A);continue}if(Wz(A).some(y=>n.retention.referenceCounts.get(y))){s.add(A);continue}const p=r.nodeToNodeSubscriptions.get(A);if(p&&k0e(p,y=>s.has(y))){s.add(A);continue}o.add(A),g.add(A)}const h=new Set;for(const A of g)for(const p of(f=r.nodeDeps.get(A))!==null&&f!==void 0?f:Vz){var f;o.has(p)||h.add(p)}h.size&&a(h)}}function X0e(t,e,n,i,r){const o=t.getGraph(e.version),s=[],a=new Set;for(;n.size>0;)l(kn(n.values().next().value));return s;function l(g){if(i.has(g)||r.has(g)){n.delete(g);return}if(a.has(g))return;const u=o.nodeToNodeSubscriptions.get(g);if(u)for(const d of u)l(d);a.add(g),n.delete(g),s.push(g)}}function J0e(t,e,n){if(!rn("recoil_memory_managament_2020"))return;V0e(t,n);const i=t.getState();i.knownAtoms.delete(n),i.knownSelectors.delete(n),i.nodeTransactionSubscriptions.delete(n),i.retention.referenceCounts.delete(n);const r=Wz(n);for(const l of r){var o;(o=i.retention.nodesRetainedByZone.get(l))===null||o===void 0||o.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const s=i.graphsByVersion.get(e.version);if(s){const l=s.nodeDeps.get(n);if(l!==void 0){s.nodeDeps.delete(n);for(const g of l){var a;(a=s.nodeToNodeSubscriptions.get(g))===null||a===void 0||a.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}w0e(n)}function E0e(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:Vz}function Wz(t){const e=Rz(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof kz?[e]:e}function H0e(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):wz(t,new Set([e]))}function N0e(t,e,n){var i;if(!rn("recoil_memory_managament_2020"))return;const r=t.getState().retention.referenceCounts,o=((i=r.get(e))!==null&&i!==void 0?i:0)+n;o===0?xz(t,e):r.set(e,o)}function xz(t,e){if(!rn("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),H0e(t,e)}function Y0e(t){if(!rn("recoil_memory_managament_2020"))return;const e=t.getState();wz(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function F0e(t){return t===void 0?"recoilRoot":t}var ou={SUSPENSE_TIMEOUT_MS:W0e,updateRetainCount:N0e,updateRetainCountToZero:xz,releaseScheduledRetainablesNow:Y0e,retainedByOptionWithDefault:F0e};const{unstable_batchedUpdates:M0e}=K6;var T0e={unstable_batchedUpdates:M0e};const{unstable_batchedUpdates:L0e}=T0e;var _0e={unstable_batchedUpdates:L0e};const{batchStart:D0e}=Ps,{unstable_batchedUpdates:K0e}=_0e;let KV=K0e||(t=>t());const z0e=t=>{KV=t},P0e=()=>KV,U0e=t=>{KV(()=>{let e=()=>{};try{e=D0e(),t()}finally{e()}})};var lv={getBatcher:P0e,setBatcher:z0e,batchUpdates:U0e};function*j0e(t){for(const e of t)for(const n of e)yield n}var Xz=j0e;const Jz=typeof Window>"u"||typeof window>"u",O0e=t=>!Jz&&(t===window||t instanceof Window),Q0e=typeof navigator<"u"&&navigator.product==="ReactNative";var gv={isSSR:Jz,isReactNative:Q0e,isWindow:O0e};function $0e(t,e){let n;return(...i)=>{n||(n={});const r=e(...i);return Object.hasOwnProperty.call(n,r)||(n[r]=t(...i)),n[r]}}function q0e(t,e){let n,i;return(...r)=>{const o=e(...r);return n===o||(n=o,i=t(...r)),i}}function eye(t,e){let n,i;return[(...s)=>{const a=e(...s);return n===a||(n=a,i=t(...s)),i},()=>{n=null}]}var tye={memoizeWithArgsHash:$0e,memoizeOneWithArgsHash:q0e,memoizeOneWithArgsHashAndInvalidation:eye};const{batchUpdates:u1}=lv,{initializeNode:nye,peekNodeInfo:iye}=yg,{graph:rye}=mm,{getNextStoreID:oye}=ov,{DEFAULT_VALUE:sye,recoilValues:N5,recoilValuesForKeys:Y5}=Zr,{AbstractRecoilValue:aye,getRecoilValueAsLoadable:lye,setRecoilValue:F5,setUnvalidatedRecoilValue:gye}=Ps,{updateRetainCount:ub}=ou,{setInvalidateMemoizedSnapshot:cye}=bz,{getNextTreeStateVersion:uye,makeEmptyStoreState:dye}=Iz,{isSSR:Iye}=gv,{memoizeOneWithArgsHashAndInvalidation:Cye}=tye;class cv{constructor(e,n){At(this,"_store",void 0),At(this,"_refCount",1),At(this,"getLoadable",i=>(this.checkRefCount_INTERNAL(),lye(this._store,i))),At(this,"getPromise",i=>(this.checkRefCount_INTERNAL(),this.getLoadable(i).toPromise())),At(this,"getNodes_UNSTABLE",i=>{if(this.checkRefCount_INTERNAL(),(i==null?void 0:i.isModified)===!0){if((i==null?void 0:i.isInitialized)===!1)return[];const s=this._store.getState().currentTree;return Y5(s.dirtyAtoms)}const r=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(i==null?void 0:i.isInitialized)==null?N5.values():i.isInitialized===!0?Y5(Xz([r,o])):LV(N5.values(),({key:s})=>!r.has(s)&&!o.has(s))}),At(this,"getInfo_UNSTABLE",({key:i})=>(this.checkRefCount_INTERNAL(),iye(this._store,this._store.getState().currentTree,i))),At(this,"map",i=>{this.checkRefCount_INTERNAL();const r=new d1(this,u1);return i(r),r}),At(this,"asyncMap",async i=>{this.checkRefCount_INTERNAL();const r=new d1(this,u1);return r.retain(),await i(r),r.autoRelease_INTERNAL(),r}),this._store={storeID:oye(),parentStoreID:n,getState:()=>e,replaceState:i=>{e.currentTree=i(e.currentTree)},getGraph:i=>{const r=e.graphsByVersion;if(r.has(i))return kn(r.get(i));const o=rye();return r.set(i,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw vt("Cannot subscribe to Snapshots")}};for(const i of this._store.getState().knownAtoms)nye(this._store,i,"get"),ub(this._store,i,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){Iye||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!rn("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){rn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function Ez(t,e,n=!1){const i=t.getState(),r=n?uye():e.version;return{currentTree:{version:n?r:e.version,stateID:n?r:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(i.knownAtoms),knownSelectors:new Set(i.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(rv(i.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function hye(t){const e=new cv(dye());return t!=null?e.map(t):e}const[M5,Hz]=Cye((t,e)=>{var n;const i=t.getState(),r=e==="latest"?(n=i.nextTree)!==null&&n!==void 0?n:i.currentTree:kn(i.previousTree);return new cv(Ez(t,r),t.storeID)},(t,e)=>{var n,i;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((i=t.getState().previousTree)===null||i===void 0?void 0:i.version)});cye(Hz);function fye(t,e="latest"){const n=M5(t,e);return n.isRetained()?n:(Hz(),M5(t,e))}class d1 extends cv{constructor(e,n){super(Ez(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),At(this,"_batch",void 0),At(this,"set",(i,r)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{ub(o,i.key,1),F5(this.getStore_INTERNAL(),i,r)})}),At(this,"reset",i=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();this._batch(()=>{ub(r,i.key,1),F5(this.getStore_INTERNAL(),i,sye)})}),At(this,"setUnvalidatedAtomValues_DEPRECATED",i=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();u1(()=>{for(const[o,s]of i.entries())ub(r,o,1),gye(r,new aye(o),s)})}),this._batch=n}}var uv={Snapshot:cv,MutableSnapshot:d1,freshSnapshot:hye,cloneSnapshot:fye},mye=uv.Snapshot,pye=uv.MutableSnapshot,Aye=uv.freshSnapshot,bye=uv.cloneSnapshot,dv=Object.freeze({__proto__:null,Snapshot:mye,MutableSnapshot:pye,freshSnapshot:Aye,cloneSnapshot:bye});function yye(...t){const e=new Set;for(const n of t)for(const i of n)e.add(i);return e}var vye=yye;const{useRef:Sye}=gt;function Zye(t){const e=Sye(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var T5=Zye;const{getNextTreeStateVersion:Gye,makeEmptyStoreState:Nz}=Iz,{cleanUpNode:Bye,getDownstreamNodes:Rye,initializeNode:kye,setNodeValue:Vye,setUnvalidatedAtomValue_DEPRECATED:wye}=yg,{graph:Wye}=mm,{cloneGraph:xye}=mm,{getNextStoreID:Yz}=ov,{createMutableSource:CG,reactMode:Fz}=fm,{applyAtomValueWrites:Xye}=Ps,{releaseScheduledRetainablesNow:Mz}=ou,{freshSnapshot:Jye}=dv,{useCallback:Eye,useContext:Tz,useEffect:I1,useMemo:Hye,useRef:Nye,useState:Yye}=gt;function VC(){throw vt("This component must be used inside a <RecoilRoot> component.")}const Lz=Object.freeze({storeID:Yz(),getState:VC,replaceState:VC,getGraph:VC,subscribeToTransactions:VC,addTransactionMetadata:VC});let C1=!1;function L5(t){if(C1)throw vt("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){rn("recoil_memory_managament_2020")&&rn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&Mz(t);const n=e.currentTree.version,i=Gye();e.nextTree={...e.currentTree,version:i,stateID:i,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(i,xye(kn(e.graphsByVersion.get(n))))}}const _z=gt.createContext({current:Lz}),Iv=()=>Tz(_z),Dz=gt.createContext(null);function Fye(){return Tz(Dz)}function zV(t,e,n){const i=Rye(t,n,n.dirtyAtoms);for(const r of i){const o=e.nodeToComponentSubscriptions.get(r);if(o)for(const[s,[a,l]]of o)l(n)}}function Kz(t){const e=t.getState(),n=e.currentTree,i=n.dirtyAtoms;if(i.size){for(const[r,o]of e.nodeTransactionSubscriptions)if(i.has(r))for(const[s,a]of o)a(t);for(const[r,o]of e.transactionSubscriptions)o(t);(!Fz().early||e.suspendedComponentResolvers.size>0)&&(zV(t,e,n),e.suspendedComponentResolvers.forEach(r=>r()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(r=>r(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function Mye(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,Kz(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):NV("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,rn("recoil_memory_managament_2020")&&n==null&&Mz(t)}finally{e.commitDepth--}}function Tye({setNotifyBatcherOfChange:t}){const e=Iv(),[,n]=Yye([]);return t(()=>n({})),I1(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),I1(()=>{Abe.enqueueExecution("Batcher",()=>{Mye(e.current)})}),null}function Lye(t,e){const n=Nz();return e({set:(i,r)=>{const o=n.currentTree,s=Vye(t,o,i.key,r),a=new Set(s.keys()),l=o.nonvalidatedAtoms.clone();for(const g of a)l.delete(g);n.currentTree={...o,dirtyAtoms:vye(o.dirtyAtoms,a),atomValues:Xye(o.atomValues,s),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:i=>{i.forEach((r,o)=>{n.currentTree=wye(n.currentTree,o,r)})}}),n}function _ye(t){const e=Jye(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(i=>i()),n.nodeCleanupFunctions.clear(),n}let _5=0;function Dye({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:i}){let r;const o=f=>{const A=r.current.graphsByVersion;if(A.has(f))return kn(A.get(f));const p=Wye();return A.set(f,p),p},s=(f,A)=>{if(A==null){const{transactionSubscriptions:p}=d.current.getState(),y=_5++;return p.set(y,f),{release:()=>{p.delete(y)}}}else{const{nodeTransactionSubscriptions:p}=d.current.getState();p.has(A)||p.set(A,new Map);const y=_5++;return kn(p.get(A)).set(y,f),{release:()=>{const v=p.get(A);v&&(v.delete(y),v.size===0&&p.delete(A))}}}},a=f=>{L5(d.current);for(const A of Object.keys(f))kn(d.current.getState().nextTree).transactionMetadata[A]=f[A]},l=f=>{L5(d.current);const A=kn(r.current.nextTree);let p;try{C1=!0,p=f(A)}finally{C1=!1}p!==A&&(r.current.nextTree=p,Fz().early&&zV(d.current,r.current,p),kn(g.current)())},g=Nye(null),u=Eye(f=>{g.current=f},[g]),d=T5(()=>n??{storeID:Yz(),getState:()=>r.current,replaceState:l,getGraph:o,subscribeToTransactions:s,addTransactionMetadata:a});n!=null&&(d.current=n),r=T5(()=>t!=null?Lye(d.current,t):e!=null?_ye(e):Nz());const h=Hye(()=>CG==null?void 0:CG(r,()=>r.current.currentTree.version),[r]);return I1(()=>{const f=d.current;for(const A of new Set(f.getState().knownAtoms))kye(f,A,"get");return()=>{for(const A of f.getState().knownAtoms)Bye(f,A)}},[d]),gt.createElement(_z.Provider,{value:d},gt.createElement(Dz.Provider,{value:h},gt.createElement(Tye,{setNotifyBatcherOfChange:u}),i))}function Kye(t){const{override:e,...n}=t,i=Iv();return e===!1&&i.current!==Lz?t.children:gt.createElement(Dye,n)}function zye(){return Iv().current.storeID}var Qa={RecoilRoot:Kye,useStoreRef:Iv,useRecoilMutableSource:Fye,useRecoilStoreID:zye,notifyComponents_FOR_TESTING:zV,sendEndOfBatchNotifications_FOR_TESTING:Kz};function Pye(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}var Uye=Pye;const{useEffect:jye,useRef:Oye}=gt;function Qye(t){const e=Oye();return jye(()=>{e.current=t}),e.current}var zz=Qye;const{useStoreRef:$ye}=Qa,{SUSPENSE_TIMEOUT_MS:qye}=ou,{updateRetainCount:wC}=ou,{RetentionZone:eve}=sv,{useEffect:tve,useRef:nve}=gt,{isSSR:D5}=gv;function ive(t){if(rn("recoil_memory_managament_2020"))return rve(t)}function rve(t){const n=(Array.isArray(t)?t:[t]).map(s=>s instanceof eve?s:s.key),i=$ye();tve(()=>{if(!rn("recoil_memory_managament_2020"))return;const s=i.current;if(r.current&&!D5)window.clearTimeout(r.current),r.current=null;else for(const a of n)wC(s,a,1);return()=>{for(const a of n)wC(s,a,-1)}},[i,...n]);const r=nve(),o=zz(n);if(!D5&&(o===void 0||!Uye(o,n))){const s=i.current;for(const a of n)wC(s,a,1);if(o)for(const a of o)wC(s,a,-1);r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{r.current=null;for(const a of n)wC(s,a,-1)},qye)}}var PV=ive;function ove(){return"<component name not available>"}var Am=ove;const{batchUpdates:sve}=lv,{DEFAULT_VALUE:Pz}=Zr,{currentRendererSupportsUseSyncExternalStore:ave,reactMode:FI,useMutableSource:lve,useSyncExternalStore:gve}=fm,{useRecoilMutableSource:cve,useStoreRef:Us}=Qa,{AbstractRecoilValue:h1,getRecoilValueAsLoadable:bm,setRecoilValue:k0,setUnvalidatedRecoilValue:uve,subscribeToRecoilValue:fI}=Ps,{useCallback:yr,useEffect:mI,useMemo:Uz,useRef:Hh,useState:UV}=gt,{setByAddingToSet:dve}=hz,{isSSR:Ive}=gv;function jV(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(r=>{const o=n.current.getState().suspendedComponentResolvers;o.add(r),Ive&&Sn(t.contents)&&t.contents.finally(()=>{o.delete(r)})}):t.state==="hasError"?t.contents:vt(`Invalid value of loadable atom "${e.key}"`)}function Cve(){const t=Am(),e=Us(),[,n]=UV([]),i=Hh(new Set);i.current=new Set;const r=Hh(new Set),o=Hh(new Map),s=yr(l=>{const g=o.current.get(l);g&&(g.release(),o.current.delete(l))},[o]),a=yr((l,g)=>{o.current.has(g)&&n([])},[]);return mI(()=>{const l=e.current;Jh(i.current,r.current).forEach(g=>{if(o.current.has(g))return;const u=fI(l,new h1(g),h=>a(h,g),t);o.current.set(g,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),g)}):a(l.getState(),g)}),Jh(r.current,i.current).forEach(g=>{s(g)}),r.current=i.current}),mI(()=>{const l=o.current;return Jh(i.current,new Set(l.keys())).forEach(g=>{const u=fI(e.current,new h1(g),d=>a(d,g),t);l.set(g,u)}),()=>l.forEach((g,u)=>s(u))},[t,e,s,a]),Uz(()=>{function l(A){return p=>{k0(e.current,A,p)}}function g(A){return()=>k0(e.current,A,Pz)}function u(A){var p;i.current.has(A.key)||(i.current=dve(i.current,A.key));const y=e.current.getState();return bm(e.current,A,FI().early&&(p=y.nextTree)!==null&&p!==void 0?p:y.currentTree)}function d(A){const p=u(A);return jV(p,A,e)}function h(A){return[d(A),l(A)]}function f(A){return[u(A),l(A)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:g}},[i,e])}const hve={current:0};function fve(t){const e=Us(),n=Am(),i=yr(()=>{var a;const l=e.current,g=l.getState(),u=FI().early&&(a=g.nextTree)!==null&&a!==void 0?a:g.currentTree;return{loadable:bm(l,t,u),key:t.key}},[e,t]),r=yr(a=>{let l;return()=>{var g,u;const d=a();return(g=l)!==null&&g!==void 0&&g.loadable.is(d.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===d.key?l:(l=d,d)}},[]),o=Uz(()=>r(i),[i,r]),s=yr(a=>{const l=e.current;return fI(l,t,a,n).release},[e,t,n]);return gve(s,o,o).loadable}function mve(t){const e=Us(),n=yr(()=>{var g;const u=e.current,d=u.getState(),h=FI().early&&(g=d.nextTree)!==null&&g!==void 0?g:d.currentTree;return bm(u,t,h)},[e,t]),i=yr(()=>n(),[n]),r=Am(),o=yr((g,u)=>{const d=e.current;return fI(d,t,()=>{if(!rn("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},r).release},[e,t,r,n]),s=cve();if(s==null)throw vt("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=lve(s,i,o),l=Hh(a);return mI(()=>{l.current=a}),a}function f1(t){const e=Us(),n=Am(),i=yr(()=>{var l;const g=e.current,u=g.getState(),d=FI().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return bm(g,t,d)},[e,t]),r=yr(()=>({loadable:i(),key:t.key}),[i,t.key]),o=yr(l=>{const g=r();return l.loadable.is(g.loadable)&&l.key===g.key?l:g},[r]);mI(()=>{const l=fI(e.current,t,g=>{a(o)},n);return a(o),l.release},[n,t,e,o]);const[s,a]=UV(r);return s.key!==t.key?r().loadable:s.loadable}function pve(t){const e=Us(),[,n]=UV([]),i=Am(),r=yr(()=>{var a;const l=e.current,g=l.getState(),u=FI().early&&(a=g.nextTree)!==null&&a!==void 0?a:g.currentTree;return bm(l,t,u)},[e,t]),o=r(),s=Hh(o);return mI(()=>{s.current=o}),mI(()=>{const a=e.current,l=a.getState(),g=fI(a,t,d=>{var h;if(!rn("recoil_suppress_rerender_in_callback"))return n([]);const f=r();(h=s.current)!==null&&h!==void 0&&h.is(f)||n(f),s.current=f},i);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s.current=null,n([])});else{var u;if(!rn("recoil_suppress_rerender_in_callback"))return n([]);const d=r();(u=s.current)!==null&&u!==void 0&&u.is(d)||n(d),s.current=d}return g.release},[i,r,t,e]),o}function OV(t){return rn("recoil_memory_managament_2020")&&PV(t),{TRANSITION_SUPPORT:f1,SYNC_EXTERNAL_STORE:ave()?fve:f1,MUTABLE_SOURCE:mve,LEGACY:pve}[FI().mode](t)}function jz(t){const e=Us(),n=OV(t);return jV(n,t,e)}function Cv(t){const e=Us();return yr(n=>{k0(e.current,t,n)},[e,t])}function Ave(t){const e=Us();return yr(()=>{k0(e.current,t,Pz)},[e,t])}function bve(t){return[jz(t),Cv(t)]}function yve(t){return[OV(t),Cv(t)]}function vve(){const t=Us();return(e,n={})=>{sve(()=>{t.current.addTransactionMetadata(n),e.forEach((i,r)=>uve(t.current,new h1(r),i))})}}function Oz(t){return rn("recoil_memory_managament_2020")&&PV(t),f1(t)}function Qz(t){const e=Us(),n=Oz(t);return jV(n,t,e)}function Sve(t){return[Qz(t),Cv(t)]}var Zve={recoilComponentGetRecoilValueCount_FOR_TESTING:hve,useRecoilInterface:Cve,useRecoilState:bve,useRecoilStateLoadable:yve,useRecoilValue:jz,useRecoilValueLoadable:OV,useResetRecoilState:Ave,useSetRecoilState:Cv,useSetUnvalidatedAtomValues:vve,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Oz,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Qz,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Sve};function Gve(t,e){const n=new Map;for(const[i,r]of t)e(r,i)&&n.set(i,r);return n}var Bve=Gve;function Rve(t,e){const n=new Set;for(const i of t)e(i)&&n.add(i);return n}var kve=Rve;function Vve(...t){const e=new Map;for(let n=0;n<t.length;n++){const i=t[n].keys();let r;for(;!(r=i.next()).done;)e.set(r.value,t[n].get(r.value))}return e}var wve=Vve;const{batchUpdates:Wve}=lv,{DEFAULT_VALUE:xve,getNode:$z,nodes:Xve}=Zr,{useStoreRef:QV}=Qa,{AbstractRecoilValue:Jve,setRecoilValueLoadable:Eve}=Ps,{SUSPENSE_TIMEOUT_MS:Hve}=ou,{cloneSnapshot:V0}=dv,{useCallback:hv,useEffect:qz,useRef:K5,useState:Nve}=gt,{isSSR:z5}=gv;function fv(t){const e=QV();qz(()=>e.current.subscribeToTransactions(t).release,[t,e])}function P5(t){const e=t.atomValues.toMap(),n=R0(Bve(e,(i,r)=>{const s=$z(r).persistence_UNSTABLE;return s!=null&&s.type!=="none"&&i.state==="hasValue"}),i=>i.contents);return wve(t.nonvalidatedAtoms.toMap(),n)}function Yve(t){fv(hv(e=>{let n=e.getState().previousTree;const i=e.getState().currentTree;n||(n=e.getState().currentTree);const r=P5(i),o=P5(n),s=R0(Xve,l=>{var g,u,d,h;return{persistence_UNSTABLE:{type:(g=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&g!==void 0?g:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=kve(i.dirtyAtoms,l=>r.has(l)||o.has(l));t({atomValues:r,previousAtomValues:o,atomInfo:s,modifiedAtoms:a,transactionMetadata:{...i.transactionMetadata}})},[t]))}function Fve(t){fv(hv(e=>{const n=V0(e,"latest"),i=V0(e,"previous");t({snapshot:n,previousSnapshot:i})},[t]))}function Mve(){const t=QV(),[e,n]=Nve(()=>V0(t.current)),i=zz(e),r=K5(),o=K5();if(fv(hv(a=>n(V0(a)),[])),qz(()=>{const a=e.retain();if(r.current&&!z5){var l;window.clearTimeout(r.current),r.current=null,(l=o.current)===null||l===void 0||l.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),i!==e&&!z5){if(r.current){var s;window.clearTimeout(r.current),r.current=null,(s=o.current)===null||s===void 0||s.call(o),o.current=null}o.current=e.retain(),r.current=window.setTimeout(()=>{var a;r.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},Hve)}return e}function eP(t,e){var n;const i=t.getState(),r=(n=i.nextTree)!==null&&n!==void 0?n:i.currentTree,o=e.getStore_INTERNAL().getState().currentTree;Wve(()=>{const s=new Set;for(const g of[r.atomValues.keys(),o.atomValues.keys()])for(const u of g){var a,l;((a=r.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=o.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&$z(u).shouldRestoreFromSnapshots&&s.add(u)}s.forEach(g=>{Eve(t,new Jve(g),o.atomValues.has(g)?kn(o.atomValues.get(g)):xve)}),t.replaceState(g=>({...g,stateID:e.getID()}))})}function Tve(){const t=QV();return hv(e=>eP(t.current,e),[t])}var tP={useRecoilSnapshot:Mve,gotoSnapshot:eP,useGotoRecoilSnapshot:Tve,useRecoilTransactionObserver:Fve,useTransactionObservation_DEPRECATED:Yve,useTransactionSubscription_DEPRECATED:fv};const{peekNodeInfo:Lve}=yg,{useStoreRef:_ve}=Qa;function Dve(){const t=_ve();return({key:e})=>Lve(t.current,t.current.getState().currentTree,e)}var Kve=Dve;const{reactMode:zve}=fm,{RecoilRoot:Pve,useStoreRef:Uve}=Qa,{useMemo:jve}=gt;function Ove(){zve().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=Uve().current;return jve(()=>{function e({children:n}){return gt.createElement(Pve,{store_INTERNAL:t},n)}return e},[t])}var Qve=Ove;const{loadableWithValue:$ve}=hm,{initializeNode:qve}=yg,{DEFAULT_VALUE:eSe,getNode:tSe}=Zr,{copyTreeState:nSe,getRecoilValueAsLoadable:iSe,invalidateDownstreams:rSe,writeLoadableToTreeState:oSe}=Ps;function U5(t){return tSe(t.key).nodeType==="atom"}class sSe{constructor(e,n){At(this,"_store",void 0),At(this,"_treeState",void 0),At(this,"_changes",void 0),At(this,"get",i=>{if(this._changes.has(i.key))return this._changes.get(i.key);if(!U5(i))throw vt("Reading selectors within atomicUpdate is not supported");const r=iSe(this._store,i,this._treeState);if(r.state==="hasValue")return r.contents;throw r.state==="hasError"?r.contents:vt(`Expected Recoil atom ${i.key} to have a value, but it is in a loading state.`)}),At(this,"set",(i,r)=>{if(!U5(i))throw vt("Setting selectors within atomicUpdate is not supported");if(typeof r=="function"){const o=this.get(i);this._changes.set(i.key,r(o))}else qve(this._store,i.key,"set"),this._changes.set(i.key,r)}),At(this,"reset",i=>{this.set(i,eSe)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=nSe(this._treeState);for(const[n,i]of this._changes)oSe(e,n,$ve(i));return rSe(this._store,e),e}}function aSe(t){return e=>{t.replaceState(n=>{const i=new sSe(t,n);return e(i),i.newTreeState_INTERNAL()})}}var lSe={atomicUpdater:aSe},gSe=lSe.atomicUpdater,nP=Object.freeze({__proto__:null,atomicUpdater:gSe});function cSe(t,e){if(!t)throw new Error(e)}var uSe=cSe,ah=uSe;const{atomicUpdater:dSe}=nP,{batchUpdates:ISe}=lv,{DEFAULT_VALUE:CSe}=Zr,{useStoreRef:hSe}=Qa,{refreshRecoilValue:fSe,setRecoilValue:j5}=Ps,{cloneSnapshot:mSe}=dv,{gotoSnapshot:pSe}=tP,{useCallback:ASe}=gt;class iP{}const bSe=new iP;function rP(t,e,n,i){let r=bSe,o;if(ISe(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw vt(a);const l=fz({...i??{},set:(u,d)=>j5(t,u,d),reset:u=>j5(t,u,CSe),refresh:u=>fSe(t,u),gotoSnapshot:u=>pSe(t,u),transact_UNSTABLE:u=>dSe(t)(u)},{snapshot:()=>{const u=mSe(t);return o=u.retain(),u}}),g=e(l);if(typeof g!="function")throw vt(a);r=g(...n)}),r instanceof iP&&ah(!1),Sn(r))r=r.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var s;(s=o)===null||s===void 0||s()}return r}function ySe(t,e){const n=hSe();return ASe((...i)=>rP(n.current,t,i),e!=null?[...e,n]:void 0)}var oP={recoilCallback:rP,useRecoilCallback:ySe};const{useStoreRef:vSe}=Qa,{refreshRecoilValue:SSe}=Ps,{useCallback:ZSe}=gt;function GSe(t){const e=vSe();return ZSe(()=>{const n=e.current;SSe(n,t)},[t,e])}var BSe=GSe;const{atomicUpdater:RSe}=nP,{useStoreRef:kSe}=Qa,{useMemo:VSe}=gt;function wSe(t,e){const n=kSe();return VSe(()=>(...i)=>{RSe(n.current)(o=>{t(o)(...i)})},e!=null?[...e,n]:void 0)}var WSe=wSe;class xSe{constructor(e){At(this,"value",void 0),this.value=e}}var XSe={WrappedValue:xSe},JSe=XSe.WrappedValue,sP=Object.freeze({__proto__:null,WrappedValue:JSe});const{isFastRefreshEnabled:ESe}=fm;class O5 extends Error{}class HSe{constructor(e){var n,i,r;At(this,"_name",void 0),At(this,"_numLeafs",void 0),At(this,"_root",void 0),At(this,"_onHit",void 0),At(this,"_onSet",void 0),At(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(i=e==null?void 0:e.onSet)!==null&&i!==void 0?i:()=>{},this._mapNodeValue=(r=e==null?void 0:e.mapNodeValue)!==null&&r!==void 0?r:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,n){var i;return(i=this.getLeafNode(e,n))===null||i===void 0?void 0:i.value}getLeafNode(e,n){if(this._root==null)return;let i=this._root;for(;i;){if(n==null||n.onNodeVisit(i),i.type==="leaf")return this._onHit(i),i;const r=this._mapNodeValue(e(i.nodeKey));i=i.branches.get(r)}}set(e,n,i){const r=()=>{var o,s,a,l;let g,u;for(const[y,v]of e){var d,h,f;const S=this._root;if((S==null?void 0:S.type)==="leaf")throw this.invalidCacheError();const Z=g;if(g=Z?Z.branches.get(u):S,g=(d=g)!==null&&d!==void 0?d:{type:"branch",nodeKey:y,parent:Z,branches:new Map,branchKey:u},g.type!=="branch"||g.nodeKey!==y)throw this.invalidCacheError();Z==null||Z.branches.set(u,g),i==null||(h=i.onNodeVisit)===null||h===void 0||h.call(i,g),u=this._mapNodeValue(v),this._root=(f=this._root)!==null&&f!==void 0?f:g}const A=g?(o=g)===null||o===void 0?void 0:o.branches.get(u):this._root;if(A!=null&&(A.type!=="leaf"||A.branchKey!==u))throw this.invalidCacheError();const p={type:"leaf",value:n,parent:g,branchKey:u};(s=g)===null||s===void 0||s.branches.set(u,p),this._root=(a=this._root)!==null&&a!==void 0?a:p,this._numLeafs++,this._onSet(p),i==null||(l=i.onNodeVisit)===null||l===void 0||l.call(i,p)};try{r()}catch(o){if(o instanceof O5)this.clear(),r();else throw o}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let i=e.parent,r=e.branchKey;for(;i;){var o;if(i.branches.delete(r),i===n)return i.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(i.branches.size>0)break;r=(o=i)===null||o===void 0?void 0:o.branchKey,i=i.parent}for(;i!==n;i=i.parent)if(i==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=ESe()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw NV(e+(this._name!=null?` - ${this._name}`:"")),new O5}}var NSe={TreeCache:HSe},YSe=NSe.TreeCache,aP=Object.freeze({__proto__:null,TreeCache:YSe});class FSe{constructor(e){var n;At(this,"_maxSize",void 0),At(this,"_size",void 0),At(this,"_head",void 0),At(this,"_tail",void 0),At(this,"_map",void 0),At(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:i=>i}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),i=this._map.get(n);if(i)return this.set(e,i.value),i.value}set(e,n){const i=this._keyMapper(e);this._map.get(i)&&this.delete(e);const o=this.head(),s={key:e,right:o,left:null,value:n};o?o.left=s:this._tail=s,this._map.set(i,s),this._head=s,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const i=kn(this._map.get(n)),r=i.right,o=i.left;r&&(r.left=i.left),o&&(o.right=i.right),i===this.head()&&(this._head=r),i===this.tail()&&(this._tail=o),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var MSe={LRUCache:FSe},TSe=MSe.LRUCache,lP=Object.freeze({__proto__:null,LRUCache:TSe});const{LRUCache:LSe}=lP,{TreeCache:_Se}=aP;function DSe({name:t,maxSize:e,mapNodeValue:n=i=>i}){const i=new LSe({maxSize:e}),r=new _Se({name:t,mapNodeValue:n,onHit:o=>{i.set(o,!0)},onSet:o=>{const s=i.tail();i.set(o,!0),s&&r.size()>e&&r.delete(s.key)}});return r}var Q5=DSe;function Ko(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw vt("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var i;return(i=JSON.stringify(t))!==null&&i!==void 0?i:""}if(Sn(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((r,o)=>Ko(r,e,o.toString()))}]`;if(typeof t.toJSON=="function")return Ko(t.toJSON(n),e,n);if(t instanceof Map){const r={};for(const[o,s]of t)r[typeof o=="string"?o:Ko(o,e)]=s;return Ko(r,e,n)}return t instanceof Set?Ko(Array.from(t).sort((r,o)=>Ko(r,e).localeCompare(Ko(o,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Ko(Array.from(t),e,n):`{${Object.keys(t).filter(r=>t[r]!==void 0).sort().map(r=>`${Ko(r,e)}:${Ko(t[r],e,r)}`).join(",")}}`}function KSe(t,e={allowFunctions:!1}){return Ko(t,e)}var mv=KSe;const{TreeCache:zSe}=aP,Kp={equality:"reference",eviction:"keep-all",maxSize:1/0};function PSe({equality:t=Kp.equality,eviction:e=Kp.eviction,maxSize:n=Kp.maxSize}=Kp,i){const r=USe(t);return jSe(e,n,r,i)}function USe(t){switch(t){case"reference":return e=>e;case"value":return e=>mv(e)}throw vt(`Unrecognized equality policy ${t}`)}function jSe(t,e,n,i){switch(t){case"keep-all":return new zSe({name:i,mapNodeValue:n});case"lru":return Q5({name:i,maxSize:kn(e),mapNodeValue:n});case"most-recent":return Q5({name:i,maxSize:1,mapNodeValue:n})}throw vt(`Unrecognized eviction policy ${t}`)}var OSe=PSe;function QSe(t){return()=>null}var $Se={startPerfBlock:QSe};const{isLoadable:qSe,loadableWithError:zp,loadableWithPromise:eZe,loadableWithValue:hG}=hm,{WrappedValue:gP}=sP,{getNodeLoadable:Pp,peekNodeLoadable:tZe,setNodeValue:nZe}=yg,{saveDepsToStore:iZe}=mm,{DEFAULT_VALUE:rZe,getConfigDeletionHandler:oZe,getNode:sZe,registerNode:$5}=Zr,{isRecoilValue:aZe}=hI,{markRecoilValueModified:q5}=Ps,{retainedByOptionWithDefault:lZe}=ou,{recoilCallback:gZe}=oP,{startPerfBlock:cZe}=$Se;class cP{}const WC=new cP,xC=[],Up=new Map,uZe=(()=>{let t=0;return()=>t++})();function uP(t){let e=null;const{key:n,get:i,cachePolicy_UNSTABLE:r}=t,o=t.set!=null?t.set:void 0,s=new Set,a=OSe(r??{equality:"reference",eviction:"keep-all"},n),l=lZe(t.retainedBy_UNSTABLE),g=new Map;let u=0;function d(){return!rn("recoil_memory_managament_2020")||u>0}function h(E){return E.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return oZe(n)!==void 0&&!d()}function A(E,M,T,U,H){q(M,U,H),p(E,T)}function p(E,M){$(E,M)&&P(E),v(M,!0)}function y(E,M){$(E,M)&&(kn(X(E)).stateVersions.clear(),v(M,!1))}function v(E,M){const T=Up.get(E);if(T!=null){for(const U of T)q5(U,kn(e));M&&Up.delete(E)}}function S(E,M){let T=Up.get(M);T==null&&Up.set(M,T=new Set),T.add(E)}function Z(E,M,T,U,H,ie){return M.then(Ae=>{if(!d())throw P(E),WC;const Ie=hG(Ae);return A(E,T,H,Ie,U),Ae}).catch(Ae=>{if(!d())throw P(E),WC;if(Sn(Ae))return R(E,Ae,T,U,H,ie);const Ie=zp(Ae);throw A(E,T,H,Ie,U),Ae})}function R(E,M,T,U,H,ie){return M.then(Ae=>{if(!d())throw P(E),WC;ie.loadingDepKey!=null&&ie.loadingDepPromise===M?T.atomValues.set(ie.loadingDepKey,hG(Ae)):E.getState().knownSelectors.forEach(Je=>{T.atomValues.delete(Je)});const Ie=k(E,T);if(Ie&&Ie.state!=="loading"){if(($(E,H)||X(E)==null)&&p(E,H),Ie.state==="hasValue")return Ie.contents;throw Ie.contents}if(!$(E,H)){const Je=J(E,T);if(Je!=null)return Je.loadingLoadable.contents}const[xe,Xe]=B(E,T,H);if(xe.state!=="loading"&&A(E,T,H,xe,Xe),xe.state==="hasError")throw xe.contents;return xe.contents}).catch(Ae=>{if(Ae instanceof cP)throw WC;if(!d())throw P(E),WC;const Ie=zp(Ae);throw A(E,T,H,Ie,U),Ae})}function W(E,M,T,U){var H,ie,Ae,Ie;if($(E,U)||M.version===((H=E.getState())===null||H===void 0||(ie=H.currentTree)===null||ie===void 0?void 0:ie.version)||M.version===((Ae=E.getState())===null||Ae===void 0||(Ie=Ae.nextTree)===null||Ie===void 0?void 0:Ie.version)){var xe,Xe,Je;iZe(n,T,E,(xe=(Xe=E.getState())===null||Xe===void 0||(Je=Xe.nextTree)===null||Je===void 0?void 0:Je.version)!==null&&xe!==void 0?xe:E.getState().currentTree.version)}for(const Ne of T)s.add(Ne)}function B(E,M,T){const U=cZe(n);let H=!0,ie=!0;const Ae=()=>{U(),ie=!1};let Ie,xe=!1,Xe;const Je={loadingDepKey:null,loadingDepPromise:null},Ne=new Map;function et({key:Be}){const Ge=Pp(E,M,Be);switch(Ne.set(Be,Ge),H||(W(E,M,new Set(Ne.keys()),T),y(E,T)),Ge.state){case"hasValue":return Ge.contents;case"hasError":throw Ge.contents;case"loading":throw Je.loadingDepKey=Be,Je.loadingDepPromise=Ge.contents,Ge.contents}throw vt("Invalid Loadable state")}const he=Be=>(...Ge)=>{if(ie)throw vt("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&ah(!1),gZe(E,Be,Ge,{node:e})};try{Ie=i({get:et,getCallback:he}),Ie=aZe(Ie)?et(Ie):Ie,qSe(Ie)&&(Ie.state==="hasError"&&(xe=!0),Ie=Ie.contents),Sn(Ie)?Ie=Z(E,Ie,M,Ne,T,Je).finally(Ae):Ae(),Ie=Ie instanceof gP?Ie.value:Ie}catch(Be){Ie=Be,Sn(Ie)?Ie=R(E,Ie,M,Ne,T,Je).finally(Ae):(xe=!0,Ae())}return xe?Xe=zp(Ie):Sn(Ie)?Xe=eZe(Ie):Xe=hG(Ie),H=!1,z(E,T,Ne),W(E,M,new Set(Ne.keys()),T),[Xe,Ne]}function k(E,M){let T=M.atomValues.get(n);if(T!=null)return T;const U=new Set;try{T=a.get(ie=>(typeof ie!="string"&&ah(!1),Pp(E,M,ie).contents),{onNodeVisit:ie=>{ie.type==="branch"&&ie.nodeKey!==n&&U.add(ie.nodeKey)}})}catch(ie){throw vt(`Problem with cache lookup for selector "${n}": ${ie.message}`)}if(T){var H;M.atomValues.set(n,T),W(E,M,U,(H=X(E))===null||H===void 0?void 0:H.executionID)}return T}function w(E,M){const T=k(E,M);if(T!=null)return P(E),T;const U=J(E,M);if(U!=null){var H;return((H=U.loadingLoadable)===null||H===void 0?void 0:H.state)==="loading"&&S(E,U.executionID),U.loadingLoadable}const ie=uZe(),[Ae,Ie]=B(E,M,ie);return Ae.state==="loading"?(Y(E,ie,Ae,Ie,M),S(E,ie)):(P(E),q(M,Ae,Ie)),Ae}function J(E,M){const T=Xz([g.has(E)?[kn(g.get(E))]:[],rv(LV(g,([H])=>H!==E),([,H])=>H)]);function U(H){for(const[ie,Ae]of H)if(!Pp(E,M,ie).is(Ae))return!0;return!1}for(const H of T){if(H.stateVersions.get(M.version)||!U(H.depValuesDiscoveredSoFarDuringAsyncWork))return H.stateVersions.set(M.version,!0),H;H.stateVersions.set(M.version,!1)}}function X(E){return g.get(E)}function Y(E,M,T,U,H){g.set(E,{depValuesDiscoveredSoFarDuringAsyncWork:U,executionID:M,loadingLoadable:T,stateVersions:new Map([[H.version,!0]])})}function z(E,M,T){if($(E,M)){const U=X(E);U!=null&&(U.depValuesDiscoveredSoFarDuringAsyncWork=T)}}function P(E){g.delete(E)}function $(E,M){var T;return M===((T=X(E))===null||T===void 0?void 0:T.executionID)}function oe(E){return Array.from(E.entries()).map(([M,T])=>[M,T.contents])}function q(E,M,T){E.atomValues.set(n,M);try{a.set(oe(T),M)}catch(U){throw vt(`Problem with setting cache for selector "${n}": ${U.message}`)}}function K(E){if(xC.includes(n)){const M=`Recoil selector has circular dependencies: ${xC.slice(xC.indexOf(n)).join("  ")}`;return zp(vt(M))}xC.push(n);try{return E()}finally{xC.pop()}}function _(E,M){const T=M.atomValues.get(n);return T??a.get(U=>{var H;return typeof U!="string"&&ah(!1),(H=tZe(E,M,U))===null||H===void 0?void 0:H.contents})}function de(E,M){return K(()=>w(E,M))}function ne(E){E.atomValues.delete(n)}function se(E,M){e==null&&ah(!1);for(const U of s){var T;const H=sZe(U);(T=H.clearCache)===null||T===void 0||T.call(H,E,M)}s.clear(),ne(M),a.clear(),q5(E,e)}return o!=null?e=$5({key:n,nodeType:"selector",peek:_,get:de,set:(M,T,U)=>{let H=!1;const ie=new Map;function Ae({key:Je}){if(H)throw vt("Recoil: Async selector sets are not currently supported.");const Ne=Pp(M,T,Je);if(Ne.state==="hasValue")return Ne.contents;if(Ne.state==="loading"){const et=`Getting value of asynchronous atom or selector "${Je}" in a pending state while setting selector "${n}" is not yet supported.`;throw vt(et)}else throw Ne.contents}function Ie(Je,Ne){if(H)throw vt("Recoil: Async selector sets are not currently supported.");const et=typeof Ne=="function"?Ne(Ae(Je)):Ne;nZe(M,T,Je.key,et).forEach((Be,Ge)=>ie.set(Ge,Be))}function xe(Je){Ie(Je,rZe)}const Xe=o({set:Ie,get:Ae,reset:xe},U);if(Xe!==void 0)throw Sn(Xe)?vt("Recoil: Async selector sets are not currently supported."):vt("Recoil: selector set should be a void function.");return H=!0,ie},init:h,invalidate:ne,clearCache:se,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=$5({key:n,nodeType:"selector",peek:_,get:de,init:h,invalidate:ne,clearCache:se,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}uP.value=t=>new gP(t);var pI=uP;const{isLoadable:dZe,loadableWithError:fG,loadableWithPromise:mG,loadableWithValue:_u}=hm,{WrappedValue:dP}=sP,{peekNodeInfo:IZe}=yg,{DEFAULT_VALUE:rc,DefaultValue:Zl,getConfigDeletionHandler:IP,registerNode:CZe,setConfigDeletionHandler:hZe}=Zr,{isRecoilValue:fZe}=hI,{getRecoilValueAsLoadable:mZe,markRecoilValueModified:pZe,setRecoilValue:eH,setRecoilValueLoadable:AZe}=Ps,{retainedByOptionWithDefault:bZe}=ou,XC=t=>t instanceof dP?t.value:t;function yZe(t){const{key:e,persistence_UNSTABLE:n}=t,i=bZe(t.retainedBy_UNSTABLE);let r=0;function o(S){return mG(S.then(Z=>(s=_u(Z),Z)).catch(Z=>{throw s=fG(Z),Z}))}let s=Sn(t.default)?o(t.default):dZe(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:_u(XC(t.default));s.contents;let a;const l=new Map;function g(S){return S}function u(S,Z){const R=Z.then(W=>{var B,k;return((k=((B=S.getState().nextTree)!==null&&B!==void 0?B:S.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===R&&eH(S,v,W),W}).catch(W=>{var B,k;throw((k=((B=S.getState().nextTree)!==null&&B!==void 0?B:S.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===R&&AZe(S,v,fG(W)),W});return R}function d(S,Z,R){var W;r++;const B=()=>{var P;r--,(P=l.get(S))===null||P===void 0||P.forEach($=>$()),l.delete(S)};if(S.getState().knownAtoms.add(e),s.state==="loading"){const P=()=>{var $;(($=S.getState().nextTree)!==null&&$!==void 0?$:S.getState().currentTree).atomValues.has(e)||pZe(S,v)};s.contents.finally(P)}const k=(W=t.effects)!==null&&W!==void 0?W:t.effects_UNSTABLE;if(k!=null){let K=function(M){if($&&M.key===e){const T=P;return T instanceof Zl?h(S,Z):Sn(T)?mG(T.then(U=>U instanceof Zl?s.toPromise():U)):_u(T)}return mZe(S,M)},_=function(M){return K(M).toPromise()},de=function(M){var T;const U=IZe(S,(T=S.getState().nextTree)!==null&&T!==void 0?T:S.getState().currentTree,M.key);return $&&M.key===e&&!(P instanceof Zl)?{...U,isSet:!0,loadable:K(M)}:U};var X=K,Y=_,z=de;let P=rc,$=!0,oe=!1,q=null;const ne=M=>T=>{if($){const U=K(v),H=U.state==="hasValue"?U.contents:rc;P=typeof T=="function"?T(H):T,Sn(P)&&(P=P.then(ie=>(q={effect:M,value:ie},ie)))}else{if(Sn(T))throw vt("Setting atoms to async values is not implemented.");typeof T!="function"&&(q={effect:M,value:XC(T)}),eH(S,v,typeof T=="function"?U=>{const H=XC(T(U));return q={effect:M,value:H},H}:XC(T))}},se=M=>()=>ne(M)(rc),E=M=>T=>{var U;const{release:H}=S.subscribeToTransactions(ie=>{var Ae;let{currentTree:Ie,previousTree:xe}=ie.getState();xe||(xe=Ie);const Xe=(Ae=Ie.atomValues.get(e))!==null&&Ae!==void 0?Ae:s;if(Xe.state==="hasValue"){var Je,Ne,et,he;const Be=Xe.contents,Ge=(Je=xe.atomValues.get(e))!==null&&Je!==void 0?Je:s,Me=Ge.state==="hasValue"?Ge.contents:rc;((Ne=q)===null||Ne===void 0?void 0:Ne.effect)!==M||((et=q)===null||et===void 0?void 0:et.value)!==Be?T(Be,Me,!Ie.atomValues.has(e)):((he=q)===null||he===void 0?void 0:he.effect)===M&&(q=null)}},e);l.set(S,[...(U=l.get(S))!==null&&U!==void 0?U:[],H])};for(const M of k)try{const T=M({node:v,storeID:S.storeID,parentStoreID_UNSTABLE:S.parentStoreID,trigger:R,setSelf:ne(M),resetSelf:se(M),onSet:E(M),getPromise:_,getLoadable:K,getInfo_UNSTABLE:de});if(T!=null){var w;l.set(S,[...(w=l.get(S))!==null&&w!==void 0?w:[],T])}}catch(T){P=T,oe=!0}if($=!1,!(P instanceof Zl)){var J;const M=oe?fG(P):Sn(P)?mG(u(S,P)):_u(XC(P));M.contents,Z.atomValues.set(e,M),(J=S.getState().nextTree)===null||J===void 0||J.atomValues.set(e,M)}}return B}function h(S,Z){var R,W;return(R=(W=Z.atomValues.get(e))!==null&&W!==void 0?W:a)!==null&&R!==void 0?R:s}function f(S,Z){if(Z.atomValues.has(e))return kn(Z.atomValues.get(e));if(Z.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return s;const R=Z.nonvalidatedAtoms.get(e),W=n.validator(R,rc);return a=W instanceof Zl?s:_u(W),a}else return s}function A(){a=void 0}function p(S,Z,R){if(Z.atomValues.has(e)){const W=kn(Z.atomValues.get(e));if(W.state==="hasValue"&&R===W.contents)return new Map}else if(!Z.nonvalidatedAtoms.has(e)&&R instanceof Zl)return new Map;return a=void 0,new Map().set(e,_u(R))}function y(){return IP(e)!==void 0&&r<=0}const v=CZe({key:e,nodeType:"atom",peek:h,get:f,set:p,init:d,invalidate:A,shouldDeleteConfigOnRelease:y,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:i});return v}function $V(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return fZe(n)?vZe({...e,default:n}):yZe({...e,default:n})}function vZe(t){const e=$V({...t,default:rc,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:i=>i instanceof Zl?i:kn(t.persistence_UNSTABLE).validator(i,rc)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=pI({key:`${t.key}__withFallback`,get:({get:i})=>{const r=i(e);return r instanceof Zl?t.default:r},set:({set:i},r)=>i(e,r),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return hZe(n.key,IP(t.key)),n}$V.value=t=>new dP(t);var CP=$V;let SZe=class{constructor(e){var n;At(this,"_map",void 0),At(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:i=>i}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}};var ZZe={MapCache:SZe},GZe=ZZe.MapCache,BZe=Object.freeze({__proto__:null,MapCache:GZe});const{LRUCache:tH}=lP,{MapCache:RZe}=BZe,jp={equality:"reference",eviction:"none",maxSize:1/0};function kZe({equality:t=jp.equality,eviction:e=jp.eviction,maxSize:n=jp.maxSize}=jp){const i=VZe(t);return wZe(e,n,i)}function VZe(t){switch(t){case"reference":return e=>e;case"value":return e=>mv(e)}throw vt(`Unrecognized equality policy ${t}`)}function wZe(t,e,n){switch(t){case"keep-all":return new RZe({mapKey:n});case"lru":return new tH({mapKey:n,maxSize:kn(e)});case"most-recent":return new tH({mapKey:n,maxSize:1})}throw vt(`Unrecognized eviction policy ${t}`)}var hP=kZe;const{setConfigDeletionHandler:WZe}=Zr;function xZe(t){var e,n;const i=hP({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var o,s;const a=i.get(r);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...g}=t,u="default"in t?t.default:new Promise(()=>{}),d=CP({...g,key:`${t.key}__${(o=mv(r))!==null&&o!==void 0?o:"void"}`,default:typeof u=="function"?u(r):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(r):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(r):(s=t.effects)!==null&&s!==void 0?s:t.effects_UNSTABLE});return i.set(r,d),WZe(d.key,()=>{i.delete(r)}),d}}var XZe=xZe;const{setConfigDeletionHandler:JZe}=Zr;let EZe=0;function HZe(t){var e,n;const i=hP({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var o;let s;try{s=i.get(r)}catch(h){throw vt(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(s!=null)return s;const a=`${t.key}__selectorFamily/${(o=mv(r,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${EZe++}`,l=h=>t.get(r)(h),g=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=pI({key:a,get:l,set:(A,p)=>h(r)(A,p),cachePolicy_UNSTABLE:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=pI({key:a,get:l,cachePolicy_UNSTABLE:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return i.set(r,d),JZe(d.key,()=>{i.delete(r)}),d}}var vg=HZe;const NZe=vg({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function YZe(t){return NZe(t)}var FZe=YZe;const MZe=vg({key:"__error",get:t=>()=>{throw vt(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function TZe(t){return MZe(t)}var LZe=TZe;function _Ze(t){return t}var DZe=_Ze;const{loadableWithError:fP,loadableWithPromise:mP,loadableWithValue:pP}=hm;function pv(t,e){const n=Array(e.length).fill(void 0),i=Array(e.length).fill(void 0);for(const[r,o]of e.entries())try{n[r]=t(o)}catch(s){i[r]=s}return[n,i]}function KZe(t){return t!=null&&!Sn(t)}function Av(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function m1(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,i,r)=>({...n,[i]:e[r]}),{})}function zd(t,e,n){const i=n.map((r,o)=>r==null?pP(e[o]):Sn(r)?mP(r):fP(r));return m1(t,i)}function zZe(t,e){return e.map((n,i)=>n===void 0?t[i]:n)}const PZe=vg({key:"__waitForNone",get:t=>({get:e})=>{const n=Av(t),[i,r]=pv(e,n);return zd(t,i,r)},dangerouslyAllowMutability:!0}),UZe=vg({key:"__waitForAny",get:t=>({get:e})=>{const n=Av(t),[i,r]=pv(e,n);return r.some(o=>!Sn(o))?zd(t,i,r):new Promise(o=>{for(const[s,a]of r.entries())Sn(a)&&a.then(l=>{i[s]=l,r[s]=void 0,o(zd(t,i,r))}).catch(l=>{r[s]=l,o(zd(t,i,r))})})},dangerouslyAllowMutability:!0}),jZe=vg({key:"__waitForAll",get:t=>({get:e})=>{const n=Av(t),[i,r]=pv(e,n);if(r.every(s=>s==null))return m1(t,i);const o=r.find(KZe);if(o!=null)throw o;return Promise.all(r).then(s=>m1(t,zZe(i,s)))},dangerouslyAllowMutability:!0}),OZe=vg({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=Av(t),[i,r]=pv(e,n);return r.every(o=>!Sn(o))?zd(t,i,r):Promise.all(r.map((o,s)=>Sn(o)?o.then(a=>{i[s]=a,r[s]=void 0}).catch(a=>{i[s]=void 0,r[s]=a}):null)).then(()=>zd(t,i,r))},dangerouslyAllowMutability:!0}),QZe=vg({key:"__noWait",get:t=>({get:e})=>{try{return pI.value(pP(e(t)))}catch(n){return pI.value(Sn(n)?mP(n):fP(n))}},dangerouslyAllowMutability:!0});var $Ze={waitForNone:PZe,waitForAny:UZe,waitForAll:jZe,waitForAllSettled:OZe,noWait:QZe};const{RecoilLoadable:qZe}=hm,{DefaultValue:eGe}=Zr,{RecoilRoot:tGe,useRecoilStoreID:nGe}=Qa,{isRecoilValue:iGe}=hI,{retentionZone:rGe}=sv,{freshSnapshot:oGe}=dv,{useRecoilState:sGe,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:aGe,useRecoilStateLoadable:lGe,useRecoilValue:gGe,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:cGe,useRecoilValueLoadable:uGe,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:dGe,useResetRecoilState:IGe,useSetRecoilState:CGe}=Zve,{useGotoRecoilSnapshot:hGe,useRecoilSnapshot:fGe,useRecoilTransactionObserver:mGe}=tP,{useRecoilCallback:pGe}=oP,{noWait:AGe,waitForAll:bGe,waitForAllSettled:yGe,waitForAny:vGe,waitForNone:SGe}=$Ze;var ym={DefaultValue:eGe,isRecoilValue:iGe,RecoilLoadable:qZe,RecoilEnv:YI,RecoilRoot:tGe,useRecoilStoreID:nGe,useRecoilBridgeAcrossReactRoots_UNSTABLE:Qve,atom:CP,selector:pI,atomFamily:XZe,selectorFamily:vg,constSelector:FZe,errorSelector:LZe,readOnlySelector:DZe,noWait:AGe,waitForNone:SGe,waitForAny:vGe,waitForAll:bGe,waitForAllSettled:yGe,useRecoilValue:gGe,useRecoilValueLoadable:uGe,useRecoilState:sGe,useRecoilStateLoadable:lGe,useSetRecoilState:CGe,useResetRecoilState:IGe,useGetRecoilValueInfo_UNSTABLE:Kve,useRecoilRefresher_UNSTABLE:BSe,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:dGe,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:cGe,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:aGe,useRecoilCallback:pGe,useRecoilTransaction_UNSTABLE:WSe,useGotoRecoilSnapshot:hGe,useRecoilSnapshot:fGe,useRecoilTransactionObserver_UNSTABLE:mGe,snapshot_UNSTABLE:oGe,useRetain:PV,retentionZone:rGe},ZGe=ym.RecoilRoot,vm=ym.atom,Nn=ym.useRecoilValue,_i=ym.useRecoilState,za=ym.useSetRecoilState;const an=vm({key:"userAtom",default:JSON.parse(localStorage.getItem("user-threads"))}),ln=()=>{const t=rV();return m.useCallback((n,i,r)=>{t({title:n,description:i,status:r,duration:3e3,isClosable:!0})},[t])},AP=t=>{const e=Nn(an),[n,i]=m.useState(t.followers.includes(e==null?void 0:e._id)),[r,o]=m.useState(!1),s=ln();return{handleFollowUnfollow:async()=>{if(!e){s("Error","Please login to follow","error");return}if(!r){o(!0);try{const g=await(await fetch(`/api/users/follow/${t._id}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(g.error){s("Error",g.error,"error");return}n?(s("Success",`Unfollowed ${t.name}`,"success"),t.followers.pop()):(s("Success",`Followed ${t.name}`,"success"),t.followers.push(e==null?void 0:e._id)),i(!n),console.log(g)}catch(l){s("Error",l,"error")}finally{o(!1)}}},updating:r,following:n}};var bP=os({displayName:"ViewOffIcon",path:C.jsxs("g",{fill:"currentColor",children:[C.jsx("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),C.jsx("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})}),GGe=os({displayName:"TimeIcon",path:C.jsxs("g",{fill:"currentColor",children:[C.jsx("path",{d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),C.jsx("path",{d:"M17.134,15.81,12.5,11.561V6.5a1,1,0,0,0-2,0V12a1,1,0,0,0,.324.738l4.959,4.545a1.01,1.01,0,0,0,1.413-.061A1,1,0,0,0,17.134,15.81Z"})]})}),yP=os({displayName:"ViewIcon",path:C.jsxs("g",{fill:"currentColor",children:[C.jsx("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),C.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),BGe=os({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),RGe=os({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),kGe=os({displayName:"DeleteIcon",path:C.jsx("g",{fill:"currentColor",children:C.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),VGe=os({displayName:"AtSignIcon",d:"M12,.5A11.634,11.634,0,0,0,.262,12,11.634,11.634,0,0,0,12,23.5a11.836,11.836,0,0,0,6.624-2,1.25,1.25,0,1,0-1.393-2.076A9.34,9.34,0,0,1,12,21a9.132,9.132,0,0,1-9.238-9A9.132,9.132,0,0,1,12,3a9.132,9.132,0,0,1,9.238,9v.891a1.943,1.943,0,0,1-3.884,0V12A5.355,5.355,0,1,0,12,17.261a5.376,5.376,0,0,0,3.861-1.634,4.438,4.438,0,0,0,7.877-2.736V12A11.634,11.634,0,0,0,12,.5Zm0,14.261A2.763,2.763,0,1,1,14.854,12,2.812,2.812,0,0,1,12,14.761Z"}),pG=os({viewBox:"0 0 14 14",path:C.jsx("g",{fill:"currentColor",children:C.jsx("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})}),nH=os({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}),qV=os({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),iH=os({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"});function wGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM327.3 702.4c-2 .9-4.4 0-5.3-2.1-.4-1-.4-2.2 0-3.2l98.7-225.5 132.1 132.1-225.5 98.7zm375.1-375.1l-98.7 225.5-132.1-132.1L697.1 322c2-.9 4.4 0 5.3 2.1.4 1 .4 2.1 0 3.2z"},child:[]}]})(t)}function WGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"},child:[]}]})(t)}function xGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M296 256c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm192 200v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8zm-48 396H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm104.1-115.6c1.8-34.5 16.2-66.8 40.8-91.4 26.2-26.2 62-41 99.1-41 37.4 0 72.6 14.6 99.1 41 3.2 3.2 6.3 6.6 9.2 10.1L769.2 673a8 8 0 0 0 3 14.1l93.3 22.5c5 1.2 9.8-2.6 9.9-7.7l.6-95.4a8 8 0 0 0-12.9-6.4l-20.3 15.8C805.4 569.6 748.1 540 684 540c-109.9 0-199.6 86.9-204 195.7-.2 4.5 3.5 8.3 8 8.3h48.1c4.3 0 7.8-3.3 8-7.6zM880 744h-48.1c-4.3 0-7.8 3.3-8 7.6-1.8 34.5-16.2 66.8-40.8 91.4-26.2 26.2-62 41-99.1 41-37.4 0-72.6-14.6-99.1-41-3.2-3.2-6.3-6.6-9.2-10.1l23.1-17.9a8 8 0 0 0-3-14.1l-93.3-22.5c-5-1.2-9.8 2.6-9.9 7.7l-.6 95.4a8 8 0 0 0 12.9 6.4l20.3-15.8C562.6 918.4 619.9 948 684 948c109.9 0 199.6-86.9 204-195.7.2-4.5-3.5-8.3-8-8.3z"},child:[]}]})(t)}function XGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 747H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM165.7 621.8l39.7 39.5c3.1 3.1 8.2 3.1 11.3 0l234.7-233.9 97.6 97.3a32.11 32.11 0 0 0 45.2 0l264.2-263.2c3.1-3.1 3.1-8.2 0-11.3l-39.7-39.6a8.03 8.03 0 0 0-11.3 0l-235.7 235-97.7-97.3a32.11 32.11 0 0 0-45.2 0L165.7 610.5a7.94 7.94 0 0 0 0 11.3z"},child:[]}]})(t)}function JGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{fill:"#333",d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"},child:[]},{tag:"path",attr:{fill:"#E6E6E6",d:"M679.7 201c-73.1 0-136.5 40.8-167.7 100.4C480.8 241.8 417.4 201 344.3 201c-104 0-188.3 82.6-188.3 184.5 0 201.2 356 429.3 356 429.3s356-228.1 356-429.3C868 283.6 783.7 201 679.7 201z"},child:[]}]})(t)}function EGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(t)}function HGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function NGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(t)}function YGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function FGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},child:[]}]})(t)}function MGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor"},child:[]}]})(t)}function TGe(t){return ct({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor"},child:[]}]})(t)}const LGe=({user:t})=>{const e=rV(),n=Nn(an),{handleFollowUnfollow:i,following:r,updating:o}=AP(t),s=Qr(),a=()=>{const l=window.location.href;navigator.clipboard.writeText(l).then(()=>{e({title:"Success.",status:"success",description:"Profile link copied.",duration:3e3,isClosable:!0})})};return C.jsxs(sm,{gap:4,alignItems:"start",w:"80%",m:"auto",children:[C.jsxs(ae,{justifyContent:"space-between",w:"full",children:[C.jsxs(Se,{children:[C.jsx(ue,{fontSize:"2xl",children:t.name}),C.jsxs(ae,{gap:2,alignItems:"center",children:[C.jsx(VGe,{}),C.jsx(ue,{fontSize:"sm",children:t.username})]}),C.jsx(ae,{gap:2,alignItems:"center",children:t.location&&C.jsxs(C.Fragment,{children:[C.jsx(wGe,{}),C.jsx(ue,{fontSize:"sm",children:t.location})]})}),C.jsxs(ae,{gap:2,alignItems:"center",children:[C.jsx(JGe,{}),C.jsx(ue,{fontSize:"sm",children:t.interests.join(", ")})]}),C.jsx(Se,{borderRadius:"md",w:"100%",borderColor:"gray.200",children:C.jsxs(ue,{fontSize:"sm",fontStyle:"italic",children:[" ",t.bio]})})]}),C.jsxs(ae,{flexDir:"column",children:[t.profilePic&&C.jsx(Ni,{name:t.name,src:t.profilePic,size:{base:"md",md:"xl"}}),!t.profilePic&&C.jsx(Ni,{name:t.name,src:"https://bit.ly/broken-link",size:{base:"md",md:"xl"}}),C.jsxs(ZK,{children:[C.jsx(kK,{marginLeft:"auto",mr:4,mt:3,children:C.jsx(TGe,{})}),C.jsxs(RK,{children:[C.jsx(e1,{children:(n==null?void 0:n._id)===t._id&&C.jsx(Tn,{as:Zi,to:"/update",textDecoration:"none",fontWeight:"500",children:"Update Profile"})}),C.jsx(e1,{onClick:a,fontWeight:"500",children:"Copy link"})]})]})]})]}),(n==null?void 0:n._id)!==t._id&&C.jsx(De,{size:"sm",onClick:i,isLoading:o,children:r?"Unfollow":"Follow"}),C.jsxs(ae,{w:"full",justifyContent:"space-between",children:[C.jsxs(ae,{gap:2,alignItems:"center",children:[C.jsxs(ue,{color:"gray.light",children:[t.followers.length," followers"]}),C.jsx(Se,{w:"1",h:"1",bg:"gray.light",borderRadius:"full"})]}),C.jsxs(ae,{children:[C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:t.linkedin,isExternal:!0,children:C.jsx(EGe,{size:24})})}),C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:t.twitter,isExternal:!0,children:C.jsx(NGe,{size:24})})}),C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:`https://www.instagram.com/${t.instagram}`,isExternal:!0,children:C.jsx(XAe,{size:24,cursor:"pointer"})})}),C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:t.tiktok,isExternal:!0,children:C.jsx(HGe,{size:24,cursor:"pointer"})})}),C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:t.youtube,isExternal:!0,children:C.jsx(YGe,{size:24,cursor:"pointer"})})}),C.jsx(Se,{className:"icon-container",children:C.jsx(Tn,{href:t.website,isExternal:!0,children:C.jsx(xAe,{size:24,cursor:"pointer"})})})]})]}),(n==null?void 0:n._id)===t._id&&C.jsxs(ae,{w:"full",justifyContent:"space-between",children:[C.jsx(De,{size:"sm",children:"Create Campaign"}),C.jsx(De,{size:"sm",onClick:()=>s("/create"),children:"Create Event"}),C.jsx(De,{size:"sm",children:"Create Story"}),C.jsx(De,{size:"sm",children:"Create Broadcast"})]}),C.jsx(ae,{w:"full",children:C.jsx(ae,{flex:1,borderBottom:"1.5px solid white",justifyContent:"center",pb:"3",cursor:"pointer",children:(n==null?void 0:n._id)===t._id?C.jsx(ue,{fontWeight:"bold",children:" Your Events"}):C.jsx(ue,{fontWeight:"bold",children:" User Events"})})})]})},Sg=vm({key:"postsAtom",default:[]}),vP=({user:t,post:e,joinModalOpen:n,setJoinModalOpen:i})=>{const r=ln(),{isOpen:o,onOpen:s,onClose:a}=Go(),[l,g]=m.useState({tickets:1,name:"",email:"",contactNo:"",age:"",males:0,females:0}),u=f=>{const{name:A,value:p}=f.target;g(y=>({...y,[A]:p}))};m.useEffect(()=>{n&&s()},[n]);function d(){a(),i(!n)}const h=async()=>{const f=async()=>{try{const A=await fetch(`/api/posts/${e._id}`);if(!A.ok)throw new Error("Failed to fetch post details");return await A.json()}catch{throw new Error("Failed to fetch post details")}};try{const A=await f(),p=await fetch("/api/tickets/createTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:t._id,eventid:e._id,name:l.name,email:l.email,contactNo:l.contactNo,age:l.age,tickets:l.tickets,males:l.males,females:l.females,eventname:A.name,eventdate:A.startDate,eventtime:A.startTime,ticketprice:A.ticketPrice})});if(p.ok)r("Success","Ticket created successfully","success"),d();else{const y=await p.json();console.log(y),r("Error",y.message,"error")}}catch(A){r("Error",A.message,"error"),console.log(A)}};return C.jsxs(Jo,{isOpen:o,onClose:d,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{children:"Join Event"}),C.jsx(Yo,{}),C.jsxs(ss,{pb:6,children:[C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Name"}),C.jsx(_e,{type:"text",name:"name",value:l.name,onChange:u})]}),C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Email"}),C.jsx(_e,{type:"email",name:"email",value:l.email,onChange:u})]}),C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Contact Number"}),C.jsx(_e,{type:"text",name:"contactNo",value:l.contactNo,onChange:u})]}),C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Age"}),C.jsx(_e,{type:"number",name:"age",value:l.age,onChange:u})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Number of Tickets"}),C.jsx(_e,{type:"number",name:"tickets",value:l.tickets,onChange:u})]}),C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Number of Males"}),C.jsx(_e,{type:"number",name:"males",value:l.males,onChange:u})]}),C.jsxs(mt,{mt:4,children:[C.jsx(nt,{children:"Number of Females"}),C.jsx(_e,{type:"number",name:"females",value:l.females,onChange:u})]})]}),C.jsx(is,{children:C.jsx(De,{colorScheme:"blue",size:"sm",mr:3,onClick:h,children:"Pay"})})]})]})};function w0(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const SP=6e4,ZP=36e5;function W0(t,e){const n=w0(t),i=w0(e);return n.getTime()>i.getTime()}function rH(t,e){const n=w0(t),i=w0(e);return+n<+i}function vd(t,e){const n=(e==null?void 0:e.additionalDigits)??2,i=zGe(t);let r;if(i.date){const l=PGe(i.date,n);r=UGe(l.restDateString,l.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let s=0,a;if(i.time&&(s=jGe(i.time),isNaN(s)))return new Date(NaN);if(i.timezone){if(a=OGe(i.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(o+s),g=new Date(0);return g.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),g.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),g}return new Date(o+s+a)}const Op={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_Ge=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DGe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,KGe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zGe(t){const e={},n=t.split(Op.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Op.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Op.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=Op.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function PGe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function UGe(t,e){if(e===null)return new Date(NaN);const n=t.match(_Ge);if(!n)return new Date(NaN);const i=!!n[4],r=JC(n[1]),o=JC(n[2])-1,s=JC(n[3]),a=JC(n[4]),l=JC(n[5])-1;if(i)return tBe(e,a,l)?QGe(e,a,l):new Date(NaN);{const g=new Date(0);return!qGe(e,o,s)||!eBe(e,r)?new Date(NaN):(g.setUTCFullYear(e,o,Math.max(r,s)),g)}}function JC(t){return t?parseInt(t):1}function jGe(t){const e=t.match(DGe);if(!e)return NaN;const n=AG(e[1]),i=AG(e[2]),r=AG(e[3]);return nBe(n,i,r)?n*ZP+i*SP+r*1e3:NaN}function AG(t){return t&&parseFloat(t.replace(",","."))||0}function OGe(t){if(t==="Z")return 0;const e=t.match(KGe);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return iBe(i,r)?n*(i*ZP+r*SP):NaN}function QGe(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,o=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}const $Ge=[31,null,31,30,31,30,31,31,30,31,30,31];function GP(t){return t%400===0||t%4===0&&t%100!==0}function qGe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=($Ge[e]||(GP(t)?29:28))}function eBe(t,e){return e>=1&&e<=(GP(t)?366:365)}function tBe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function nBe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function iBe(t,e){return e>=0&&e<=59}function BP(t,e){return function(){return t.apply(e,arguments)}}const{toString:rBe}=Object.prototype,{getPrototypeOf:ew}=Object,bv=(t=>e=>{const n=rBe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),js=t=>(t=t.toLowerCase(),e=>bv(e)===t),yv=t=>e=>typeof e===t,{isArray:MI}=Array,xf=yv("undefined");function oBe(t){return t!==null&&!xf(t)&&t.constructor!==null&&!xf(t.constructor)&&ko(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const RP=js("ArrayBuffer");function sBe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&RP(t.buffer),e}const aBe=yv("string"),ko=yv("function"),kP=yv("number"),vv=t=>t!==null&&typeof t=="object",lBe=t=>t===!0||t===!1,db=t=>{if(bv(t)!=="object")return!1;const e=ew(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gBe=js("Date"),cBe=js("File"),uBe=js("Blob"),dBe=js("FileList"),IBe=t=>vv(t)&&ko(t.pipe),CBe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ko(t.append)&&((e=bv(t))==="formdata"||e==="object"&&ko(t.toString)&&t.toString()==="[object FormData]"))},hBe=js("URLSearchParams"),fBe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),MI(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let a;for(i=0;i<s;i++)a=o[i],e.call(null,t[a],a,t)}}function VP(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const wP=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),WP=t=>!xf(t)&&t!==wP;function p1(){const{caseless:t}=WP(this)&&this||{},e={},n=(i,r)=>{const o=t&&VP(e,r)||r;db(e[o])&&db(i)?e[o]=p1(e[o],i):db(i)?e[o]=p1({},i):MI(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Sm(arguments[i],n);return e}const mBe=(t,e,n,{allOwnKeys:i}={})=>(Sm(e,(r,o)=>{n&&ko(r)?t[o]=BP(r,n):t[o]=r},{allOwnKeys:i}),t),pBe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ABe=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},bBe=(t,e,n,i)=>{let r,o,s;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)s=r[o],(!i||i(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=n!==!1&&ew(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},yBe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},vBe=t=>{if(!t)return null;if(MI(t))return t;let e=t.length;if(!kP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},SBe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ew(Uint8Array)),ZBe=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},GBe=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},BBe=js("HTMLFormElement"),RBe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),oH=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),kBe=js("RegExp"),xP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Sm(n,(r,o)=>{let s;(s=e(r,o,t))!==!1&&(i[o]=s||r)}),Object.defineProperties(t,i)},VBe=t=>{xP(t,(e,n)=>{if(ko(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ko(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wBe=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return MI(t)?i(t):i(String(t).split(e)),n},WBe=()=>{},xBe=(t,e)=>(t=+t,Number.isFinite(t)?t:e),bG="abcdefghijklmnopqrstuvwxyz",sH="0123456789",XP={DIGIT:sH,ALPHA:bG,ALPHA_DIGIT:bG+bG.toUpperCase()+sH},XBe=(t=16,e=XP.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function JBe(t){return!!(t&&ko(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const EBe=t=>{const e=new Array(10),n=(i,r)=>{if(vv(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=MI(i)?[]:{};return Sm(i,(s,a)=>{const l=n(s,r+1);!xf(l)&&(o[a]=l)}),e[r]=void 0,o}}return i};return n(t,0)},HBe=js("AsyncFunction"),NBe=t=>t&&(vv(t)||ko(t))&&ko(t.then)&&ko(t.catch),fe={isArray:MI,isArrayBuffer:RP,isBuffer:oBe,isFormData:CBe,isArrayBufferView:sBe,isString:aBe,isNumber:kP,isBoolean:lBe,isObject:vv,isPlainObject:db,isUndefined:xf,isDate:gBe,isFile:cBe,isBlob:uBe,isRegExp:kBe,isFunction:ko,isStream:IBe,isURLSearchParams:hBe,isTypedArray:SBe,isFileList:dBe,forEach:Sm,merge:p1,extend:mBe,trim:fBe,stripBOM:pBe,inherits:ABe,toFlatObject:bBe,kindOf:bv,kindOfTest:js,endsWith:yBe,toArray:vBe,forEachEntry:ZBe,matchAll:GBe,isHTMLForm:BBe,hasOwnProperty:oH,hasOwnProp:oH,reduceDescriptors:xP,freezeMethods:VBe,toObjectSet:wBe,toCamelCase:RBe,noop:WBe,toFiniteNumber:xBe,findKey:VP,global:wP,isContextDefined:WP,ALPHABET:XP,generateString:XBe,isSpecCompliantForm:JBe,toJSONObject:EBe,isAsyncFn:HBe,isThenable:NBe};function Jt(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}fe.inherits(Jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const JP=Jt.prototype,EP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{EP[t]={value:t}});Object.defineProperties(Jt,EP);Object.defineProperty(JP,"isAxiosError",{value:!0});Jt.from=(t,e,n,i,r,o)=>{const s=Object.create(JP);return fe.toFlatObject(t,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Jt.call(s,t.message,e,n,i,r),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const YBe=null;function A1(t){return fe.isPlainObject(t)||fe.isArray(t)}function HP(t){return fe.endsWith(t,"[]")?t.slice(0,-2):t}function aH(t,e,n){return t?t.concat(e).map(function(r,o){return r=HP(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function FBe(t){return fe.isArray(t)&&!t.some(A1)}const MBe=fe.toFlatObject(fe,{},null,function(e){return/^is[A-Z]/.test(e)});function Sv(t,e,n){if(!fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,y){return!fe.isUndefined(y[p])});const i=n.metaTokens,r=n.visitor||u,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(e);if(!fe.isFunction(r))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(fe.isDate(A))return A.toISOString();if(!l&&fe.isBlob(A))throw new Jt("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(A)||fe.isTypedArray(A)?l&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function u(A,p,y){let v=A;if(A&&!y&&typeof A=="object"){if(fe.endsWith(p,"{}"))p=i?p:p.slice(0,-2),A=JSON.stringify(A);else if(fe.isArray(A)&&FBe(A)||(fe.isFileList(A)||fe.endsWith(p,"[]"))&&(v=fe.toArray(A)))return p=HP(p),v.forEach(function(Z,R){!(fe.isUndefined(Z)||Z===null)&&e.append(s===!0?aH([p],R,o):s===null?p:p+"[]",g(Z))}),!1}return A1(A)?!0:(e.append(aH(y,p,o),g(A)),!1)}const d=[],h=Object.assign(MBe,{defaultVisitor:u,convertValue:g,isVisitable:A1});function f(A,p){if(!fe.isUndefined(A)){if(d.indexOf(A)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(A),fe.forEach(A,function(v,S){(!(fe.isUndefined(v)||v===null)&&r.call(e,v,fe.isString(S)?S.trim():S,p,h))===!0&&f(v,p?p.concat(S):[S])}),d.pop()}}if(!fe.isObject(t))throw new TypeError("data must be an object");return f(t),e}function lH(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function tw(t,e){this._pairs=[],t&&Sv(t,this,e)}const NP=tw.prototype;NP.append=function(e,n){this._pairs.push([e,n])};NP.toString=function(e){const n=e?function(i){return e.call(this,i,lH)}:lH;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function TBe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function YP(t,e,n){if(!e)return t;const i=n&&n.encode||TBe,r=n&&n.serialize;let o;if(r?o=r(e,n):o=fe.isURLSearchParams(e)?e.toString():new tw(e,n).toString(i),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class LBe{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){fe.forEach(this.handlers,function(i){i!==null&&e(i)})}}const gH=LBe,FP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_Be=typeof URLSearchParams<"u"?URLSearchParams:tw,DBe=typeof FormData<"u"?FormData:null,KBe=typeof Blob<"u"?Blob:null,zBe={isBrowser:!0,classes:{URLSearchParams:_Be,FormData:DBe,Blob:KBe},protocols:["http","https","file","blob","url","data"]},MP=typeof window<"u"&&typeof document<"u",PBe=(t=>MP&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),UBe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),jBe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:MP,hasStandardBrowserEnv:PBe,hasStandardBrowserWebWorkerEnv:UBe},Symbol.toStringTag,{value:"Module"})),Vs={...jBe,...zBe};function OBe(t,e){return Sv(t,new Vs.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Vs.isNode&&fe.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function QBe(t){return fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $Be(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function TP(t){function e(n,i,r,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&fe.isArray(r)?r.length:s,l?(fe.hasOwnProp(r,s)?r[s]=[r[s],i]:r[s]=i,!a):((!r[s]||!fe.isObject(r[s]))&&(r[s]=[]),e(n,i,r[s],o)&&fe.isArray(r[s])&&(r[s]=$Be(r[s])),!a)}if(fe.isFormData(t)&&fe.isFunction(t.entries)){const n={};return fe.forEachEntry(t,(i,r)=>{e(QBe(i),r,n,0)}),n}return null}function qBe(t,e,n){if(fe.isString(t))try{return(e||JSON.parse)(t),fe.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const nw={transitional:FP,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=fe.isObject(e);if(o&&fe.isHTMLForm(e)&&(e=new FormData(e)),fe.isFormData(e))return r?JSON.stringify(TP(e)):e;if(fe.isArrayBuffer(e)||fe.isBuffer(e)||fe.isStream(e)||fe.isFile(e)||fe.isBlob(e))return e;if(fe.isArrayBufferView(e))return e.buffer;if(fe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return OBe(e,this.formSerializer).toString();if((a=fe.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Sv(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),qBe(e)):e}],transformResponse:[function(e){const n=this.transitional||nw.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&fe.isString(e)&&(i&&!this.responseType||r)){const s=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?Jt.from(a,Jt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vs.classes.FormData,Blob:Vs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],t=>{nw.headers[t]={}});const iw=nw,eRe=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tRe=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(s){r=s.indexOf(":"),n=s.substring(0,r).trim().toLowerCase(),i=s.substring(r+1).trim(),!(!n||e[n]&&eRe[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},cH=Symbol("internals");function EC(t){return t&&String(t).trim().toLowerCase()}function Ib(t){return t===!1||t==null?t:fe.isArray(t)?t.map(Ib):String(t)}function nRe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const iRe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yG(t,e,n,i,r){if(fe.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!fe.isString(e)){if(fe.isString(i))return e.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(e)}}function rRe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function oRe(t,e){const n=fe.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,s){return this[i].call(this,e,r,o,s)},configurable:!0})})}class Zv{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(a,l,g){const u=EC(l);if(!u)throw new Error("header name must be a non-empty string");const d=fe.findKey(r,u);(!d||r[d]===void 0||g===!0||g===void 0&&r[d]!==!1)&&(r[d||l]=Ib(a))}const s=(a,l)=>fe.forEach(a,(g,u)=>o(g,u,l));return fe.isPlainObject(e)||e instanceof this.constructor?s(e,n):fe.isString(e)&&(e=e.trim())&&!iRe(e)?s(tRe(e),n):e!=null&&o(n,e,i),this}get(e,n){if(e=EC(e),e){const i=fe.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return nRe(r);if(fe.isFunction(n))return n.call(this,r,i);if(fe.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=EC(e),e){const i=fe.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||yG(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(s){if(s=EC(s),s){const a=fe.findKey(i,s);a&&(!n||yG(i,i[a],a,n))&&(delete i[a],r=!0)}}return fe.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||yG(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return fe.forEach(this,(r,o)=>{const s=fe.findKey(i,o);if(s){n[s]=Ib(r),delete n[o];return}const a=e?rRe(o):String(o).trim();a!==o&&delete n[o],n[a]=Ib(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return fe.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&fe.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[cH]=this[cH]={accessors:{}}).accessors,r=this.prototype;function o(s){const a=EC(s);i[a]||(oRe(r,s),i[a]=!0)}return fe.isArray(e)?e.forEach(o):o(e),this}}Zv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Zv.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});fe.freezeMethods(Zv);const Ja=Zv;function vG(t,e){const n=this||iw,i=e||n,r=Ja.from(i.headers);let o=i.data;return fe.forEach(t,function(a){o=a.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function LP(t){return!!(t&&t.__CANCEL__)}function Zm(t,e,n){Jt.call(this,t??"canceled",Jt.ERR_CANCELED,e,n),this.name="CanceledError"}fe.inherits(Zm,Jt,{__CANCEL__:!0});function sRe(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Jt("Request failed with status code "+n.status,[Jt.ERR_BAD_REQUEST,Jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const aRe=Vs.hasStandardBrowserEnv?{write(t,e,n,i,r,o){const s=[t+"="+encodeURIComponent(e)];fe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),fe.isString(i)&&s.push("path="+i),fe.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lRe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gRe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function _P(t,e){return t&&!lRe(e)?gRe(t,e):e}const cRe=Vs.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let s=o;return e&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(s){const a=fe.isString(s)?r(s):s;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function uRe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function dRe(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,s;return e=e!==void 0?e:1e3,function(l){const g=Date.now(),u=i[o];s||(s=g),n[r]=l,i[r]=g;let d=o,h=0;for(;d!==r;)h+=n[d++],d=d%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),g-s<e)return;const f=u&&g-u;return f?Math.round(h*1e3/f):void 0}}function uH(t,e){let n=0;const i=dRe(50,250);return r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,l=i(a),g=o<=s;n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&g?(s-o)/l:void 0,event:r};u[e?"download":"upload"]=!0,t(u)}}const IRe=typeof XMLHttpRequest<"u",CRe=IRe&&function(t){return new Promise(function(n,i){let r=t.data;const o=Ja.from(t.headers).normalize();let{responseType:s,withXSRFToken:a}=t,l;function g(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(fe.isFormData(r)){if(Vs.hasStandardBrowserEnv||Vs.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((u=o.getContentType())!==!1){const[p,...y]=u?u.split(";").map(v=>v.trim()).filter(Boolean):[];o.setContentType([p||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(p+":"+y))}const h=_P(t.baseURL,t.url);d.open(t.method.toUpperCase(),YP(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function f(){if(!d)return;const p=Ja.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),v={data:!s||s==="text"||s==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:p,config:t,request:d};sRe(function(Z){n(Z),g()},function(Z){i(Z),g()},v),d=null}if("onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(i(new Jt("Request aborted",Jt.ECONNABORTED,t,d)),d=null)},d.onerror=function(){i(new Jt("Network Error",Jt.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||FP;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),i(new Jt(y,v.clarifyTimeoutError?Jt.ETIMEDOUT:Jt.ECONNABORTED,t,d)),d=null},Vs.hasStandardBrowserEnv&&(a&&fe.isFunction(a)&&(a=a(t)),a||a!==!1&&cRe(h))){const p=t.xsrfHeaderName&&t.xsrfCookieName&&aRe.read(t.xsrfCookieName);p&&o.set(t.xsrfHeaderName,p)}r===void 0&&o.setContentType(null),"setRequestHeader"in d&&fe.forEach(o.toJSON(),function(y,v){d.setRequestHeader(v,y)}),fe.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),s&&s!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",uH(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",uH(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=p=>{d&&(i(!p||p.type?new Zm(null,t,d):p),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const A=uRe(h);if(A&&Vs.protocols.indexOf(A)===-1){i(new Jt("Unsupported protocol "+A+":",Jt.ERR_BAD_REQUEST,t));return}d.send(r||null)})},b1={http:YBe,xhr:CRe};fe.forEach(b1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const dH=t=>`- ${t}`,hRe=t=>fe.isFunction(t)||t===null||t===!1,DP={getAdapter:t=>{t=fe.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let o=0;o<e;o++){n=t[o];let s;if(i=n,!hRe(n)&&(i=b1[(s=String(n)).toLowerCase()],i===void 0))throw new Jt(`Unknown adapter '${s}'`);if(i)break;r[s||"#"+o]=i}if(!i){const o=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(dH).join(`
`):" "+dH(o[0]):"as no adapter specified";throw new Jt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:b1};function SG(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zm(null,t)}function IH(t){return SG(t),t.headers=Ja.from(t.headers),t.data=vG.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),DP.getAdapter(t.adapter||iw.adapter)(t).then(function(i){return SG(t),i.data=vG.call(t,t.transformResponse,i),i.headers=Ja.from(i.headers),i},function(i){return LP(i)||(SG(t),i&&i.response&&(i.response.data=vG.call(t,t.transformResponse,i.response),i.response.headers=Ja.from(i.response.headers))),Promise.reject(i)})}const CH=t=>t instanceof Ja?{...t}:t;function AI(t,e){e=e||{};const n={};function i(g,u,d){return fe.isPlainObject(g)&&fe.isPlainObject(u)?fe.merge.call({caseless:d},g,u):fe.isPlainObject(u)?fe.merge({},u):fe.isArray(u)?u.slice():u}function r(g,u,d){if(fe.isUndefined(u)){if(!fe.isUndefined(g))return i(void 0,g,d)}else return i(g,u,d)}function o(g,u){if(!fe.isUndefined(u))return i(void 0,u)}function s(g,u){if(fe.isUndefined(u)){if(!fe.isUndefined(g))return i(void 0,g)}else return i(void 0,u)}function a(g,u,d){if(d in e)return i(g,u);if(d in t)return i(void 0,g)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(g,u)=>r(CH(g),CH(u),!0)};return fe.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||r,h=d(t[u],e[u],u);fe.isUndefined(h)&&d!==a||(n[u]=h)}),n}const KP="1.6.8",rw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{rw[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const hH={};rw.transitional=function(e,n,i){function r(o,s){return"[Axios v"+KP+"] Transitional option '"+o+"'"+s+(i?". "+i:"")}return(o,s,a)=>{if(e===!1)throw new Jt(r(s," has been removed"+(n?" in "+n:"")),Jt.ERR_DEPRECATED);return n&&!hH[s]&&(hH[s]=!0,console.warn(r(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,s,a):!0}};function fRe(t,e,n){if(typeof t!="object")throw new Jt("options must be an object",Jt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],s=e[o];if(s){const a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new Jt("option "+o+" must be "+l,Jt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Jt("Unknown option "+o,Jt.ERR_BAD_OPTION)}}const y1={assertOptions:fRe,validators:rw},fl=y1.validators;class x0{constructor(e){this.defaults=e,this.interceptors={request:new gH,response:new gH}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=AI(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&y1.assertOptions(i,{silentJSONParsing:fl.transitional(fl.boolean),forcedJSONParsing:fl.transitional(fl.boolean),clarifyTimeoutError:fl.transitional(fl.boolean)},!1),r!=null&&(fe.isFunction(r)?n.paramsSerializer={serialize:r}:y1.assertOptions(r,{encode:fl.function,serialize:fl.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&fe.merge(o.common,o[n.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),n.headers=Ja.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const g=[];this.interceptors.response.forEach(function(p){g.push(p.fulfilled,p.rejected)});let u,d=0,h;if(!l){const A=[IH.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,g),h=A.length,u=Promise.resolve(n);d<h;)u=u.then(A[d++],A[d++]);return u}h=a.length;let f=n;for(d=0;d<h;){const A=a[d++],p=a[d++];try{f=A(f)}catch(y){p.call(this,y);break}}try{u=IH.call(this,f)}catch(A){return Promise.reject(A)}for(d=0,h=g.length;d<h;)u=u.then(g[d++],g[d++]);return u}getUri(e){e=AI(this.defaults,e);const n=_P(e.baseURL,e.url);return YP(n,e.params,e.paramsSerializer)}}fe.forEach(["delete","get","head","options"],function(e){x0.prototype[e]=function(n,i){return this.request(AI(i||{},{method:e,url:n,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(e){function n(i){return function(o,s,a){return this.request(AI(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}x0.prototype[e]=n(),x0.prototype[e+"Form"]=n(!0)});const Cb=x0;class ow{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(a=>{i.subscribe(a),o=a}).then(r);return s.cancel=function(){i.unsubscribe(o)},s},e(function(o,s,a){i.reason||(i.reason=new Zm(o,s,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ow(function(r){e=r}),cancel:e}}}const mRe=ow;function pRe(t){return function(n){return t.apply(null,n)}}function ARe(t){return fe.isObject(t)&&t.isAxiosError===!0}const v1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(v1).forEach(([t,e])=>{v1[e]=t});const bRe=v1;function zP(t){const e=new Cb(t),n=BP(Cb.prototype.request,e);return fe.extend(n,Cb.prototype,e,{allOwnKeys:!0}),fe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return zP(AI(t,r))},n}const ti=zP(iw);ti.Axios=Cb;ti.CanceledError=Zm;ti.CancelToken=mRe;ti.isCancel=LP;ti.VERSION=KP;ti.toFormData=Sv;ti.AxiosError=Jt;ti.Cancel=ti.CanceledError;ti.all=function(e){return Promise.all(e)};ti.spread=pRe;ti.isAxiosError=ARe;ti.mergeConfig=AI;ti.AxiosHeaders=Ja;ti.formToJSON=t=>TP(fe.isHTMLForm(t)?new FormData(t):t);ti.getAdapter=DP.getAdapter;ti.HttpStatusCode=bRe;ti.default=ti;const fn=ti,yRe=({post:t})=>{const e=Nn(an),[n,i]=m.useState(t.likes.includes(e==null?void 0:e._id)),[r,o]=_i(Sg),[s,a]=m.useState(!1),[l,g]=m.useState(!1),[u,d]=m.useState(""),[h,f]=m.useState(!1),A=Qr(),p=ln(),{isOpen:y,onOpen:v,onClose:S}=Go(),Z=vd(new Date().toISOString()),[R,W]=m.useState(),[B,k]=m.useState(t==null?void 0:t.capacity),w=new Date(t.startDate);w.setMinutes(t.startTime.split(":")[1]),w.setHours(t.startTime.split(":")[0]);const J=W0(w,Z),X=async oe=>{const q=await fn.get(`/api/analytics/post/${oe}`);W(q.data)};m.useEffect(()=>{var oe;t&&R&&k(t.capacity-((oe=R[0])==null?void 0:oe.totalSales))},[t,R]),m.useEffect(()=>{X(t._id)},[t,h]);const Y=async()=>{if(!e)return p("Error","You must be logged in to like a post","error");if(!s){a(!0);try{const q=await(await fetch("/api/posts/like/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();if(q.error)return p("Error",q.error,"error");if(n){const K=r.map(_=>_._id===t._id?{..._,likes:_.likes.filter(de=>de!==e._id)}:_);o(K)}else{const K=r.map(_=>_._id===t._id?{..._,likes:[..._.likes,e._id]}:_);o(K)}i(!n)}catch(oe){p("Error",oe.message,"error")}finally{a(!1)}}},z=async()=>{if(!e)return p("Error","You must be logged in to reply to a post","error");if(!l){g(!0);try{const q=await(await fetch("/api/posts/reply/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:u})})).json();if(q.error)return p("Error",q.error,"error");const K=r.map(_=>_._id===t._id?{..._,replies:[..._.replies,q]}:_);o(K),p("Success","Reply posted successfully","success"),S(),d("")}catch(oe){p("Error",oe.message,"error")}finally{g(!1)}}},P=async()=>{A("/chat",{state:{post:t}})},$=async()=>{f(!0)};return C.jsxs(ae,{flexDirection:"column",children:[C.jsxs(ae,{gap:8,my:2,onClick:oe=>oe.preventDefault(),alignItems:"center",children:[C.jsx("svg",{"aria-label":"Like",color:n?"rgb(237, 73, 86)":"",fill:n?"rgb(237, 73, 86)":"transparent",height:"15",role:"img",viewBox:"0 0 24 22",width:"20",onClick:Y,children:C.jsx("path",{d:"M1 7.66c0 4.575 3.899 9.086 9.987 12.934.338.203.74.406 1.013.406.283 0 .686-.203 1.013-.406C19.1 16.746 23 12.234 23 7.66 23 3.736 20.245 1 16.672 1 14.603 1 12.98 1.94 12 3.352 11.042 1.952 9.408 1 7.328 1 3.766 1 1 3.736 1 7.66Z",stroke:"currentColor",strokeWidth:"2"})}),C.jsxs("svg",{"aria-label":"Comment",color:"",fill:"",height:"15",role:"img",viewBox:"0 0 24 24",width:"20",onClick:v,children:[C.jsx("title",{children:"Comment"}),C.jsx("path",{d:"M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]}),C.jsx(vRe,{onClick:P}),C.jsxs("svg",{"aria-label":"Share",color:"",fill:"rgb(243, 245, 247)",height:"15",role:"img",viewBox:"0 0 24 24",width:"20",onClick:P,children:[C.jsx("title",{children:"Share"}),C.jsx("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"}),C.jsx("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]}),!J||(t==null?void 0:t.capacity)<9999&&B<=0?C.jsxs(_d,{children:[C.jsx(Ld,{children:C.jsxs(De,{colorScheme:"red",size:"xs",children:[(t==null?void 0:t.capacity)<9999&&B<=0&&J&&"Event Full",!J&&"Event Started"]})}),C.jsx(XI,{children:C.jsxs(Kd,{children:[C.jsx(kf,{}),C.jsx(YK,{}),C.jsx(Dd,{children:C.jsxs(ue,{children:[" ",(t==null?void 0:t.capacity)<9999&&B<=0&&J&&"Event Full",!J&&"Event has been Started Already"]})})]})})]}):C.jsx(De,{colorScheme:"blue",size:"xs",onClick:$,children:"Join Event"})]}),C.jsx(vP,{user:e,post:t,joinModalOpen:h,setJoinModalOpen:f}),C.jsxs(ae,{gap:2,alignItems:"center",children:[C.jsxs(ue,{color:"gray.light",fontSize:"sm",children:[t.replies.length," replies"]}),C.jsx(Se,{w:.5,h:.5,borderRadius:"full",bg:"gray.light"}),C.jsxs(ue,{color:"gray.light",fontSize:"sm",children:[t.likes.length," likes"]})]}),C.jsxs(Jo,{isOpen:y,onClose:S,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{}),C.jsx(Yo,{}),C.jsx(ss,{pb:6,children:C.jsx(mt,{children:C.jsx(_e,{placeholder:"Reply goes here..",value:u,onChange:oe=>d(oe.target.value)})})}),C.jsx(is,{children:C.jsx(De,{colorScheme:"blue",size:"sm",mr:3,isLoading:l,onClick:z,children:"Reply"})})]})]})]})},vRe=()=>C.jsxs("svg",{"aria-label":"Repost",color:"currentColor",fill:"currentColor",height:"15",role:"img",viewBox:"0 0 24 24",width:"20",children:[C.jsx("title",{children:"Repost"}),C.jsx("path",{fill:"",d:"M19.998 9.497a1 1 0 0 0-1 1v4.228a3.274 3.274 0 0 1-3.27 3.27h-5.313l1.791-1.787a1 1 0 0 0-1.412-1.416L7.29 18.287a1.004 1.004 0 0 0-.294.707v.001c0 .023.012.042.013.065a.923.923 0 0 0 .281.643l3.502 3.504a1 1 0 0 0 1.414-1.414l-1.797-1.798h5.318a5.276 5.276 0 0 0 5.27-5.27v-4.228a1 1 0 0 0-1-1Zm-6.41-3.496-1.795 1.795a1 1 0 1 0 1.414 1.414l3.5-3.5a1.003 1.003 0 0 0 0-1.417l-3.5-3.5a1 1 0 0 0-1.414 1.414l1.794 1.794H8.27A5.277 5.277 0 0 0 3 9.271V13.5a1 1 0 0 0 2 0V9.271a3.275 3.275 0 0 1 3.271-3.27Z"})]});function SRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Badge_Dollar"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,21.953c-.895,0-1.545-.743-2.118-1.4a3.671,3.671,0,0,0-1.033-.946,3.8,3.8,0,0,0-1.466-.077,3.012,3.012,0,0,1-2.421-.494,3.014,3.014,0,0,1-.494-2.421,3.82,3.82,0,0,0-.077-1.466,3.671,3.671,0,0,0-.946-1.033c-.655-.573-1.4-1.222-1.4-2.118s.743-1.545,1.4-2.118a3.66,3.66,0,0,0,.946-1.034,3.815,3.815,0,0,0,.077-1.465,3.012,3.012,0,0,1,.494-2.421,3.015,3.015,0,0,1,2.422-.5A3.794,3.794,0,0,0,8.849,4.39a3.666,3.666,0,0,0,1.033-.945c.573-.655,1.223-1.4,2.118-1.4s1.545.742,2.118,1.4a3.66,3.66,0,0,0,1.034.946,3.807,3.807,0,0,0,1.464.077,3.018,3.018,0,0,1,2.422.5,3.012,3.012,0,0,1,.5,2.422,3.81,3.81,0,0,0,.077,1.464,3.66,3.66,0,0,0,.946,1.034c.655.573,1.4,1.223,1.4,2.118s-.743,1.545-1.4,2.118a3.666,3.666,0,0,0-.945,1.033,3.815,3.815,0,0,0-.077,1.465,3.012,3.012,0,0,1-.5,2.422,3.018,3.018,0,0,1-2.421.494,3.818,3.818,0,0,0-1.465.077,3.673,3.673,0,0,0-1.034.946C13.545,21.21,12.9,21.953,12,21.953ZM8.093,18.5a2.952,2.952,0,0,1,1.138.183,4.233,4.233,0,0,1,1.4,1.21c.454.52.924,1.057,1.365,1.057s.911-.537,1.366-1.057a4.225,4.225,0,0,1,1.4-1.21,4.365,4.365,0,0,1,1.908-.152c.672.041,1.366.085,1.653-.2s.245-.982.2-1.653a4.387,4.387,0,0,1,.152-1.909,4.241,4.241,0,0,1,1.209-1.4c.52-.454,1.057-.924,1.057-1.365s-.537-.911-1.057-1.365a4.234,4.234,0,0,1-1.209-1.4,4.381,4.381,0,0,1-.152-1.908c.041-.671.084-1.365-.2-1.653s-.982-.246-1.653-.2a4.384,4.384,0,0,1-1.908-.152,4.234,4.234,0,0,1-1.4-1.209c-.454-.52-.924-1.057-1.365-1.057s-.911.537-1.365,1.057a4.241,4.241,0,0,1-1.4,1.209,4.417,4.417,0,0,1-1.909.152c-.67-.041-1.364-.084-1.653.2s-.244.981-.2,1.652A4.37,4.37,0,0,1,5.314,9.23a4.226,4.226,0,0,1-1.21,1.4c-.52.454-1.057.925-1.057,1.365s.537.911,1.057,1.366a4.238,4.238,0,0,1,1.21,1.4,4.378,4.378,0,0,1,.152,1.91c-.041.672-.084,1.366.2,1.653s.98.245,1.653.2C7.578,18.519,7.838,18.5,8.093,18.5Z"},child:[]},{tag:"path",attr:{d:"M14.5,13.5a2.006,2.006,0,0,1-2,2v1.01A.5.5,0,0,1,12,17a.492.492,0,0,1-.5-.49V15.5h-1.25a.5.5,0,0,1-.5-.5.5.5,0,0,1,.5-.5H12.5a1,1,0,1,0,0-2h-1a2,2,0,0,1,0-4V7.453A.473.473,0,0,1,12,7a.48.48,0,0,1,.5.45V8.5h1.25a.5.5,0,0,1,.5.5.508.508,0,0,1-.5.5H11.5a1,1,0,0,0,0,2h1A2,2,0,0,1,14.5,13.5Z"},child:[]}]}]}]})(t)}function ZRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Calendar"},child:[{tag:"path",attr:{d:`M18.438,4.954H16.5c0-0.346,0-0.691,0-1.036c0-0.124,0-0.248,0-0.372c0-0.262-0.23-0.512-0.5-0.5
            c-0.271,0.012-0.5,0.22-0.5,0.5c0,0.469,0,0.939,0,1.408h-7c0-0.346,0-0.691,0-1.036c0-0.124,0-0.248,0-0.372
            c0-0.262-0.23-0.512-0.5-0.5c-0.271,0.012-0.5,0.22-0.5,0.5c0,0.469,0,0.939,0,1.408H5.562c-1.378,0-2.5,1.122-2.5,2.5v11
            c0,1.379,1.122,2.5,2.5,2.5h12.875c1.379,0,2.5-1.121,2.5-2.5v-11C20.938,6.076,19.816,4.954,18.438,4.954z M5.562,5.954H7.5
            c0,0.073,0,0.147,0,0.22c0,0.124,0,0.248,0,0.372c0,0.262,0.23,0.512,0.5,0.5c0.271-0.012,0.5-0.22,0.5-0.5c0-0.197,0-0.394,0-0.592
            h7c0,0.073,0,0.147,0,0.22c0,0.124,0,0.248,0,0.372c0,0.262,0.23,0.512,0.5,0.5c0.271-0.012,0.5-0.22,0.5-0.5
            c0-0.197,0-0.394,0-0.592h1.937c0.827,0,1.5,0.673,1.5,1.5v1.584H4.062V7.454C4.062,6.627,4.735,5.954,5.562,5.954z M18.438,19.954
            H5.562c-0.827,0-1.5-0.673-1.5-1.5v-8.416h15.875v8.416C19.938,19.281,19.265,19.954,18.438,19.954z`},child:[]}]}]})(t)}function fH(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(t)}function mH(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Globe"},child:[{tag:"path",attr:{d:"M14.645,2.428a8.1,8.1,0,0,0-1.61-.3,9.332,9.332,0,0,0-3.6.28l-.07.02a9.928,9.928,0,0,0,.01,19.15,9.091,9.091,0,0,0,2.36.34,1.274,1.274,0,0,0,.27.02,9.65,9.65,0,0,0,2.63-.36,9.931,9.931,0,0,0,.01-19.15Zm-.27.96a8.943,8.943,0,0,1,5.84,5.11h-4.26a13.778,13.778,0,0,0-2.74-5.35A8.254,8.254,0,0,1,14.375,3.388Zm-2.37-.09a12.78,12.78,0,0,1,2.91,5.2H9.075A12.545,12.545,0,0,1,12.005,3.3Zm3.16,6.2a13.193,13.193,0,0,1,0,5.01H8.845a12.185,12.185,0,0,1-.25-2.5,12.353,12.353,0,0,1,.25-2.51Zm-5.6-6.09.07-.02a9.152,9.152,0,0,1,1.16-.23A13.618,13.618,0,0,0,8.045,8.5H3.8A9,9,0,0,1,9.565,3.408Zm-6.5,8.6a8.71,8.71,0,0,1,.37-2.51h4.39a13.95,13.95,0,0,0-.23,2.51,13.757,13.757,0,0,0,.23,2.5H3.435A8.591,8.591,0,0,1,3.065,12.008Zm6.57,8.61a8.9,8.9,0,0,1-5.84-5.11h4.24a13.632,13.632,0,0,0,2.77,5.35A8.1,8.1,0,0,1,9.635,20.618Zm-.56-5.11h5.84a12.638,12.638,0,0,1-2.91,5.21A12.872,12.872,0,0,1,9.075,15.508Zm5.3,5.11a11.551,11.551,0,0,1-1.17.24,13.8,13.8,0,0,0,2.75-5.35h4.26A8.924,8.924,0,0,1,14.375,20.618Zm1.8-6.11a13.611,13.611,0,0,0,0-5.01h4.39a8.379,8.379,0,0,1,.37,2.51,8.687,8.687,0,0,1-.36,2.5Z"},child:[]}]}]})(t)}function PP(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Location_On"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,21.933a1.715,1.715,0,0,1-1.384-.691L5.555,14.5a7.894,7.894,0,1,1,12.885-.009L13.385,21.24A1.717,1.717,0,0,1,12,21.933ZM11.992,3.066A6.81,6.81,0,0,0,7.414,4.815a6.891,6.891,0,0,0-1.05,9.1l5.051,6.727a.725.725,0,0,0,.584.292h0a.732.732,0,0,0,.586-.292l5.044-6.734A6.874,6.874,0,0,0,12.81,3.113,7.277,7.277,0,0,0,11.992,3.066Z"},child:[]},{tag:"path",attr:{d:"M12,12.5A2.5,2.5,0,1,1,14.5,10,2.5,2.5,0,0,1,12,12.5Zm0-4A1.5,1.5,0,1,0,13.5,10,1.5,1.5,0,0,0,12,8.5Z"},child:[]}]}]}]})(t)}function GRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Sticky_Note"},child:[{tag:"path",attr:{d:"M18.44,3.065H5.56a2.507,2.507,0,0,0-2.5,2.5v12.87a2.507,2.507,0,0,0,2.5,2.5h8.68A2.482,2.482,0,0,0,16,20.2l4.21-4.2a2.505,2.505,0,0,0,.73-1.77V5.565A2.5,2.5,0,0,0,18.44,3.065Zm-4.38,13.5v3.37H5.56a1.5,1.5,0,0,1-1.5-1.5V5.565a1.5,1.5,0,0,1,1.5-1.5H18.44a1.5,1.5,0,0,1,1.5,1.5v8.5H16.56A2.507,2.507,0,0,0,14.06,16.565Zm1,3.13v-3.13a1.5,1.5,0,0,1,1.5-1.5h3.13Z"},child:[]}]}]})(t)}const UP=({post:t,postedBy:e})=>{const[n,i]=m.useState(null),r=ln(),o=Nn(an),[s,a]=_i(Sg),l=Qr();gt.useRef(),m.useEffect(()=>{(async()=>{try{const h=await(await fetch("/api/users/profile/"+e)).json();if(h.error){r("Error",h.error,"error");return}i(h)}catch(d){r("Error",d.message,"error"),i(null)}})()},[e,r]);const g=async u=>{try{if(u.preventDefault(),!window.confirm("Are you sure you want to delete this post?"))return;const h=await(await fetch(`/api/posts/${t._id}`,{method:"DELETE"})).json();if(h.error){r("Error",h.error,"error");return}r("Success","Post deleted","success"),a(s.filter(f=>f._id!==t._id))}catch(d){r("Error",d.message,"error")}};return n?C.jsx(C.Fragment,{children:C.jsx(Zi,{to:`/${n.username}/post/${t._id}`,children:C.jsxs(Qi,{borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",padding:2,w:"80%",m:"auto",children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsxs(ae,{children:[C.jsxs(ue,{fontWeight:"medium",children:[new Date(t.startDate).getDate(),"",new Date(t.startDate).toLocaleDateString([],{month:"long"})]}),C.jsxs(ue,{fontWeight:"small",color:"gray.500",children:["/",new Date(t.startDate).toLocaleDateString([],{weekday:"long"})]})]}),(o==null?void 0:o._id)===n._id&&C.jsx(kGe,{size:20,onClick:g})]}),C.jsxs(ae,{flex:"",overflow:"hidden",paddingTop:"0.5em",paddingBottom:"0.5em",gap:5,children:[t.img&&C.jsx(Se,{overflow:"hidden",borderRadius:5,w:"10em",h:"fit-content",children:C.jsx(oi,{src:t.img})}),C.jsxs(ae,{flexDirection:"column",flexGrow:1,children:[C.jsxs(ae,{alignItems:"center",gap:1,children:[C.jsx(Ni,{size:"2xs",name:n.name,src:n==null?void 0:n.profilePic,onClick:u=>{u.preventDefault(),l(`/${n.username}`)}}),C.jsx(ue,{fontSize:"xs",onClick:u=>{u.preventDefault(),l(`/${n.username}`)},children:n.name})]}),C.jsx(ue,{fontWeight:"medium",fontSize:"xl",children:t.name}),C.jsxs(ae,{flexGrow:1,justifyContent:"space-between",children:[C.jsxs(ae,{alignItems:"center",children:[C.jsx(GGe,{color:"gray.400",size:"sm"}),t.startTime]}),C.jsxs(ae,{alignItems:"center",children:[C.jsx(PP,{size:18}),t.venue]})]}),C.jsx(yRe,{post:t})]})]})]})})}):null},jP=()=>{const[t,e]=m.useState(null),[n,i]=m.useState(!0),{username:r}=Im(),o=ln();return m.useEffect(()=>{(async()=>{try{const l=await(await fetch(`/api/users/profile/${r}`)).json();if(l.error){o("Error",l.error,"error");return}if(l.isFrozen){e(null);return}e(l)}catch(a){o("Error",a.message,"error")}finally{i(!1)}})()},[r,o]),{loading:n,user:t}},BRe=({post:t})=>{const[e]=i5("(max-width: 768px)"),[n]=i5("(min-width: 768px) and (max-width: 1024px)"),i=ln(),r=Qr(),o=async a=>{try{const g=await(await fetch("/api/users/profile/"+a)).json();if(g.error){i("Error",g.error,"error");return}return g}catch(l){i("Error",l.message,"error")}},s=async a=>{try{const l=await o(a.postedBy);r(`/${l.username}/post/${a._id}`)}catch{i("","Something went wrong","error")}};return C.jsx(C.Fragment,{children:t&&C.jsxs(ae,{backgroundRepeat:"repeat",aspectRatio:n?"16/15":e?"16/16":"16/12",bg:!t.img&&"gray.700",alignItems:"flex-end",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local",onClick:()=>s(t),borderRadius:"10",overflow:"hidden",children:[t.img&&C.jsx(oi,{src:t.img&&`${t.img}`,w:"100%",h:"100%",style:{filter:"brightness(0.8)"}}),C.jsxs(Se,{position:"absolute",color:"gray.200",ps:4,pb:4,fontSize:"smaller",children:[C.jsx(ue,{style:{wordWrap:"break-word",maxWidth:e?"100px":n?"150px":"200px",whiteSpace:"pre-line"},fontSize:n||e?"small":"medium",fontWeight:"500",children:t.name}),C.jsx(ue,{fontSize:n||e?"smaller":"small",children:t.eventType}),C.jsxs(ue,{fontWeight:"medium",fontSize:n||e?"smaller":"small",children:[new Date(t.startDate).getDate(),"",new Date(t.startDate).toLocaleDateString([],{month:"long"})]}),C.jsx(ue,{fontSize:n||e?"smaller":"small",children:t.city})]})]})})},pH=()=>{const{user:t,loading:e}=jP(),{username:n}=Im(),i=ln(),[r,o]=_i(Sg),[s,a]=m.useState(!0);return m.useEffect(()=>{(async()=>{if(t){a(!0);try{const u=await(await fetch(`/api/posts/user/${n}`)).json();o(u)}catch(g){i("Error",g.message,"error"),o([])}finally{a(!1)}}})()},[n,i,o,t]),!t&&e?C.jsx(ae,{justifyContent:"center",children:C.jsx(nr,{size:"xl"})}):!t&&!e?C.jsx("h1",{children:"User not found"}):C.jsxs(C.Fragment,{children:[C.jsx(LGe,{user:t}),!s&&r.length===0&&C.jsx("h1",{children:"User has not posts."}),s&&C.jsx(ae,{justifyContent:"center",my:12,children:C.jsx(nr,{size:"xl"})}),C.jsx(Ts,{gridTemplateColumns:{base:"1fr 1fr",md:"1fr 1fr 1fr "},pb:2,w:"80%",m:"auto",mt:"2em",gap:4,children:r.map(l=>C.jsx(BRe,{post:l,postedBy:l.postedBy},l._id))})]})};function RRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M515.664-.368C305.76-.368 128 178.4 128 390.176c0 221.76 206.032 448.544 344.624 607.936.528.64 22.929 25.52 50.528 25.52h2.449c27.6 0 49.84-24.88 50.399-25.52 130.064-149.52 320-396.048 320-607.936C896 178.4 757.344-.368 515.664-.368zm12.832 955.552c-1.12 1.12-2.753 2.369-4.193 3.409-1.472-1.008-3.072-2.288-4.255-3.408l-16.737-19.248C371.92 785.2 192 578.785 192 390.176c0-177.008 148.224-326.56 323.664-326.56 218.528 0 316.336 164 316.336 326.56 0 143.184-102.128 333.296-303.504 565.008zm-15.377-761.776c-106.032 0-192 85.968-192 192s85.968 192 192 192 192-85.968 192-192-85.968-192-192-192zm0 320c-70.576 0-129.473-58.816-129.473-129.408 0-70.576 57.424-128 128-128 70.624 0 128 57.424 128 128 .032 70.592-55.903 129.408-126.527 129.408z"},child:[]}]})(t)}function kRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function VRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 12c0 5.52-4.48 10-10 10S2 17.52 2 12c0-1.19.22-2.32.6-3.38l1.88.68C4.17 10.14 4 11.05 4 12c0 4.41 3.59 8 8 8s8-3.59 8-8-3.59-8-8-8c-.95 0-1.85.17-2.69.48l-.68-1.89C9.69 2.22 10.82 2 12 2c5.52 0 10 4.48 10 10zM5.5 4C4.67 4 4 4.67 4 5.5S4.67 7 5.5 7 7 6.33 7 5.5 6.33 4 5.5 4zM11 16V8H9v8h2zm4 0V8h-2v8h2z"},child:[]}]})(t)}function wRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5 7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z"},child:[]}]})(t)}function WRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v10c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16V6H5V2zM4 17c-.55 0-1-.45-1-1v-2h2v2c0 .55-.45 1-1 1zm-1-5V8h2v4H3zM13 2c0-.55-.45-1-1-1s-1 .45-1 1v4H9v10c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.42 2-1.52 2-2.82V6h-2V2zm-1 15c-.55 0-1-.45-1-1v-2h2v2c0 .55-.45 1-1 1zm-1-5V8h2v4h-2zm10-6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v10c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.42 2-1.52 2-2.82V6h-2zm-1 11c-.55 0-1-.45-1-1v-2h2v2c0 .55-.45 1-1 1zm-1-5V8h2v4h-2z"},child:[]}]})(t)}function xRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function XRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm7 10c0 4.52-2.98 8.69-7 9.93-4.02-1.24-7-5.41-7-9.93V6.3l7-3.11 7 3.11V11zm-11.59.59L6 13l4 4 8-8-1.41-1.42L10 14.17z"},child:[]}]})(t)}function JRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"},child:[]}]})(t)}function ERe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm5.56 10.46 5.93-5.93-1.06-1.06-4.87 4.87-2.11-2.11-1.06 1.06z"},child:[]}]})(t)}function HRe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84-.88 2.85zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72A7.96 7.96 0 0 0 20 10zm-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6zm0 15-4 1.02v-3.1c1.18.68 2.54 1.08 4 1.08s2.82-.4 4-1.08v3.1L12 19z"},child:[]}]})(t)}function OP(t,e){const n=m.useRef(e);m.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const NRe=1;function YRe(t){return Object.freeze({__version:NRe,map:t})}function FRe(t,e){return Object.freeze({...t,...e})}const QP=m.createContext(null),$P=QP.Provider;function qP(){const t=m.useContext(QP);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function MRe(t){function e(n,i){const{instance:r,context:o}=t(n).current;return m.useImperativeHandle(i,()=>r),n.children==null?null:gt.createElement($P,{value:o},n.children)}return m.forwardRef(e)}function TRe(t){function e(n,i){const[r,o]=m.useState(!1),{instance:s}=t(n,o).current;m.useImperativeHandle(i,()=>s),m.useEffect(function(){r&&s.update()},[s,r,n.children]);const a=s._contentNode;return a?Pr.createPortal(n.children,a):null}return m.forwardRef(e)}function LRe(t){function e(n,i){const{instance:r}=t(n).current;return m.useImperativeHandle(i,()=>r),null}return m.forwardRef(e)}function eU(t,e){const n=m.useRef();m.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function sw(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function _Re(t,e){return function(i,r){const o=qP(),s=t(sw(i,o),o);return OP(o.map,i.attribution),eU(s.current,i.eventHandlers),e(s.current,o,i,r),s}}var S1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Za,function(n){var i="1.9.4";function r(c){var I,b,G,V;for(b=1,G=arguments.length;b<G;b++){V=arguments[b];for(I in V)c[I]=V[I]}return c}var o=Object.create||function(){function c(){}return function(I){return c.prototype=I,new c}}();function s(c,I){var b=Array.prototype.slice;if(c.bind)return c.bind.apply(c,b.call(arguments,1));var G=b.call(arguments,2);return function(){return c.apply(I,G.length?G.concat(b.call(arguments)):arguments)}}var a=0;function l(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function g(c,I,b){var G,V,x,D;return D=function(){G=!1,V&&(x.apply(b,V),V=!1)},x=function(){G?V=arguments:(c.apply(b,arguments),setTimeout(D,I),G=!0)},x}function u(c,I,b){var G=I[1],V=I[0],x=G-V;return c===G&&b?c:((c-V)%x+x)%x+V}function d(){return!1}function h(c,I){if(I===!1)return c;var b=Math.pow(10,I===void 0?6:I);return Math.round(c*b)/b}function f(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function A(c){return f(c).split(/\s+/)}function p(c,I){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?o(c.options):{});for(var b in I)c.options[b]=I[b];return c.options}function y(c,I,b){var G=[];for(var V in c)G.push(encodeURIComponent(b?V.toUpperCase():V)+"="+encodeURIComponent(c[V]));return(!I||I.indexOf("?")===-1?"?":"&")+G.join("&")}var v=/\{ *([\w_ -]+) *\}/g;function S(c,I){return c.replace(v,function(b,G){var V=I[G];if(V===void 0)throw new Error("No value provided for variable "+b);return typeof V=="function"&&(V=V(I)),V})}var Z=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function R(c,I){for(var b=0;b<c.length;b++)if(c[b]===I)return b;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var k=0;function w(c){var I=+new Date,b=Math.max(0,16-(I-k));return k=I+b,window.setTimeout(c,b)}var J=window.requestAnimationFrame||B("RequestAnimationFrame")||w,X=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function Y(c,I,b){if(b&&J===w)c.call(I);else return J.call(window,s(c,I))}function z(c){c&&X.call(window,c)}var P={__proto__:null,extend:r,create:o,bind:s,get lastId(){return a},stamp:l,throttle:g,wrapNum:u,falseFn:d,formatNum:h,trim:f,splitWords:A,setOptions:p,getParamString:y,template:S,isArray:Z,indexOf:R,emptyImageUrl:W,requestFn:J,cancelFn:X,requestAnimFrame:Y,cancelAnimFrame:z};function $(){}$.extend=function(c){var I=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=I.__super__=this.prototype,G=o(b);G.constructor=I,I.prototype=G;for(var V in this)Object.prototype.hasOwnProperty.call(this,V)&&V!=="prototype"&&V!=="__super__"&&(I[V]=this[V]);return c.statics&&r(I,c.statics),c.includes&&(oe(c.includes),r.apply(null,[G].concat(c.includes))),r(G,c),delete G.statics,delete G.includes,G.options&&(G.options=b.options?o(b.options):{},r(G.options,c.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,D=G._initHooks.length;x<D;x++)G._initHooks[x].call(this)}},I},$.include=function(c){var I=this.prototype.options;return r(this.prototype,c),c.options&&(this.prototype.options=I,this.mergeOptions(c.options)),this},$.mergeOptions=function(c){return r(this.prototype.options,c),this},$.addInitHook=function(c){var I=Array.prototype.slice.call(arguments,1),b=typeof c=="function"?c:function(){this[c].apply(this,I)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function oe(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=Z(c)?c:[c];for(var I=0;I<c.length;I++)c[I]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(c,I,b){if(typeof c=="object")for(var G in c)this._on(G,c[G],I);else{c=A(c);for(var V=0,x=c.length;V<x;V++)this._on(c[V],I,b)}return this},off:function(c,I,b){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var G in c)this._off(G,c[G],I);else{c=A(c);for(var V=arguments.length===1,x=0,D=c.length;x<D;x++)V?this._off(c[x]):this._off(c[x],I,b)}return this},_on:function(c,I,b,G){if(typeof I!="function"){console.warn("wrong listener type: "+typeof I);return}if(this._listens(c,I,b)===!1){b===this&&(b=void 0);var V={fn:I,ctx:b};G&&(V.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(V)}},_off:function(c,I,b){var G,V,x;if(this._events&&(G=this._events[c],!!G)){if(arguments.length===1){if(this._firingCount)for(V=0,x=G.length;V<x;V++)G[V].fn=d;delete this._events[c];return}if(typeof I!="function"){console.warn("wrong listener type: "+typeof I);return}var D=this._listens(c,I,b);if(D!==!1){var re=G[D];this._firingCount&&(re.fn=d,this._events[c]=G=G.slice()),G.splice(D,1)}}},fire:function(c,I,b){if(!this.listens(c,b))return this;var G=r({},I,{type:c,target:this,sourceTarget:I&&I.sourceTarget||this});if(this._events){var V=this._events[c];if(V){this._firingCount=this._firingCount+1||1;for(var x=0,D=V.length;x<D;x++){var re=V[x],ce=re.fn;re.once&&this.off(c,ce,re.ctx),ce.call(re.ctx||this,G)}this._firingCount--}}return b&&this._propagateEvent(G),this},listens:function(c,I,b,G){typeof c!="string"&&console.warn('"string" type argument expected');var V=I;typeof I!="function"&&(G=!!I,V=void 0,b=void 0);var x=this._events&&this._events[c];if(x&&x.length&&this._listens(c,V,b)!==!1)return!0;if(G){for(var D in this._eventParents)if(this._eventParents[D].listens(c,I,b,G))return!0}return!1},_listens:function(c,I,b){if(!this._events)return!1;var G=this._events[c]||[];if(!I)return!!G.length;b===this&&(b=void 0);for(var V=0,x=G.length;V<x;V++)if(G[V].fn===I&&G[V].ctx===b)return V;return!1},once:function(c,I,b){if(typeof c=="object")for(var G in c)this._on(G,c[G],I,!0);else{c=A(c);for(var V=0,x=c.length;V<x;V++)this._on(c[V],I,b,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[l(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[l(c)],this},_propagateEvent:function(c){for(var I in this._eventParents)this._eventParents[I].fire(c.type,r({layer:c.target,propagatedFrom:c.target},c),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var K=$.extend(q);function _(c,I,b){this.x=b?Math.round(c):c,this.y=b?Math.round(I):I}var de=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};_.prototype={clone:function(){return new _(this.x,this.y)},add:function(c){return this.clone()._add(ne(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(ne(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new _(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new _(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(c){c=ne(c);var I=c.x-this.x,b=c.y-this.y;return Math.sqrt(I*I+b*b)},equals:function(c){return c=ne(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=ne(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function ne(c,I,b){return c instanceof _?c:Z(c)?new _(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new _(c.x,c.y):new _(c,I,b)}function se(c,I){if(c)for(var b=I?[c,I]:c,G=0,V=b.length;G<V;G++)this.extend(b[G])}se.prototype={extend:function(c){var I,b;if(!c)return this;if(c instanceof _||typeof c[0]=="number"||"x"in c)I=b=ne(c);else if(c=E(c),I=c.min,b=c.max,!I||!b)return this;return!this.min&&!this.max?(this.min=I.clone(),this.max=b.clone()):(this.min.x=Math.min(I.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(I.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(c){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var I,b;return typeof c[0]=="number"||c instanceof _?c=ne(c):c=E(c),c instanceof se?(I=c.min,b=c.max):I=b=c,I.x>=this.min.x&&b.x<=this.max.x&&I.y>=this.min.y&&b.y<=this.max.y},intersects:function(c){c=E(c);var I=this.min,b=this.max,G=c.min,V=c.max,x=V.x>=I.x&&G.x<=b.x,D=V.y>=I.y&&G.y<=b.y;return x&&D},overlaps:function(c){c=E(c);var I=this.min,b=this.max,G=c.min,V=c.max,x=V.x>I.x&&G.x<b.x,D=V.y>I.y&&G.y<b.y;return x&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var I=this.min,b=this.max,G=Math.abs(I.x-b.x)*c,V=Math.abs(I.y-b.y)*c;return E(ne(I.x-G,I.y-V),ne(b.x+G,b.y+V))},equals:function(c){return c?(c=E(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function E(c,I){return!c||c instanceof se?c:new se(c,I)}function M(c,I){if(c)for(var b=I?[c,I]:c,G=0,V=b.length;G<V;G++)this.extend(b[G])}M.prototype={extend:function(c){var I=this._southWest,b=this._northEast,G,V;if(c instanceof U)G=c,V=c;else if(c instanceof M){if(G=c._southWest,V=c._northEast,!G||!V)return this}else return c?this.extend(H(c)||T(c)):this;return!I&&!b?(this._southWest=new U(G.lat,G.lng),this._northEast=new U(V.lat,V.lng)):(I.lat=Math.min(G.lat,I.lat),I.lng=Math.min(G.lng,I.lng),b.lat=Math.max(V.lat,b.lat),b.lng=Math.max(V.lng,b.lng)),this},pad:function(c){var I=this._southWest,b=this._northEast,G=Math.abs(I.lat-b.lat)*c,V=Math.abs(I.lng-b.lng)*c;return new M(new U(I.lat-G,I.lng-V),new U(b.lat+G,b.lng+V))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof U||"lat"in c?c=H(c):c=T(c);var I=this._southWest,b=this._northEast,G,V;return c instanceof M?(G=c.getSouthWest(),V=c.getNorthEast()):G=V=c,G.lat>=I.lat&&V.lat<=b.lat&&G.lng>=I.lng&&V.lng<=b.lng},intersects:function(c){c=T(c);var I=this._southWest,b=this._northEast,G=c.getSouthWest(),V=c.getNorthEast(),x=V.lat>=I.lat&&G.lat<=b.lat,D=V.lng>=I.lng&&G.lng<=b.lng;return x&&D},overlaps:function(c){c=T(c);var I=this._southWest,b=this._northEast,G=c.getSouthWest(),V=c.getNorthEast(),x=V.lat>I.lat&&G.lat<b.lat,D=V.lng>I.lng&&G.lng<b.lng;return x&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,I){return c?(c=T(c),this._southWest.equals(c.getSouthWest(),I)&&this._northEast.equals(c.getNorthEast(),I)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function T(c,I){return c instanceof M?c:new M(c,I)}function U(c,I,b){if(isNaN(c)||isNaN(I))throw new Error("Invalid LatLng object: ("+c+", "+I+")");this.lat=+c,this.lng=+I,b!==void 0&&(this.alt=+b)}U.prototype={equals:function(c,I){if(!c)return!1;c=H(c);var b=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return b<=(I===void 0?1e-9:I)},toString:function(c){return"LatLng("+h(this.lat,c)+", "+h(this.lng,c)+")"},distanceTo:function(c){return Ae.distance(this,H(c))},wrap:function(){return Ae.wrapLatLng(this)},toBounds:function(c){var I=180*c/40075017,b=I/Math.cos(Math.PI/180*this.lat);return T([this.lat-I,this.lng-b],[this.lat+I,this.lng+b])},clone:function(){return new U(this.lat,this.lng,this.alt)}};function H(c,I,b){return c instanceof U?c:Z(c)&&typeof c[0]!="object"?c.length===3?new U(c[0],c[1],c[2]):c.length===2?new U(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new U(c.lat,"lng"in c?c.lng:c.lon,c.alt):I===void 0?null:new U(c,I,b)}var ie={latLngToPoint:function(c,I){var b=this.projection.project(c),G=this.scale(I);return this.transformation._transform(b,G)},pointToLatLng:function(c,I){var b=this.scale(I),G=this.transformation.untransform(c,b);return this.projection.unproject(G)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var I=this.projection.bounds,b=this.scale(c),G=this.transformation.transform(I.min,b),V=this.transformation.transform(I.max,b);return new se(G,V)},infinite:!1,wrapLatLng:function(c){var I=this.wrapLng?u(c.lng,this.wrapLng,!0):c.lng,b=this.wrapLat?u(c.lat,this.wrapLat,!0):c.lat,G=c.alt;return new U(b,I,G)},wrapLatLngBounds:function(c){var I=c.getCenter(),b=this.wrapLatLng(I),G=I.lat-b.lat,V=I.lng-b.lng;if(G===0&&V===0)return c;var x=c.getSouthWest(),D=c.getNorthEast(),re=new U(x.lat-G,x.lng-V),ce=new U(D.lat-G,D.lng-V);return new M(re,ce)}},Ae=r({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(c,I){var b=Math.PI/180,G=c.lat*b,V=I.lat*b,x=Math.sin((I.lat-c.lat)*b/2),D=Math.sin((I.lng-c.lng)*b/2),re=x*x+Math.cos(G)*Math.cos(V)*D*D,ce=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*ce}}),Ie=6378137,xe={R:Ie,MAX_LATITUDE:85.0511287798,project:function(c){var I=Math.PI/180,b=this.MAX_LATITUDE,G=Math.max(Math.min(b,c.lat),-b),V=Math.sin(G*I);return new _(this.R*c.lng*I,this.R*Math.log((1+V)/(1-V))/2)},unproject:function(c){var I=180/Math.PI;return new U((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*I,c.x*I/this.R)},bounds:function(){var c=Ie*Math.PI;return new se([-c,-c],[c,c])}()};function Xe(c,I,b,G){if(Z(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=I,this._c=b,this._d=G}Xe.prototype={transform:function(c,I){return this._transform(c.clone(),I)},_transform:function(c,I){return I=I||1,c.x=I*(this._a*c.x+this._b),c.y=I*(this._c*c.y+this._d),c},untransform:function(c,I){return I=I||1,new _((c.x/I-this._b)/this._a,(c.y/I-this._d)/this._c)}};function Je(c,I,b,G){return new Xe(c,I,b,G)}var Ne=r({},Ae,{code:"EPSG:3857",projection:xe,transformation:function(){var c=.5/(Math.PI*xe.R);return Je(c,.5,-c,.5)}()}),et=r({},Ne,{code:"EPSG:900913"});function he(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Be(c,I){var b="",G,V,x,D,re,ce;for(G=0,x=c.length;G<x;G++){for(re=c[G],V=0,D=re.length;V<D;V++)ce=re[V],b+=(V?"L":"M")+ce.x+" "+ce.y;b+=I?Ue.svg?"z":"x":""}return b||"M0 0"}var Ge=document.documentElement.style,Me="ActiveXObject"in window,Oe=Me&&!document.addEventListener,Ye="msLaunchUri"in navigator&&!("documentMode"in document),Ct=bi("webkit"),j=bi("android"),be=bi("android 2")||bi("android 3"),Ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),We=j&&bi("Google")&&Ce<537&&!("AudioNode"in window),je=!!window.opera,tt=!Ye&&bi("chrome"),ft=bi("gecko")&&!Ct&&!je&&!Me,ut=!tt&&bi("safari"),Yn=bi("phantom"),gi="OTransition"in Ge,ci=navigator.platform.indexOf("Win")===0,ui=Me&&"transition"in Ge,di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!be,te="MozPerspective"in Ge,O=!window.L_DISABLE_3D&&(ui||di||te)&&!gi&&!Yn,me=typeof orientation<"u"||bi("mobile"),we=me&&Ct,ke=me&&di,He=!window.PointerEvent&&window.MSPointerEvent,pe=!!(window.PointerEvent||He),Ee="ontouchstart"in window||!!window.TouchEvent,ze=!window.L_NO_TOUCH&&(Ee||pe),ve=me&&je,st=me&&ft,Ht=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tn=function(){var c=!1;try{var I=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",d,I),window.removeEventListener("testPassiveEventSupport",d,I)}catch{}return c}(),cn=function(){return!!document.createElement("canvas").getContext}(),nn=!!(document.createElementNS&&he("svg").createSVGRect),Kn=!!nn&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rr=!nn&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var I=c.firstChild;return I.style.behavior="url(#default#VML)",I&&typeof I.adj=="object"}catch{return!1}}(),eo=navigator.platform.indexOf("Mac")===0,to=navigator.platform.indexOf("Linux")===0;function bi(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Ue={ie:Me,ielt9:Oe,edge:Ye,webkit:Ct,android:j,android23:be,androidStock:We,opera:je,chrome:tt,gecko:ft,safari:ut,phantom:Yn,opera12:gi,win:ci,ie3d:ui,webkit3d:di,gecko3d:te,any3d:O,mobile:me,mobileWebkit:we,mobileWebkit3d:ke,msPointer:He,pointer:pe,touch:ze,touchNative:Ee,mobileOpera:ve,mobileGecko:st,retina:Ht,passiveEvents:tn,canvas:cn,svg:nn,vml:Rr,inlineSvg:Kn,mac:eo,linux:to},no=Ue.msPointer?"MSPointerDown":"pointerdown",qs=Ue.msPointer?"MSPointerMove":"pointermove",kg=Ue.msPointer?"MSPointerUp":"pointerup",Vg=Ue.msPointer?"MSPointerCancel":"pointercancel",tl={touchstart:no,touchmove:qs,touchend:kg,touchcancel:Vg},wg={touchstart:il,touchmove:ta,touchend:ta,touchcancel:ta},Wi={},ea=!1;function bu(c,I,b){return I==="touchstart"&&ls(),wg[I]?(b=wg[I].bind(this,b),c.addEventListener(tl[I],b,!1),b):(console.warn("wrong event specified:",I),d)}function yu(c,I,b){if(!tl[I]){console.warn("wrong event specified:",I);return}c.removeEventListener(tl[I],b,!1)}function nl(c){Wi[c.pointerId]=c}function vu(c){Wi[c.pointerId]&&(Wi[c.pointerId]=c)}function Wg(c){delete Wi[c.pointerId]}function ls(){ea||(document.addEventListener(no,nl,!0),document.addEventListener(qs,vu,!0),document.addEventListener(kg,Wg,!0),document.addEventListener(Vg,Wg,!0),ea=!0)}function ta(c,I){if(I.pointerType!==(I.MSPOINTER_TYPE_MOUSE||"mouse")){I.touches=[];for(var b in Wi)I.touches.push(Wi[b]);I.changedTouches=[I],c(I)}}function il(c,I){I.MSPOINTER_TYPE_TOUCH&&I.pointerType===I.MSPOINTER_TYPE_TOUCH&&ii(I),ta(c,I)}function Mo(c){var I={},b,G;for(G in c)b=c[G],I[G]=b&&b.bind?b.bind(c):b;return c=I,I.type="dblclick",I.detail=2,I.isTrusted=!1,I._simulated=!0,I}var It=200;function Su(c,I){c.addEventListener("dblclick",I);var b=0,G;function V(x){if(x.detail!==1){G=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var D=sC(x);if(!(D.some(function(ce){return ce instanceof HTMLLabelElement&&ce.attributes.for})&&!D.some(function(ce){return ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement}))){var re=Date.now();re-b<=It?(G++,G===2&&I(Mo(x))):G=1,b=re}}}return c.addEventListener("click",V),{dblclick:I,simDblclick:V}}function Um(c,I){c.removeEventListener("dblclick",I.dblclick),c.removeEventListener("click",I.simDblclick)}var UI=Gu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xg=Gu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jm=xg==="webkitTransition"||xg==="OTransition"?xg+"End":"transitionend";function jI(c){return typeof c=="string"?document.getElementById(c):c}function Xg(c,I){var b=c.style[I]||c.currentStyle&&c.currentStyle[I];if((!b||b==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(c,null);b=G?G[I]:null}return b==="auto"?null:b}function Xt(c,I,b){var G=document.createElement(c);return G.className=I||"",b&&b.appendChild(G),G}function pn(c){var I=c.parentNode;I&&I.removeChild(c)}function Zu(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function rl(c){var I=c.parentNode;I&&I.lastChild!==c&&I.appendChild(c)}function ol(c){var I=c.parentNode;I&&I.firstChild!==c&&I.insertBefore(c,I.firstChild)}function OI(c,I){if(c.classList!==void 0)return c.classList.contains(I);var b=na(c);return b.length>0&&new RegExp("(^|\\s)"+I+"(\\s|$)").test(b)}function pt(c,I){if(c.classList!==void 0)for(var b=A(I),G=0,V=b.length;G<V;G++)c.classList.add(b[G]);else if(!OI(c,I)){var x=na(c);QI(c,(x?x+" ":"")+I)}}function Wn(c,I){c.classList!==void 0?c.classList.remove(I):QI(c,f((" "+na(c)+" ").replace(" "+I+" "," ")))}function QI(c,I){c.className.baseVal===void 0?c.className=I:c.className.baseVal=I}function na(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function xi(c,I){"opacity"in c.style?c.style.opacity=I:"filter"in c.style&&ES(c,I)}function ES(c,I){var b=!1,G="DXImageTransform.Microsoft.Alpha";try{b=c.filters.item(G)}catch{if(I===1)return}I=Math.round(I*100),b?(b.Enabled=I!==100,b.Opacity=I):c.style.filter+=" progid:"+G+"(opacity="+I+")"}function Gu(c){for(var I=document.documentElement.style,b=0;b<c.length;b++)if(c[b]in I)return c[b];return!1}function gs(c,I,b){var G=I||new _(0,0);c.style[UI]=(Ue.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(b?" scale("+b+")":"")}function Fn(c,I){c._leaflet_pos=I,Ue.any3d?gs(c,I):(c.style.left=I.x+"px",c.style.top=I.y+"px")}function ia(c){return c._leaflet_pos||new _(0,0)}var Jg,sl,$I;if("onselectstart"in document)Jg=function(){ht(window,"selectstart",ii)},sl=function(){zt(window,"selectstart",ii)};else{var Eg=Gu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jg=function(){if(Eg){var c=document.documentElement.style;$I=c[Eg],c[Eg]="none"}},sl=function(){Eg&&(document.documentElement.style[Eg]=$I,$I=void 0)}}function qI(){ht(window,"dragstart",ii)}function Hg(){zt(window,"dragstart",ii)}var Bu,eC;function tC(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(ra(),Bu=c,eC=c.style.outlineStyle,c.style.outlineStyle="none",ht(window,"keydown",ra))}function ra(){Bu&&(Bu.style.outlineStyle=eC,Bu=void 0,eC=void 0,zt(window,"keydown",ra))}function Ru(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Ng(c){var I=c.getBoundingClientRect();return{x:I.width/c.offsetWidth||1,y:I.height/c.offsetHeight||1,boundingClientRect:I}}var nC={__proto__:null,TRANSFORM:UI,TRANSITION:xg,TRANSITION_END:jm,get:jI,getStyle:Xg,create:Xt,remove:pn,empty:Zu,toFront:rl,toBack:ol,hasClass:OI,addClass:pt,removeClass:Wn,setClass:QI,getClass:na,setOpacity:xi,testProp:Gu,setTransform:gs,setPosition:Fn,getPosition:ia,get disableTextSelection(){return Jg},get enableTextSelection(){return sl},disableImageDrag:qI,enableImageDrag:Hg,preventOutline:tC,restoreOutline:ra,getSizedParentNode:Ru,getScale:Ng};function ht(c,I,b,G){if(I&&typeof I=="object")for(var V in I)oa(c,V,I[V],b);else{I=A(I);for(var x=0,D=I.length;x<D;x++)oa(c,I[x],b,G)}return this}var kr="_leaflet_events";function zt(c,I,b,G){if(arguments.length===1)iC(c),delete c[kr];else if(I&&typeof I=="object")for(var V in I)rC(c,V,I[V],b);else if(I=A(I),arguments.length===2)iC(c,function(re){return R(I,re)!==-1});else for(var x=0,D=I.length;x<D;x++)rC(c,I[x],b,G);return this}function iC(c,I){for(var b in c[kr]){var G=b.split(/\d/)[0];(!I||I(G))&&rC(c,G,null,null,b)}}var To={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function oa(c,I,b,G){var V=I+l(b)+(G?"_"+l(G):"");if(c[kr]&&c[kr][V])return this;var x=function(re){return b.call(G||c,re||window.event)},D=x;!Ue.touchNative&&Ue.pointer&&I.indexOf("touch")===0?x=bu(c,I,x):Ue.touch&&I==="dblclick"?x=Su(c,x):"addEventListener"in c?I==="touchstart"||I==="touchmove"||I==="wheel"||I==="mousewheel"?c.addEventListener(To[I]||I,x,Ue.passiveEvents?{passive:!1}:!1):I==="mouseenter"||I==="mouseleave"?(x=function(re){re=re||window.event,le(c,re)&&D(re)},c.addEventListener(To[I],x,!1)):c.addEventListener(I,D,!1):c.attachEvent("on"+I,x),c[kr]=c[kr]||{},c[kr][V]=x}function rC(c,I,b,G,V){V=V||I+l(b)+(G?"_"+l(G):"");var x=c[kr]&&c[kr][V];if(!x)return this;!Ue.touchNative&&Ue.pointer&&I.indexOf("touch")===0?yu(c,I,x):Ue.touch&&I==="dblclick"?Um(c,x):"removeEventListener"in c?c.removeEventListener(To[I]||I,x,!1):c.detachEvent("on"+I,x),c[kr][V]=null}function cs(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function oC(c){return oa(c,"wheel",cs),this}function al(c){return ht(c,"mousedown touchstart dblclick contextmenu",cs),c._leaflet_disable_click=!0,this}function ii(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function sa(c){return ii(c),cs(c),this}function sC(c){if(c.composedPath)return c.composedPath();for(var I=[],b=c.target;b;)I.push(b),b=b.parentNode;return I}function Om(c,I){if(!I)return new _(c.clientX,c.clientY);var b=Ng(I),G=b.boundingClientRect;return new _((c.clientX-G.left)/b.x-I.clientLeft,(c.clientY-G.top)/b.y-I.clientTop)}var N=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Q(c){return Ue.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/N:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function le(c,I){var b=I.relatedTarget;if(!b)return!0;try{for(;b&&b!==c;)b=b.parentNode}catch{return!1}return b!==c}var Le={__proto__:null,on:ht,off:zt,stopPropagation:cs,disableScrollPropagation:oC,disableClickPropagation:al,preventDefault:ii,stop:sa,getPropagationPath:sC,getMousePosition:Om,getWheelDelta:Q,isExternalTarget:le,addListener:ht,removeListener:zt},Rt=K.extend({run:function(c,I,b,G){this.stop(),this._el=c,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=ia(c),this._offset=I.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(c){var I=+new Date-this._startTime,b=this._duration*1e3;I<b?this._runFrame(this._easeOut(I/b),c):(this._runFrame(1),this._complete())},_runFrame:function(c,I){var b=this._startPos.add(this._offset.multiplyBy(c));I&&b._round(),Fn(this._el,b),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Pe=K.extend({options:{crs:Ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,I){I=p(this,I),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),I.maxBounds&&this.setMaxBounds(I.maxBounds),I.zoom!==void 0&&(this._zoom=this._limitZoom(I.zoom)),I.center&&I.zoom!==void 0&&this.setView(H(I.center),I.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xg&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,jm,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,I,b){if(I=I===void 0?this._zoom:this._limitZoom(I),c=this._limitCenter(H(c),I,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=r({animate:b.animate},b.zoom),b.pan=r({animate:b.animate,duration:b.duration},b.pan));var G=this._zoom!==I?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,I,b.zoom):this._tryAnimatedPan(c,b.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(c,I,b.pan&&b.pan.noMoveStart),this},setZoom:function(c,I){return this._loaded?this.setView(this.getCenter(),c,{zoom:I}):(this._zoom=c,this)},zoomIn:function(c,I){return c=c||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,I)},zoomOut:function(c,I){return c=c||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,I)},setZoomAround:function(c,I,b){var G=this.getZoomScale(I),V=this.getSize().divideBy(2),x=c instanceof _?c:this.latLngToContainerPoint(c),D=x.subtract(V).multiplyBy(1-1/G),re=this.containerPointToLatLng(V.add(D));return this.setView(re,I,{zoom:b})},_getBoundsCenterZoom:function(c,I){I=I||{},c=c.getBounds?c.getBounds():T(c);var b=ne(I.paddingTopLeft||I.padding||[0,0]),G=ne(I.paddingBottomRight||I.padding||[0,0]),V=this.getBoundsZoom(c,!1,b.add(G));if(V=typeof I.maxZoom=="number"?Math.min(I.maxZoom,V):V,V===1/0)return{center:c.getCenter(),zoom:V};var x=G.subtract(b).divideBy(2),D=this.project(c.getSouthWest(),V),re=this.project(c.getNorthEast(),V),ce=this.unproject(D.add(re).divideBy(2).add(x),V);return{center:ce,zoom:V}},fitBounds:function(c,I){if(c=T(c),!c.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(c,I);return this.setView(b.center,b.zoom,I)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,I){return this.setView(c,this._zoom,{pan:I})},panBy:function(c,I){if(c=ne(c).round(),I=I||{},!c.x&&!c.y)return this.fire("moveend");if(I.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Rt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),I.noMoveStart||this.fire("movestart"),I.animate!==!1){pt(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,b,I.duration||.25,I.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,I,b){if(b=b||{},b.animate===!1||!Ue.any3d)return this.setView(c,I,b);this._stop();var G=this.project(this.getCenter()),V=this.project(c),x=this.getSize(),D=this._zoom;c=H(c),I=I===void 0?D:I;var re=Math.max(x.x,x.y),ce=re*this.getZoomScale(D,I),ye=V.distanceTo(G)||1,Te=1.42,at=Te*Te;function Zt(On){var gp=On?-1:1,I8=On?ce:re,C8=ce*ce-re*re+gp*at*at*ye*ye,h8=2*I8*at*ye,KS=C8/h8,fx=Math.sqrt(KS*KS+1)-KS,f8=fx<1e-9?-18:Math.log(fx);return f8}function Pi(On){return(Math.exp(On)-Math.exp(-On))/2}function Ii(On){return(Math.exp(On)+Math.exp(-On))/2}function ro(On){return Pi(On)/Ii(On)}var sr=Zt(0);function Ju(On){return re*(Ii(sr)/Ii(sr+Te*On))}function g8(On){return re*(Ii(sr)*ro(sr+Te*On)-Pi(sr))/at}function c8(On){return 1-Math.pow(1-On,1.5)}var u8=Date.now(),Cx=(Zt(1)-sr)/Te,d8=b.duration?1e3*b.duration:1e3*Cx*.8;function hx(){var On=(Date.now()-u8)/d8,gp=c8(On)*Cx;On<=1?(this._flyToFrame=Y(hx,this),this._move(this.unproject(G.add(V.subtract(G).multiplyBy(g8(gp)/ye)),D),this.getScaleZoom(re/Ju(gp),D),{flyTo:!0})):this._move(c,I)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),hx.call(this),this},flyToBounds:function(c,I){var b=this._getBoundsCenterZoom(c,I);return this.flyTo(b.center,b.zoom,I)},setMaxBounds:function(c){return c=T(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var I=this.options.minZoom;return this.options.minZoom=c,this._loaded&&I!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var I=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&I!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,I){this._enforcingBounds=!0;var b=this.getCenter(),G=this._limitCenter(b,this._zoom,T(c));return b.equals(G)||this.panTo(G,I),this._enforcingBounds=!1,this},panInside:function(c,I){I=I||{};var b=ne(I.paddingTopLeft||I.padding||[0,0]),G=ne(I.paddingBottomRight||I.padding||[0,0]),V=this.project(this.getCenter()),x=this.project(c),D=this.getPixelBounds(),re=E([D.min.add(b),D.max.subtract(G)]),ce=re.getSize();if(!re.contains(x)){this._enforcingBounds=!0;var ye=x.subtract(re.getCenter()),Te=re.extend(x).getSize().subtract(ce);V.x+=ye.x<0?-Te.x:Te.x,V.y+=ye.y<0?-Te.y:Te.y,this.panTo(this.unproject(V),I),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=r({animate:!1,pan:!0},c===!0?{animate:!0}:c);var I=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),G=I.divideBy(2).round(),V=b.divideBy(2).round(),x=G.subtract(V);return!x.x&&!x.y?this:(c.animate&&c.pan?this.panBy(x):(c.pan&&this._rawPanBy(x),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:I,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=r({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var I=s(this._handleGeolocationResponse,this),b=s(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(I,b,c):navigator.geolocation.getCurrentPosition(I,b,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var I=c.code,b=c.message||(I===1?"permission denied":I===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:I,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var I=c.coords.latitude,b=c.coords.longitude,G=new U(I,b),V=G.toBounds(c.coords.accuracy*2),x=this._locateOptions;if(x.setView){var D=this.getBoundsZoom(V);this.setView(G,x.maxZoom?Math.min(D,x.maxZoom):D)}var re={latlng:G,bounds:V,timestamp:c.timestamp};for(var ce in c.coords)typeof c.coords[ce]=="number"&&(re[ce]=c.coords[ce]);this.fire("locationfound",re)}},addHandler:function(c,I){if(!I)return this;var b=this[c]=new I(this);return this._handlers.push(b),this.options[c]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)pn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,I){var b="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),G=Xt("div",b,I||this._mapPane);return c&&(this._panes[c]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),I=this.unproject(c.getBottomLeft()),b=this.unproject(c.getTopRight());return new M(I,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,I,b){c=T(c),b=ne(b||[0,0]);var G=this.getZoom()||0,V=this.getMinZoom(),x=this.getMaxZoom(),D=c.getNorthWest(),re=c.getSouthEast(),ce=this.getSize().subtract(b),ye=E(this.project(re,G),this.project(D,G)).getSize(),Te=Ue.any3d?this.options.zoomSnap:1,at=ce.x/ye.x,Zt=ce.y/ye.y,Pi=I?Math.max(at,Zt):Math.min(at,Zt);return G=this.getScaleZoom(Pi,G),Te&&(G=Math.round(G/(Te/100))*(Te/100),G=I?Math.ceil(G/Te)*Te:Math.floor(G/Te)*Te),Math.max(V,Math.min(x,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new _(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,I){var b=this._getTopLeftPoint(c,I);return new se(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,I){var b=this.options.crs;return I=I===void 0?this._zoom:I,b.scale(c)/b.scale(I)},getScaleZoom:function(c,I){var b=this.options.crs;I=I===void 0?this._zoom:I;var G=b.zoom(c*b.scale(I));return isNaN(G)?1/0:G},project:function(c,I){return I=I===void 0?this._zoom:I,this.options.crs.latLngToPoint(H(c),I)},unproject:function(c,I){return I=I===void 0?this._zoom:I,this.options.crs.pointToLatLng(ne(c),I)},layerPointToLatLng:function(c){var I=ne(c).add(this.getPixelOrigin());return this.unproject(I)},latLngToLayerPoint:function(c){var I=this.project(H(c))._round();return I._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(H(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(T(c))},distance:function(c,I){return this.options.crs.distance(H(c),H(I))},containerPointToLayerPoint:function(c){return ne(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return ne(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var I=this.containerPointToLayerPoint(ne(c));return this.layerPointToLatLng(I)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(H(c)))},mouseEventToContainerPoint:function(c){return Om(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var I=this._container=jI(c);if(I){if(I._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(I,"scroll",this._onScroll,this),this._containerId=l(I)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,pt(c,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var I=Xg(c,"position");I!=="absolute"&&I!=="relative"&&I!=="fixed"&&I!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fn(this._mapPane,new _(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(c.markerPane,"leaflet-zoom-hide"),pt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,I,b){Fn(this._mapPane,new _(0,0));var G=!this._loaded;this._loaded=!0,I=this._limitZoom(I),this.fire("viewprereset");var V=this._zoom!==I;this._moveStart(V,b)._move(c,I)._moveEnd(V),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(c,I){return c&&this.fire("zoomstart"),I||this.fire("movestart"),this},_move:function(c,I,b,G){I===void 0&&(I=this._zoom);var V=this._zoom!==I;return this._zoom=I,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),G?b&&b.pinch&&this.fire("zoom",b):((V||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Fn(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[l(this._container)]=this;var I=c?zt:ht;I(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&I(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,I){for(var b=[],G,V=I==="mouseout"||I==="mouseover",x=c.target||c.srcElement,D=!1;x;){if(G=this._targets[l(x)],G&&(I==="click"||I==="preclick")&&this._draggableMoved(G)){D=!0;break}if(G&&G.listens(I,!0)&&(V&&!le(x,c)||(b.push(G),V))||x===this._container)break;x=x.parentNode}return!b.length&&!D&&!V&&this.listens(I,!0)&&(b=[this]),b},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var I=c.target||c.srcElement;if(!(!this._loaded||I._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(I))){var b=c.type;b==="mousedown"&&tC(I),this._fireDOMEvent(c,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,I,b){if(c.type==="click"){var G=r({},c);G.type="preclick",this._fireDOMEvent(G,G.type,b)}var V=this._findEventTargets(c,I);if(b){for(var x=[],D=0;D<b.length;D++)b[D].listens(I,!0)&&x.push(b[D]);V=x.concat(V)}if(V.length){I==="contextmenu"&&ii(c);var re=V[0],ce={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var ye=re.getLatLng&&(!re._radius||re._radius<=10);ce.containerPoint=ye?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(c),ce.layerPoint=this.containerPointToLayerPoint(ce.containerPoint),ce.latlng=ye?re.getLatLng():this.layerPointToLatLng(ce.layerPoint)}for(D=0;D<V.length;D++)if(V[D].fire(I,ce,!0),ce.originalEvent._stopped||V[D].options.bubblingMouseEvents===!1&&R(this._mouseEvents,I)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,I=this._handlers.length;c<I;c++)this._handlers[c].disable()},whenReady:function(c,I){return this._loaded?c.call(I||this,{target:this}):this.on("load",c,I),this},_getMapPanePos:function(){return ia(this._mapPane)||new _(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,I){var b=c&&I!==void 0?this._getNewPixelOrigin(c,I):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,I){var b=this.getSize()._divideBy(2);return this.project(c,I)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,I,b){var G=this._getNewPixelOrigin(b,I);return this.project(c,I)._subtract(G)},_latLngBoundsToNewLayerBounds:function(c,I,b){var G=this._getNewPixelOrigin(b,I);return E([this.project(c.getSouthWest(),I)._subtract(G),this.project(c.getNorthWest(),I)._subtract(G),this.project(c.getSouthEast(),I)._subtract(G),this.project(c.getNorthEast(),I)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,I,b){if(!b)return c;var G=this.project(c,I),V=this.getSize().divideBy(2),x=new se(G.subtract(V),G.add(V)),D=this._getBoundsOffset(x,b,I);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?c:this.unproject(G.add(D),I)},_limitOffset:function(c,I){if(!I)return c;var b=this.getPixelBounds(),G=new se(b.min.add(c),b.max.add(c));return c.add(this._getBoundsOffset(G,I))},_getBoundsOffset:function(c,I,b){var G=E(this.project(I.getNorthEast(),b),this.project(I.getSouthWest(),b)),V=G.min.subtract(c.min),x=G.max.subtract(c.max),D=this._rebound(V.x,-x.x),re=this._rebound(V.y,-x.y);return new _(D,re)},_rebound:function(c,I){return c+I>0?Math.round(c-I)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(I))},_limitZoom:function(c){var I=this.getMinZoom(),b=this.getMaxZoom(),G=Ue.any3d?this.options.zoomSnap:1;return G&&(c=Math.round(c/G)*G),Math.max(I,Math.min(b,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,I){var b=this._getCenterOffset(c)._trunc();return(I&&I.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,I),!0)},_createAnimProxy:function(){var c=this._proxy=Xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(I){var b=UI,G=this._proxy.style[b];gs(this._proxy,this.project(I.center,I.zoom),this.getZoomScale(I.zoom,1)),G===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),I=this.getZoom();gs(this._proxy,this.project(c,I),this.getZoomScale(I,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,I,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(I-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(I),V=this._getCenterOffset(c)._divideBy(1-1/G);return b.animate!==!0&&!this.getSize().contains(V)?!1:(Y(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(c,I,!0)},this),!0)},_animateZoom:function(c,I,b,G){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=I,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:I,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function un(c,I){return new Pe(c,I)}var dt=$.extend({options:{position:"topright"},initialize:function(c){p(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var I=this._map;return I&&I.removeControl(this),this.options.position=c,I&&I.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var I=this._container=this.onAdd(c),b=this.getPosition(),G=c._controlCorners[b];return pt(I,"leaflet-control"),b.indexOf("bottom")!==-1?G.insertBefore(I,G.firstChild):G.appendChild(I),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Pt=function(c){return new dt(c)};Pe.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},I="leaflet-",b=this._controlContainer=Xt("div",I+"control-container",this._container);function G(V,x){var D=I+V+" "+I+x;c[V+x]=Xt("div",D,b)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)pn(this._controlCorners[c]);pn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ki=dt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,I,b,G){return b<G?-1:G<b?1:0}},initialize:function(c,I,b){p(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in c)this._addLayer(c[G],G);for(G in I)this._addLayer(I[G],G,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var I=0;I<this._layers.length;I++)this._layers[I].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return dt.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,I){return this._addLayer(c,I),this._map?this._update():this},addOverlay:function(c,I){return this._addLayer(c,I,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var I=this._getLayer(l(c));return I&&this._layers.splice(this._layers.indexOf(I),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Wn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",I=this._container=Xt("div",c),b=this.options.collapsed;I.setAttribute("aria-haspopup",!0),al(I),oC(I);var G=this._section=Xt("section",c+"-list");b&&(this._map.on("click",this.collapse,this),ht(I,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var V=this._layersLink=Xt("a",c+"-toggle",I);V.href="#",V.title="Layers",V.setAttribute("role","button"),ht(V,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){ii(x),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=Xt("div",c+"-base",G),this._separator=Xt("div",c+"-separator",G),this._overlaysList=Xt("div",c+"-overlays",G),I.appendChild(G)},_getLayer:function(c){for(var I=0;I<this._layers.length;I++)if(this._layers[I]&&l(this._layers[I].layer)===c)return this._layers[I]},_addLayer:function(c,I,b){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:I,overlay:b}),this.options.sortLayers&&this._layers.sort(s(function(G,V){return this.options.sortFunction(G.layer,V.layer,G.name,V.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zu(this._baseLayersList),Zu(this._overlaysList),this._layerControlInputs=[];var c,I,b,G,V=0;for(b=0;b<this._layers.length;b++)G=this._layers[b],this._addItem(G),I=I||G.overlay,c=c||!G.overlay,V+=G.overlay?0:1;return this.options.hideSingleBase&&(c=c&&V>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=I&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var I=this._getLayer(l(c.target)),b=I.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;b&&this._map.fire(b,I)},_createRadioElement:function(c,I){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(I?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=b,G.firstChild},_addItem:function(c){var I=document.createElement("label"),b=this._map.hasLayer(c.layer),G;c.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=b):G=this._createRadioElement("leaflet-base-layers_"+l(this),b),this._layerControlInputs.push(G),G.layerId=l(c.layer),ht(G,"click",this._onInputClick,this);var V=document.createElement("span");V.innerHTML=" "+c.name;var x=document.createElement("span");I.appendChild(x),x.appendChild(G),x.appendChild(V);var D=c.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(I),this._checkDisabledLayers(),I},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,I,b,G=[],V=[];this._handlingClick=!0;for(var x=c.length-1;x>=0;x--)I=c[x],b=this._getLayer(I.layerId).layer,I.checked?G.push(b):I.checked||V.push(b);for(x=0;x<V.length;x++)this._map.hasLayer(V[x])&&this._map.removeLayer(V[x]);for(x=0;x<G.length;x++)this._map.hasLayer(G[x])||this._map.addLayer(G[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,I,b,G=this._map.getZoom(),V=c.length-1;V>=0;V--)I=c[V],b=this._getLayer(I.layerId).layer,I.disabled=b.options.minZoom!==void 0&&G<b.options.minZoom||b.options.maxZoom!==void 0&&G>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ht(c,"click",ii),this.expand();var I=this;setTimeout(function(){zt(c,"click",ii),I._preventClick=!1})}}),zi=function(c,I,b){return new Ki(c,I,b)},aa=dt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var I="leaflet-control-zoom",b=Xt("div",I+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,I+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,I+"-out",b,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,I,b,G,V){var x=Xt("a",b,G);return x.innerHTML=c,x.href="#",x.title=I,x.setAttribute("role","button"),x.setAttribute("aria-label",I),al(x),ht(x,"click",sa),ht(x,"click",V,this),ht(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var c=this._map,I="leaflet-disabled";Wn(this._zoomInButton,I),Wn(this._zoomOutButton,I),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(pt(this._zoomOutButton,I),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(pt(this._zoomInButton,I),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new aa,this.addControl(this.zoomControl))});var aC=function(c){return new aa(c)},ku=dt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var I="leaflet-control-scale",b=Xt("div",I),G=this.options;return this._addScales(G,I+"-line",b),c.on(G.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),b},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,I,b){c.metric&&(this._mScale=Xt("div",I,b)),c.imperial&&(this._iScale=Xt("div",I,b))},_update:function(){var c=this._map,I=c.getSize().y/2,b=c.distance(c.containerPointToLatLng([0,I]),c.containerPointToLatLng([this.options.maxWidth,I]));this._updateScales(b)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var I=this._getRoundNum(c),b=I<1e3?I+" m":I/1e3+" km";this._updateScale(this._mScale,b,I/c)},_updateImperial:function(c){var I=c*3.2808399,b,G,V;I>5280?(b=I/5280,G=this._getRoundNum(b),this._updateScale(this._iScale,G+" mi",G/b)):(V=this._getRoundNum(I),this._updateScale(this._iScale,V+" ft",V/I))},_updateScale:function(c,I,b){c.style.width=Math.round(this.options.maxWidth*b)+"px",c.innerHTML=I},_getRoundNum:function(c){var I=Math.pow(10,(Math.floor(c)+"").length-1),b=c/I;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,I*b}}),Qm=function(c){return new ku(c)},wQ='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',HS=dt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?wQ+" ":"")+"Leaflet</a>"},initialize:function(c){p(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Xt("div","leaflet-control-attribution"),al(this._container);for(var I in c._layers)c._layers[I].getAttribution&&this.addAttribution(c._layers[I].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var I in this._attributions)this._attributions[I]&&c.push(I);var b=[];this.options.prefix&&b.push(this.options.prefix),c.length&&b.push(c.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new HS().addTo(this)});var WQ=function(c){return new HS(c)};dt.Layers=Ki,dt.Zoom=aa,dt.Scale=ku,dt.Attribution=HS,Pt.layers=zi,Pt.zoom=aC,Pt.scale=Qm,Pt.attribution=WQ;var us=$.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});us.addTo=function(c,I){return c.addHandler(I,this),this};var xQ={Events:q},FW=Ue.touch?"touchstart mousedown":"mousedown",ll=K.extend({options:{clickTolerance:3},initialize:function(c,I,b,G){p(this,G),this._element=c,this._dragStartTarget=I||c,this._preventOutline=b},enable:function(){this._enabled||(ht(this._dragStartTarget,FW,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ll._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,FW,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!OI(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ll._dragging===this&&this.finishDrag();return}if(!(ll._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ll._dragging=this,this._preventOutline&&tC(this._element),qI(),Jg(),!this._moving)){this.fire("down");var I=c.touches?c.touches[0]:c,b=Ru(this._element);this._startPoint=new _(I.clientX,I.clientY),this._startPos=ia(this._element),this._parentScale=Ng(b);var G=c.type==="mousedown";ht(document,G?"mousemove":"touchmove",this._onMove,this),ht(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var I=c.touches&&c.touches.length===1?c.touches[0]:c,b=new _(I.clientX,I.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,ii(c),this._moved||(this.fire("dragstart"),this._moved=!0,pt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Fn(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Wn(document.body,"leaflet-dragging"),this._lastTarget&&(Wn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),Hg(),sl();var I=this._moved&&this._moving;this._moving=!1,ll._dragging=!1,I&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function MW(c,I,b){var G,V=[1,4,2,8],x,D,re,ce,ye,Te,at,Zt;for(x=0,Te=c.length;x<Te;x++)c[x]._code=Yg(c[x],I);for(re=0;re<4;re++){for(at=V[re],G=[],x=0,Te=c.length,D=Te-1;x<Te;D=x++)ce=c[x],ye=c[D],ce._code&at?ye._code&at||(Zt=$m(ye,ce,at,I,b),Zt._code=Yg(Zt,I),G.push(Zt)):(ye._code&at&&(Zt=$m(ye,ce,at,I,b),Zt._code=Yg(Zt,I),G.push(Zt)),G.push(ce));c=G}return c}function TW(c,I){var b,G,V,x,D,re,ce,ye,Te;if(!c||c.length===0)throw new Error("latlngs not passed");io(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var at=H([0,0]),Zt=T(c),Pi=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());Pi<1700&&(at=NS(c));var Ii=c.length,ro=[];for(b=0;b<Ii;b++){var sr=H(c[b]);ro.push(I.project(H([sr.lat-at.lat,sr.lng-at.lng])))}for(re=ce=ye=0,b=0,G=Ii-1;b<Ii;G=b++)V=ro[b],x=ro[G],D=V.y*x.x-x.y*V.x,ce+=(V.x+x.x)*D,ye+=(V.y+x.y)*D,re+=D*3;re===0?Te=ro[0]:Te=[ce/re,ye/re];var Ju=I.unproject(ne(Te));return H([Ju.lat+at.lat,Ju.lng+at.lng])}function NS(c){for(var I=0,b=0,G=0,V=0;V<c.length;V++){var x=H(c[V]);I+=x.lat,b+=x.lng,G++}return H([I/G,b/G])}var XQ={__proto__:null,clipPolygon:MW,polygonCenter:TW,centroid:NS};function LW(c,I){if(!I||!c.length)return c.slice();var b=I*I;return c=HQ(c,b),c=EQ(c,b),c}function _W(c,I,b){return Math.sqrt(lC(c,I,b,!0))}function JQ(c,I,b){return lC(c,I,b)}function EQ(c,I){var b=c.length,G=typeof Uint8Array!=void 0+""?Uint8Array:Array,V=new G(b);V[0]=V[b-1]=1,YS(c,V,I,0,b-1);var x,D=[];for(x=0;x<b;x++)V[x]&&D.push(c[x]);return D}function YS(c,I,b,G,V){var x=0,D,re,ce;for(re=G+1;re<=V-1;re++)ce=lC(c[re],c[G],c[V],!0),ce>x&&(D=re,x=ce);x>b&&(I[D]=1,YS(c,I,b,G,D),YS(c,I,b,D,V))}function HQ(c,I){for(var b=[c[0]],G=1,V=0,x=c.length;G<x;G++)NQ(c[G],c[V])>I&&(b.push(c[G]),V=G);return V<x-1&&b.push(c[x-1]),b}var DW;function KW(c,I,b,G,V){var x=G?DW:Yg(c,b),D=Yg(I,b),re,ce,ye;for(DW=D;;){if(!(x|D))return[c,I];if(x&D)return!1;re=x||D,ce=$m(c,I,re,b,V),ye=Yg(ce,b),re===x?(c=ce,x=ye):(I=ce,D=ye)}}function $m(c,I,b,G,V){var x=I.x-c.x,D=I.y-c.y,re=G.min,ce=G.max,ye,Te;return b&8?(ye=c.x+x*(ce.y-c.y)/D,Te=ce.y):b&4?(ye=c.x+x*(re.y-c.y)/D,Te=re.y):b&2?(ye=ce.x,Te=c.y+D*(ce.x-c.x)/x):b&1&&(ye=re.x,Te=c.y+D*(re.x-c.x)/x),new _(ye,Te,V)}function Yg(c,I){var b=0;return c.x<I.min.x?b|=1:c.x>I.max.x&&(b|=2),c.y<I.min.y?b|=4:c.y>I.max.y&&(b|=8),b}function NQ(c,I){var b=I.x-c.x,G=I.y-c.y;return b*b+G*G}function lC(c,I,b,G){var V=I.x,x=I.y,D=b.x-V,re=b.y-x,ce=D*D+re*re,ye;return ce>0&&(ye=((c.x-V)*D+(c.y-x)*re)/ce,ye>1?(V=b.x,x=b.y):ye>0&&(V+=D*ye,x+=re*ye)),D=c.x-V,re=c.y-x,G?D*D+re*re:new _(V,x)}function io(c){return!Z(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function zW(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),io(c)}function PW(c,I){var b,G,V,x,D,re,ce,ye;if(!c||c.length===0)throw new Error("latlngs not passed");io(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Te=H([0,0]),at=T(c),Zt=at.getNorthWest().distanceTo(at.getSouthWest())*at.getNorthEast().distanceTo(at.getNorthWest());Zt<1700&&(Te=NS(c));var Pi=c.length,Ii=[];for(b=0;b<Pi;b++){var ro=H(c[b]);Ii.push(I.project(H([ro.lat-Te.lat,ro.lng-Te.lng])))}for(b=0,G=0;b<Pi-1;b++)G+=Ii[b].distanceTo(Ii[b+1])/2;if(G===0)ye=Ii[0];else for(b=0,x=0;b<Pi-1;b++)if(D=Ii[b],re=Ii[b+1],V=D.distanceTo(re),x+=V,x>G){ce=(x-G)/V,ye=[re.x-ce*(re.x-D.x),re.y-ce*(re.y-D.y)];break}var sr=I.unproject(ne(ye));return H([sr.lat+Te.lat,sr.lng+Te.lng])}var YQ={__proto__:null,simplify:LW,pointToSegmentDistance:_W,closestPointOnSegment:JQ,clipSegment:KW,_getEdgeIntersection:$m,_getBitCode:Yg,_sqClosestPointOnSegment:lC,isFlat:io,_flat:zW,polylineCenter:PW},FS={project:function(c){return new _(c.lng,c.lat)},unproject:function(c){return new U(c.y,c.x)},bounds:new se([-180,-90],[180,90])},MS={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var I=Math.PI/180,b=this.R,G=c.lat*I,V=this.R_MINOR/b,x=Math.sqrt(1-V*V),D=x*Math.sin(G),re=Math.tan(Math.PI/4-G/2)/Math.pow((1-D)/(1+D),x/2);return G=-b*Math.log(Math.max(re,1e-10)),new _(c.lng*I*b,G)},unproject:function(c){for(var I=180/Math.PI,b=this.R,G=this.R_MINOR/b,V=Math.sqrt(1-G*G),x=Math.exp(-c.y/b),D=Math.PI/2-2*Math.atan(x),re=0,ce=.1,ye;re<15&&Math.abs(ce)>1e-7;re++)ye=V*Math.sin(D),ye=Math.pow((1-ye)/(1+ye),V/2),ce=Math.PI/2-2*Math.atan(x*ye)-D,D+=ce;return new U(D*I,c.x*I/b)}},FQ={__proto__:null,LonLat:FS,Mercator:MS,SphericalMercator:xe},MQ=r({},Ae,{code:"EPSG:3395",projection:MS,transformation:function(){var c=.5/(Math.PI*MS.R);return Je(c,.5,-c,.5)}()}),UW=r({},Ae,{code:"EPSG:4326",projection:FS,transformation:Je(1/180,1,-1/180,.5)}),TQ=r({},ie,{projection:FS,transformation:Je(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,I){var b=I.lng-c.lng,G=I.lat-c.lat;return Math.sqrt(b*b+G*G)},infinite:!0});ie.Earth=Ae,ie.EPSG3395=MQ,ie.EPSG3857=Ne,ie.EPSG900913=et,ie.EPSG4326=UW,ie.Simple=TQ;var Lo=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[l(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[l(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var I=c.target;if(I.hasLayer(this)){if(this._map=I,this._zoomAnimated=I._zoomAnimated,this.getEvents){var b=this.getEvents();I.on(b,this),this.once("remove",function(){I.off(b,this)},this)}this.onAdd(I),this.fire("add"),I.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var I=l(c);return this._layers[I]?this:(this._layers[I]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var I=l(c);return this._layers[I]?(this._loaded&&c.onRemove(this),delete this._layers[I],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return l(c)in this._layers},eachLayer:function(c,I){for(var b in this._layers)c.call(I,this._layers[b]);return this},_addLayers:function(c){c=c?Z(c)?c:[c]:[];for(var I=0,b=c.length;I<b;I++)this.addLayer(c[I])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[l(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var I=l(c);this._zoomBoundLayers[I]&&(delete this._zoomBoundLayers[I],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,I=-1/0,b=this._getZoomSpan();for(var G in this._zoomBoundLayers){var V=this._zoomBoundLayers[G].options;c=V.minZoom===void 0?c:Math.min(c,V.minZoom),I=V.maxZoom===void 0?I:Math.max(I,V.maxZoom)}this._layersMaxZoom=I===-1/0?void 0:I,this._layersMinZoom=c===1/0?void 0:c,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vu=Lo.extend({initialize:function(c,I){p(this,I),this._layers={};var b,G;if(c)for(b=0,G=c.length;b<G;b++)this.addLayer(c[b])},addLayer:function(c){var I=this.getLayerId(c);return this._layers[I]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var I=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[I]&&this._map.removeLayer(this._layers[I]),delete this._layers[I],this},hasLayer:function(c){var I=typeof c=="number"?c:this.getLayerId(c);return I in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var I=Array.prototype.slice.call(arguments,1),b,G;for(b in this._layers)G=this._layers[b],G[c]&&G[c].apply(G,I);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,I){for(var b in this._layers)c.call(I,this._layers[b]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return l(c)}}),LQ=function(c,I){return new Vu(c,I)},la=Vu.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Vu.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Vu.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new M;for(var I in this._layers){var b=this._layers[I];c.extend(b.getBounds?b.getBounds():b.getLatLng())}return c}}),_Q=function(c,I){return new la(c,I)},wu=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){p(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,I){var b=this._getIconUrl(c);if(!b){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(b,I&&I.tagName==="IMG"?I:null);return this._setIconStyles(G,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(c,I){var b=this.options,G=b[I+"Size"];typeof G=="number"&&(G=[G,G]);var V=ne(G),x=ne(I==="shadow"&&b.shadowAnchor||b.iconAnchor||V&&V.divideBy(2,!0));c.className="leaflet-marker-"+I+" "+(b.className||""),x&&(c.style.marginLeft=-x.x+"px",c.style.marginTop=-x.y+"px"),V&&(c.style.width=V.x+"px",c.style.height=V.y+"px")},_createImg:function(c,I){return I=I||document.createElement("img"),I.src=c,I},_getIconUrl:function(c){return Ue.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function DQ(c){return new wu(c)}var gC=wu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof gC.imagePath!="string"&&(gC.imagePath=this._detectIconPath()),(this.options.imagePath||gC.imagePath)+wu.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var I=function(b,G,V){var x=G.exec(b);return x&&x[V]};return c=I(c,/^url\((['"])?(.+)\1\)$/,2),c&&I(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Xt("div","leaflet-default-icon-path",document.body),I=Xg(c,"background-image")||Xg(c,"backgroundImage");if(document.body.removeChild(c),I=this._stripUrl(I),I)return I;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),jW=us.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ll(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var I=this._marker,b=I._map,G=this._marker.options.autoPanSpeed,V=this._marker.options.autoPanPadding,x=ia(I._icon),D=b.getPixelBounds(),re=b.getPixelOrigin(),ce=E(D.min._subtract(re).add(V),D.max._subtract(re).subtract(V));if(!ce.contains(x)){var ye=ne((Math.max(ce.max.x,x.x)-ce.max.x)/(D.max.x-ce.max.x)-(Math.min(ce.min.x,x.x)-ce.min.x)/(D.min.x-ce.min.x),(Math.max(ce.max.y,x.y)-ce.max.y)/(D.max.y-ce.max.y)-(Math.min(ce.min.y,x.y)-ce.min.y)/(D.min.y-ce.min.y)).multiplyBy(G);b.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),Fn(I._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=Y(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,c)))},_onDrag:function(c){var I=this._marker,b=I._shadow,G=ia(I._icon),V=I._map.layerPointToLatLng(G);b&&Fn(b,G),I._latlng=V,c.latlng=V,c.oldLatLng=this._oldLatLng,I.fire("move",c).fire("drag",c)},_onDragEnd:function(c){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),qm=Lo.extend({options:{icon:new gC,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,I){p(this,I),this._latlng=H(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var I=this._latlng;return this._latlng=H(c),this.update(),this.fire("move",{oldLatLng:I,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,I="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=c.icon.createIcon(this._icon),G=!1;b!==this._icon&&(this._icon&&this._removeIcon(),G=!0,c.title&&(b.title=c.title),b.tagName==="IMG"&&(b.alt=c.alt||"")),pt(b,I),c.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(b,"focus",this._panOnFocus,this);var V=c.icon.createShadow(this._shadow),x=!1;V!==this._shadow&&(this._removeShadow(),x=!0),V&&(pt(V,I),V.alt=""),this._shadow=V,c.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),V&&x&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),pn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Fn(this._icon,c),this._shadow&&Fn(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var I=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(I)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jW)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jW(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&xi(this._icon,c),this._shadow&&xi(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var I=this.options.icon.options,b=I.iconSize?ne(I.iconSize):ne(0,0),G=I.iconAnchor?ne(I.iconAnchor):ne(0,0);c.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:b.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function KQ(c,I){return new qm(c,I)}var gl=Lo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return p(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ep=gl.extend({options:{fill:!0,radius:10},initialize:function(c,I){p(this,I),this._latlng=H(c),this._radius=this.options.radius},setLatLng:function(c){var I=this._latlng;return this._latlng=H(c),this.redraw(),this.fire("move",{oldLatLng:I,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var I=c&&c.radius||this._radius;return gl.prototype.setStyle.call(this,c),this.setRadius(I),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,I=this._radiusY||c,b=this._clickTolerance(),G=[c+b,I+b];this._pxBounds=new se(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zQ(c,I){return new ep(c,I)}var TS=ep.extend({initialize:function(c,I,b){if(typeof I=="number"&&(I=r({},b,{radius:I})),p(this,I),this._latlng=H(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new M(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:gl.prototype.setStyle,_project:function(){var c=this._latlng.lng,I=this._latlng.lat,b=this._map,G=b.options.crs;if(G.distance===Ae.distance){var V=Math.PI/180,x=this._mRadius/Ae.R/V,D=b.project([I+x,c]),re=b.project([I-x,c]),ce=D.add(re).divideBy(2),ye=b.unproject(ce).lat,Te=Math.acos((Math.cos(x*V)-Math.sin(I*V)*Math.sin(ye*V))/(Math.cos(I*V)*Math.cos(ye*V)))/V;(isNaN(Te)||Te===0)&&(Te=x/Math.cos(Math.PI/180*I)),this._point=ce.subtract(b.getPixelOrigin()),this._radius=isNaN(Te)?0:ce.x-b.project([ye,c-Te]).x,this._radiusY=ce.y-D.y}else{var at=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(at).x}this._updateBounds()}});function PQ(c,I,b){return new TS(c,I,b)}var ga=gl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,I){p(this,I),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var I=1/0,b=null,G=lC,V,x,D=0,re=this._parts.length;D<re;D++)for(var ce=this._parts[D],ye=1,Te=ce.length;ye<Te;ye++){V=ce[ye-1],x=ce[ye];var at=G(c,V,x,!0);at<I&&(I=at,b=G(c,V,x))}return b&&(b.distance=Math.sqrt(I)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return PW(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,I){return I=I||this._defaultShape(),c=H(c),I.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new M,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return io(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var I=[],b=io(c),G=0,V=c.length;G<V;G++)b?(I[G]=H(c[G]),this._bounds.extend(I[G])):I[G]=this._convertLatLngs(c[G]);return I},_project:function(){var c=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),I=new _(c,c);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(I),this._rawPxBounds.max.add(I)]))},_projectLatlngs:function(c,I,b){var G=c[0]instanceof U,V=c.length,x,D;if(G){for(D=[],x=0;x<V;x++)D[x]=this._map.latLngToLayerPoint(c[x]),b.extend(D[x]);I.push(D)}else for(x=0;x<V;x++)this._projectLatlngs(c[x],I,b)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var I=this._parts,b,G,V,x,D,re,ce;for(b=0,V=0,x=this._rings.length;b<x;b++)for(ce=this._rings[b],G=0,D=ce.length;G<D-1;G++)re=KW(ce[G],ce[G+1],c,G,!0),re&&(I[V]=I[V]||[],I[V].push(re[0]),(re[1]!==ce[G+1]||G===D-2)&&(I[V].push(re[1]),V++))}},_simplifyPoints:function(){for(var c=this._parts,I=this.options.smoothFactor,b=0,G=c.length;b<G;b++)c[b]=LW(c[b],I)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,I){var b,G,V,x,D,re,ce=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(b=0,x=this._parts.length;b<x;b++)for(re=this._parts[b],G=0,D=re.length,V=D-1;G<D;V=G++)if(!(!I&&G===0)&&_W(c,re[V],re[G])<=ce)return!0;return!1}});function UQ(c,I){return new ga(c,I)}ga._flat=zW;var Wu=ga.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return TW(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var I=ga.prototype._convertLatLngs.call(this,c),b=I.length;return b>=2&&I[0]instanceof U&&I[0].equals(I[b-1])&&I.pop(),I},_setLatLngs:function(c){ga.prototype._setLatLngs.call(this,c),io(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return io(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,I=this.options.weight,b=new _(I,I);if(c=new se(c.min.subtract(b),c.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,V=this._rings.length,x;G<V;G++)x=MW(this._rings[G],c,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var I=!1,b,G,V,x,D,re,ce,ye;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(x=0,ce=this._parts.length;x<ce;x++)for(b=this._parts[x],D=0,ye=b.length,re=ye-1;D<ye;re=D++)G=b[D],V=b[re],G.y>c.y!=V.y>c.y&&c.x<(V.x-G.x)*(c.y-G.y)/(V.y-G.y)+G.x&&(I=!I);return I||ga.prototype._containsPoint.call(this,c,!0)}});function jQ(c,I){return new Wu(c,I)}var ca=la.extend({initialize:function(c,I){p(this,I),this._layers={},c&&this.addData(c)},addData:function(c){var I=Z(c)?c:c.features,b,G,V;if(I){for(b=0,G=I.length;b<G;b++)V=I[b],(V.geometries||V.geometry||V.features||V.coordinates)&&this.addData(V);return this}var x=this.options;if(x.filter&&!x.filter(c))return this;var D=tp(c,x);return D?(D.feature=rp(c),D.defaultOptions=D.options,this.resetStyle(D),x.onEachFeature&&x.onEachFeature(c,D),this.addLayer(D)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=r({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(I){this._setLayerStyle(I,c)},this)},_setLayerStyle:function(c,I){c.setStyle&&(typeof I=="function"&&(I=I(c.feature)),c.setStyle(I))}});function tp(c,I){var b=c.type==="Feature"?c.geometry:c,G=b?b.coordinates:null,V=[],x=I&&I.pointToLayer,D=I&&I.coordsToLatLng||LS,re,ce,ye,Te;if(!G&&!b)return null;switch(b.type){case"Point":return re=D(G),OW(x,c,re,I);case"MultiPoint":for(ye=0,Te=G.length;ye<Te;ye++)re=D(G[ye]),V.push(OW(x,c,re,I));return new la(V);case"LineString":case"MultiLineString":return ce=np(G,b.type==="LineString"?0:1,D),new ga(ce,I);case"Polygon":case"MultiPolygon":return ce=np(G,b.type==="Polygon"?1:2,D),new Wu(ce,I);case"GeometryCollection":for(ye=0,Te=b.geometries.length;ye<Te;ye++){var at=tp({geometry:b.geometries[ye],type:"Feature",properties:c.properties},I);at&&V.push(at)}return new la(V);case"FeatureCollection":for(ye=0,Te=b.features.length;ye<Te;ye++){var Zt=tp(b.features[ye],I);Zt&&V.push(Zt)}return new la(V);default:throw new Error("Invalid GeoJSON object.")}}function OW(c,I,b,G){return c?c(I,b):new qm(b,G&&G.markersInheritOptions&&G)}function LS(c){return new U(c[1],c[0],c[2])}function np(c,I,b){for(var G=[],V=0,x=c.length,D;V<x;V++)D=I?np(c[V],I-1,b):(b||LS)(c[V]),G.push(D);return G}function _S(c,I){return c=H(c),c.alt!==void 0?[h(c.lng,I),h(c.lat,I),h(c.alt,I)]:[h(c.lng,I),h(c.lat,I)]}function ip(c,I,b,G){for(var V=[],x=0,D=c.length;x<D;x++)V.push(I?ip(c[x],io(c[x])?0:I-1,b,G):_S(c[x],G));return!I&&b&&V.length>0&&V.push(V[0].slice()),V}function xu(c,I){return c.feature?r({},c.feature,{geometry:I}):rp(I)}function rp(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var DS={toGeoJSON:function(c){return xu(this,{type:"Point",coordinates:_S(this.getLatLng(),c)})}};qm.include(DS),TS.include(DS),ep.include(DS),ga.include({toGeoJSON:function(c){var I=!io(this._latlngs),b=ip(this._latlngs,I?1:0,!1,c);return xu(this,{type:(I?"Multi":"")+"LineString",coordinates:b})}}),Wu.include({toGeoJSON:function(c){var I=!io(this._latlngs),b=I&&!io(this._latlngs[0]),G=ip(this._latlngs,b?2:I?1:0,!0,c);return I||(G=[G]),xu(this,{type:(b?"Multi":"")+"Polygon",coordinates:G})}}),Vu.include({toMultiPoint:function(c){var I=[];return this.eachLayer(function(b){I.push(b.toGeoJSON(c).geometry.coordinates)}),xu(this,{type:"MultiPoint",coordinates:I})},toGeoJSON:function(c){var I=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(I==="MultiPoint")return this.toMultiPoint(c);var b=I==="GeometryCollection",G=[];return this.eachLayer(function(V){if(V.toGeoJSON){var x=V.toGeoJSON(c);if(b)G.push(x.geometry);else{var D=rp(x);D.type==="FeatureCollection"?G.push.apply(G,D.features):G.push(D)}}}),b?xu(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function QW(c,I){return new ca(c,I)}var OQ=QW,op=Lo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,I,b){this._url=c,this._bounds=T(I),p(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&rl(this._image),this},bringToBack:function(){return this._map&&ol(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=T(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",I=this._image=c?this._url:Xt("img");if(pt(I,"leaflet-image-layer"),this._zoomAnimated&&pt(I,"leaflet-zoom-animated"),this.options.className&&pt(I,this.options.className),I.onselectstart=d,I.onmousemove=d,I.onload=s(this.fire,this,"load"),I.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=I.src;return}I.src=this._url,I.alt=this.options.alt},_animateZoom:function(c){var I=this._map.getZoomScale(c.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;gs(this._image,b,I)},_reset:function(){var c=this._image,I=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=I.getSize();Fn(c,I.min),c.style.width=b.x+"px",c.style.height=b.y+"px"},_updateOpacity:function(){xi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),QQ=function(c,I,b){return new op(c,I,b)},$W=op.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",I=this._image=c?this._url:Xt("video");if(pt(I,"leaflet-image-layer"),this._zoomAnimated&&pt(I,"leaflet-zoom-animated"),this.options.className&&pt(I,this.options.className),I.onselectstart=d,I.onmousemove=d,I.onloadeddata=s(this.fire,this,"load"),c){for(var b=I.getElementsByTagName("source"),G=[],V=0;V<b.length;V++)G.push(b[V].src);this._url=b.length>0?G:[I.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(I.style,"objectFit")&&(I.style.objectFit="fill"),I.autoplay=!!this.options.autoplay,I.loop=!!this.options.loop,I.muted=!!this.options.muted,I.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var D=Xt("source");D.src=this._url[x],I.appendChild(D)}}});function $Q(c,I,b){return new $W(c,I,b)}var qW=op.extend({_initImage:function(){var c=this._image=this._url;pt(c,"leaflet-image-layer"),this._zoomAnimated&&pt(c,"leaflet-zoom-animated"),this.options.className&&pt(c,this.options.className),c.onselectstart=d,c.onmousemove=d}});function qQ(c,I,b){return new qW(c,I,b)}var ds=Lo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,I){c&&(c instanceof U||Z(c))?(this._latlng=H(c),p(this,I)):(p(this,c),this._source=I),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&xi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&xi(this._container,1),this.bringToFront(),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(xi(this._container,0),this._removeTimeout=setTimeout(s(pn,void 0,this._container),200)):pn(this._container),this.options.interactive&&(Wn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=H(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rl(this._container),this},bringToBack:function(){return this._map&&ol(this._container),this},_prepareOpen:function(c){var I=this._source;if(!I._map)return!1;if(I instanceof la){I=null;var b=this._source._layers;for(var G in b)if(b[G]._map){I=b[G];break}if(!I)return!1;this._source=I}if(!c)if(I.getCenter)c=I.getCenter();else if(I.getLatLng)c=I.getLatLng();else if(I.getBounds)c=I.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,I=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof I=="string")c.innerHTML=I;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(I)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),I=ne(this.options.offset),b=this._getAnchor();this._zoomAnimated?Fn(this._container,c.add(b)):I=I.add(c).add(b);var G=this._containerBottom=-I.y,V=this._containerLeft=-Math.round(this._containerWidth/2)+I.x;this._container.style.bottom=G+"px",this._container.style.left=V+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(c,I,b,G){var V=I;return V instanceof c||(V=new c(G).setContent(I)),b&&V.setLatLng(b),V}}),Lo.include({_initOverlay:function(c,I,b,G){var V=b;return V instanceof c?(p(V,G),V._source=this):(V=I&&!G?I:new c(G,this),V.setContent(b)),V}});var sp=ds.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,ds.prototype.openOn.call(this,c)},onAdd:function(c){ds.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gl||this._source.on("preclick",cs))},onRemove:function(c){ds.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gl||this._source.off("preclick",cs))},getEvents:function(){var c=ds.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",I=this._container=Xt("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=Xt("div",c+"-content-wrapper",I);if(this._contentNode=Xt("div",c+"-content",b),al(I),oC(this._contentNode),ht(I,"contextmenu",cs),this._tipContainer=Xt("div",c+"-tip-container",I),this._tip=Xt("div",c+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=Xt("a",c+"-close-button",I);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',ht(G,"click",function(V){ii(V),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,I=c.style;I.width="",I.whiteSpace="nowrap";var b=c.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),I.width=b+1+"px",I.whiteSpace="",I.height="";var G=c.offsetHeight,V=this.options.maxHeight,x="leaflet-popup-scrolled";V&&G>V?(I.height=V+"px",pt(c,x)):Wn(c,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var I=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),b=this._getAnchor();Fn(this._container,I.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,I=parseInt(Xg(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+I,G=this._containerWidth,V=new _(this._containerLeft,-b-this._containerBottom);V._add(ia(this._container));var x=c.layerPointToContainerPoint(V),D=ne(this.options.autoPanPadding),re=ne(this.options.autoPanPaddingTopLeft||D),ce=ne(this.options.autoPanPaddingBottomRight||D),ye=c.getSize(),Te=0,at=0;x.x+G+ce.x>ye.x&&(Te=x.x+G-ye.x+ce.x),x.x-Te-re.x<0&&(Te=x.x-re.x),x.y+b+ce.y>ye.y&&(at=x.y+b-ye.y+ce.y),x.y-at-re.y<0&&(at=x.y-re.y),(Te||at)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Te,at]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),e8=function(c,I){return new sp(c,I)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(c,I,b){return this._initOverlay(sp,c,I,b).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Lo.include({bindPopup:function(c,I){return this._popup=this._initOverlay(sp,this._popup,c,I),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof la||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){sa(c);var I=c.layer||c.target;if(this._popup._source===I&&!(I instanceof gl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=I,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var ap=ds.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){ds.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){ds.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=ds.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",I=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Xt("div",I),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var I,b,G=this._map,V=this._container,x=G.latLngToContainerPoint(G.getCenter()),D=G.layerPointToContainerPoint(c),re=this.options.direction,ce=V.offsetWidth,ye=V.offsetHeight,Te=ne(this.options.offset),at=this._getAnchor();re==="top"?(I=ce/2,b=ye):re==="bottom"?(I=ce/2,b=0):re==="center"?(I=ce/2,b=ye/2):re==="right"?(I=0,b=ye/2):re==="left"?(I=ce,b=ye/2):D.x<x.x?(re="right",I=0,b=ye/2):(re="left",I=ce+(Te.x+at.x)*2,b=ye/2),c=c.subtract(ne(I,b,!0)).add(Te).add(at),Wn(V,"leaflet-tooltip-right"),Wn(V,"leaflet-tooltip-left"),Wn(V,"leaflet-tooltip-top"),Wn(V,"leaflet-tooltip-bottom"),pt(V,"leaflet-tooltip-"+re),Fn(V,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&xi(this._container,c)},_animateZoom:function(c){var I=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(I)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),t8=function(c,I){return new ap(c,I)};Pe.include({openTooltip:function(c,I,b){return this._initOverlay(ap,c,I,b).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Lo.include({bindTooltip:function(c,I){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ap,this._tooltip,c,I),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var I=c?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[I](b),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof la||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var I=typeof c.getElement=="function"&&c.getElement();I&&(ht(I,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ht(I,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var I=typeof c.getElement=="function"&&c.getElement();I&&I.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var I=this;this._map.once("moveend",function(){I._openOnceFlag=!1,I._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var I=c.latlng,b,G;this._tooltip.options.sticky&&c.originalEvent&&(b=this._map.mouseEventToContainerPoint(c.originalEvent),G=this._map.containerPointToLayerPoint(b),I=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(I)}});var ex=wu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var I=c&&c.tagName==="DIV"?c:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Zu(I),I.appendChild(b.html)):I.innerHTML=b.html!==!1?b.html:"",b.bgPos){var G=ne(b.bgPos);I.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(I,"icon"),I},createShadow:function(){return null}});function n8(c){return new ex(c)}wu.Default=gC;var cC=Lo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){p(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),pn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ol(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof _?c:new _(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var I=this.getPane().children,b=-c(-1/0,1/0),G=0,V=I.length,x;G<V;G++)x=I[G].style.zIndex,I[G]!==this._container&&x&&(b=c(b,+x));isFinite(b)&&(this.options.zIndex=b+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){xi(this._container,this.options.opacity);var c=+new Date,I=!1,b=!1;for(var G in this._tiles){var V=this._tiles[G];if(!(!V.current||!V.loaded)){var x=Math.min(1,(c-V.loaded)/200);xi(V.el,x),x<1?I=!0:(V.active?b=!0:this._onOpaqueTile(V),V.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),I&&(z(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,I=this.options.maxZoom;if(c!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===c?(this._levels[b].el.style.zIndex=I-Math.abs(c-b),this._onUpdateLevel(b)):(pn(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var G=this._levels[c],V=this._map;return G||(G=this._levels[c]={},G.el=Xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=I,G.origin=V.project(V.unproject(V.getPixelOrigin()),c).round(),G.zoom=c,this._setZoomTransform(G,V.getCenter(),V.getZoom()),d(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var c,I,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)I=this._tiles[c],I.retain=I.current;for(c in this._tiles)if(I=this._tiles[c],I.current&&!I.active){var G=I.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var I in this._tiles)this._tiles[I].coords.z===c&&this._removeTile(I)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)pn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,I,b,G){var V=Math.floor(c/2),x=Math.floor(I/2),D=b-1,re=new _(+V,+x);re.z=+D;var ce=this._tileCoordsToKey(re),ye=this._tiles[ce];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),D>G?this._retainParent(V,x,D,G):!1)},_retainChildren:function(c,I,b,G){for(var V=2*c;V<2*c+2;V++)for(var x=2*I;x<2*I+2;x++){var D=new _(V,x);D.z=b+1;var re=this._tileCoordsToKey(D),ce=this._tiles[re];if(ce&&ce.active){ce.retain=!0;continue}else ce&&ce.loaded&&(ce.retain=!0);b+1<G&&this._retainChildren(V,x,b+1,G)}},_resetView:function(c){var I=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),I,I)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var I=this.options;return I.minNativeZoom!==void 0&&c<I.minNativeZoom?I.minNativeZoom:I.maxNativeZoom!==void 0&&I.maxNativeZoom<c?I.maxNativeZoom:c},_setView:function(c,I,b,G){var V=Math.round(I);this.options.maxZoom!==void 0&&V>this.options.maxZoom||this.options.minZoom!==void 0&&V<this.options.minZoom?V=void 0:V=this._clampZoom(V);var x=this.options.updateWhenZooming&&V!==this._tileZoom;(!G||x)&&(this._tileZoom=V,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),V!==void 0&&this._update(c),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(c,I)},_setZoomTransforms:function(c,I){for(var b in this._levels)this._setZoomTransform(this._levels[b],c,I)},_setZoomTransform:function(c,I,b){var G=this._map.getZoomScale(b,c.zoom),V=c.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(I,b)).round();Ue.any3d?gs(c.el,V,G):Fn(c.el,V)},_resetGrid:function(){var c=this._map,I=c.options.crs,b=this._tileSize=this.getTileSize(),G=this._tileZoom,V=this._map.getPixelWorldBounds(this._tileZoom);V&&(this._globalTileRange=this._pxBoundsToTileRange(V)),this._wrapX=I.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,I.wrapLng[0]],G).x/b.x),Math.ceil(c.project([0,I.wrapLng[1]],G).x/b.y)],this._wrapY=I.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([I.wrapLat[0],0],G).y/b.x),Math.ceil(c.project([I.wrapLat[1],0],G).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var I=this._map,b=I._animatingZoom?Math.max(I._animateToZoom,I.getZoom()):I.getZoom(),G=I.getZoomScale(b,this._tileZoom),V=I.project(c,this._tileZoom).floor(),x=I.getSize().divideBy(G*2);return new se(V.subtract(x),V.add(x))},_update:function(c){var I=this._map;if(I){var b=this._clampZoom(I.getZoom());if(c===void 0&&(c=I.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(c),V=this._pxBoundsToTileRange(G),x=V.getCenter(),D=[],re=this.options.keepBuffer,ce=new se(V.getBottomLeft().subtract([re,-re]),V.getTopRight().add([re,-re]));if(!(isFinite(V.min.x)&&isFinite(V.min.y)&&isFinite(V.max.x)&&isFinite(V.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Te=this._tiles[ye].coords;(Te.z!==this._tileZoom||!ce.contains(new _(Te.x,Te.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(c,b);return}for(var at=V.min.y;at<=V.max.y;at++)for(var Zt=V.min.x;Zt<=V.max.x;Zt++){var Pi=new _(Zt,at);if(Pi.z=this._tileZoom,!!this._isValidTile(Pi)){var Ii=this._tiles[this._tileCoordsToKey(Pi)];Ii?Ii.current=!0:D.push(Pi)}}if(D.sort(function(sr,Ju){return sr.distanceTo(x)-Ju.distanceTo(x)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ro=document.createDocumentFragment();for(Zt=0;Zt<D.length;Zt++)this._addTile(D[Zt],ro);this._level.el.appendChild(ro)}}}},_isValidTile:function(c){var I=this._map.options.crs;if(!I.infinite){var b=this._globalTileRange;if(!I.wrapLng&&(c.x<b.min.x||c.x>b.max.x)||!I.wrapLat&&(c.y<b.min.y||c.y>b.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(c);return T(this.options.bounds).overlaps(G)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var I=this._map,b=this.getTileSize(),G=c.scaleBy(b),V=G.add(b),x=I.unproject(G,c.z),D=I.unproject(V,c.z);return[x,D]},_tileCoordsToBounds:function(c){var I=this._tileCoordsToNwSe(c),b=new M(I[0],I[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var I=c.split(":"),b=new _(+I[0],+I[1]);return b.z=+I[2],b},_removeTile:function(c){var I=this._tiles[c];I&&(pn(I.el),delete this._tiles[c],this.fire("tileunload",{tile:I.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){pt(c,"leaflet-tile");var I=this.getTileSize();c.style.width=I.x+"px",c.style.height=I.y+"px",c.onselectstart=d,c.onmousemove=d,Ue.ielt9&&this.options.opacity<1&&xi(c,this.options.opacity)},_addTile:function(c,I){var b=this._getTilePos(c),G=this._tileCoordsToKey(c),V=this.createTile(this._wrapCoords(c),s(this._tileReady,this,c));this._initTile(V),this.createTile.length<2&&Y(s(this._tileReady,this,c,null,V)),Fn(V,b),this._tiles[G]={el:V,coords:c,current:!0},I.appendChild(V),this.fire("tileloadstart",{tile:V,coords:c})},_tileReady:function(c,I,b){I&&this.fire("tileerror",{error:I,tile:b,coords:c});var G=this._tileCoordsToKey(c);b=this._tiles[G],b&&(b.loaded=+new Date,this._map._fadeAnimated?(xi(b.el,0),z(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),I||(pt(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var I=new _(this._wrapX?u(c.x,this._wrapX):c.x,this._wrapY?u(c.y,this._wrapY):c.y);return I.z=c.z,I},_pxBoundsToTileRange:function(c){var I=this.getTileSize();return new se(c.min.unscaleBy(I).floor(),c.max.unscaleBy(I).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function i8(c){return new cC(c)}var Xu=cC.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,I){this._url=c,I=p(this,I),I.detectRetina&&Ue.retina&&I.maxZoom>0?(I.tileSize=Math.floor(I.tileSize/2),I.zoomReverse?(I.zoomOffset--,I.minZoom=Math.min(I.maxZoom,I.minZoom+1)):(I.zoomOffset++,I.maxZoom=Math.max(I.minZoom,I.maxZoom-1)),I.minZoom=Math.max(0,I.minZoom)):I.zoomReverse?I.minZoom=Math.min(I.maxZoom,I.minZoom):I.maxZoom=Math.max(I.minZoom,I.maxZoom),typeof I.subdomains=="string"&&(I.subdomains=I.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,I){return this._url===c&&I===void 0&&(I=!0),this._url=c,I||this.redraw(),this},createTile:function(c,I){var b=document.createElement("img");return ht(b,"load",s(this._tileOnLoad,this,I,b)),ht(b,"error",s(this._tileOnError,this,I,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(c),b},getTileUrl:function(c){var I={r:Ue.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-c.y;this.options.tms&&(I.y=b),I["-y"]=b}return S(this._url,r(I,this.options))},_tileOnLoad:function(c,I){Ue.ielt9?setTimeout(s(c,this,null,I),0):c(null,I)},_tileOnError:function(c,I,b){var G=this.options.errorTileUrl;G&&I.getAttribute("src")!==G&&(I.src=G),c(b,I)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,I=this.options.maxZoom,b=this.options.zoomReverse,G=this.options.zoomOffset;return b&&(c=I-c),c+G},_getSubdomain:function(c){var I=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[I]},_abortLoading:function(){var c,I;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(I=this._tiles[c].el,I.onload=d,I.onerror=d,!I.complete)){I.src=W;var b=this._tiles[c].coords;pn(I),delete this._tiles[c],this.fire("tileabort",{tile:I,coords:b})}},_removeTile:function(c){var I=this._tiles[c];if(I)return I.el.setAttribute("src",W),cC.prototype._removeTile.call(this,c)},_tileReady:function(c,I,b){if(!(!this._map||b&&b.getAttribute("src")===W))return cC.prototype._tileReady.call(this,c,I,b)}});function tx(c,I){return new Xu(c,I)}var nx=Xu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,I){this._url=c;var b=r({},this.defaultWmsParams);for(var G in I)G in this.options||(b[G]=I[G]);I=p(this,I);var V=I.detectRetina&&Ue.retina?2:1,x=this.getTileSize();b.width=x.x*V,b.height=x.y*V,this.wmsParams=b},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var I=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[I]=this._crs.code,Xu.prototype.onAdd.call(this,c)},getTileUrl:function(c){var I=this._tileCoordsToNwSe(c),b=this._crs,G=E(b.project(I[0]),b.project(I[1])),V=G.min,x=G.max,D=(this._wmsVersion>=1.3&&this._crs===UW?[V.y,V.x,x.y,x.x]:[V.x,V.y,x.x,x.y]).join(","),re=Xu.prototype.getTileUrl.call(this,c);return re+y(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(c,I){return r(this.wmsParams,c),I||this.redraw(),this}});function r8(c,I){return new nx(c,I)}Xu.WMS=nx,tx.wms=r8;var ua=Lo.extend({options:{padding:.1},initialize:function(c){p(this,c),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,I){var b=this._map.getZoomScale(I,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),V=this._map.project(this._center,I),x=G.multiplyBy(-b).add(V).subtract(this._map._getNewPixelOrigin(c,I));Ue.any3d?gs(this._container,x,b):Fn(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,I=this._map.getSize(),b=this._map.containerPointToLayerPoint(I.multiplyBy(-c)).round();this._bounds=new se(b,b.add(I.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ix=ua.extend({options:{tolerance:0},getEvents:function(){var c=ua.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ua.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ht(c,"mousemove",this._onMouseMove,this),ht(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,pn(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var I in this._layers)c=this._layers[I],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ua.prototype._update.call(this);var c=this._bounds,I=this._container,b=c.getSize(),G=Ue.retina?2:1;Fn(I,c.min),I.width=G*b.x,I.height=G*b.y,I.style.width=b.x+"px",I.style.height=b.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){ua.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[l(c)]=c;var I=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=I),this._drawLast=I,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var I=c._order,b=I.next,G=I.prev;b?b.prev=G:this._drawLast=G,G?G.next=b:this._drawFirst=b,delete c._order,delete this._layers[l(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var I=c.options.dashArray.split(/[, ]+/),b=[],G,V;for(V=0;V<I.length;V++){if(G=Number(I[V]),isNaN(G))return;b.push(G)}c.options._dashArray=b}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var I=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(c._pxBounds.min.subtract([I,I])),this._redrawBounds.extend(c._pxBounds.max.add([I,I]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var I=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,I.x,I.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,I=this._redrawBounds;if(this._ctx.save(),I){var b=I.getSize();this._ctx.beginPath(),this._ctx.rect(I.min.x,I.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)c=G.layer,(!I||c._pxBounds&&c._pxBounds.intersects(I))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,I){if(this._drawing){var b,G,V,x,D=c._parts,re=D.length,ce=this._ctx;if(re){for(ce.beginPath(),b=0;b<re;b++){for(G=0,V=D[b].length;G<V;G++)x=D[b][G],ce[G?"lineTo":"moveTo"](x.x,x.y);I&&ce.closePath()}this._fillStroke(ce,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var I=c._point,b=this._ctx,G=Math.max(Math.round(c._radius),1),V=(Math.max(Math.round(c._radiusY),1)||G)/G;V!==1&&(b.save(),b.scale(1,V)),b.beginPath(),b.arc(I.x,I.y/V,G,0,Math.PI*2,!1),V!==1&&b.restore(),this._fillStroke(b,c)}},_fillStroke:function(c,I){var b=I.options;b.fill&&(c.globalAlpha=b.fillOpacity,c.fillStyle=b.fillColor||b.color,c.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(c.setLineDash&&c.setLineDash(I.options&&I.options._dashArray||[]),c.globalAlpha=b.opacity,c.lineWidth=b.weight,c.strokeStyle=b.color,c.lineCap=b.lineCap,c.lineJoin=b.lineJoin,c.stroke())},_onClick:function(c){for(var I=this._map.mouseEventToLayerPoint(c),b,G,V=this._drawFirst;V;V=V.next)b=V.layer,b.options.interactive&&b._containsPoint(I)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(b))&&(G=b);this._fireEvent(G?[G]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var I=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,I)}},_handleMouseOut:function(c){var I=this._hoveredLayer;I&&(Wn(this._container,"leaflet-interactive"),this._fireEvent([I],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,I){if(!this._mouseHoverThrottled){for(var b,G,V=this._drawFirst;V;V=V.next)b=V.layer,b.options.interactive&&b._containsPoint(I)&&(G=b);G!==this._hoveredLayer&&(this._handleMouseOut(c),G&&(pt(this._container,"leaflet-interactive"),this._fireEvent([G],c,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,I,b){this._map._fireDOMEvent(I,b||I.type,c)},_bringToFront:function(c){var I=c._order;if(I){var b=I.next,G=I.prev;if(b)b.prev=G;else return;G?G.next=b:b&&(this._drawFirst=b),I.prev=this._drawLast,this._drawLast.next=I,I.next=null,this._drawLast=I,this._requestRedraw(c)}},_bringToBack:function(c){var I=c._order;if(I){var b=I.next,G=I.prev;if(G)G.next=b;else return;b?b.prev=G:G&&(this._drawLast=G),I.prev=null,I.next=this._drawFirst,this._drawFirst.prev=I,this._drawFirst=I,this._requestRedraw(c)}}});function rx(c){return Ue.canvas?new ix(c):null}var uC=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),o8={_initContainer:function(){this._container=Xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ua.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var I=c._container=uC("shape");pt(I,"leaflet-vml-shape "+(this.options.className||"")),I.coordsize="1 1",c._path=uC("path"),I.appendChild(c._path),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){var I=c._container;this._container.appendChild(I),c.options.interactive&&c.addInteractiveTarget(I)},_removePath:function(c){var I=c._container;pn(I),c.removeInteractiveTarget(I),delete this._layers[l(c)]},_updateStyle:function(c){var I=c._stroke,b=c._fill,G=c.options,V=c._container;V.stroked=!!G.stroke,V.filled=!!G.fill,G.stroke?(I||(I=c._stroke=uC("stroke")),V.appendChild(I),I.weight=G.weight+"px",I.color=G.color,I.opacity=G.opacity,G.dashArray?I.dashStyle=Z(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):I.dashStyle="",I.endcap=G.lineCap.replace("butt","flat"),I.joinstyle=G.lineJoin):I&&(V.removeChild(I),c._stroke=null),G.fill?(b||(b=c._fill=uC("fill")),V.appendChild(b),b.color=G.fillColor||G.color,b.opacity=G.fillOpacity):b&&(V.removeChild(b),c._fill=null)},_updateCircle:function(c){var I=c._point.round(),b=Math.round(c._radius),G=Math.round(c._radiusY||b);this._setPath(c,c._empty()?"M0 0":"AL "+I.x+","+I.y+" "+b+","+G+" 0,"+65535*360)},_setPath:function(c,I){c._path.v=I},_bringToFront:function(c){rl(c._container)},_bringToBack:function(c){ol(c._container)}},lp=Ue.vml?uC:he,dC=ua.extend({_initContainer:function(){this._container=lp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pn(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ua.prototype._update.call(this);var c=this._bounds,I=c.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(I))&&(this._svgSize=I,b.setAttribute("width",I.x),b.setAttribute("height",I.y)),Fn(b,c.min),b.setAttribute("viewBox",[c.min.x,c.min.y,I.x,I.y].join(" ")),this.fire("update")}},_initPath:function(c){var I=c._path=lp("path");c.options.className&&pt(I,c.options.className),c.options.interactive&&pt(I,"leaflet-interactive"),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){pn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[l(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var I=c._path,b=c.options;I&&(b.stroke?(I.setAttribute("stroke",b.color),I.setAttribute("stroke-opacity",b.opacity),I.setAttribute("stroke-width",b.weight),I.setAttribute("stroke-linecap",b.lineCap),I.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?I.setAttribute("stroke-dasharray",b.dashArray):I.removeAttribute("stroke-dasharray"),b.dashOffset?I.setAttribute("stroke-dashoffset",b.dashOffset):I.removeAttribute("stroke-dashoffset")):I.setAttribute("stroke","none"),b.fill?(I.setAttribute("fill",b.fillColor||b.color),I.setAttribute("fill-opacity",b.fillOpacity),I.setAttribute("fill-rule",b.fillRule||"evenodd")):I.setAttribute("fill","none"))},_updatePoly:function(c,I){this._setPath(c,Be(c._parts,I))},_updateCircle:function(c){var I=c._point,b=Math.max(Math.round(c._radius),1),G=Math.max(Math.round(c._radiusY),1)||b,V="a"+b+","+G+" 0 1,0 ",x=c._empty()?"M0 0":"M"+(I.x-b)+","+I.y+V+b*2+",0 "+V+-b*2+",0 ";this._setPath(c,x)},_setPath:function(c,I){c._path.setAttribute("d",I)},_bringToFront:function(c){rl(c._path)},_bringToBack:function(c){ol(c._path)}});Ue.vml&&dC.include(o8);function ox(c){return Ue.svg||Ue.vml?new dC(c):null}Pe.include({getRenderer:function(c){var I=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return I||(I=this._renderer=this._createRenderer()),this.hasLayer(I)||this.addLayer(I),I},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var I=this._paneRenderers[c];return I===void 0&&(I=this._createRenderer({pane:c}),this._paneRenderers[c]=I),I},_createRenderer:function(c){return this.options.preferCanvas&&rx(c)||ox(c)}});var sx=Wu.extend({initialize:function(c,I){Wu.prototype.initialize.call(this,this._boundsToLatLngs(c),I)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=T(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function s8(c,I){return new sx(c,I)}dC.create=lp,dC.pointsToPath=Be,ca.geometryToLayer=tp,ca.coordsToLatLng=LS,ca.coordsToLatLngs=np,ca.latLngToCoords=_S,ca.latLngsToCoords=ip,ca.getFeature=xu,ca.asFeature=rp,Pe.mergeOptions({boxZoom:!0});var ax=us.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Jg(),qI(),this._startPoint=this._map.mouseEventToContainerPoint(c),ht(document,{contextmenu:sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Xt("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var I=new se(this._point,this._startPoint),b=I.getSize();Fn(this._box,I.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(pn(this._box),Wn(this._container,"leaflet-crosshair")),sl(),Hg(),zt(document,{contextmenu:sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var I=new M(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(I).fire("boxzoomend",{boxZoomBounds:I})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",ax),Pe.mergeOptions({doubleClickZoom:!0});var lx=us.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var I=this._map,b=I.getZoom(),G=I.options.zoomDelta,V=c.originalEvent.shiftKey?b-G:b+G;I.options.doubleClickZoom==="center"?I.setZoom(V):I.setZoomAround(c.containerPoint,V)}});Pe.addInitHook("addHandler","doubleClickZoom",lx),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gx=us.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ll(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wn(this._map._container,"leaflet-grab"),Wn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var I=T(this._map.options.maxBounds);this._offsetLimit=E(this._map.latLngToContainerPoint(I.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(I.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var I=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(I),this._prunePositions(I)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),I=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=I.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,I){return c-(c-I)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),I=this._offsetLimit;c.x<I.min.x&&(c.x=this._viscousLimit(c.x,I.min.x)),c.y<I.min.y&&(c.y=this._viscousLimit(c.y,I.min.y)),c.x>I.max.x&&(c.x=this._viscousLimit(c.x,I.max.x)),c.y>I.max.y&&(c.y=this._viscousLimit(c.y,I.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,I=Math.round(c/2),b=this._initialWorldOffset,G=this._draggable._newPos.x,V=(G-I+b)%c+I-b,x=(G+I+b)%c-I-b,D=Math.abs(V+b)<Math.abs(x+b)?V:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(c){var I=this._map,b=I.options,G=!b.inertia||c.noInertia||this._times.length<2;if(I.fire("dragend",c),G)I.fire("moveend");else{this._prunePositions(+new Date);var V=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,D=b.easeLinearity,re=V.multiplyBy(D/x),ce=re.distanceTo([0,0]),ye=Math.min(b.inertiaMaxSpeed,ce),Te=re.multiplyBy(ye/ce),at=ye/(b.inertiaDeceleration*D),Zt=Te.multiplyBy(-at/2).round();!Zt.x&&!Zt.y?I.fire("moveend"):(Zt=I._limitOffset(Zt,I.options.maxBounds),Y(function(){I.panBy(Zt,{duration:at,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",gx),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var cx=us.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ht(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,I=document.documentElement,b=c.scrollTop||I.scrollTop,G=c.scrollLeft||I.scrollLeft;this._map._container.focus(),window.scrollTo(G,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var I=this._panKeys={},b=this.keyCodes,G,V;for(G=0,V=b.left.length;G<V;G++)I[b.left[G]]=[-1*c,0];for(G=0,V=b.right.length;G<V;G++)I[b.right[G]]=[c,0];for(G=0,V=b.down.length;G<V;G++)I[b.down[G]]=[0,c];for(G=0,V=b.up.length;G<V;G++)I[b.up[G]]=[0,-1*c]},_setZoomDelta:function(c){var I=this._zoomKeys={},b=this.keyCodes,G,V;for(G=0,V=b.zoomIn.length;G<V;G++)I[b.zoomIn[G]]=c;for(G=0,V=b.zoomOut.length;G<V;G++)I[b.zoomOut[G]]=-c},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var I=c.keyCode,b=this._map,G;if(I in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(G=this._panKeys[I],c.shiftKey&&(G=ne(G).multiplyBy(3)),b.options.maxBounds&&(G=b._limitOffset(ne(G),b.options.maxBounds)),b.options.worldCopyJump){var V=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(G)));b.panTo(V)}else b.panBy(G)}else if(I in this._zoomKeys)b.setZoom(b.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[I]);else if(I===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;sa(c)}}});Pe.addInitHook("addHandler","keyboard",cx),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ux=us.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var I=Q(c),b=this._map.options.wheelDebounceTime;this._delta+=I,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var G=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),G),sa(c)},_performZoom:function(){var c=this._map,I=c.getZoom(),b=this._map.options.zoomSnap||0;c._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),V=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,x=b?Math.ceil(V/b)*b:V,D=c._limitZoom(I+(this._delta>0?x:-x))-I;this._delta=0,this._startTime=null,D&&(c.options.scrollWheelZoom==="center"?c.setZoom(I+D):c.setZoomAround(this._lastMousePos,I+D))}});Pe.addInitHook("addHandler","scrollWheelZoom",ux);var a8=600;Pe.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var dx=us.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var I=c.touches[0];this._startPos=this._newPos=new _(I.clientX,I.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",ii),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",I))},this),a8),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){zt(document,"touchend",ii),zt(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(c){var I=c.touches[0];this._newPos=new _(I.clientX,I.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,I){var b=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:I.screenX,screenY:I.screenY,clientX:I.clientX,clientY:I.clientY});b._simulated=!0,I.target.dispatchEvent(b)}});Pe.addInitHook("addHandler","tapHold",dx),Pe.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var Ix=us.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wn(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var I=this._map;if(!(!c.touches||c.touches.length!==2||I._animatingZoom||this._zooming)){var b=I.mouseEventToContainerPoint(c.touches[0]),G=I.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=I.getSize()._divideBy(2),this._startLatLng=I.containerPointToLatLng(this._centerPoint),I.options.touchZoom!=="center"&&(this._pinchStartLatLng=I.containerPointToLatLng(b.add(G)._divideBy(2))),this._startDist=b.distanceTo(G),this._startZoom=I.getZoom(),this._moved=!1,this._zooming=!0,I._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),ii(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var I=this._map,b=I.mouseEventToContainerPoint(c.touches[0]),G=I.mouseEventToContainerPoint(c.touches[1]),V=b.distanceTo(G)/this._startDist;if(this._zoom=I.getScaleZoom(V,this._startZoom),!I.options.bounceAtZoomLimits&&(this._zoom<I.getMinZoom()&&V<1||this._zoom>I.getMaxZoom()&&V>1)&&(this._zoom=I._limitZoom(this._zoom)),I.options.touchZoom==="center"){if(this._center=this._startLatLng,V===1)return}else{var x=b._add(G)._divideBy(2)._subtract(this._centerPoint);if(V===1&&x.x===0&&x.y===0)return;this._center=I.unproject(I.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(I._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var D=s(I._move,I,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(D,this,!0),ii(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",Ix),Pe.BoxZoom=ax,Pe.DoubleClickZoom=lx,Pe.Drag=gx,Pe.Keyboard=cx,Pe.ScrollWheelZoom=ux,Pe.TapHold=dx,Pe.TouchZoom=Ix,n.Bounds=se,n.Browser=Ue,n.CRS=ie,n.Canvas=ix,n.Circle=TS,n.CircleMarker=ep,n.Class=$,n.Control=dt,n.DivIcon=ex,n.DivOverlay=ds,n.DomEvent=Le,n.DomUtil=nC,n.Draggable=ll,n.Evented=K,n.FeatureGroup=la,n.GeoJSON=ca,n.GridLayer=cC,n.Handler=us,n.Icon=wu,n.ImageOverlay=op,n.LatLng=U,n.LatLngBounds=M,n.Layer=Lo,n.LayerGroup=Vu,n.LineUtil=YQ,n.Map=Pe,n.Marker=qm,n.Mixin=xQ,n.Path=gl,n.Point=_,n.PolyUtil=XQ,n.Polygon=Wu,n.Polyline=ga,n.Popup=sp,n.PosAnimation=Rt,n.Projection=FQ,n.Rectangle=sx,n.Renderer=ua,n.SVG=dC,n.SVGOverlay=qW,n.TileLayer=Xu,n.Tooltip=ap,n.Transformation=Xe,n.Util=P,n.VideoOverlay=$W,n.bind=s,n.bounds=E,n.canvas=rx,n.circle=PQ,n.circleMarker=zQ,n.control=Pt,n.divIcon=n8,n.extend=r,n.featureGroup=_Q,n.geoJSON=QW,n.geoJson=OQ,n.gridLayer=i8,n.icon=DQ,n.imageOverlay=QQ,n.latLng=H,n.latLngBounds=T,n.layerGroup=LQ,n.map=un,n.marker=KQ,n.point=ne,n.polygon=jQ,n.polyline=UQ,n.popup=e8,n.rectangle=s8,n.setOptions=p,n.stamp=l,n.svg=ox,n.svgOverlay=qQ,n.tileLayer=tx,n.tooltip=t8,n.transformation=Je,n.version=i,n.videoOverlay=$Q;var l8=window.L;n.noConflict=function(){return window.L=l8,this},window.L=n})})(S1,S1.exports);var Gm=S1.exports;const tU=Ig(Gm);function aw(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function lw(t,e){return e==null?function(i,r){const o=m.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=m.useRef();o.current||(o.current=t(i,r));const s=m.useRef(i),{instance:a}=o.current;return m.useEffect(function(){s.current!==i&&(e(a,i,s.current),s.current=i)},[a,i,r]),o}}function DRe(t,e){m.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function nU(t){return function(n){const i=qP(),r=t(sw(n,i),i);return OP(i.map,n.attribution),eU(r.current,n.eventHandlers),DRe(r.current,i),r}}function KRe(t,e){const n=lw(t,e),i=nU(n);return MRe(i)}function zRe(t,e){const n=lw(t),i=_Re(n,e);return TRe(i)}function PRe(t,e){const n=lw(t,e),i=nU(n);return LRe(i)}function URe(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Z1(){return Z1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Z1.apply(this,arguments)}function jRe({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:s,style:a,whenReady:l,zoom:g,...u},d){const[h]=m.useState({className:r,id:o,style:a}),[f,A]=m.useState(null);m.useImperativeHandle(d,()=>(f==null?void 0:f.map)??null,[f]);const p=m.useCallback(v=>{if(v!==null&&f===null){const S=new Gm.Map(v,u);n!=null&&g!=null?S.setView(n,g):t!=null&&S.fitBounds(t,e),l!=null&&S.whenReady(l),A(YRe(S))}},[]);m.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const y=f?gt.createElement($P,{value:f},i):s??null;return gt.createElement("div",Z1({},h,{ref:p}),y)}const iU=m.forwardRef(jRe),rU=KRe(function({position:e,...n},i){const r=new Gm.Marker(e,n);return aw(r,FRe(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),ORe=zRe(function(e,n){const i=new Gm.Popup(e,n.overlayContainer);return aw(i,n)},function(e,n,{position:i},r){m.useEffect(function(){const{instance:s}=e;function a(g){g.popup===s&&(s.update(),r(!0))}function l(g){g.popup===s&&r(!1)}return n.map.on({popupopen:a,popupclose:l}),n.overlayContainer==null?(i!=null&&s.setLatLng(i),s.openOn(n.map)):n.overlayContainer.bindPopup(s),function(){var u;n.map.off({popupopen:a,popupclose:l}),(u=n.overlayContainer)==null||u.unbindPopup(),n.map.removeLayer(s)}},[e,n,r,i])}),oU=PRe(function({url:e,...n},i){const r=new Gm.TileLayer(e,sw(n,i));return aw(r,i)},function(e,n,i){URe(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),QRe=t=>{const{user:e,loading:n}=jP(),[i,r]=_i(Sg),[o,s]=m.useState(),a=ln(),{pid:l}=Im(),[g,u]=m.useState(!1),d=Nn(an),h=Qr(),f=i[0],A=vd(new Date().toISOString()),p=new Date(f==null?void 0:f.startDate);p.setMinutes(f==null?void 0:f.startTime.split(":")[1]),p.setHours(f==null?void 0:f.startTime.split(":")[0]);const y=W0(p,A),[v,S]=m.useState(f==null?void 0:f.capacity),Z=async B=>{const k=await fn.get(`/api/analytics/post/${B}`);s(k.data)},R=async()=>{let B=f.postedBy;h("/chat",{state:{user:B}})};m.useEffect(()=>{var B;f&&o&&(S(f.capacity-((B=o[0])==null?void 0:B.totalSales)),console.log("currentEventCapacity:",v))},[f,o]),m.useEffect(()=>{(async()=>{r([]);try{const w=await(await fetch(`/api/posts/${l}`)).json();if(w.error){a("Error",w.error,"error");return}r([w])}catch(k){a("Error",k.message,"error")}})(),Z(l)},[a,l,r,g]);const W=async()=>{try{if(!window.confirm("Are you sure you want to delete this post?"))return;const k=await(await fetch(`/api/posts/${f._id}`,{method:"DELETE"})).json();if(k.error){a("Error",k.error,"error");return}a("Success","Post deleted","success"),h(`/${e.username}`)}catch(B){a("Error",B.message,"error")}};return!e&&n?C.jsx(ae,{justifyContent:"center",children:C.jsx(nr,{size:"xl"})}):f?C.jsx(C.Fragment,{children:C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"1fr 2fr"},maxW:{base:"95%",lg:"60%"},margin:"auto",alignItems:"start",pb:10,children:[C.jsxs(ae,{w:"100%",direction:"column",p:3,children:[f.img&&C.jsx(Se,{borderRadius:15,overflow:"hidden",w:{base:"full",md:320},h:310,alignItems:"center",justifyContent:"center",margin:"auto",children:C.jsx(oi,{src:f.img,w:"full",h:"full"})}),C.jsxs(Se,{display:{base:"none",lg:"block"},children:[C.jsx(ue,{color:Ve("gray.500","whiteAlpha.800"),pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"Hosted By"}),C.jsxs(ae,{gap:3,pt:2,align:"center",children:[C.jsx(Ni,{src:e.profilePic,size:"xs",name:e.username,onClick:B=>{B.preventDefault(),h(`/${e.username}`)}}),C.jsx(ue,{fontSize:20,fontWeight:"500",color:Ve("gray.600","whiteAlpha.800"),onClick:B=>{B.preventDefault(),h(`/${e.username}`)},children:e.username})]})]}),C.jsxs(Se,{pb:5,display:{base:"none",lg:"block"},children:[C.jsx(ue,{color:Ve("gray.500","whiteAlpha.800"),pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"72 Going"}),C.jsxs(ae,{pt:2,children:[C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg"}),C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg",ms:-2}),C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg",ms:-2})]}),C.jsx(ue,{fontSize:"xs",color:Ve("gray.400","whiteAlpha.800"),children:"Alejandro, Azia To and 70 others"})]}),C.jsxs(Se,{display:{base:"none",lg:"block"},children:[C.jsx(ue,{pt:2,fontWeight:500,color:Ve("gray.400","whiteAlpha.700"),transition:"ease-in-out 0.5s",_hover:{color:Ve("gray.500","whiteAlpha.800")},onClick:R,children:"Contact the Host"}),C.jsx(ue,{pt:2,fontWeight:500,color:Ve("gray.400","whiteAlpha.700"),transition:"ease-in-out 0.5s",_hover:{color:Ve("gray.500","whiteAlpha.800")},children:"Report Event"})]})]}),C.jsxs(ae,{w:"100%",ps:3,direction:"column",children:[C.jsx(ue,{fontSize:{base:"35",md:48},color:Ve("gray.700","whiteAlpha.900"),fontWeight:600,wordBreak:"break-word",children:f.name}),C.jsxs(ae,{flexDirection:{base:"row",md:"column"},gap:{base:5,md:"none"},children:[" ",C.jsxs(ae,{gap:5,color:Ve("gray.600","whiteAlpha.800"),pt:1,children:[C.jsxs(Se,{w:"2.5em",h:"2.5em",borderRadius:8,border:"1px solid",borderColor:Ve("gray.300","whiteAlpha.800"),overflow:"hidden",color:Ve("gray.600","whiteAlpha.900"),children:[C.jsx(ue,{fontSize:"2xs",fontWeight:"bold",h:"fit-content",bg:Ve("gray.300","whiteAlpha.700"),textAlign:"center",children:new Date(f.startDate).toLocaleDateString([],{month:"long"})}),C.jsx(ue,{textAlign:"center",fontSize:15,fontWeight:"bold",children:new Date(f.startDate).getDate()})]}),C.jsxs(Se,{children:[C.jsx(ue,{fontWeight:"500",fontSize:18,children:new Date(f.startDate).toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"})}),C.jsx(ue,{fontSize:15,children:f.startTime})]})]}),C.jsxs(ae,{gap:5,color:Ve("gray.600","whiteAlpha.800"),pt:1,children:[C.jsx(Se,{w:"2.5em",h:"2.5em",borderRadius:8,border:"1px solid",borderColor:Ve("gray.300","whiteAlpha.800"),overflow:"hidden",color:Ve("gray.600","whiteAlpha.800"),display:"flex",justifyContent:"center",alignItems:"center",children:C.jsx(RRe,{size:25})}),C.jsxs(Se,{children:[C.jsx(ue,{fontWeight:"500",fontSize:18,children:f.venue}),C.jsx(ue,{fontSize:15})]})]})]}),C.jsxs(Se,{border:"2px solid",borderColor:Ve("gray.200","whiteAlpha.200"),borderRadius:10,mt:10,overflow:"hidden",children:[C.jsx(ue,{bg:Ve("gray.200","whiteAlpha.200"),ps:2,pt:1,pb:1,color:Ve("gray.500","whiteAlpha.800"),fontWeight:"500",children:"Registration"}),C.jsxs(Se,{p:4,children:[(f==null?void 0:f.capacity)<9999&&v<=0&&y&&C.jsxs(C.Fragment,{children:[C.jsxs(ae,{alignItems:"center",p:1,borderBottom:"1px solid",w:"full",borderColor:"gray.200",children:[C.jsx(ERe,{size:25}),C.jsxs(Se,{ps:3,children:[C.jsx(ue,{color:"gray.500",fontWeight:"500",children:"Event Full"}),C.jsx(ue,{color:"gray.500",children:"If youd like, you can join the waitlist."})]})]})," ",C.jsx(ue,{color:"gray.600",fontWeight:"500",p:4,children:"Please click on the button below to join the waitlist. You will be notified if additional spots become available."})]}),!y||(f==null?void 0:f.capacity)<9999&&v<=0?C.jsxs(De,{colorScheme:"red",variant:"solid",w:"full",letterSpacing:1,children:[(f==null?void 0:f.capacity)<9999&&v<=0&&y&&"Event Full",!y&&"Event Started"]}):C.jsx(De,{colorScheme:"purple",variant:"solid",w:"full",letterSpacing:1,onClick:()=>u(!0),children:"Join Event"})]})]}),g&&C.jsx(vP,{user:d,post:f,joinModalOpen:g,setJoinModalOpen:u}),C.jsxs(Se,{children:[C.jsx(ue,{color:Ve("gray.500","whiteAlpha.800"),pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"About Event"}),C.jsx(ue,{children:f.text})]}),C.jsxs(Se,{children:[C.jsx(ue,{color:Ve("gray.500","whiteAlpha.800"),pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"Location"}),C.jsx(ue,{color:Ve("gray.600","whiteAlpha.900"),pb:3,fontWeight:400,fontSize:25,children:f==null?void 0:f.venue}),C.jsx(Se,{borderRadius:10,overflow:"hidden",mt:2,mb:4,children:f!=null&&f.venueCord.lat&&(f!=null&&f.venueCord.long)?C.jsxs(iU,{center:[f==null?void 0:f.venueCord.lat,f==null?void 0:f.venueCord.long],zoom:13,style:{maxHeight:"60vh",height:"50vh",borderRadius:"5%"},attributionControl:!1,children:[C.jsx(oU,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),C.jsx(rU,{position:[f==null?void 0:f.venueCord.lat,f==null?void 0:f.venueCord.long]})]}):C.jsx(ue,{children:"Map is Unavailable"})})]}),C.jsxs(Se,{display:{base:"block",lg:"none"},children:[C.jsx(ue,{color:"gray.500",pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"Hosted By"}),C.jsxs(ae,{gap:3,pt:2,align:"center",children:[C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg"}),C.jsx(ue,{fontSize:20,fontWeight:"500",color:"gray.600",children:e.username})]})]}),C.jsxs(Se,{pb:5,display:{base:"block",lg:"none"},children:[C.jsx(ue,{color:"gray.500",pt:5,pb:2,fontSize:"sm",fontWeight:"500",borderBottom:"1px solid",borderBottomColor:"gray.300",children:"72 Going"}),C.jsxs(ae,{pt:2,children:[C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg"}),C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg",ms:-2}),C.jsx(Ni,{src:e.profilePic,size:"xs",name:"Mark Zuckerberg",ms:-2})]}),C.jsx(ue,{fontSize:"xs",color:"gray.400",children:"Alejandro, Azia To and 70 others"})]}),C.jsxs(Se,{display:{base:"block",lg:"none"},children:[C.jsx(ue,{pt:2,fontWeight:500,color:"gray.400",transition:"ease-in-out 0.5s",_hover:{color:"gray.500"},children:"Contact the Host"}),C.jsx(ue,{pt:2,fontWeight:500,color:"gray.400",transition:"ease-in-out 0.5s",_hover:{color:"gray.500"},children:"Report Event"})]}),(d==null?void 0:d._id)===e._id&&C.jsx(De,{colorScheme:"red",cursor:"pointer",onClick:W,children:"Delete Event"})]})]})}):null};function $Re(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}const sU=()=>{const t=za(an),e=ln();return async()=>{try{const r=await(await fetch("/api/users/logout",{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(r.error){e("Error",r.error,"error");return}localStorage.removeItem("user-threads"),t(null)}catch(i){e("Error",i,"error")}}},Gv=vm({key:"authScreenAtom",default:"login"});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G1=function(t,e){return G1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},G1(t,e)};function gn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");G1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qe=function(){return Qe=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qe.apply(this,arguments)};function gw(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function qRe(t,e,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{g(i.next(u))}catch(d){s(d)}}function l(u){try{g(i.throw(u))}catch(d){s(d)}}function g(u){u.done?o(u.value):r(u.value).then(a,l)}g((i=i.apply(t,e||[])).next())})}function e1e(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(g){return function(u){return l([g,u])}}function l(g){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(o=g[0]&2?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,r=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(u){g=[6,u],r=0}finally{i=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function aU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t1e=function(t,e,n,i,r,o,s,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[n,i,r,o,s,a],u=0;l=new Error(e.replace(/%s/g,function(){return g[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},n1e=t1e,jn=aU(n1e),yt=m.createContext(null);function i1e(){jn(!!m.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=m.useContext(yt);return jn(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function r1e(t,e,n){return Object.keys(t).reduce(function(r,o){return e(r,t[o],o)},n)}function o1e(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function s1e(t,e,n,i){var r={},o=function(s,a){var l=n[a];l!==e[a]&&(r[a]=l,s(i,l))};return o1e(t,o),r}function a1e(t,e,n){var i=r1e(n,function(o,s,a){return typeof t[a]=="function"&&o.push(google.maps.event.addListener(e,s,t[a])),o},[]);return i}function l1e(t){google.maps.event.removeListener(t)}function kt(t){t===void 0&&(t=[]),t.forEach(l1e)}function Bt(t){var e=t.updaterMap,n=t.eventMap,i=t.prevProps,r=t.nextProps,o=t.instance,s=a1e(r,o,n);return s1e(e,i,r,o),s}var AH={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},bH={extraMapTypes:function(t,e){e.forEach(function(i,r){t.mapTypes.set(String(r),i)})},center:function(t,e){t.setCenter(e)},clickableIcons:function(t,e){t.setClickableIcons(e)},heading:function(t,e){t.setHeading(e)},mapTypeId:function(t,e){t.setMapTypeId(e)},options:function(t,e){t.setOptions(e)},streetView:function(t,e){t.setStreetView(e)},tilt:function(t,e){t.setTilt(e)},zoom:function(t,e){t.setZoom(e)}};function g1e(t){var e=t.children,n=t.options,i=t.id,r=t.mapContainerStyle,o=t.mapContainerClassName,s=t.center,a=t.onClick,l=t.onDblClick,g=t.onDrag,u=t.onDragEnd,d=t.onDragStart,h=t.onMouseMove,f=t.onMouseOut,A=t.onMouseOver,p=t.onMouseDown,y=t.onMouseUp,v=t.onRightClick,S=t.onCenterChanged,Z=t.onLoad,R=t.onUnmount,W=m.useState(null),B=W[0],k=W[1],w=m.useRef(null),J=m.useState(null),X=J[0],Y=J[1],z=m.useState(null),P=z[0],$=z[1],oe=m.useState(null),q=oe[0],K=oe[1],_=m.useState(null),de=_[0],ne=_[1],se=m.useState(null),E=se[0],M=se[1],T=m.useState(null),U=T[0],H=T[1],ie=m.useState(null),Ae=ie[0],Ie=ie[1],xe=m.useState(null),Xe=xe[0],Je=xe[1],Ne=m.useState(null),et=Ne[0],he=Ne[1],Be=m.useState(null),Ge=Be[0],Me=Be[1],Oe=m.useState(null),Ye=Oe[0],Ct=Oe[1],j=m.useState(null),be=j[0],Ce=j[1];return m.useEffect(function(){n&&B!==null&&B.setOptions(n)},[B,n]),m.useEffect(function(){B!==null&&typeof s<"u"&&B.setCenter(s)},[B,s]),m.useEffect(function(){B&&l&&(P!==null&&google.maps.event.removeListener(P),$(google.maps.event.addListener(B,"dblclick",l)))},[l]),m.useEffect(function(){B&&u&&(q!==null&&google.maps.event.removeListener(q),K(google.maps.event.addListener(B,"dragend",u)))},[u]),m.useEffect(function(){B&&d&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(B,"dragstart",d)))},[d]),m.useEffect(function(){B&&p&&(E!==null&&google.maps.event.removeListener(E),M(google.maps.event.addListener(B,"mousedown",p)))},[p]),m.useEffect(function(){B&&h&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(B,"mousemove",h)))},[h]),m.useEffect(function(){B&&f&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(B,"mouseout",f)))},[f]),m.useEffect(function(){B&&A&&(Xe!==null&&google.maps.event.removeListener(Xe),Je(google.maps.event.addListener(B,"mouseover",A)))},[A]),m.useEffect(function(){B&&y&&(et!==null&&google.maps.event.removeListener(et),he(google.maps.event.addListener(B,"mouseup",y)))},[y]),m.useEffect(function(){B&&v&&(Ge!==null&&google.maps.event.removeListener(Ge),Me(google.maps.event.addListener(B,"rightclick",v)))},[v]),m.useEffect(function(){B&&a&&(Ye!==null&&google.maps.event.removeListener(Ye),Ct(google.maps.event.addListener(B,"click",a)))},[a]),m.useEffect(function(){B&&g&&(be!==null&&google.maps.event.removeListener(be),Ce(google.maps.event.addListener(B,"drag",g)))},[g]),m.useEffect(function(){B&&S&&(X!==null&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(B,"center_changed",S)))},[a]),m.useEffect(function(){var We=w.current===null?null:new google.maps.Map(w.current,n);return k(We),We!==null&&Z&&Z(We),function(){We!==null&&R&&R(We)}},[]),C.jsx("div",{id:i,ref:w,style:r,className:o,children:C.jsx(yt.Provider,{value:B,children:B!==null?e:null})})}m.memo(g1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={map:null},n.registeredEvents=[],n.mapRef=null,n.getInstance=function(){return n.mapRef===null?null:new google.maps.Map(n.mapRef,n.props.options)},n.panTo=function(i){var r=n.getInstance();r&&r.panTo(i)},n.setMapCallback=function(){n.state.map!==null&&n.props.onLoad&&n.props.onLoad(n.state.map)},n.getRef=function(i){n.mapRef=i},n}return e.prototype.componentDidMount=function(){var n=this.getInstance();this.registeredEvents=Bt({updaterMap:bH,eventMap:AH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{map:n}},this.setMapCallback)},e.prototype.componentDidUpdate=function(n){this.state.map!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:bH,eventMap:AH,prevProps:n,nextProps:this.props,instance:this.state.map}))},e.prototype.componentWillUnmount=function(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),kt(this.registeredEvents))},e.prototype.render=function(){return C.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:C.jsx(yt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})},e})(m.PureComponent);var uc=typeof document<"u";function lU(t){var e=t.url,n=t.id,i=t.nonce;return uc?new Promise(function(o,s){var a=document.getElementById(n),l=window;if(a){var g=a.getAttribute("data-state");if(a.src===e&&g!=="error"){if(g==="ready")return o(n);var u=l.initMap,d=a.onerror;l.initMap=function(){u&&u(),o(n)},a.onerror=function(f){d&&d(f),s(f)};return}else a.remove()}var h=document.createElement("script");h.type="text/javascript",h.src=e,h.id=n,h.async=!0,h.nonce=i||"",h.onerror=function(A){h.setAttribute("data-state","error"),s(A)},l.initMap=function(){h.setAttribute("data-state","ready"),o(n)},document.head.appendChild(h)}).catch(function(r){throw console.error("injectScript error: ",r),r}):Promise.reject(new Error("document is undefined"))}function yH(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function gU(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(r,o){return yH(r)||Reflect.apply(e,t,[r,o]),r};var n=t.appendChild.bind(t);t.appendChild=function(r){return yH(r)||Reflect.apply(n,t,[r]),r}}}function cU(t){var e=t.googleMapsApiKey,n=t.googleMapsClientId,i=t.version,r=i===void 0?"weekly":i,o=t.language,s=t.region,a=t.libraries,l=t.channel,g=t.mapIds,u=t.authReferrerPolicy,d=[];return jn(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?d.push("key=".concat(e)):n&&d.push("client=".concat(n)),r&&d.push("v=".concat(r)),o&&d.push("language=".concat(o)),s&&d.push("region=".concat(s)),a&&a.length&&d.push("libraries=".concat(a.sort().join(","))),l&&d.push("channel=".concat(l)),g&&g.length&&d.push("map_ids=".concat(g.join(","))),u&&d.push("auth_referrer_policy=".concat(u)),d.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(d.join("&"))}var HC=!1;function uU(){return C.jsx("div",{children:"Loading..."})}var B1={id:"script-loader",version:"weekly"},c1e=function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.check=m.createRef(),n.state={loaded:!1},n.cleanupCallback=function(){delete window.google.maps,n.injectScript()},n.isCleaningUp=function(){return qRe(n,void 0,void 0,function(){function i(r){if(!HC)r();else if(uc)var o=window.setInterval(function(){HC||(window.clearInterval(o),r())},1)}return e1e(this,function(r){return[2,new Promise(i)]})})},n.cleanup=function(){HC=!0;var i=document.getElementById(n.props.id);i&&i.parentNode&&i.parentNode.removeChild(i),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(o){return typeof o.src=="string"&&o.src.includes("maps.googleapis")}).forEach(function(o){o.parentNode&&o.parentNode.removeChild(o)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(o){return o.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(o){o.parentNode&&o.parentNode.removeChild(o)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(o){return o.innerText!==void 0&&o.innerText.length>0&&o.innerText.includes(".gm-")}).forEach(function(o){o.parentNode&&o.parentNode.removeChild(o)})},n.injectScript=function(){n.props.preventGoogleFontsLoading&&gU(),jn(!!n.props.id,'LoadScript requires "id" prop to be a string: %s',n.props.id);var i={id:n.props.id,nonce:n.props.nonce,url:cU(n.props)};lU(i).then(function(){n.props.onLoad&&n.props.onLoad(),n.setState(function(){return{loaded:!0}})}).catch(function(r){n.props.onError&&n.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(n.props.googleMapsApiKey||"-",") or Client ID (").concat(n.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})},n}return e.prototype.componentDidMount=function(){if(uc){if(window.google&&window.google.maps&&!HC){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(i){console.error("Error at injecting script after cleaning up: ",i)})}},e.prototype.componentDidUpdate=function(n){this.props.libraries!==n.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),uc&&n.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))},e.prototype.componentWillUnmount=function(){var n=this;if(uc){this.cleanup();var i=function(){n.check.current||(delete window.google,HC=!1)};window.setTimeout(i,1),this.props.onUnmount&&this.props.onUnmount()}},e.prototype.render=function(){return C.jsxs(C.Fragment,{children:[C.jsx("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||C.jsx(uU,{})]})},e.defaultProps=B1,e}(m.PureComponent),vH;function u1e(t){var e=t.id,n=e===void 0?B1.id:e,i=t.version,r=i===void 0?B1.version:i,o=t.nonce,s=t.googleMapsApiKey,a=t.googleMapsClientId,l=t.language,g=t.region,u=t.libraries,d=t.preventGoogleFontsLoading,h=t.channel,f=t.mapIds,A=t.authReferrerPolicy,p=m.useRef(!1),y=m.useState(!1),v=y[0],S=y[1],Z=m.useState(void 0),R=Z[0],W=Z[1];m.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]),m.useEffect(function(){uc&&d&&gU()},[d]),m.useEffect(function(){v&&jn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[v]);var B=cU({version:r,googleMapsApiKey:s,googleMapsClientId:a,language:l,region:g,libraries:u,channel:h,mapIds:f,authReferrerPolicy:A});m.useEffect(function(){if(!uc)return;function J(){p.current&&(S(!0),vH=B)}if(window.google&&window.google.maps&&vH===B){J();return}lU({id:n,url:B,nonce:o}).then(J).catch(function(Y){p.current&&W(Y),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(Y)})},[n,B,o]);var k=m.useRef();return m.useEffect(function(){k.current&&u!==k.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),k.current=u},[u]),{isLoaded:v,loadError:R,url:B}}var d1e=C.jsx(uU,{});function I1e(t){var e=t.loadingElement,n=t.onLoad,i=t.onError,r=t.onUnmount,o=t.children,s=gw(t,["loadingElement","onLoad","onError","onUnmount","children"]),a=u1e(s),l=a.isLoaded,g=a.loadError;return m.useEffect(function(){l&&typeof n=="function"&&n()},[l,n]),m.useEffect(function(){g&&typeof i=="function"&&i(g)},[g,i]),m.useEffect(function(){return function(){r&&r()}},[r]),l?o:e||d1e}m.memo(I1e);var SH;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(SH||(SH={}));var ZH={},GH={options:function(t,e){t.setOptions(e)}};function C1e(t){var e=t.options,n=t.onLoad,i=t.onUnmount,r=m.useContext(yt),o=m.useState(null),s=o[0],a=o[1];return m.useEffect(function(){s!==null&&s.setMap(r)},[r]),m.useEffect(function(){e&&s!==null&&s.setOptions(e)},[s,e]),m.useEffect(function(){var l=new google.maps.TrafficLayer(Qe(Qe({},e||{}),{map:r}));return a(l),n&&n(l),function(){s!==null&&(i&&i(s),s.setMap(null))}},[]),null}m.memo(C1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={trafficLayer:null},n.setTrafficLayerCallback=function(){n.state.trafficLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.trafficLayer)},n.registeredEvents=[],n}return e.prototype.componentDidMount=function(){var n=new google.maps.TrafficLayer(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:GH,eventMap:ZH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{trafficLayer:n}},this.setTrafficLayerCallback)},e.prototype.componentDidUpdate=function(n){this.state.trafficLayer!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:GH,eventMap:ZH,prevProps:n,nextProps:this.props,instance:this.state.trafficLayer}))},e.prototype.componentWillUnmount=function(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),kt(this.registeredEvents),this.state.trafficLayer.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);function h1e(t){var e=t.onLoad,n=t.onUnmount,i=m.useContext(yt),r=m.useState(null),o=r[0],s=r[1];return m.useEffect(function(){o!==null&&o.setMap(i)},[i]),m.useEffect(function(){var a=new google.maps.BicyclingLayer;return s(a),a.setMap(i),e&&e(a),function(){a!==null&&(n&&n(a),a.setMap(null))}},[]),null}m.memo(h1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={bicyclingLayer:null},n.setBicyclingLayerCallback=function(){n.state.bicyclingLayer!==null&&(n.state.bicyclingLayer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.bicyclingLayer))},n}return e.prototype.componentDidMount=function(){var n=new google.maps.BicyclingLayer;this.setState(function(){return{bicyclingLayer:n}},this.setBicyclingLayerCallback)},e.prototype.componentWillUnmount=function(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);function f1e(t){var e=t.onLoad,n=t.onUnmount,i=m.useContext(yt),r=m.useState(null),o=r[0],s=r[1];return m.useEffect(function(){o!==null&&o.setMap(i)},[i]),m.useEffect(function(){var a=new google.maps.TransitLayer;return s(a),a.setMap(i),e&&e(a),function(){o!==null&&(n&&n(o),o.setMap(null))}},[]),null}m.memo(f1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={transitLayer:null},n.setTransitLayerCallback=function(){n.state.transitLayer!==null&&(n.state.transitLayer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.transitLayer))},n}return e.prototype.componentDidMount=function(){var n=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:n}},this.setTransitLayerCallback)},e.prototype.componentWillUnmount=function(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var BH={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},RH={drawingMode:function(t,e){t.setDrawingMode(e)},options:function(t,e){t.setOptions(e)}};function m1e(t){var e=t.options,n=t.drawingMode,i=t.onCircleComplete,r=t.onMarkerComplete,o=t.onOverlayComplete,s=t.onPolygonComplete,a=t.onPolylineComplete,l=t.onRectangleComplete,g=t.onLoad,u=t.onUnmount,d=m.useContext(yt),h=m.useState(null),f=h[0],A=h[1],p=m.useState(null),y=p[0],v=p[1],S=m.useState(null),Z=S[0],R=S[1],W=m.useState(null),B=W[0],k=W[1],w=m.useState(null),J=w[0],X=w[1],Y=m.useState(null),z=Y[0],P=Y[1],$=m.useState(null),oe=$[0],q=$[1];return m.useEffect(function(){f!==null&&f.setMap(d)},[d]),m.useEffect(function(){e&&f!==null&&f.setOptions(e)},[f,e]),m.useEffect(function(){f!==null&&f.setDrawingMode(n??null)},[f,n]),m.useEffect(function(){f&&i&&(y!==null&&google.maps.event.removeListener(y),v(google.maps.event.addListener(f,"circlecomplete",i)))},[f,i]),m.useEffect(function(){f&&r&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(f,"markercomplete",r)))},[f,r]),m.useEffect(function(){f&&o&&(B!==null&&google.maps.event.removeListener(B),k(google.maps.event.addListener(f,"overlaycomplete",o)))},[f,o]),m.useEffect(function(){f&&s&&(J!==null&&google.maps.event.removeListener(J),X(google.maps.event.addListener(f,"polygoncomplete",s)))},[f,s]),m.useEffect(function(){f&&a&&(z!==null&&google.maps.event.removeListener(z),P(google.maps.event.addListener(f,"polylinecomplete",a)))},[f,a]),m.useEffect(function(){f&&l&&(oe!==null&&google.maps.event.removeListener(oe),q(google.maps.event.addListener(f,"rectanglecomplete",l)))},[f,l]),m.useEffect(function(){jn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var K=new google.maps.drawing.DrawingManager(Qe(Qe({},e||{}),{map:d}));return n&&K.setDrawingMode(n),i&&v(google.maps.event.addListener(K,"circlecomplete",i)),r&&R(google.maps.event.addListener(K,"markercomplete",r)),o&&k(google.maps.event.addListener(K,"overlaycomplete",o)),s&&X(google.maps.event.addListener(K,"polygoncomplete",s)),a&&P(google.maps.event.addListener(K,"polylinecomplete",a)),l&&q(google.maps.event.addListener(K,"rectanglecomplete",l)),A(K),g&&g(K),function(){f!==null&&(y&&google.maps.event.removeListener(y),Z&&google.maps.event.removeListener(Z),B&&google.maps.event.removeListener(B),J&&google.maps.event.removeListener(J),z&&google.maps.event.removeListener(z),oe&&google.maps.event.removeListener(oe),u&&u(f),f.setMap(null))}},[]),null}m.memo(m1e);(function(t){gn(e,t);function e(n){var i=t.call(this,n)||this;return i.registeredEvents=[],i.state={drawingManager:null},i.setDrawingManagerCallback=function(){i.state.drawingManager!==null&&i.props.onLoad&&i.props.onLoad(i.state.drawingManager)},jn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),i}return e.prototype.componentDidMount=function(){var n=new google.maps.drawing.DrawingManager(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:RH,eventMap:BH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{drawingManager:n}},this.setDrawingManagerCallback)},e.prototype.componentDidUpdate=function(n){this.state.drawingManager!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:RH,eventMap:BH,prevProps:n,nextProps:this.props,instance:this.state.drawingManager}))},e.prototype.componentWillUnmount=function(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),kt(this.registeredEvents),this.state.drawingManager.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var kH={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},VH={animation:function(t,e){t.setAnimation(e)},clickable:function(t,e){t.setClickable(e)},cursor:function(t,e){t.setCursor(e)},draggable:function(t,e){t.setDraggable(e)},icon:function(t,e){t.setIcon(e)},label:function(t,e){t.setLabel(e)},map:function(t,e){t.setMap(e)},opacity:function(t,e){t.setOpacity(e)},options:function(t,e){t.setOptions(e)},position:function(t,e){t.setPosition(e)},shape:function(t,e){t.setShape(e)},title:function(t,e){t.setTitle(e)},visible:function(t,e){t.setVisible(e)},zIndex:function(t,e){t.setZIndex(e)}},X0={};function p1e(t){var e=t.position,n=t.options,i=t.clusterer,r=t.noClustererRedraw,o=t.children,s=t.draggable,a=t.visible,l=t.animation,g=t.clickable,u=t.cursor,d=t.icon,h=t.label,f=t.opacity,A=t.shape,p=t.title,y=t.zIndex,v=t.onClick,S=t.onDblClick,Z=t.onDrag,R=t.onDragEnd,W=t.onDragStart,B=t.onMouseOut,k=t.onMouseOver,w=t.onMouseUp,J=t.onMouseDown,X=t.onRightClick,Y=t.onClickableChanged,z=t.onCursorChanged,P=t.onAnimationChanged,$=t.onDraggableChanged,oe=t.onFlatChanged,q=t.onIconChanged,K=t.onPositionChanged,_=t.onShapeChanged,de=t.onTitleChanged,ne=t.onVisibleChanged,se=t.onZindexChanged,E=t.onLoad,M=t.onUnmount,T=m.useContext(yt),U=m.useState(null),H=U[0],ie=U[1],Ae=m.useState(null),Ie=Ae[0],xe=Ae[1],Xe=m.useState(null),Je=Xe[0],Ne=Xe[1],et=m.useState(null),he=et[0],Be=et[1],Ge=m.useState(null),Me=Ge[0],Oe=Ge[1],Ye=m.useState(null),Ct=Ye[0],j=Ye[1],be=m.useState(null),Ce=be[0],We=be[1],je=m.useState(null),tt=je[0],ft=je[1],ut=m.useState(null),Yn=ut[0],gi=ut[1],ci=m.useState(null),ui=ci[0],di=ci[1],te=m.useState(null),O=te[0],me=te[1],we=m.useState(null),ke=we[0],He=we[1],pe=m.useState(null),Ee=pe[0],ze=pe[1],ve=m.useState(null),st=ve[0],Ht=ve[1],tn=m.useState(null),cn=tn[0],nn=tn[1],Kn=m.useState(null),Rr=Kn[0],eo=Kn[1],to=m.useState(null),bi=to[0],Ue=to[1],no=m.useState(null),qs=no[0],kg=no[1],Vg=m.useState(null),tl=Vg[0],wg=Vg[1],Wi=m.useState(null),ea=Wi[0],bu=Wi[1],yu=m.useState(null),nl=yu[0],vu=yu[1],Wg=m.useState(null),ls=Wg[0],ta=Wg[1];m.useEffect(function(){H!==null&&H.setMap(T)},[T]),m.useEffect(function(){typeof n<"u"&&H!==null&&H.setOptions(n)},[H,n]),m.useEffect(function(){typeof s<"u"&&H!==null&&H.setDraggable(s)},[H,s]),m.useEffect(function(){e&&H!==null&&H.setPosition(e)},[H,e]),m.useEffect(function(){typeof a<"u"&&H!==null&&H.setVisible(a)},[H,a]),m.useEffect(function(){H==null||H.setAnimation(l)},[H,l]),m.useEffect(function(){H&&g!==void 0&&H.setClickable(g)},[H,g]),m.useEffect(function(){H&&u!==void 0&&H.setCursor(u)},[H,u]),m.useEffect(function(){H&&d!==void 0&&H.setIcon(d)},[H,d]),m.useEffect(function(){H&&h!==void 0&&H.setLabel(h)},[H,h]),m.useEffect(function(){H&&f!==void 0&&H.setOpacity(f)},[H,f]),m.useEffect(function(){H&&A!==void 0&&H.setShape(A)},[H,A]),m.useEffect(function(){H&&p!==void 0&&H.setTitle(p)},[H,p]),m.useEffect(function(){H&&y!==void 0&&H.setZIndex(y)},[H,y]),m.useEffect(function(){H&&S&&(Ie!==null&&google.maps.event.removeListener(Ie),xe(google.maps.event.addListener(H,"dblclick",S)))},[S]),m.useEffect(function(){H&&R&&(Je!==null&&google.maps.event.removeListener(Je),Ne(google.maps.event.addListener(H,"dragend",R)))},[R]),m.useEffect(function(){H&&W&&(he!==null&&google.maps.event.removeListener(he),Be(google.maps.event.addListener(H,"dragstart",W)))},[W]),m.useEffect(function(){H&&J&&(Me!==null&&google.maps.event.removeListener(Me),Oe(google.maps.event.addListener(H,"mousedown",J)))},[J]),m.useEffect(function(){H&&B&&(Ct!==null&&google.maps.event.removeListener(Ct),j(google.maps.event.addListener(H,"mouseout",B)))},[B]),m.useEffect(function(){H&&k&&(Ce!==null&&google.maps.event.removeListener(Ce),We(google.maps.event.addListener(H,"mouseover",k)))},[k]),m.useEffect(function(){H&&w&&(tt!==null&&google.maps.event.removeListener(tt),ft(google.maps.event.addListener(H,"mouseup",w)))},[w]),m.useEffect(function(){H&&X&&(Yn!==null&&google.maps.event.removeListener(Yn),gi(google.maps.event.addListener(H,"rightclick",X)))},[X]),m.useEffect(function(){H&&v&&(ui!==null&&google.maps.event.removeListener(ui),di(google.maps.event.addListener(H,"click",v)))},[v]),m.useEffect(function(){H&&Z&&(O!==null&&google.maps.event.removeListener(O),me(google.maps.event.addListener(H,"drag",Z)))},[Z]),m.useEffect(function(){H&&Y&&(ke!==null&&google.maps.event.removeListener(ke),He(google.maps.event.addListener(H,"clickable_changed",Y)))},[Y]),m.useEffect(function(){H&&z&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(H,"cursor_changed",z)))},[z]),m.useEffect(function(){H&&P&&(st!==null&&google.maps.event.removeListener(st),Ht(google.maps.event.addListener(H,"animation_changed",P)))},[P]),m.useEffect(function(){H&&$&&(cn!==null&&google.maps.event.removeListener(cn),nn(google.maps.event.addListener(H,"draggable_changed",$)))},[$]),m.useEffect(function(){H&&oe&&(Rr!==null&&google.maps.event.removeListener(Rr),eo(google.maps.event.addListener(H,"flat_changed",oe)))},[oe]),m.useEffect(function(){H&&q&&(bi!==null&&google.maps.event.removeListener(bi),Ue(google.maps.event.addListener(H,"icon_changed",q)))},[q]),m.useEffect(function(){H&&K&&(qs!==null&&google.maps.event.removeListener(qs),kg(google.maps.event.addListener(H,"position_changed",K)))},[K]),m.useEffect(function(){H&&_&&(tl!==null&&google.maps.event.removeListener(tl),wg(google.maps.event.addListener(H,"shape_changed",_)))},[_]),m.useEffect(function(){H&&de&&(ea!==null&&google.maps.event.removeListener(ea),bu(google.maps.event.addListener(H,"title_changed",de)))},[de]),m.useEffect(function(){H&&ne&&(nl!==null&&google.maps.event.removeListener(nl),vu(google.maps.event.addListener(H,"visible_changed",ne)))},[ne]),m.useEffect(function(){H&&se&&(ls!==null&&google.maps.event.removeListener(ls),ta(google.maps.event.addListener(H,"zindex_changed",se)))},[se]),m.useEffect(function(){var Mo=Qe(Qe(Qe({},n||X0),i?X0:{map:T}),{position:e}),It=new google.maps.Marker(Mo);return i?i.addMarker(It,!!r):It.setMap(T),e&&It.setPosition(e),typeof a<"u"&&It.setVisible(a),typeof s<"u"&&It.setDraggable(s),typeof g<"u"&&It.setClickable(g),typeof u=="string"&&It.setCursor(u),d&&It.setIcon(d),typeof h<"u"&&It.setLabel(h),typeof f<"u"&&It.setOpacity(f),A&&It.setShape(A),typeof p=="string"&&It.setTitle(p),typeof y=="number"&&It.setZIndex(y),S&&xe(google.maps.event.addListener(It,"dblclick",S)),R&&Ne(google.maps.event.addListener(It,"dragend",R)),W&&Be(google.maps.event.addListener(It,"dragstart",W)),J&&Oe(google.maps.event.addListener(It,"mousedown",J)),B&&j(google.maps.event.addListener(It,"mouseout",B)),k&&We(google.maps.event.addListener(It,"mouseover",k)),w&&ft(google.maps.event.addListener(It,"mouseup",w)),X&&gi(google.maps.event.addListener(It,"rightclick",X)),v&&di(google.maps.event.addListener(It,"click",v)),Z&&me(google.maps.event.addListener(It,"drag",Z)),Y&&He(google.maps.event.addListener(It,"clickable_changed",Y)),z&&ze(google.maps.event.addListener(It,"cursor_changed",z)),P&&Ht(google.maps.event.addListener(It,"animation_changed",P)),$&&nn(google.maps.event.addListener(It,"draggable_changed",$)),oe&&eo(google.maps.event.addListener(It,"flat_changed",oe)),q&&Ue(google.maps.event.addListener(It,"icon_changed",q)),K&&kg(google.maps.event.addListener(It,"position_changed",K)),_&&wg(google.maps.event.addListener(It,"shape_changed",_)),de&&bu(google.maps.event.addListener(It,"title_changed",de)),ne&&vu(google.maps.event.addListener(It,"visible_changed",ne)),se&&ta(google.maps.event.addListener(It,"zindex_changed",se)),ie(It),E&&E(It),function(){Ie!==null&&google.maps.event.removeListener(Ie),Je!==null&&google.maps.event.removeListener(Je),he!==null&&google.maps.event.removeListener(he),Me!==null&&google.maps.event.removeListener(Me),Ct!==null&&google.maps.event.removeListener(Ct),Ce!==null&&google.maps.event.removeListener(Ce),tt!==null&&google.maps.event.removeListener(tt),Yn!==null&&google.maps.event.removeListener(Yn),ui!==null&&google.maps.event.removeListener(ui),ke!==null&&google.maps.event.removeListener(ke),Ee!==null&&google.maps.event.removeListener(Ee),st!==null&&google.maps.event.removeListener(st),cn!==null&&google.maps.event.removeListener(cn),Rr!==null&&google.maps.event.removeListener(Rr),bi!==null&&google.maps.event.removeListener(bi),qs!==null&&google.maps.event.removeListener(qs),ea!==null&&google.maps.event.removeListener(ea),nl!==null&&google.maps.event.removeListener(nl),ls!==null&&google.maps.event.removeListener(ls),M&&M(It),i?i.removeMarker(It,!!r):It&&It.setMap(null)}},[]);var il=m.useMemo(function(){return o?m.Children.map(o,function(Mo){if(!m.isValidElement(Mo))return Mo;var It=Mo;return m.cloneElement(It,{anchor:H})}):null},[o,H]);return C.jsx(C.Fragment,{children:il})||null}m.memo(p1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n}return e.prototype.componentDidMount=function(){var n=Qe(Qe(Qe({},this.props.options||X0),this.props.clusterer?X0:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(n),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=Bt({updaterMap:VH,eventMap:kH,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)},e.prototype.componentDidUpdate=function(n){this.marker&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:VH,eventMap:kH,prevProps:n,nextProps:this.props,instance:this.marker}))},e.prototype.componentWillUnmount=function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),kt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))},e.prototype.render=function(){var n=this,i=null;return this.props.children&&(i=m.Children.map(this.props.children,function(r){if(!m.isValidElement(r))return r;var o=r;return m.cloneElement(o,{anchor:n.marker})})),i||null},e.contextType=yt,e})(m.PureComponent);var A1e=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var i=n.getMaxZoom(),r=this.cluster.getBounds(),o=n.getMap();o!==null&&"fitBounds"in o&&o.fitBounds(r),this.timeOut=window.setTimeout(function(){var s=n.getMap();if(s!==null){"fitBounds"in s&&s.fitBounds(r);var a=s.getZoom()||0;i!==null&&a>i&&s.setZoom(i+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,i,r,o,s;if(this.div&&this.center){var a=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,l=this.backgroundPosition.split(" "),g=parseInt(((e=l[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt(((n=l[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(d!==null?"".concat(d.y,"px"):"0","; left: ").concat(d!==null?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=a,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(g,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(u,"px, -").concat(g+this.width,"px, -").concat(u+this.height,", -").concat(g,")"));var f=document.createElement("div");f.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((i=this.sums)===null||i===void 0)&&i.text&&(f.innerText="".concat((r=this.sums)===null||r===void 0?void 0:r.text)),!((o=this.sums)===null||o===void 0)&&o.html&&(f.innerHTML="".concat((s=this.sums)===null||s===void 0?void 0:s.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(f),this.div.title=a,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),i=n[Math.min(n.length-1,Math.max(0,e.index-1))];i&&(this.url=i.url,this.height=i.height,this.width=i.width,i.className&&(this.className="".concat(this.clusterClassName," ").concat(i.className)),this.anchorText=i.anchorText||[0,0],this.anchorIcon=i.anchorIcon||[this.height/2,this.width/2],this.textColor=i.textColor||"black",this.textSize=i.textSize||11,this.textDecoration=i.textDecoration||"none",this.fontWeight=i.fontWeight||"bold",this.fontStyle=i.fontStyle||"normal",this.fontFamily=i.fontFamily||"Arial,sans-serif",this.backgroundPosition=i.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t}(),b1e=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new A1e(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),i=0,r=n;i<r.length;i++){var o=r[i],s=o.getPosition();s&&e.extend(s)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var i=e.getPosition();if(i){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+i.lat())/r,(this.center.lng()*(r-1)+i.lng())/r),this.calculateBounds()}}}else{var i=e.getPosition();i&&(this.center=i,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var o=this.markers.length,s=this.markerClusterer.getMaxZoom(),a=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(s!==null&&typeof a<"u"&&a>s)e.getMap()!==this.map&&e.setMap(this.map);else if(o<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(o===this.minClusterSize)for(var l=0,g=this.markers;l<g.length;l++){var u=g[l];u.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,i=this.markerClusterer.getMaxZoom(),r=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(i!==null&&typeof r<"u"&&r>i){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t}();function y1e(t,e){var n=t.length,i=n.toString().length,r=Math.min(i,e);return{text:n.toString(),index:r,title:""}}var v1e=2e3,S1e=500,Z1e="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",G1e="png",B1e=[53,56,66,78,90],R1e="cluster",dU=function(){function t(e,n,i){n===void 0&&(n=[]),i===void 0&&(i={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=i.gridSize||60,this.minClusterSize=i.minimumClusterSize||2,this.maxZoom=i.maxZoom||null,this.styles=i.styles||[],this.title=i.title||"",this.zoomOnClick=!0,i.zoomOnClick!==void 0&&(this.zoomOnClick=i.zoomOnClick),this.averageCenter=!1,i.averageCenter!==void 0&&(this.averageCenter=i.averageCenter),this.ignoreHidden=!1,i.ignoreHidden!==void 0&&(this.ignoreHidden=i.ignoreHidden),this.enableRetinaIcons=!1,i.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=i.enableRetinaIcons),this.imagePath=i.imagePath||Z1e,this.imageExtension=i.imageExtension||G1e,this.imageSizes=i.imageSizes||B1e,this.calculator=i.calculator||y1e,this.batchSize=i.batchSize||v1e,this.batchSizeIE=i.batchSizeIE||S1e,this.clusterClass=i.clusterClass||R1e,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var i=n[e];i.getMap()!==this.activeMap&&i.setMap(this.activeMap)}for(var r=0,o=this.clusters;r<o.length;r++){var s=o[r];s.remove()}this.clusters=[];for(var a=0,l=this.listeners;a<l.length;a++){var g=l[a];google.maps.event.removeListener(g)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,i=0,r=e;i<r.length;i++){var o=r[i],s=o.getPosition();s&&n.extend(s)}var a=this.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];r&&this.pushMarkerTo(r)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var i=0;i<this.markers.length;i++)if(e===this.markers[i]){n=i;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var i=this.removeMarker_(e);return!n&&i&&this.repaint(),i},t.prototype.removeMarkers=function(e,n){for(var i=!1,r=0,o=e;r<o.length;r++){var s=o[r];i=i||this.removeMarker_(s)}return!n&&i&&this.repaint(),i},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var i=0,r=e;i<r.length;i++){var o=r[i];o.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),i=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));i!==null&&(i.x+=this.gridSize,i.y-=this.gridSize);var r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(r!==null&&(r.x-=this.gridSize,r.y+=this.gridSize),i!==null){var o=n.fromDivPixelToLatLng(i);o!==null&&e.extend(o)}if(r!==null){var s=n.fromDivPixelToLatLng(r);s!==null&&e.extend(s)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,i=this.clusters;n<i.length;n++){var r=i[n];r.remove()}this.clusters=[];for(var o=0,s=this.markers;o<s.length;o++){var a=s[o];a.isAdded=!1,e&&a.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var i=6371,r=(n.lat()-e.lat())*Math.PI/180,o=(n.lng()-e.lng())*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return i*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},t.prototype.isMarkerInBounds=function(e,n){var i=e.getPosition();return i?n.contains(i):!1},t.prototype.addToClosestCluster=function(e){for(var n,i=4e4,r=null,o=0,s=this.clusters;o<s.length;o++){var a=s[o];n=a;var l=n.getCenter(),g=e.getPosition();if(l&&g){var u=this.distanceBetweenPoints(l,g);u<i&&(i=u,r=n)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):(n=new b1e(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var i=this.getMap(),r=i!==null&&("getBounds"in i)?i.getBounds():null,o=(i==null?void 0:i.getZoom())||0,s=o>3?new google.maps.LatLngBounds(r==null?void 0:r.getSouthWest(),r==null?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(s),l=Math.min(e+this.batchSize,this.markers.length),g=e;g<l;g++){var u=this.markers[g];u&&!u.isAdded&&this.isMarkerInBounds(u,a)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(l<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(l)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var d=0,h=this.clusters;d<h.length;d++){var f=h[d];f.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(r){for(var o in r.prototype){var s=o;this.prototype[s]=r.prototype[s]}return this}).apply(e,[n])},t}(),fo={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Nt={averageCenter:function(t,e){t.setAverageCenter(e)},batchSizeIE:function(t,e){t.setBatchSizeIE(e)},calculator:function(t,e){t.setCalculator(e)},clusterClass:function(t,e){t.setClusterClass(e)},enableRetinaIcons:function(t,e){t.setEnableRetinaIcons(e)},gridSize:function(t,e){t.setGridSize(e)},ignoreHidden:function(t,e){t.setIgnoreHidden(e)},imageExtension:function(t,e){t.setImageExtension(e)},imagePath:function(t,e){t.setImagePath(e)},imageSizes:function(t,e){t.setImageSizes(e)},maxZoom:function(t,e){t.setMaxZoom(e)},minimumClusterSize:function(t,e){t.setMinimumClusterSize(e)},styles:function(t,e){t.setStyles(e)},title:function(t,e){t.setTitle(e)},zoomOnClick:function(t,e){t.setZoomOnClick(e)}},k1e={};function V1e(t){var e=t.children,n=t.options,i=t.averageCenter,r=t.batchSizeIE,o=t.calculator,s=t.clusterClass,a=t.enableRetinaIcons,l=t.gridSize,g=t.ignoreHidden,u=t.imageExtension,d=t.imagePath,h=t.imageSizes,f=t.maxZoom,A=t.minimumClusterSize,p=t.styles,y=t.title,v=t.zoomOnClick,S=t.onClick,Z=t.onClusteringBegin,R=t.onClusteringEnd,W=t.onMouseOver,B=t.onMouseOut,k=t.onLoad,w=t.onUnmount,J=m.useState(null),X=J[0],Y=J[1],z=m.useContext(yt),P=m.useState(null),$=P[0],oe=P[1],q=m.useState(null),K=q[0],_=q[1],de=m.useState(null),ne=de[0],se=de[1],E=m.useState(null),M=E[0],T=E[1],U=m.useState(null),H=U[0],ie=U[1];return m.useEffect(function(){X&&B&&(M!==null&&google.maps.event.removeListener(M),T(google.maps.event.addListener(X,fo.onMouseOut,B)))},[B]),m.useEffect(function(){X&&W&&(H!==null&&google.maps.event.removeListener(H),ie(google.maps.event.addListener(X,fo.onMouseOver,W)))},[W]),m.useEffect(function(){X&&S&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(X,fo.onClick,S)))},[S]),m.useEffect(function(){X&&Z&&(K!==null&&google.maps.event.removeListener(K),_(google.maps.event.addListener(X,fo.onClusteringBegin,Z)))},[Z]),m.useEffect(function(){X&&R&&(ne!==null&&google.maps.event.removeListener(ne),_(google.maps.event.addListener(X,fo.onClusteringEnd,R)))},[R]),m.useEffect(function(){typeof i<"u"&&X!==null&&Nt.averageCenter(X,i)},[X,i]),m.useEffect(function(){typeof r<"u"&&X!==null&&Nt.batchSizeIE(X,r)},[X,r]),m.useEffect(function(){typeof o<"u"&&X!==null&&Nt.calculator(X,o)},[X,o]),m.useEffect(function(){typeof s<"u"&&X!==null&&Nt.clusterClass(X,s)},[X,s]),m.useEffect(function(){typeof a<"u"&&X!==null&&Nt.enableRetinaIcons(X,a)},[X,a]),m.useEffect(function(){typeof l<"u"&&X!==null&&Nt.gridSize(X,l)},[X,l]),m.useEffect(function(){typeof g<"u"&&X!==null&&Nt.ignoreHidden(X,g)},[X,g]),m.useEffect(function(){typeof u<"u"&&X!==null&&Nt.imageExtension(X,u)},[X,u]),m.useEffect(function(){typeof d<"u"&&X!==null&&Nt.imagePath(X,d)},[X,d]),m.useEffect(function(){typeof h<"u"&&X!==null&&Nt.imageSizes(X,h)},[X,h]),m.useEffect(function(){typeof f<"u"&&X!==null&&Nt.maxZoom(X,f)},[X,f]),m.useEffect(function(){typeof A<"u"&&X!==null&&Nt.minimumClusterSize(X,A)},[X,A]),m.useEffect(function(){typeof p<"u"&&X!==null&&Nt.styles(X,p)},[X,p]),m.useEffect(function(){typeof y<"u"&&X!==null&&Nt.title(X,y)},[X,y]),m.useEffect(function(){typeof v<"u"&&X!==null&&Nt.zoomOnClick(X,v)},[X,v]),m.useEffect(function(){if(z){var Ae=Qe({},n||k1e),Ie=new dU(z,[],Ae);return i&&Nt.averageCenter(Ie,i),r&&Nt.batchSizeIE(Ie,r),o&&Nt.calculator(Ie,o),s&&Nt.clusterClass(Ie,s),a&&Nt.enableRetinaIcons(Ie,a),l&&Nt.gridSize(Ie,l),g&&Nt.ignoreHidden(Ie,g),u&&Nt.imageExtension(Ie,u),d&&Nt.imagePath(Ie,d),h&&Nt.imageSizes(Ie,h),f&&Nt.maxZoom(Ie,f),A&&Nt.minimumClusterSize(Ie,A),p&&Nt.styles(Ie,p),y&&Nt.title(Ie,y),v&&Nt.zoomOnClick(Ie,v),B&&T(google.maps.event.addListener(Ie,fo.onMouseOut,B)),W&&ie(google.maps.event.addListener(Ie,fo.onMouseOver,W)),S&&oe(google.maps.event.addListener(Ie,fo.onClick,S)),Z&&_(google.maps.event.addListener(Ie,fo.onClusteringBegin,Z)),R&&se(google.maps.event.addListener(Ie,fo.onClusteringEnd,R)),Y(Ie),k&&k(Ie),function(){M!==null&&google.maps.event.removeListener(M),H!==null&&google.maps.event.removeListener(H),$!==null&&google.maps.event.removeListener($),K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),w&&w(Ie)}}},[]),X!==null&&e(X)||null}m.memo(V1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={markerClusterer:null},n.setClustererCallback=function(){n.state.markerClusterer!==null&&n.props.onLoad&&n.props.onLoad(n.state.markerClusterer)},n}return e.prototype.componentDidMount=function(){if(this.context){var n=new dU(this.context,[],this.props.options);this.registeredEvents=Bt({updaterMap:Nt,eventMap:fo,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{markerClusterer:n}},this.setClustererCallback)}},e.prototype.componentDidUpdate=function(n){this.state.markerClusterer&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:Nt,eventMap:fo,prevProps:n,nextProps:this.props,instance:this.state.markerClusterer}))},e.prototype.componentWillUnmount=function(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),kt(this.registeredEvents),this.state.markerClusterer.setMap(null))},e.prototype.render=function(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null},e.contextType=yt,e})(m.PureComponent);function wH(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var IU=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(g){g.returnValue=!1,g.preventDefault&&g.preventDefault(),e.enableEventPropagation||wH(g)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var i=this.getPanes();if(i!==null&&i[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var r=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-r.left-r.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var o=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],s=0,a=o;s<a.length;s++){var l=a[s];this.eventListeners.push(google.maps.event.addListener(this.div,l,wH))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var i=0,r=0,o=n.getBounds();o&&!o.contains(this.position)&&n.setCenter(this.position);var s=n.getDiv(),a=s.offsetWidth,l=s.offsetHeight,g=this.pixelOffset.width,u=this.pixelOffset.height,d=this.div.offsetWidth,h=this.div.offsetHeight,f=this.infoBoxClearance.width,A=this.infoBoxClearance.height,p=this.getProjection(),y=p.fromLatLngToContainerPixel(this.position);y!==null&&(y.x<-g+f?i=y.x+g-f:y.x+d+g+f>a&&(i=y.x+d+g+f-a),this.alignBottom?y.y<-u+A+h?r=y.y+u-A-h:y.y+u+A>l&&(r=y.y+u+A-l):y.y<-u+A?r=y.y+u-A:y.y+h+u+A>l&&(r=y.y+h+u+A-l)),i===0&&r===0||n.panBy(i,r)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var i=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+i*100+')"',this.div.style.filter="alpha(opacity="+i*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,i=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var i=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var r=n.getPosition();i.setPosition(r)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){i.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var i=n[e];google.maps.event.removeListener(i)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(r){for(var o in r.prototype)Object.prototype.hasOwnProperty.call(this,o)||(this.prototype[o]=r.prototype[o]);return this}).apply(e,[n])},t}(),WH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},xH={options:function(t,e){t.setOptions(e)},position:function(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible:function(t,e){t.setVisible(e)},zIndex:function(t,e){t.setZIndex(e)}},w1e={};function W1e(t){var e=t.children,n=t.anchor,i=t.options,r=t.position,o=t.zIndex,s=t.onCloseClick,a=t.onDomReady,l=t.onContentChanged,g=t.onPositionChanged,u=t.onZindexChanged,d=t.onLoad,h=t.onUnmount,f=m.useContext(yt),A=m.useState(null),p=A[0],y=A[1],v=m.useState(null),S=v[0],Z=v[1],R=m.useState(null),W=R[0],B=R[1],k=m.useState(null),w=k[0],J=k[1],X=m.useState(null),Y=X[0],z=X[1],P=m.useState(null),$=P[0],oe=P[1],q=m.useRef(null);return m.useEffect(function(){f&&p!==null&&(p.close(),n?p.open(f,n):p.getPosition()&&p.open(f))},[f,p,n]),m.useEffect(function(){i&&p!==null&&p.setOptions(i)},[p,i]),m.useEffect(function(){if(r&&p!==null){var K=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);p.setPosition(K)}},[r]),m.useEffect(function(){typeof o=="number"&&p!==null&&p.setZIndex(o)},[o]),m.useEffect(function(){p&&s&&(S!==null&&google.maps.event.removeListener(S),Z(google.maps.event.addListener(p,"closeclick",s)))},[s]),m.useEffect(function(){p&&a&&(W!==null&&google.maps.event.removeListener(W),B(google.maps.event.addListener(p,"domready",a)))},[a]),m.useEffect(function(){p&&l&&(w!==null&&google.maps.event.removeListener(w),J(google.maps.event.addListener(p,"content_changed",l)))},[l]),m.useEffect(function(){p&&g&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(p,"position_changed",g)))},[g]),m.useEffect(function(){p&&u&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),m.useEffect(function(){if(f){var K=i||w1e,_=K.position,de=gw(K,["position"]),ne=void 0;_&&!(_ instanceof google.maps.LatLng)&&(ne=new google.maps.LatLng(_.lat,_.lng));var se=new IU(Qe(Qe({},de),ne?{position:ne}:{}));q.current=document.createElement("div"),y(se),s&&Z(google.maps.event.addListener(se,"closeclick",s)),a&&B(google.maps.event.addListener(se,"domready",a)),l&&J(google.maps.event.addListener(se,"content_changed",l)),g&&z(google.maps.event.addListener(se,"position_changed",g)),u&&oe(google.maps.event.addListener(se,"zindex_changed",u)),se.setContent(q.current),n?se.open(f,n):se.getPosition()?se.open(f):jn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),d&&d(se)}return function(){p!==null&&(S&&google.maps.event.removeListener(S),w&&google.maps.event.removeListener(w),W&&google.maps.event.removeListener(W),Y&&google.maps.event.removeListener(Y),$&&google.maps.event.removeListener($),h&&h(p),p.close())}},[]),q.current?Pr.createPortal(m.Children.only(e),q.current):null}m.memo(W1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=null,n.state={infoBox:null},n.open=function(i,r){r?n.context!==null&&i.open(n.context,r):i.getPosition()?n.context!==null&&i.open(n.context):jn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},n.setInfoBoxCallback=function(){n.state.infoBox!==null&&n.containerElement!==null&&(n.state.infoBox.setContent(n.containerElement),n.open(n.state.infoBox,n.props.anchor),n.props.onLoad&&n.props.onLoad(n.state.infoBox))},n}return e.prototype.componentDidMount=function(){var n=this.props.options||{},i=n.position,r=gw(n,["position"]),o;i&&!(i instanceof google.maps.LatLng)&&(o=new google.maps.LatLng(i.lat,i.lng));var s=new IU(Qe(Qe({},r),o?{position:o}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Bt({updaterMap:xH,eventMap:WH,prevProps:{},nextProps:this.props,instance:s}),this.setState({infoBox:s},this.setInfoBoxCallback)},e.prototype.componentDidUpdate=function(n){var i=this.state.infoBox;i!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:xH,eventMap:WH,prevProps:n,nextProps:this.props,instance:i}))},e.prototype.componentWillUnmount=function(){var n=this.props.onUnmount,i=this.state.infoBox;i!==null&&(n&&n(i),kt(this.registeredEvents),i.close())},e.prototype.render=function(){return this.containerElement?Pr.createPortal(m.Children.only(this.props.children),this.containerElement):null},e.contextType=yt,e})(m.PureComponent);var x1e=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){var s=o[r];if(!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},XH=aU(x1e);const JH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ZG=1,NC=8;class cw{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(r!==ZG)throw new Error(`Got v${r} data when expected v${ZG}.`);const o=JH[i&15];if(!o)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new cw(a,s,o,e)}constructor(e,n=64,i=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const o=JH.indexOf(this.ArrayType),s=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${i}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,NC,e),this.coords=new this.ArrayType(this.data,NC+a+l,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(NC+s+a+l),this.ids=new this.IndexArrayType(this.data,NC,e),this.coords=new this.ArrayType(this.data,NC+a+l,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(ZG<<4)+o]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=n,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return R1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:s,nodeSize:a}=this,l=[0,o.length-1,0],g=[];for(;l.length;){const u=l.pop()||0,d=l.pop()||0,h=l.pop()||0;if(d-h<=a){for(let y=h;y<=d;y++){const v=s[2*y],S=s[2*y+1];v>=e&&v<=i&&S>=n&&S<=r&&g.push(o[y])}continue}const f=h+d>>1,A=s[2*f],p=s[2*f+1];A>=e&&A<=i&&p>=n&&p<=r&&g.push(o[f]),(u===0?e<=A:n<=p)&&(l.push(h),l.push(f-1),l.push(1-u)),(u===0?i>=A:r>=p)&&(l.push(f+1),l.push(d),l.push(1-u))}return g}within(e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:s}=this,a=[0,r.length-1,0],l=[],g=i*i;for(;a.length;){const u=a.pop()||0,d=a.pop()||0,h=a.pop()||0;if(d-h<=s){for(let y=h;y<=d;y++)EH(o[2*y],o[2*y+1],e,n)<=g&&l.push(r[y]);continue}const f=h+d>>1,A=o[2*f],p=o[2*f+1];EH(A,p,e,n)<=g&&l.push(r[f]),(u===0?e-i<=A:n-i<=p)&&(a.push(h),a.push(f-1),a.push(1-u)),(u===0?e+i>=A:n+i>=p)&&(a.push(f+1),a.push(d),a.push(1-u))}return l}}function R1(t,e,n,i,r,o){if(r-i<=n)return;const s=i+r>>1;CU(t,e,s,i,r,o),R1(t,e,n,i,s-1,1-o),R1(t,e,n,s+1,r,1-o)}function CU(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const g=r-i+1,u=n-i+1,d=Math.log(g),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(g-h)/g)*(u-g/2<0?-1:1),A=Math.max(i,Math.floor(n-u*h/g+f)),p=Math.min(r,Math.floor(n+(g-u)*h/g+f));CU(t,e,n,A,p,o)}const s=e[2*n+o];let a=i,l=r;for(YC(t,e,i,n),e[2*r+o]>s&&YC(t,e,i,r);a<l;){for(YC(t,e,a,l),a++,l--;e[2*a+o]<s;)a++;for(;e[2*l+o]>s;)l--}e[2*i+o]===s?YC(t,e,i,l):(l++,YC(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function YC(t,e,n,i){GG(t,n,i),GG(e,2*n,2*i),GG(e,2*n+1,2*i+1)}function GG(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function EH(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}const X1e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},HH=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),Mg=2,Gl=3,BG=4,bl=5,hU=6;class J1e{constructor(e){this.options=Object.assign(Object.create(X1e),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:n,minZoom:i,maxZoom:r}=this.options;n&&console.time("total time");const o=`prepare ${e.length} points`;n&&console.time(o),this.points=e;const s=[];for(let l=0;l<e.length;l++){const g=e[l];if(!g.geometry)continue;const[u,d]=g.geometry.coordinates,h=HH(Qp(u)),f=HH($p(d));s.push(h,f,1/0,l,-1,1),this.options.reduce&&s.push(0)}let a=this.trees[r+1]=this._createTree(s);n&&console.timeEnd(o);for(let l=r;l>=i;l--){const g=+Date.now();a=this.trees[l]=this._createTree(this._cluster(a,l)),n&&console.log("z%d: %d clusters in %dms",l,a.numItems,+Date.now()-g)}return n&&console.timeEnd("total time"),this}getClusters(e,n){let i=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let o=e[2]===180?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,o=180;else if(i>o){const d=this.getClusters([i,r,180,s],n),h=this.getClusters([-180,r,o,s],n);return d.concat(h)}const a=this.trees[this._limitZoom(n)],l=a.range(Qp(i),$p(s),Qp(o),$p(r)),g=a.data,u=[];for(const d of l){const h=this.stride*d;u.push(g[h+bl]>1?NH(g,h,this.clusterProps):this.points[g[h+Gl]])}return u}getChildren(e){const n=this._getOriginId(e),i=this._getOriginZoom(e),r="No cluster with the specified id.",o=this.trees[i];if(!o)throw new Error(r);const s=o.data;if(n*this.stride>=s.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),l=s[n*this.stride],g=s[n*this.stride+1],u=o.within(l,g,a),d=[];for(const h of u){const f=h*this.stride;s[f+BG]===e&&d.push(s[f+bl]>1?NH(s,f,this.clusterProps):this.points[s[f+Gl]])}if(d.length===0)throw new Error(r);return d}getLeaves(e,n,i){n=n||10,i=i||0;const r=[];return this._appendLeaves(r,e,n,i,0),r}getTile(e,n,i){const r=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:s,radius:a}=this.options,l=a/s,g=(i-l)/o,u=(i+1+l)/o,d={features:[]};return this._addTileFeatures(r.range((n-l)/o,g,(n+1+l)/o,u),r.data,n,i,o,d),n===0&&this._addTileFeatures(r.range(1-l/o,g,1,u),r.data,o,i,o,d),n===o-1&&this._addTileFeatures(r.range(0,g,l/o,u),r.data,-1,i,o,d),d.features.length?d:null}getClusterExpansionZoom(e){let n=this._getOriginZoom(e)-1;for(;n<=this.options.maxZoom;){const i=this.getChildren(e);if(n++,i.length!==1)break;e=i[0].properties.cluster_id}return n}_appendLeaves(e,n,i,r,o){const s=this.getChildren(n);for(const a of s){const l=a.properties;if(l&&l.cluster?o+l.point_count<=r?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,i,r,o):o<r?o++:e.push(a),e.length===i)break}return o}_createTree(e){const n=new cw(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let i=0;i<e.length;i+=this.stride)n.add(e[i],e[i+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,i,r,o,s){for(const a of e){const l=a*this.stride,g=n[l+bl]>1;let u,d,h;if(g)u=fU(n,l,this.clusterProps),d=n[l],h=n[l+1];else{const p=this.points[n[l+Gl]];u=p.properties;const[y,v]=p.geometry.coordinates;d=Qp(y),h=$p(v)}const f={type:1,geometry:[[Math.round(this.options.extent*(d*o-i)),Math.round(this.options.extent*(h*o-r))]],tags:u};let A;g||this.options.generateId?A=n[l+Gl]:A=this.points[n[l+Gl]].id,A!==void 0&&(f.id=A),s.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){const{radius:i,extent:r,reduce:o,minPoints:s}=this.options,a=i/(r*Math.pow(2,n)),l=e.data,g=[],u=this.stride;for(let d=0;d<l.length;d+=u){if(l[d+Mg]<=n)continue;l[d+Mg]=n;const h=l[d],f=l[d+1],A=e.within(l[d],l[d+1],a),p=l[d+bl];let y=p;for(const v of A){const S=v*u;l[S+Mg]>n&&(y+=l[S+bl])}if(y>p&&y>=s){let v=h*p,S=f*p,Z,R=-1;const W=((d/u|0)<<5)+(n+1)+this.points.length;for(const B of A){const k=B*u;if(l[k+Mg]<=n)continue;l[k+Mg]=n;const w=l[k+bl];v+=l[k]*w,S+=l[k+1]*w,l[k+BG]=W,o&&(Z||(Z=this._map(l,d,!0),R=this.clusterProps.length,this.clusterProps.push(Z)),o(Z,this._map(l,k)))}l[d+BG]=W,g.push(v/y,S/y,1/0,W,-1,y),o&&g.push(R)}else{for(let v=0;v<u;v++)g.push(l[d+v]);if(y>1)for(const v of A){const S=v*u;if(!(l[S+Mg]<=n)){l[S+Mg]=n;for(let Z=0;Z<u;Z++)g.push(l[S+Z])}}}}return g}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,i){if(e[n+bl]>1){const s=this.clusterProps[e[n+hU]];return i?Object.assign({},s):s}const r=this.points[e[n+Gl]].properties,o=this.options.map(r);return i&&o===r?Object.assign({},o):o}}function NH(t,e,n){return{type:"Feature",id:t[e+Gl],properties:fU(t,e,n),geometry:{type:"Point",coordinates:[E1e(t[e]),H1e(t[e+1])]}}}function fU(t,e,n){const i=t[e+bl],r=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?`${Math.round(i/100)/10}k`:i,o=t[e+hU],s=o===-1?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+Gl],point_count:i,point_count_abbreviated:r})}function Qp(t){return t/360+.5}function $p(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function E1e(t){return(t-.5)*360}function H1e(t){const e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function N1e(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}class xr{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class k1{constructor({markers:e,position:n}){this.markers=e,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const n of this.markers)e.extend(xr.getPosition(n));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>xr.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(xr.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Y1e{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return F1e(e)}}const F1e=t=>t.map(n=>new k1({position:xr.getPosition(n),markers:[n]}));class M1e extends Y1e{constructor(e){var{maxZoom:n,radius:i=60}=e,r=N1e(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new J1e(Object.assign({maxZoom:this.maxZoom,radius:i},r))}calculate(e){let n=!1;const i={zoom:e.map.getZoom()};if(!XH(e.markers,this.markers)){n=!0,this.markers=[...e.markers];const r=this.markers.map(o=>{const s=xr.getPosition(o);return{type:"Feature",geometry:{type:"Point",coordinates:[s.lng(),s.lat()]},properties:{marker:o}}});this.superCluster.load(r)}return n||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(n=!XH(this.state,i)),this.state=i,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(n=>this.transformCluster(n))}transformCluster({geometry:{coordinates:[e,n]},properties:i}){if(i.cluster)return new k1({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:n,lng:e}});const r=i.marker;return new k1({markers:[r],position:xr.getPosition(r)})}}class T1e{constructor(e,n){this.markers={sum:e.length};const i=n.map(o=>o.count),r=i.reduce((o,s)=>o+s,0);this.clusters={count:n.length,markers:{mean:r/n.length,sum:r,min:Math.min(...i),max:Math.max(...i)}}}}class L1e{render({count:e,position:n},i,r){const s=`<svg fill="${e>Math.max(10,i.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,a=`Cluster of ${e} markers`,l=Number(google.maps.Marker.MAX_ZINDEX)+e;if(xr.isAdvancedMarkerAvailable(r)){const d=new DOMParser().parseFromString(s,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");const h={map:r,position:n,zIndex:l,title:a,content:d};return new google.maps.marker.AdvancedMarkerElement(h)}const g={position:n,zIndex:l,title:a,icon:{url:`data:image/svg+xml;base64,${btoa(s)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(g)}}function _1e(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}class uw{constructor(){_1e(uw,google.maps.OverlayView)}}var Nh;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Nh||(Nh={}));const D1e=(t,e,n)=>{n.fitBounds(e.bounds)};class K1e extends uw{constructor({map:e,markers:n=[],algorithmOptions:i={},algorithm:r=new M1e(i),renderer:o=new L1e,onClusterClick:s=D1e}){super(),this.markers=[...n],this.clusters=[],this.algorithm=r,this.renderer=o,this.onClusterClick=s,e&&this.setMap(e)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(i=>{this.addMarker(i,!0)}),n||this.render()}removeMarker(e,n){const i=this.markers.indexOf(e);return i===-1?!1:(xr.setMap(e,null),this.markers.splice(i,1),n||this.render(),!0)}removeMarkers(e,n){let i=!1;return e.forEach(r=>{i=this.removeMarker(r,!0)||i}),i&&!n&&this.render(),i}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Nh.CLUSTERING_BEGIN,this);const{clusters:n,changed:i}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(i||i==null){const r=new Set;for(const s of n)s.markers.length==1&&r.add(s.markers[0]);const o=[];for(const s of this.clusters)s.marker!=null&&(s.markers.length==1?r.has(s.marker)||xr.setMap(s.marker,null):o.push(s.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>o.forEach(s=>xr.setMap(s,null)))}google.maps.event.trigger(this,Nh.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>xr.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new T1e(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(i=>{i.markers.length===1?i.marker=i.markers[0]:(i.marker=this.renderer.render(i,e,n),i.markers.forEach(r=>xr.setMap(r,null)),this.onClusterClick&&i.marker.addListener("click",r=>{google.maps.event.trigger(this,Nh.CLUSTER_CLICK,i),this.onClusterClick(r,i,n)})),xr.setMap(i.marker,n)})}}function z1e(t){var e=i1e(),n=m.useState(null),i=n[0],r=n[1];return m.useEffect(function(){if(e&&i===null){var o=new K1e(Qe(Qe({},t),{map:e}));r(o)}},[e]),i}function P1e(t){var e=t.children,n=t.options,i=z1e(n);return i!==null?e(i):null}m.memo(P1e);var YH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},FH={options:function(t,e){t.setOptions(e)},position:function(t,e){t.setPosition(e)},zIndex:function(t,e){t.setZIndex(e)}};function U1e(t){var e=t.children,n=t.anchor,i=t.options,r=t.position,o=t.zIndex,s=t.onCloseClick,a=t.onDomReady,l=t.onContentChanged,g=t.onPositionChanged,u=t.onZindexChanged,d=t.onLoad,h=t.onUnmount,f=m.useContext(yt),A=m.useState(null),p=A[0],y=A[1],v=m.useState(null),S=v[0],Z=v[1],R=m.useState(null),W=R[0],B=R[1],k=m.useState(null),w=k[0],J=k[1],X=m.useState(null),Y=X[0],z=X[1],P=m.useState(null),$=P[0],oe=P[1],q=m.useRef(null);return m.useEffect(function(){p!==null&&(p.close(),n?p.open(f,n):p.getPosition()&&p.open(f))},[f,p,n]),m.useEffect(function(){i&&p!==null&&p.setOptions(i)},[p,i]),m.useEffect(function(){r&&p!==null&&p.setPosition(r)},[r]),m.useEffect(function(){typeof o=="number"&&p!==null&&p.setZIndex(o)},[o]),m.useEffect(function(){p&&s&&(S!==null&&google.maps.event.removeListener(S),Z(google.maps.event.addListener(p,"closeclick",s)))},[s]),m.useEffect(function(){p&&a&&(W!==null&&google.maps.event.removeListener(W),B(google.maps.event.addListener(p,"domready",a)))},[a]),m.useEffect(function(){p&&l&&(w!==null&&google.maps.event.removeListener(w),J(google.maps.event.addListener(p,"content_changed",l)))},[l]),m.useEffect(function(){p&&g&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(p,"position_changed",g)))},[g]),m.useEffect(function(){p&&u&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),m.useEffect(function(){var K=new google.maps.InfoWindow(Qe({},i||{}));return y(K),q.current=document.createElement("div"),s&&Z(google.maps.event.addListener(K,"closeclick",s)),a&&B(google.maps.event.addListener(K,"domready",a)),l&&J(google.maps.event.addListener(K,"content_changed",l)),g&&z(google.maps.event.addListener(K,"position_changed",g)),u&&oe(google.maps.event.addListener(K,"zindex_changed",u)),K.setContent(q.current),r&&K.setPosition(r),o&&K.setZIndex(o),n?K.open(f,n):K.getPosition()?K.open(f):jn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),d&&d(K),function(){S&&google.maps.event.removeListener(S),w&&google.maps.event.removeListener(w),W&&google.maps.event.removeListener(W),Y&&google.maps.event.removeListener(Y),$&&google.maps.event.removeListener($),h&&h(K),K.close()}},[]),q.current?Pr.createPortal(m.Children.only(e),q.current):null}m.memo(U1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=null,n.state={infoWindow:null},n.open=function(i,r){r?i.open(n.context,r):i.getPosition()?i.open(n.context):jn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},n.setInfoWindowCallback=function(){n.state.infoWindow!==null&&n.containerElement!==null&&(n.state.infoWindow.setContent(n.containerElement),n.open(n.state.infoWindow,n.props.anchor),n.props.onLoad&&n.props.onLoad(n.state.infoWindow))},n}return e.prototype.componentDidMount=function(){var n=new google.maps.InfoWindow(Qe({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=Bt({updaterMap:FH,eventMap:YH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{infoWindow:n}},this.setInfoWindowCallback)},e.prototype.componentDidUpdate=function(n){this.state.infoWindow!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:FH,eventMap:YH,prevProps:n,nextProps:this.props,instance:this.state.infoWindow}))},e.prototype.componentWillUnmount=function(){this.state.infoWindow!==null&&(kt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())},e.prototype.render=function(){return this.containerElement?Pr.createPortal(m.Children.only(this.props.children),this.containerElement):null},e.contextType=yt,e})(m.PureComponent);var MH={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},TH={draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},path:function(t,e){t.setPath(e)},visible:function(t,e){t.setVisible(e)}},j1e={};function O1e(t){var e=t.options,n=t.draggable,i=t.editable,r=t.visible,o=t.path,s=t.onDblClick,a=t.onDragEnd,l=t.onDragStart,g=t.onMouseDown,u=t.onMouseMove,d=t.onMouseOut,h=t.onMouseOver,f=t.onMouseUp,A=t.onRightClick,p=t.onClick,y=t.onDrag,v=t.onLoad,S=t.onUnmount,Z=m.useContext(yt),R=m.useState(null),W=R[0],B=R[1],k=m.useState(null),w=k[0],J=k[1],X=m.useState(null),Y=X[0],z=X[1],P=m.useState(null),$=P[0],oe=P[1],q=m.useState(null),K=q[0],_=q[1],de=m.useState(null),ne=de[0],se=de[1],E=m.useState(null),M=E[0],T=E[1],U=m.useState(null),H=U[0],ie=U[1],Ae=m.useState(null),Ie=Ae[0],xe=Ae[1],Xe=m.useState(null),Je=Xe[0],Ne=Xe[1],et=m.useState(null),he=et[0],Be=et[1],Ge=m.useState(null),Me=Ge[0],Oe=Ge[1];return m.useEffect(function(){W!==null&&W.setMap(Z)},[Z]),m.useEffect(function(){typeof e<"u"&&W!==null&&W.setOptions(e)},[W,e]),m.useEffect(function(){typeof n<"u"&&W!==null&&W.setDraggable(n)},[W,n]),m.useEffect(function(){typeof i<"u"&&W!==null&&W.setEditable(i)},[W,i]),m.useEffect(function(){typeof r<"u"&&W!==null&&W.setVisible(r)},[W,r]),m.useEffect(function(){typeof o<"u"&&W!==null&&W.setPath(o)},[W,o]),m.useEffect(function(){W&&s&&(w!==null&&google.maps.event.removeListener(w),J(google.maps.event.addListener(W,"dblclick",s)))},[s]),m.useEffect(function(){W&&a&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(W,"dragend",a)))},[a]),m.useEffect(function(){W&&l&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(W,"dragstart",l)))},[l]),m.useEffect(function(){W&&g&&(K!==null&&google.maps.event.removeListener(K),_(google.maps.event.addListener(W,"mousedown",g)))},[g]),m.useEffect(function(){W&&u&&(ne!==null&&google.maps.event.removeListener(ne),se(google.maps.event.addListener(W,"mousemove",u)))},[u]),m.useEffect(function(){W&&d&&(M!==null&&google.maps.event.removeListener(M),T(google.maps.event.addListener(W,"mouseout",d)))},[d]),m.useEffect(function(){W&&h&&(H!==null&&google.maps.event.removeListener(H),ie(google.maps.event.addListener(W,"mouseover",h)))},[h]),m.useEffect(function(){W&&f&&(Ie!==null&&google.maps.event.removeListener(Ie),xe(google.maps.event.addListener(W,"mouseup",f)))},[f]),m.useEffect(function(){W&&A&&(Je!==null&&google.maps.event.removeListener(Je),Ne(google.maps.event.addListener(W,"rightclick",A)))},[A]),m.useEffect(function(){W&&p&&(he!==null&&google.maps.event.removeListener(he),Be(google.maps.event.addListener(W,"click",p)))},[p]),m.useEffect(function(){W&&y&&(Me!==null&&google.maps.event.removeListener(Me),Oe(google.maps.event.addListener(W,"drag",y)))},[y]),m.useEffect(function(){var Ye=new google.maps.Polyline(Qe(Qe({},e||j1e),{map:Z}));return o&&Ye.setPath(o),typeof r<"u"&&Ye.setVisible(r),typeof i<"u"&&Ye.setEditable(i),typeof n<"u"&&Ye.setDraggable(n),s&&J(google.maps.event.addListener(Ye,"dblclick",s)),a&&z(google.maps.event.addListener(Ye,"dragend",a)),l&&oe(google.maps.event.addListener(Ye,"dragstart",l)),g&&_(google.maps.event.addListener(Ye,"mousedown",g)),u&&se(google.maps.event.addListener(Ye,"mousemove",u)),d&&T(google.maps.event.addListener(Ye,"mouseout",d)),h&&ie(google.maps.event.addListener(Ye,"mouseover",h)),f&&xe(google.maps.event.addListener(Ye,"mouseup",f)),A&&Ne(google.maps.event.addListener(Ye,"rightclick",A)),p&&Be(google.maps.event.addListener(Ye,"click",p)),y&&Oe(google.maps.event.addListener(Ye,"drag",y)),B(Ye),v&&v(Ye),function(){w!==null&&google.maps.event.removeListener(w),Y!==null&&google.maps.event.removeListener(Y),$!==null&&google.maps.event.removeListener($),K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),M!==null&&google.maps.event.removeListener(M),H!==null&&google.maps.event.removeListener(H),Ie!==null&&google.maps.event.removeListener(Ie),Je!==null&&google.maps.event.removeListener(Je),he!==null&&google.maps.event.removeListener(he),S&&S(Ye),Ye.setMap(null)}},[]),null}m.memo(O1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={polyline:null},n.setPolylineCallback=function(){n.state.polyline!==null&&n.props.onLoad&&n.props.onLoad(n.state.polyline)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.Polyline(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:TH,eventMap:MH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{polyline:n}},this.setPolylineCallback)},e.prototype.componentDidUpdate=function(n){this.state.polyline!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:TH,eventMap:MH,prevProps:n,nextProps:this.props,instance:this.state.polyline}))},e.prototype.componentWillUnmount=function(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),kt(this.registeredEvents),this.state.polyline.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var LH={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},_H={draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},path:function(t,e){t.setPath(e)},paths:function(t,e){t.setPaths(e)},visible:function(t,e){t.setVisible(e)}};function Q1e(t){var e=t.options,n=t.draggable,i=t.editable,r=t.visible,o=t.path,s=t.paths,a=t.onDblClick,l=t.onDragEnd,g=t.onDragStart,u=t.onMouseDown,d=t.onMouseMove,h=t.onMouseOut,f=t.onMouseOver,A=t.onMouseUp,p=t.onRightClick,y=t.onClick,v=t.onDrag,S=t.onLoad,Z=t.onUnmount,R=t.onEdit,W=m.useContext(yt),B=m.useState(null),k=B[0],w=B[1],J=m.useState(null),X=J[0],Y=J[1],z=m.useState(null),P=z[0],$=z[1],oe=m.useState(null),q=oe[0],K=oe[1],_=m.useState(null),de=_[0],ne=_[1],se=m.useState(null),E=se[0],M=se[1],T=m.useState(null),U=T[0],H=T[1],ie=m.useState(null),Ae=ie[0],Ie=ie[1],xe=m.useState(null),Xe=xe[0],Je=xe[1],Ne=m.useState(null),et=Ne[0],he=Ne[1],Be=m.useState(null),Ge=Be[0],Me=Be[1],Oe=m.useState(null),Ye=Oe[0],Ct=Oe[1];return m.useEffect(function(){k!==null&&k.setMap(W)},[W]),m.useEffect(function(){typeof e<"u"&&k!==null&&k.setOptions(e)},[k,e]),m.useEffect(function(){typeof n<"u"&&k!==null&&k.setDraggable(n)},[k,n]),m.useEffect(function(){typeof i<"u"&&k!==null&&k.setEditable(i)},[k,i]),m.useEffect(function(){typeof r<"u"&&k!==null&&k.setVisible(r)},[k,r]),m.useEffect(function(){typeof o<"u"&&k!==null&&k.setPath(o)},[k,o]),m.useEffect(function(){typeof s<"u"&&k!==null&&k.setPaths(s)},[k,s]),m.useEffect(function(){k&&a&&(X!==null&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(k,"dblclick",a)))},[a]),m.useEffect(function(){k&&(google.maps.event.addListener(k.getPath(),"insert_at",function(){R==null||R(k)}),google.maps.event.addListener(k.getPath(),"set_at",function(){R==null||R(k)}))},[k,R]),m.useEffect(function(){k&&l&&(P!==null&&google.maps.event.removeListener(P),$(google.maps.event.addListener(k,"dragend",l)))},[l]),m.useEffect(function(){k&&g&&(q!==null&&google.maps.event.removeListener(q),K(google.maps.event.addListener(k,"dragstart",g)))},[g]),m.useEffect(function(){k&&u&&(de!==null&&google.maps.event.removeListener(de),ne(google.maps.event.addListener(k,"mousedown",u)))},[u]),m.useEffect(function(){k&&d&&(E!==null&&google.maps.event.removeListener(E),M(google.maps.event.addListener(k,"mousemove",d)))},[d]),m.useEffect(function(){k&&h&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(k,"mouseout",h)))},[h]),m.useEffect(function(){k&&f&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(k,"mouseover",f)))},[f]),m.useEffect(function(){k&&A&&(Xe!==null&&google.maps.event.removeListener(Xe),Je(google.maps.event.addListener(k,"mouseup",A)))},[A]),m.useEffect(function(){k&&p&&(et!==null&&google.maps.event.removeListener(et),he(google.maps.event.addListener(k,"rightclick",p)))},[p]),m.useEffect(function(){k&&y&&(Ge!==null&&google.maps.event.removeListener(Ge),Me(google.maps.event.addListener(k,"click",y)))},[y]),m.useEffect(function(){k&&v&&(Ye!==null&&google.maps.event.removeListener(Ye),Ct(google.maps.event.addListener(k,"drag",v)))},[v]),m.useEffect(function(){var j=new google.maps.Polygon(Qe(Qe({},e||{}),{map:W}));return o&&j.setPath(o),s&&j.setPaths(s),typeof r<"u"&&j.setVisible(r),typeof i<"u"&&j.setEditable(i),typeof n<"u"&&j.setDraggable(n),a&&Y(google.maps.event.addListener(j,"dblclick",a)),l&&$(google.maps.event.addListener(j,"dragend",l)),g&&K(google.maps.event.addListener(j,"dragstart",g)),u&&ne(google.maps.event.addListener(j,"mousedown",u)),d&&M(google.maps.event.addListener(j,"mousemove",d)),h&&H(google.maps.event.addListener(j,"mouseout",h)),f&&Ie(google.maps.event.addListener(j,"mouseover",f)),A&&Je(google.maps.event.addListener(j,"mouseup",A)),p&&he(google.maps.event.addListener(j,"rightclick",p)),y&&Me(google.maps.event.addListener(j,"click",y)),v&&Ct(google.maps.event.addListener(j,"drag",v)),w(j),S&&S(j),function(){X!==null&&google.maps.event.removeListener(X),P!==null&&google.maps.event.removeListener(P),q!==null&&google.maps.event.removeListener(q),de!==null&&google.maps.event.removeListener(de),E!==null&&google.maps.event.removeListener(E),U!==null&&google.maps.event.removeListener(U),Ae!==null&&google.maps.event.removeListener(Ae),Xe!==null&&google.maps.event.removeListener(Xe),et!==null&&google.maps.event.removeListener(et),Ge!==null&&google.maps.event.removeListener(Ge),Z&&Z(j),j.setMap(null)}},[]),null}m.memo(Q1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={polygon:null},n.setPolygonCallback=function(){n.state.polygon!==null&&n.props.onLoad&&n.props.onLoad(n.state.polygon)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.Polygon(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:_H,eventMap:LH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{polygon:n}},this.setPolygonCallback)},e.prototype.componentDidUpdate=function(n){this.state.polygon!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:_H,eventMap:LH,prevProps:n,nextProps:this.props,instance:this.state.polygon}))},e.prototype.componentWillUnmount=function(){this.state.polygon!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),kt(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var DH={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},KH={bounds:function(t,e){t.setBounds(e)},draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},visible:function(t,e){t.setVisible(e)}};function $1e(t){var e=t.options,n=t.bounds,i=t.draggable,r=t.editable,o=t.visible,s=t.onDblClick,a=t.onDragEnd,l=t.onDragStart,g=t.onMouseDown,u=t.onMouseMove,d=t.onMouseOut,h=t.onMouseOver,f=t.onMouseUp,A=t.onRightClick,p=t.onClick,y=t.onDrag,v=t.onBoundsChanged,S=t.onLoad,Z=t.onUnmount,R=m.useContext(yt),W=m.useState(null),B=W[0],k=W[1],w=m.useState(null),J=w[0],X=w[1],Y=m.useState(null),z=Y[0],P=Y[1],$=m.useState(null),oe=$[0],q=$[1],K=m.useState(null),_=K[0],de=K[1],ne=m.useState(null),se=ne[0],E=ne[1],M=m.useState(null),T=M[0],U=M[1],H=m.useState(null),ie=H[0],Ae=H[1],Ie=m.useState(null),xe=Ie[0],Xe=Ie[1],Je=m.useState(null),Ne=Je[0],et=Je[1],he=m.useState(null),Be=he[0],Ge=he[1],Me=m.useState(null),Oe=Me[0],Ye=Me[1],Ct=m.useState(null),j=Ct[0],be=Ct[1];return m.useEffect(function(){B!==null&&B.setMap(R)},[R]),m.useEffect(function(){typeof e<"u"&&B!==null&&B.setOptions(e)},[B,e]),m.useEffect(function(){typeof i<"u"&&B!==null&&B.setDraggable(i)},[B,i]),m.useEffect(function(){typeof r<"u"&&B!==null&&B.setEditable(r)},[B,r]),m.useEffect(function(){typeof o<"u"&&B!==null&&B.setVisible(o)},[B,o]),m.useEffect(function(){typeof n<"u"&&B!==null&&B.setBounds(n)},[B,n]),m.useEffect(function(){B&&s&&(J!==null&&google.maps.event.removeListener(J),X(google.maps.event.addListener(B,"dblclick",s)))},[s]),m.useEffect(function(){B&&a&&(z!==null&&google.maps.event.removeListener(z),P(google.maps.event.addListener(B,"dragend",a)))},[a]),m.useEffect(function(){B&&l&&(oe!==null&&google.maps.event.removeListener(oe),q(google.maps.event.addListener(B,"dragstart",l)))},[l]),m.useEffect(function(){B&&g&&(_!==null&&google.maps.event.removeListener(_),de(google.maps.event.addListener(B,"mousedown",g)))},[g]),m.useEffect(function(){B&&u&&(se!==null&&google.maps.event.removeListener(se),E(google.maps.event.addListener(B,"mousemove",u)))},[u]),m.useEffect(function(){B&&d&&(T!==null&&google.maps.event.removeListener(T),U(google.maps.event.addListener(B,"mouseout",d)))},[d]),m.useEffect(function(){B&&h&&(ie!==null&&google.maps.event.removeListener(ie),Ae(google.maps.event.addListener(B,"mouseover",h)))},[h]),m.useEffect(function(){B&&f&&(xe!==null&&google.maps.event.removeListener(xe),Xe(google.maps.event.addListener(B,"mouseup",f)))},[f]),m.useEffect(function(){B&&A&&(Ne!==null&&google.maps.event.removeListener(Ne),et(google.maps.event.addListener(B,"rightclick",A)))},[A]),m.useEffect(function(){B&&p&&(Be!==null&&google.maps.event.removeListener(Be),Ge(google.maps.event.addListener(B,"click",p)))},[p]),m.useEffect(function(){B&&y&&(Oe!==null&&google.maps.event.removeListener(Oe),Ye(google.maps.event.addListener(B,"drag",y)))},[y]),m.useEffect(function(){B&&v&&(j!==null&&google.maps.event.removeListener(j),be(google.maps.event.addListener(B,"bounds_changed",v)))},[v]),m.useEffect(function(){var Ce=new google.maps.Rectangle(Qe(Qe({},e||{}),{map:R}));return typeof o<"u"&&Ce.setVisible(o),typeof r<"u"&&Ce.setEditable(r),typeof i<"u"&&Ce.setDraggable(i),typeof n<"u"&&Ce.setBounds(n),s&&X(google.maps.event.addListener(Ce,"dblclick",s)),a&&P(google.maps.event.addListener(Ce,"dragend",a)),l&&q(google.maps.event.addListener(Ce,"dragstart",l)),g&&de(google.maps.event.addListener(Ce,"mousedown",g)),u&&E(google.maps.event.addListener(Ce,"mousemove",u)),d&&U(google.maps.event.addListener(Ce,"mouseout",d)),h&&Ae(google.maps.event.addListener(Ce,"mouseover",h)),f&&Xe(google.maps.event.addListener(Ce,"mouseup",f)),A&&et(google.maps.event.addListener(Ce,"rightclick",A)),p&&Ge(google.maps.event.addListener(Ce,"click",p)),y&&Ye(google.maps.event.addListener(Ce,"drag",y)),v&&be(google.maps.event.addListener(Ce,"bounds_changed",v)),k(Ce),S&&S(Ce),function(){J!==null&&google.maps.event.removeListener(J),z!==null&&google.maps.event.removeListener(z),oe!==null&&google.maps.event.removeListener(oe),_!==null&&google.maps.event.removeListener(_),se!==null&&google.maps.event.removeListener(se),T!==null&&google.maps.event.removeListener(T),ie!==null&&google.maps.event.removeListener(ie),xe!==null&&google.maps.event.removeListener(xe),Ne!==null&&google.maps.event.removeListener(Ne),Be!==null&&google.maps.event.removeListener(Be),Oe!==null&&google.maps.event.removeListener(Oe),j!==null&&google.maps.event.removeListener(j),Z&&Z(Ce),Ce.setMap(null)}},[]),null}m.memo($1e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={rectangle:null},n.setRectangleCallback=function(){n.state.rectangle!==null&&n.props.onLoad&&n.props.onLoad(n.state.rectangle)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.Rectangle(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:KH,eventMap:DH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{rectangle:n}},this.setRectangleCallback)},e.prototype.componentDidUpdate=function(n){this.state.rectangle!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:KH,eventMap:DH,prevProps:n,nextProps:this.props,instance:this.state.rectangle}))},e.prototype.componentWillUnmount=function(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),kt(this.registeredEvents),this.state.rectangle.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var zH={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},PH={center:function(t,e){t.setCenter(e)},draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},radius:function(t,e){t.setRadius(e)},visible:function(t,e){t.setVisible(e)}},q1e={};function e2e(t){var e=t.options,n=t.center,i=t.radius,r=t.draggable,o=t.editable,s=t.visible,a=t.onDblClick,l=t.onDragEnd,g=t.onDragStart,u=t.onMouseDown,d=t.onMouseMove,h=t.onMouseOut,f=t.onMouseOver,A=t.onMouseUp,p=t.onRightClick,y=t.onClick,v=t.onDrag,S=t.onCenterChanged,Z=t.onRadiusChanged,R=t.onLoad,W=t.onUnmount,B=m.useContext(yt),k=m.useState(null),w=k[0],J=k[1],X=m.useState(null),Y=X[0],z=X[1],P=m.useState(null),$=P[0],oe=P[1],q=m.useState(null),K=q[0],_=q[1],de=m.useState(null),ne=de[0],se=de[1],E=m.useState(null),M=E[0],T=E[1],U=m.useState(null),H=U[0],ie=U[1],Ae=m.useState(null),Ie=Ae[0],xe=Ae[1],Xe=m.useState(null),Je=Xe[0],Ne=Xe[1],et=m.useState(null),he=et[0],Be=et[1],Ge=m.useState(null),Me=Ge[0],Oe=Ge[1],Ye=m.useState(null),Ct=Ye[0],j=Ye[1],be=m.useState(null),Ce=be[0],We=be[1],je=m.useState(null),tt=je[0],ft=je[1];return m.useEffect(function(){w!==null&&w.setMap(B)},[B]),m.useEffect(function(){typeof e<"u"&&w!==null&&w.setOptions(e)},[w,e]),m.useEffect(function(){typeof r<"u"&&w!==null&&w.setDraggable(r)},[w,r]),m.useEffect(function(){typeof o<"u"&&w!==null&&w.setEditable(o)},[w,o]),m.useEffect(function(){typeof s<"u"&&w!==null&&w.setVisible(s)},[w,s]),m.useEffect(function(){typeof i=="number"&&w!==null&&w.setRadius(i)},[w,i]),m.useEffect(function(){typeof n<"u"&&w!==null&&w.setCenter(n)},[w,n]),m.useEffect(function(){w&&a&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(w,"dblclick",a)))},[a]),m.useEffect(function(){w&&l&&($!==null&&google.maps.event.removeListener($),oe(google.maps.event.addListener(w,"dragend",l)))},[l]),m.useEffect(function(){w&&g&&(K!==null&&google.maps.event.removeListener(K),_(google.maps.event.addListener(w,"dragstart",g)))},[g]),m.useEffect(function(){w&&u&&(ne!==null&&google.maps.event.removeListener(ne),se(google.maps.event.addListener(w,"mousedown",u)))},[u]),m.useEffect(function(){w&&d&&(M!==null&&google.maps.event.removeListener(M),T(google.maps.event.addListener(w,"mousemove",d)))},[d]),m.useEffect(function(){w&&h&&(H!==null&&google.maps.event.removeListener(H),ie(google.maps.event.addListener(w,"mouseout",h)))},[h]),m.useEffect(function(){w&&f&&(Ie!==null&&google.maps.event.removeListener(Ie),xe(google.maps.event.addListener(w,"mouseover",f)))},[f]),m.useEffect(function(){w&&A&&(Je!==null&&google.maps.event.removeListener(Je),Ne(google.maps.event.addListener(w,"mouseup",A)))},[A]),m.useEffect(function(){w&&p&&(he!==null&&google.maps.event.removeListener(he),Be(google.maps.event.addListener(w,"rightclick",p)))},[p]),m.useEffect(function(){w&&y&&(Me!==null&&google.maps.event.removeListener(Me),Oe(google.maps.event.addListener(w,"click",y)))},[y]),m.useEffect(function(){w&&v&&(Ct!==null&&google.maps.event.removeListener(Ct),j(google.maps.event.addListener(w,"drag",v)))},[v]),m.useEffect(function(){w&&S&&(Ce!==null&&google.maps.event.removeListener(Ce),We(google.maps.event.addListener(w,"center_changed",S)))},[y]),m.useEffect(function(){w&&Z&&(tt!==null&&google.maps.event.removeListener(tt),ft(google.maps.event.addListener(w,"radius_changed",Z)))},[Z]),m.useEffect(function(){var ut=new google.maps.Circle(Qe(Qe({},e||q1e),{map:B}));return typeof i=="number"&&ut.setRadius(i),typeof n<"u"&&ut.setCenter(n),typeof i=="number"&&ut.setRadius(i),typeof s<"u"&&ut.setVisible(s),typeof o<"u"&&ut.setEditable(o),typeof r<"u"&&ut.setDraggable(r),a&&z(google.maps.event.addListener(ut,"dblclick",a)),l&&oe(google.maps.event.addListener(ut,"dragend",l)),g&&_(google.maps.event.addListener(ut,"dragstart",g)),u&&se(google.maps.event.addListener(ut,"mousedown",u)),d&&T(google.maps.event.addListener(ut,"mousemove",d)),h&&ie(google.maps.event.addListener(ut,"mouseout",h)),f&&xe(google.maps.event.addListener(ut,"mouseover",f)),A&&Ne(google.maps.event.addListener(ut,"mouseup",A)),p&&Be(google.maps.event.addListener(ut,"rightclick",p)),y&&Oe(google.maps.event.addListener(ut,"click",y)),v&&j(google.maps.event.addListener(ut,"drag",v)),S&&We(google.maps.event.addListener(ut,"center_changed",S)),Z&&ft(google.maps.event.addListener(ut,"radius_changed",Z)),J(ut),R&&R(ut),function(){Y!==null&&google.maps.event.removeListener(Y),$!==null&&google.maps.event.removeListener($),K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),M!==null&&google.maps.event.removeListener(M),H!==null&&google.maps.event.removeListener(H),Ie!==null&&google.maps.event.removeListener(Ie),Je!==null&&google.maps.event.removeListener(Je),he!==null&&google.maps.event.removeListener(he),Me!==null&&google.maps.event.removeListener(Me),Ce!==null&&google.maps.event.removeListener(Ce),tt!==null&&google.maps.event.removeListener(tt),W&&W(ut),ut.setMap(null)}},[]),null}m.memo(e2e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={circle:null},n.setCircleCallback=function(){n.state.circle!==null&&n.props.onLoad&&n.props.onLoad(n.state.circle)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.Circle(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:PH,eventMap:zH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{circle:n}},this.setCircleCallback)},e.prototype.componentDidUpdate=function(n){this.state.circle!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:PH,eventMap:zH,prevProps:n,nextProps:this.props,instance:this.state.circle}))},e.prototype.componentWillUnmount=function(){var n;this.state.circle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),kt(this.registeredEvents),(n=this.state.circle)===null||n===void 0||n.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var UH={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},jH={add:function(t,e){t.add(e)},addgeojson:function(t,e,n){t.addGeoJson(e,n)},contains:function(t,e){t.contains(e)},foreach:function(t,e){t.forEach(e)},loadgeojson:function(t,e,n,i){t.loadGeoJson(e,n,i)},overridestyle:function(t,e,n){t.overrideStyle(e,n)},remove:function(t,e){t.remove(e)},revertstyle:function(t,e){t.revertStyle(e)},controlposition:function(t,e){t.setControlPosition(e)},controls:function(t,e){t.setControls(e)},drawingmode:function(t,e){t.setDrawingMode(e)},map:function(t,e){t.setMap(e)},style:function(t,e){t.setStyle(e)},togeojson:function(t,e){t.toGeoJson(e)}};function t2e(t){var e=t.options,n=t.onClick,i=t.onDblClick,r=t.onMouseDown,o=t.onMouseMove,s=t.onMouseOut,a=t.onMouseOver,l=t.onMouseUp,g=t.onRightClick,u=t.onAddFeature,d=t.onRemoveFeature,h=t.onRemoveProperty,f=t.onSetGeometry,A=t.onSetProperty,p=t.onLoad,y=t.onUnmount,v=m.useContext(yt),S=m.useState(null),Z=S[0],R=S[1],W=m.useState(null),B=W[0],k=W[1],w=m.useState(null),J=w[0],X=w[1],Y=m.useState(null),z=Y[0],P=Y[1],$=m.useState(null),oe=$[0],q=$[1],K=m.useState(null),_=K[0],de=K[1],ne=m.useState(null),se=ne[0],E=ne[1],M=m.useState(null),T=M[0],U=M[1],H=m.useState(null),ie=H[0],Ae=H[1],Ie=m.useState(null),xe=Ie[0],Xe=Ie[1],Je=m.useState(null),Ne=Je[0],et=Je[1],he=m.useState(null),Be=he[0],Ge=he[1],Me=m.useState(null),Oe=Me[0],Ye=Me[1],Ct=m.useState(null),j=Ct[0],be=Ct[1];return m.useEffect(function(){Z!==null&&Z.setMap(v)},[v]),m.useEffect(function(){Z&&i&&(B!==null&&google.maps.event.removeListener(B),k(google.maps.event.addListener(Z,"dblclick",i)))},[i]),m.useEffect(function(){Z&&r&&(J!==null&&google.maps.event.removeListener(J),X(google.maps.event.addListener(Z,"mousedown",r)))},[r]),m.useEffect(function(){Z&&o&&(z!==null&&google.maps.event.removeListener(z),P(google.maps.event.addListener(Z,"mousemove",o)))},[o]),m.useEffect(function(){Z&&s&&(oe!==null&&google.maps.event.removeListener(oe),q(google.maps.event.addListener(Z,"mouseout",s)))},[s]),m.useEffect(function(){Z&&a&&(_!==null&&google.maps.event.removeListener(_),de(google.maps.event.addListener(Z,"mouseover",a)))},[a]),m.useEffect(function(){Z&&l&&(se!==null&&google.maps.event.removeListener(se),E(google.maps.event.addListener(Z,"mouseup",l)))},[l]),m.useEffect(function(){Z&&g&&(T!==null&&google.maps.event.removeListener(T),U(google.maps.event.addListener(Z,"rightclick",g)))},[g]),m.useEffect(function(){Z&&n&&(ie!==null&&google.maps.event.removeListener(ie),Ae(google.maps.event.addListener(Z,"click",n)))},[n]),m.useEffect(function(){Z&&u&&(xe!==null&&google.maps.event.removeListener(xe),Xe(google.maps.event.addListener(Z,"addfeature",u)))},[u]),m.useEffect(function(){Z&&d&&(Ne!==null&&google.maps.event.removeListener(Ne),et(google.maps.event.addListener(Z,"removefeature",d)))},[d]),m.useEffect(function(){Z&&h&&(Be!==null&&google.maps.event.removeListener(Be),Ge(google.maps.event.addListener(Z,"removeproperty",h)))},[h]),m.useEffect(function(){Z&&f&&(Oe!==null&&google.maps.event.removeListener(Oe),Ye(google.maps.event.addListener(Z,"setgeometry",f)))},[f]),m.useEffect(function(){Z&&A&&(j!==null&&google.maps.event.removeListener(j),be(google.maps.event.addListener(Z,"setproperty",A)))},[A]),m.useEffect(function(){if(v!==null){var Ce=new google.maps.Data(Qe(Qe({},e||{}),{map:v}));i&&k(google.maps.event.addListener(Ce,"dblclick",i)),r&&X(google.maps.event.addListener(Ce,"mousedown",r)),o&&P(google.maps.event.addListener(Ce,"mousemove",o)),s&&q(google.maps.event.addListener(Ce,"mouseout",s)),a&&de(google.maps.event.addListener(Ce,"mouseover",a)),l&&E(google.maps.event.addListener(Ce,"mouseup",l)),g&&U(google.maps.event.addListener(Ce,"rightclick",g)),n&&Ae(google.maps.event.addListener(Ce,"click",n)),u&&Xe(google.maps.event.addListener(Ce,"addfeature",u)),d&&et(google.maps.event.addListener(Ce,"removefeature",d)),h&&Ge(google.maps.event.addListener(Ce,"removeproperty",h)),f&&Ye(google.maps.event.addListener(Ce,"setgeometry",f)),A&&be(google.maps.event.addListener(Ce,"setproperty",A)),R(Ce),p&&p(Ce)}return function(){Z&&(B!==null&&google.maps.event.removeListener(B),J!==null&&google.maps.event.removeListener(J),z!==null&&google.maps.event.removeListener(z),oe!==null&&google.maps.event.removeListener(oe),_!==null&&google.maps.event.removeListener(_),se!==null&&google.maps.event.removeListener(se),T!==null&&google.maps.event.removeListener(T),ie!==null&&google.maps.event.removeListener(ie),xe!==null&&google.maps.event.removeListener(xe),Ne!==null&&google.maps.event.removeListener(Ne),Be!==null&&google.maps.event.removeListener(Be),Oe!==null&&google.maps.event.removeListener(Oe),j!==null&&google.maps.event.removeListener(j),y&&y(Z),Z.setMap(null))}},[]),null}m.memo(t2e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={data:null},n.setDataCallback=function(){n.state.data!==null&&n.props.onLoad&&n.props.onLoad(n.state.data)},n}return e.prototype.componentDidMount=function(){if(this.context!==null){var n=new google.maps.Data(Qe(Qe({},this.props.options||{}),{map:this.context}));this.registeredEvents=Bt({updaterMap:jH,eventMap:UH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{data:n}},this.setDataCallback)}},e.prototype.componentDidUpdate=function(n){this.state.data!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:jH,eventMap:UH,prevProps:n,nextProps:this.props,instance:this.state.data}))},e.prototype.componentWillUnmount=function(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),kt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var OH={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},QH={options:function(t,e){t.setOptions(e)},url:function(t,e){t.setUrl(e)},zIndex:function(t,e){t.setZIndex(e)}};(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={kmlLayer:null},n.setKmlLayerCallback=function(){n.state.kmlLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.kmlLayer)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.KmlLayer(Qe(Qe({},this.props.options),{map:this.context}));this.registeredEvents=Bt({updaterMap:QH,eventMap:OH,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{kmlLayer:n}},this.setKmlLayerCallback)},e.prototype.componentDidUpdate=function(n){this.state.kmlLayer!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:QH,eventMap:OH,prevProps:n,nextProps:this.props,instance:this.state.kmlLayer}))},e.prototype.componentWillUnmount=function(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),kt(this.registeredEvents),this.state.kmlLayer.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);function mU(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function n2e(t,e){return new e(t.lat,t.lng)}function i2e(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function r2e(t,e,n){return t instanceof e?t:n(t,e)}function o2e(t,e,n){return t instanceof e?t:n(t,e)}function s2e(t,e,n){var i=t&&t.fromLatLngToDivPixel(n.getNorthEast()),r=t&&t.fromLatLngToDivPixel(n.getSouthWest());return i&&r?{left:"".concat(r.x+e.x,"px"),top:"".concat(i.y+e.y,"px"),width:"".concat(i.x-r.x-e.x,"px"),height:"".concat(r.y-i.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function a2e(t,e,n){var i=t&&t.fromLatLngToDivPixel(n);if(i){var r=i.x,o=i.y;return{left:"".concat(r+e.x,"px"),top:"".concat(o+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function pU(t,e,n,i){return n!==void 0?s2e(t,e,o2e(n,google.maps.LatLngBounds,i2e)):a2e(t,e,r2e(i,google.maps.LatLng,n2e))}function l2e(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function g2e(t,e,n,i,r){var o=function(s){gn(a,s);function a(l,g,u,d){var h=s.call(this)||this;return h.container=l,h.pane=g,h.position=u,h.bounds=d,h}return a.prototype.onAdd=function(){var l,g=(l=this.getPanes())===null||l===void 0?void 0:l[this.pane];g==null||g.appendChild(this.container)},a.prototype.draw=function(){for(var l=this.getProjection(),g=Qe({},this.container?mU(this.container,r):{x:0,y:0}),u=pU(l,g,this.bounds,this.position),d=0,h=Object.entries(u);d<h.length;d++){var f=h[d],A=f[0],p=f[1];this.container.style[A]=p}},a.prototype.onRemove=function(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)},a}(google.maps.OverlayView);return new o(t,e,n,i)}function $H(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function qH(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function c2e(t){var e=t.position,n=t.bounds,i=t.mapPaneName,r=t.zIndex,o=t.onLoad,s=t.onUnmount,a=t.getPixelPositionOffset,l=t.children,g=m.useContext(yt),u=m.useMemo(function(){var h=document.createElement("div");return h.style.position="absolute",h},[]),d=m.useMemo(function(){return g2e(u,i,e,n,a)},[u,i,e,n]);return m.useEffect(function(){return o==null||o(d),d==null||d.setMap(g),function(){s==null||s(d),d==null||d.setMap(null)}},[g,d]),m.useEffect(function(){u.style.zIndex="".concat(r)},[r,u]),Pr.createPortal(l,u)}m.memo(c2e);(function(t){gn(e,t);function e(n){var i=t.call(this,n)||this;i.state={paneEl:null,containerStyle:{position:"absolute"}},i.updatePane=function(){var o=i.props.mapPaneName,s=i.overlayView.getPanes();jn(!!o,"OverlayView requires props.mapPaneName but got %s",o),s?i.setState({paneEl:s[o]}):i.setState({paneEl:null})},i.onAdd=function(){var o,s;i.updatePane(),(s=(o=i.props).onLoad)===null||s===void 0||s.call(o,i.overlayView)},i.onPositionElement=function(){var o=i.overlayView.getProjection(),s=Qe({x:0,y:0},i.containerRef.current?mU(i.containerRef.current,i.props.getPixelPositionOffset):{}),a=pU(o,s,i.props.bounds,i.props.position),l=i.state.containerStyle,g=l.left,u=l.top,d=l.width,h=l.height;l2e(a,{left:g,top:u,width:d,height:h})||i.setState({containerStyle:{top:a.top||0,left:a.left||0,width:a.width||0,height:a.height||0,position:"absolute"}})},i.draw=function(){i.onPositionElement()},i.onRemove=function(){var o,s;i.setState(function(){return{paneEl:null}}),(s=(o=i.props).onUnmount)===null||s===void 0||s.call(o,i.overlayView)},i.containerRef=m.createRef();var r=new google.maps.OverlayView;return r.onAdd=i.onAdd,r.draw=i.draw,r.onRemove=i.onRemove,i.overlayView=r,i}return e.prototype.componentDidMount=function(){this.overlayView.setMap(this.context)},e.prototype.componentDidUpdate=function(n){var i=$H(n.position),r=$H(this.props.position),o=qH(n.bounds),s=qH(this.props.bounds);(i!==r||o!==s)&&this.overlayView.draw(),n.mapPaneName!==this.props.mapPaneName&&this.updatePane()},e.prototype.componentWillUnmount=function(){this.overlayView.setMap(null)},e.prototype.render=function(){var n=this.state.paneEl;return n?Pr.createPortal(C.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:m.Children.only(this.props.children)}),n):null},e.FLOAT_PANE="floatPane",e.MAP_PANE="mapPane",e.MARKER_LAYER="markerLayer",e.OVERLAY_LAYER="overlayLayer",e.OVERLAY_MOUSE_TARGET="overlayMouseTarget",e.contextType=yt,e})(m.PureComponent);function u2e(){}var eN={onDblClick:"dblclick",onClick:"click"},tN={opacity:function(t,e){t.setOpacity(e)}};function d2e(t){var e=t.url,n=t.bounds,i=t.options,r=t.visible,o=m.useContext(yt),s=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),a=m.useMemo(function(){var l=new google.maps.GroundOverlay(e,s,Qe({},i));return l},[]);return m.useEffect(function(){a!==null&&a.setMap(o)},[o]),m.useEffect(function(){typeof e<"u"&&a!==null&&(a.set("url",e),a.setMap(o))},[a,e]),m.useEffect(function(){typeof r<"u"&&a!==null&&a.setOpacity(r?1:0)},[a,r]),m.useEffect(function(){var l=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&a!==null&&(a.set("bounds",l),a.setMap(o))},[a,n]),null}m.memo(d2e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={groundOverlay:null},n.setGroundOverlayCallback=function(){n.state.groundOverlay!==null&&n.props.onLoad&&n.props.onLoad(n.state.groundOverlay)},n}return e.prototype.componentDidMount=function(){jn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var n=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Qe(Qe({},this.props.options),{map:this.context}));this.registeredEvents=Bt({updaterMap:tN,eventMap:eN,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{groundOverlay:n}},this.setGroundOverlayCallback)},e.prototype.componentDidUpdate=function(n){this.state.groundOverlay!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:tN,eventMap:eN,prevProps:n,nextProps:this.props,instance:this.state.groundOverlay}))},e.prototype.componentWillUnmount=function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))},e.prototype.render=function(){return null},e.defaultProps={onLoad:u2e},e.contextType=yt,e})(m.PureComponent);var nN={},iN={data:function(t,e){t.setData(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)}};function I2e(t){var e=t.data,n=t.onLoad,i=t.onUnmount,r=t.options,o=m.useContext(yt),s=m.useState(null),a=s[0],l=s[1];return m.useEffect(function(){google.maps.visualization||jn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),m.useEffect(function(){jn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),m.useEffect(function(){a!==null&&a.setMap(o)},[o]),m.useEffect(function(){r&&a!==null&&a.setOptions(r)},[a,r]),m.useEffect(function(){var g=new google.maps.visualization.HeatmapLayer(Qe(Qe({},r||{}),{data:e,map:o}));return l(g),n&&n(g),function(){a!==null&&(i&&i(a),a.setMap(null))}},[]),null}m.memo(I2e);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={heatmapLayer:null},n.setHeatmapLayerCallback=function(){n.state.heatmapLayer!==null&&n.props.onLoad&&n.props.onLoad(n.state.heatmapLayer)},n}return e.prototype.componentDidMount=function(){jn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),jn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var n=new google.maps.visualization.HeatmapLayer(Qe(Qe({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=Bt({updaterMap:iN,eventMap:nN,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{heatmapLayer:n}},this.setHeatmapLayerCallback)},e.prototype.componentDidUpdate=function(n){kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:iN,eventMap:nN,prevProps:n,nextProps:this.props,instance:this.state.heatmapLayer})},e.prototype.componentWillUnmount=function(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),kt(this.registeredEvents),this.state.heatmapLayer.setMap(null))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);var rN={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},oN={register:function(t,e,n){t.registerPanoProvider(e,n)},links:function(t,e){t.setLinks(e)},motionTracking:function(t,e){t.setMotionTracking(e)},options:function(t,e){t.setOptions(e)},pano:function(t,e){t.setPano(e)},position:function(t,e){t.setPosition(e)},pov:function(t,e){t.setPov(e)},visible:function(t,e){t.setVisible(e)},zoom:function(t,e){t.setZoom(e)}};(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={streetViewPanorama:null},n.setStreetViewPanoramaCallback=function(){n.state.streetViewPanorama!==null&&n.props.onLoad&&n.props.onLoad(n.state.streetViewPanorama)},n}return e.prototype.componentDidMount=function(){var n,i,r=(i=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&i!==void 0?i:null;this.registeredEvents=Bt({updaterMap:oN,eventMap:rN,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{streetViewPanorama:r}},this.setStreetViewPanoramaCallback)},e.prototype.componentDidUpdate=function(n){this.state.streetViewPanorama!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:oN,eventMap:rN,prevProps:n,nextProps:this.props,instance:this.state.streetViewPanorama}))},e.prototype.componentWillUnmount=function(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),kt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={streetViewService:null},n.setStreetViewServiceCallback=function(){n.state.streetViewService!==null&&n.props.onLoad&&n.props.onLoad(n.state.streetViewService)},n}return e.prototype.componentDidMount=function(){var n=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:n}},this.setStreetViewServiceCallback)},e.prototype.componentWillUnmount=function(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)},e.prototype.render=function(){return null},e.contextType=yt,e})(m.PureComponent);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={directionsService:null},n.setDirectionsServiceCallback=function(){n.state.directionsService!==null&&n.props.onLoad&&n.props.onLoad(n.state.directionsService)},n}return e.prototype.componentDidMount=function(){jn(!!this.props.options,"DirectionsService expected options object as parameter, but got %s",this.props.options);var n=new google.maps.DirectionsService;this.setState(function(){return{directionsService:n}},this.setDirectionsServiceCallback)},e.prototype.componentDidUpdate=function(){this.state.directionsService!==null&&this.state.directionsService.route(this.props.options,this.props.callback)},e.prototype.componentWillUnmount=function(){this.state.directionsService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.directionsService)},e.prototype.render=function(){return null},e})(m.PureComponent);var sN={onDirectionsChanged:"directions_changed"},aN={directions:function(t,e){t.setDirections(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},panel:function(t,e){t.setPanel(e)},routeIndex:function(t,e){t.setRouteIndex(e)}};(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.state={directionsRenderer:null},n.setDirectionsRendererCallback=function(){n.state.directionsRenderer!==null&&(n.state.directionsRenderer.setMap(n.context),n.props.onLoad&&n.props.onLoad(n.state.directionsRenderer))},n}return e.prototype.componentDidMount=function(){var n=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Bt({updaterMap:aN,eventMap:sN,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{directionsRenderer:n}},this.setDirectionsRendererCallback)},e.prototype.componentDidUpdate=function(n){this.state.directionsRenderer!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:aN,eventMap:sN,prevProps:n,nextProps:this.props,instance:this.state.directionsRenderer}))},e.prototype.componentWillUnmount=function(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),kt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))},e.prototype.render=function(){return C.jsx(C.Fragment,{})},e.contextType=yt,e})(m.PureComponent);(function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={distanceMatrixService:null},n.setDistanceMatrixServiceCallback=function(){n.state.distanceMatrixService!==null&&n.props.onLoad&&n.props.onLoad(n.state.distanceMatrixService)},n}return e.prototype.componentDidMount=function(){jn(!!this.props.options,"DistanceMatrixService expected options object as parameter, but go %s",this.props.options);var n=new google.maps.DistanceMatrixService;this.setState(function(){return{distanceMatrixService:n}},this.setDistanceMatrixServiceCallback)},e.prototype.componentDidUpdate=function(){this.state.distanceMatrixService!==null&&this.state.distanceMatrixService.getDistanceMatrix(this.props.options,this.props.callback)},e.prototype.componentWillUnmount=function(){this.state.distanceMatrixService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.distanceMatrixService)},e.prototype.render=function(){return null},e})(m.PureComponent);var lN={onPlacesChanged:"places_changed"},gN={bounds:function(t,e){t.setBounds(e)}},Bv=function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=m.createRef(),n.state={searchBox:null},n.setSearchBoxCallback=function(){n.state.searchBox!==null&&n.props.onLoad&&n.props.onLoad(n.state.searchBox)},n}return e.prototype.componentDidMount=function(){if(jn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var n=this.containerElement.current.querySelector("input");if(n!==null){var i=new google.maps.places.SearchBox(n,this.props.options);this.registeredEvents=Bt({updaterMap:gN,eventMap:lN,prevProps:{},nextProps:this.props,instance:i}),this.setState(function(){return{searchBox:i}},this.setSearchBoxCallback)}}},e.prototype.componentDidUpdate=function(n){this.state.searchBox!==null&&(kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:gN,eventMap:lN,prevProps:n,nextProps:this.props,instance:this.state.searchBox}))},e.prototype.componentWillUnmount=function(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),kt(this.registeredEvents))},e.prototype.render=function(){return C.jsx("div",{ref:this.containerElement,children:m.Children.only(this.props.children)})},e.contextType=yt,e}(m.PureComponent),cN={onPlaceChanged:"place_changed"},uN={bounds:function(t,e){t.setBounds(e)},restrictions:function(t,e){t.setComponentRestrictions(e)},fields:function(t,e){t.setFields(e)},options:function(t,e){t.setOptions(e)},types:function(t,e){t.setTypes(e)}},C2e=function(t){gn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=m.createRef(),n.state={autocomplete:null},n.setAutocompleteCallback=function(){n.state.autocomplete!==null&&n.props.onLoad&&n.props.onLoad(n.state.autocomplete)},n}return e.prototype.componentDidMount=function(){var n;jn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var i=(n=this.containerElement.current)===null||n===void 0?void 0:n.querySelector("input");if(i){var r=new google.maps.places.Autocomplete(i,this.props.options);this.registeredEvents=Bt({updaterMap:uN,eventMap:cN,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{autocomplete:r}},this.setAutocompleteCallback)}},e.prototype.componentDidUpdate=function(n){kt(this.registeredEvents),this.registeredEvents=Bt({updaterMap:uN,eventMap:cN,prevProps:n,nextProps:this.props,instance:this.state.autocomplete})},e.prototype.componentWillUnmount=function(){this.state.autocomplete!==null&&kt(this.registeredEvents)},e.prototype.render=function(){return C.jsx("div",{ref:this.containerElement,className:this.props.className,children:m.Children.only(this.props.children)})},e.defaultProps={className:""},e.contextType=yt,e}(m.PureComponent);const h2e=({locationSettingsOpen:t,setLocationSettingsOpen:e,user:n})=>{const{isOpen:i,onOpen:r,onClose:o}=Go(),[s,a]=m.useState(n.selectedLocation?n.selectedLocation:""),[l,g]=m.useState(n.selectedLocation?n.selectedLocation:""),[u,d]=m.useState(),[h,f]=m.useState(),A=m.useRef(),p=ln(),y=za(an),v=()=>{const R=A.current.getPlace();R&&(d(R.geometry.location.lat()),f(R.geometry.location.lng()),a(R.formatted_address),g(R.formatted_address))};m.useEffect(()=>{t&&r()},[t]);const S=async()=>{if(l!==s){p("","Please select a location from suggestions","error");return}try{const R=await fn.post("/api/users/update-selectedlocation",{userId:n._id,selectedLocation:s,selectedLocationLat:u,selectedLocationLong:h});localStorage.setItem("user-threads",JSON.stringify(R.data)),y(R.data),e(!1),p("","Location Updated","success")}catch{p("error","Error","error")}},Z=()=>{e&&e(!t)};return C.jsxs(Jo,{isOpen:t,onClose:Z,isCentered:!0,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{children:"Location"}),C.jsx(Yo,{}),C.jsx(ss,{children:C.jsx(C2e,{onLoad:R=>A.current=R,onPlaceChanged:v,options:{types:["(cities)"]},children:C.jsx(_e,{type:"text",style:{width:"100%"},placeholder:"Location",value:l,onChange:R=>g(R.target.value)})})}),C.jsx(is,{children:C.jsx(De,{size:"sm",bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,gap:2,mr:3,onClick:S,children:"Save Location"})})]})]})},f2e=()=>{const{colorMode:t,toggleColorMode:e}=$c(),n=Nn(an),i=sU(),r=za(Gv),[o,s]=m.useState(!1);return m.useEffect(()=>{n&&!(n!=null&&n.selectedLocation)&&s(!0)},[n]),C.jsxs(ae,{justifyContent:"space-between",mt:6,mb:"12",w:"90%",ms:"auto",me:"auto",children:[n&&C.jsx(Tn,{as:Zi,to:"/",children:C.jsx(WGe,{size:24})}),!n&&C.jsx(Tn,{as:Zi,to:"/auth",onClick:()=>r("login"),children:"Login"}),C.jsx(De,{colorScheme:"white",variant:"outline",onClick:e,children:"Evntiq"}),n&&C.jsxs(ae,{alignItems:"center",gap:4,children:[C.jsxs(ae,{alignItems:"center",gap:2,onClick:()=>s(!o),cursor:"pointer",children:[C.jsx(FGe,{}),C.jsxs(ue,{children:[" ",n!=null&&n.selectedLocation?n.selectedLocation:"Select Location"]})]}),n&&C.jsx(h2e,{locationSettingsOpen:o,setLocationSettingsOpen:s,user:n}),C.jsx(Tn,{as:Zi,to:`/${n.username}`,children:C.jsx(MGe,{size:24})}),C.jsx(Tn,{as:Zi,to:"/discover",children:C.jsx(wRe,{size:25})}),C.jsx(Tn,{as:Zi,to:"/chat",children:C.jsx(WAe,{size:20})}),C.jsx(Tn,{as:Zi,to:"/tickets",children:C.jsx(xGe,{size:20})}),C.jsx(Tn,{as:Zi,to:"/settings",children:C.jsx(xRe,{size:20})}),n.soloOrganizer&&C.jsx(Tn,{as:Zi,to:"/analytics",children:C.jsx(XGe,{size:20})}),n&&C.jsx(Tn,{as:Zi,to:"/calendar",children:C.jsx(ZRe,{size:20})}),C.jsx(De,{size:"xs",onClick:i,children:C.jsx($Re,{size:20})})]}),!n&&C.jsx(Tn,{as:Zi,to:"/auth",onClick:()=>r("signup"),children:"Sign up"})]})},m2e=({user:t})=>{const{handleFollowUnfollow:e,following:n,updating:i}=AP(t);return C.jsxs(ae,{gap:2,justifyContent:"space-between",alignItems:"center",children:[C.jsxs(ae,{gap:2,as:Zi,to:`${t.username}`,children:[C.jsx(Ni,{src:t.profilePic}),C.jsxs(Se,{children:[C.jsx(ue,{fontSize:"sm",fontWeight:"bold",children:t.username}),C.jsx(ue,{color:"gray.light",fontSize:"sm",children:t.name})]})]}),C.jsx(De,{size:"sm",color:n?"black":"white",bg:n?"white":"blue.400",onClick:e,isLoading:i,_hover:{color:n?"black":"white",opacity:".8"},children:n?"Unfollow":"Follow"})]})},p2e=()=>{const[t,e]=m.useState(!0),[n,i]=m.useState([]),r=ln();return m.useEffect(()=>{(async()=>{e(!0);try{const a=await(await fetch("/api/users/suggested")).json();if(a.error){r("Error",a.error,"error");return}i(a)}catch(s){r("Error",s.message,"error")}finally{e(!1)}})()},[r]),C.jsxs(C.Fragment,{children:[C.jsx(ue,{mb:4,fontWeight:"bold",children:"Suggested Users"}),C.jsxs(ae,{direction:"column",gap:4,children:[!t&&(n==null?void 0:n.map(o=>C.jsx(m2e,{user:o},o._id))),t&&[0,1,2,3,4].map((o,s)=>C.jsxs(ae,{gap:2,alignItems:"center",p:"1",borderRadius:"md",children:[C.jsx(Se,{children:C.jsx(Vf,{size:"10"})}),C.jsxs(ae,{w:"full",flexDirection:"column",gap:2,children:[C.jsx(Ro,{h:"8px",w:"80px"}),C.jsx(Ro,{h:"8px",w:"90px"})]}),C.jsx(ae,{children:C.jsx(Ro,{h:"20px",w:"60px"})})]},s))]})]})},A2e=()=>{const[t,e]=_i(Sg),[n]=_i(an),[i,r]=m.useState(!0),o=ln(),[s,a]=m.useState(""),[l,g]=m.useState([]),[u,d]=m.useState([]),{colorMode:h}=$c();m.useEffect(()=>{(async()=>{r(!0),e([]);try{const y=await(await fetch("/api/posts/feed")).json();if(y.error){o("Error",y.error,"error");return}const v=n._id,S=y.filter(Z=>Z.postedBy===v||!Z.isPrivate);e(S)}catch(p){o("Error",p.message,"error")}finally{r(!1)}})()},[o,e,n._id]);const f=async A=>{const p=A.target.value;a(p);try{try{const y=await fn.get(`/api/users/search?q=${p}`);g(y.data)}catch(y){console.error("Error fetching user search results:",y)}try{const y=await fn.get(`/api/posts/search/${p}`);d(y.data)}catch(y){console.error("Error fetching posts search results:",y)}}catch(y){console.error("Error fetching search results:",y)}};return C.jsxs(ae,{direction:"column",w:"80%",m:"auto",mt:6,children:[C.jsx(_e,{placeholder:"Search users by name or username",value:s,onChange:f,mb:4,size:"sm"}),(l.length>0||u.length>0)&&C.jsxs(Se,{mt:2,bg:h==="light"?"white":"gray.700",boxShadow:"md",borderRadius:"md",p:2,children:[l.length>0&&C.jsx(Wo,{size:"xs",color:"green",children:"Users"}),C.jsx(_a,{children:l.map(A=>C.jsx(Yc,{children:C.jsx(Zi,{to:`/${A.username}`,children:C.jsxs(ue,{_hover:{textDecoration:"underline",cursor:"pointer"},color:h==="light"?"black":"white",children:[C.jsx("strong",{children:A.username})," - ",A.name]})})},A._id))}),u.length>0&&C.jsxs(C.Fragment,{children:[u.length>0&&C.jsx(Wo,{size:"xs",color:"green",children:"Events"}),C.jsx(_a,{children:u.map(A=>C.jsx(Yc,{children:C.jsx(Zi,{to:`/${A.postedBy.username}/post/${A._id}`,children:C.jsxs(ue,{_hover:{textDecoration:"underline",cursor:"pointer"},color:h==="light"?"black":"white",children:[C.jsx("strong",{children:A.username})," - ",A.name]})})},A._id))})]})]}),C.jsxs(ae,{gap:"10",alignItems:"flex-start",children:[C.jsxs(Se,{flex:70,children:[!i&&t.length===0&&C.jsx(ue,{fontSize:"xl",fontWeight:"bold",children:"Follow some users to see the feed"}),i&&C.jsx(ae,{justify:"center",children:C.jsx(nr,{size:"xl"})}),!i&&(t==null?void 0:t.map(A=>C.jsx(UP,{post:A,postedBy:A.postedBy},A._id)))]}),C.jsx(Se,{flex:30,display:{base:"none",md:"block"},children:C.jsx(p2e,{})})]})]})};function b2e(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:i}=t,[r,o]=m.useState(!1),s=m.useRef(n);s.current=n;const a=m.useRef(i);return a.current=i,m.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var g;o(!0),(g=s.current)===null||g===void 0||g.call(s)},l.onerror=()=>{var g;o(!1),(g=a.current)===null||g===void 0||g.call(a)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),r}const AU=m.createContext(null);function y2e({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:i,children:r}){const o=b2e({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:i}),s=m.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return gt.createElement(AU.Provider,{value:s},r)}function v2e(){const t=m.useContext(AU);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function S2e(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const Z2e={large:40,medium:32,small:20};function G2e({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:i,type:r="standard",theme:o="outline",size:s="large",text:a,shape:l,logo_alignment:g,width:u,locale:d,click_listener:h,containerProps:f,...A}){const p=m.useRef(null),{clientId:y,scriptLoadedSuccessfully:v}=v2e(),S=m.useRef(t);S.current=t;const Z=m.useRef(e);Z.current=e;const R=m.useRef(i);return R.current=i,m.useEffect(()=>{var W,B,k,w,J,X,Y,z,P;if(v)return(k=(B=(W=window==null?void 0:window.google)===null||W===void 0?void 0:W.accounts)===null||B===void 0?void 0:B.id)===null||k===void 0||k.initialize({client_id:y,callback:$=>{var oe;if(!($!=null&&$.credential))return(oe=Z.current)===null||oe===void 0?void 0:oe.call(Z);const{credential:q,select_by:K}=$;S.current({credential:q,clientId:S2e($),select_by:K})},...A}),(X=(J=(w=window==null?void 0:window.google)===null||w===void 0?void 0:w.accounts)===null||J===void 0?void 0:J.id)===null||X===void 0||X.renderButton(p.current,{type:r,theme:o,size:s,text:a,shape:l,logo_alignment:g,width:u,locale:d,click_listener:h}),n&&((P=(z=(Y=window==null?void 0:window.google)===null||Y===void 0?void 0:Y.accounts)===null||z===void 0?void 0:z.id)===null||P===void 0||P.prompt(R.current)),()=>{var $,oe,q;n&&((q=(oe=($=window==null?void 0:window.google)===null||$===void 0?void 0:$.accounts)===null||oe===void 0?void 0:oe.id)===null||q===void 0||q.cancel())}},[y,v,n,r,o,s,a,l,g,u,d]),gt.createElement("div",{...f,ref:p,style:{height:Z2e[s],...f==null?void 0:f.style}})}function B2e(){const[t,e]=m.useState(!1),n=za(Gv),i=za(an),[r,o]=m.useState(!1),[s,a]=m.useState({username:"",password:""}),l=ln(),g=async()=>{o(!0);try{const f=await(await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(f.error){l("Error",f.error,"error");return}localStorage.setItem("user-threads",JSON.stringify(f)),i(f)}catch(h){l("Error",h.message,"error")}finally{o(!1)}},u=async h=>{o(!0);try{const A=await(await fetch("/api/users/google-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h.credential})})).json();A.success?(localStorage.setItem("user-threads",JSON.stringify(A.user)),i(A.user),l("Success","Logged in with Google","success")):l("Error",A.message,"error")}catch(f){l("Error",f.message,"error")}finally{o(!1)}},d=h=>{l("Error","Google login failed","error")};return C.jsx(ae,{align:"center",justify:"center",children:C.jsxs(Qi,{spacing:8,mx:"auto",maxW:"lg",py:12,px:6,children:[C.jsx(Qi,{align:"center",children:C.jsx(Wo,{fontSize:"4xl",textAlign:"center",children:"Login"})}),C.jsx(Se,{rounded:"lg",bg:Ve("white","gray.dark"),boxShadow:"lg",p:8,w:{base:"full",sm:"400px"},children:C.jsxs(Qi,{spacing:4,children:[C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Username"}),C.jsx(_e,{type:"text",value:s.username,onChange:h=>a(f=>({...f,username:h.target.value}))})]}),C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Password"}),C.jsxs(bV,{children:[C.jsx(_e,{type:t?"text":"password",value:s.password,onChange:h=>a(f=>({...f,password:h.target.value}))}),C.jsx(Oy,{h:"full",children:C.jsx(De,{variant:"ghost",onClick:()=>e(h=>!h),children:t?C.jsx(yP,{}):C.jsx(bP,{})})})]}),C.jsx(Tn,{to:"#",children:C.jsx(ue,{children:"Forgot Password?"})})]}),C.jsxs(Qi,{spacing:10,pt:2,children:[C.jsx(De,{loadingText:"Logging in",size:"lg",bg:Ve("gray.600","gray.700"),color:"white",_hover:{bg:Ve("gray.700","gray.800")},onClick:g,isLoading:r,children:"Login"}),C.jsx(G2e,{onSuccess:u,onError:d})]}),C.jsx(Qi,{pt:6,children:C.jsxs(ue,{align:"center",children:["Don't have an account?"," ",C.jsx(Tn,{color:"blue.400",onClick:()=>n("signup"),children:"Sign up"})]})})]})})]})})}var R2e=function(e){return k2e(e)&&!V2e(e)};function k2e(t){return!!t&&typeof t=="object"}function V2e(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||x2e(t)}var w2e=typeof Symbol=="function"&&Symbol.for,W2e=w2e?Symbol.for("react.element"):60103;function x2e(t){return t.$$typeof===W2e}function X2e(t){return Array.isArray(t)?[]:{}}function J0(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Xf(X2e(t),t,e):t}function J2e(t,e,n){return t.concat(e).map(function(i){return J0(i,n)})}function E2e(t,e,n){var i={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(r){i[r]=J0(t[r],n)}),Object.keys(e).forEach(function(r){!n.isMergeableObject(e[r])||!t[r]?i[r]=J0(e[r],n):i[r]=Xf(t[r],e[r],n)}),i}function Xf(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||J2e,n.isMergeableObject=n.isMergeableObject||R2e;var i=Array.isArray(e),r=Array.isArray(t),o=i===r;return o?i?n.arrayMerge(t,e,n):E2e(t,e,n):J0(e,n)}Xf.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,r){return Xf(i,r,n)},{})};var V1=Xf,H2e=typeof global=="object"&&global&&global.Object===Object&&global;const bU=H2e;var N2e=typeof self=="object"&&self&&self.Object===Object&&self,Y2e=bU||N2e||Function("return this")();const Os=Y2e;var F2e=Os.Symbol;const lg=F2e;var yU=Object.prototype,M2e=yU.hasOwnProperty,T2e=yU.toString,FC=lg?lg.toStringTag:void 0;function L2e(t){var e=M2e.call(t,FC),n=t[FC];try{t[FC]=void 0;var i=!0}catch{}var r=T2e.call(t);return i&&(e?t[FC]=n:delete t[FC]),r}var _2e=Object.prototype,D2e=_2e.toString;function K2e(t){return D2e.call(t)}var z2e="[object Null]",P2e="[object Undefined]",dN=lg?lg.toStringTag:void 0;function su(t){return t==null?t===void 0?P2e:z2e:dN&&dN in Object(t)?L2e(t):K2e(t)}function vU(t,e){return function(n){return t(e(n))}}var U2e=vU(Object.getPrototypeOf,Object);const dw=U2e;function au(t){return t!=null&&typeof t=="object"}var j2e="[object Object]",O2e=Function.prototype,Q2e=Object.prototype,SU=O2e.toString,$2e=Q2e.hasOwnProperty,q2e=SU.call(Object);function IN(t){if(!au(t)||su(t)!=j2e)return!1;var e=dw(t);if(e===null)return!0;var n=$2e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&SU.call(n)==q2e}function eke(){this.__data__=[],this.size=0}function ZU(t,e){return t===e||t!==t&&e!==e}function Rv(t,e){for(var n=t.length;n--;)if(ZU(t[n][0],e))return n;return-1}var tke=Array.prototype,nke=tke.splice;function ike(t){var e=this.__data__,n=Rv(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():nke.call(e,n,1),--this.size,!0}function rke(t){var e=this.__data__,n=Rv(e,t);return n<0?void 0:e[n][1]}function oke(t){return Rv(this.__data__,t)>-1}function ske(t,e){var n=this.__data__,i=Rv(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function $a(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}$a.prototype.clear=eke;$a.prototype.delete=ike;$a.prototype.get=rke;$a.prototype.has=oke;$a.prototype.set=ske;function ake(){this.__data__=new $a,this.size=0}function lke(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function gke(t){return this.__data__.get(t)}function cke(t){return this.__data__.has(t)}function Bm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var uke="[object AsyncFunction]",dke="[object Function]",Ike="[object GeneratorFunction]",Cke="[object Proxy]";function GU(t){if(!Bm(t))return!1;var e=su(t);return e==dke||e==Ike||e==uke||e==Cke}var hke=Os["__core-js_shared__"];const RG=hke;var CN=function(){var t=/[^.]+$/.exec(RG&&RG.keys&&RG.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fke(t){return!!CN&&CN in t}var mke=Function.prototype,pke=mke.toString;function lu(t){if(t!=null){try{return pke.call(t)}catch{}try{return t+""}catch{}}return""}var Ake=/[\\^$.*+?()[\]{}|]/g,bke=/^\[object .+?Constructor\]$/,yke=Function.prototype,vke=Object.prototype,Ske=yke.toString,Zke=vke.hasOwnProperty,Gke=RegExp("^"+Ske.call(Zke).replace(Ake,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bke(t){if(!Bm(t)||fke(t))return!1;var e=GU(t)?Gke:bke;return e.test(lu(t))}function Rke(t,e){return t==null?void 0:t[e]}function gu(t,e){var n=Rke(t,e);return Bke(n)?n:void 0}var kke=gu(Os,"Map");const Jf=kke;var Vke=gu(Object,"create");const Ef=Vke;function wke(){this.__data__=Ef?Ef(null):{},this.size=0}function Wke(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var xke="__lodash_hash_undefined__",Xke=Object.prototype,Jke=Xke.hasOwnProperty;function Eke(t){var e=this.__data__;if(Ef){var n=e[t];return n===xke?void 0:n}return Jke.call(e,t)?e[t]:void 0}var Hke=Object.prototype,Nke=Hke.hasOwnProperty;function Yke(t){var e=this.__data__;return Ef?e[t]!==void 0:Nke.call(e,t)}var Fke="__lodash_hash_undefined__";function Mke(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ef&&e===void 0?Fke:e,this}function Dc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Dc.prototype.clear=wke;Dc.prototype.delete=Wke;Dc.prototype.get=Eke;Dc.prototype.has=Yke;Dc.prototype.set=Mke;function Tke(){this.size=0,this.__data__={hash:new Dc,map:new(Jf||$a),string:new Dc}}function Lke(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function kv(t,e){var n=t.__data__;return Lke(e)?n[typeof e=="string"?"string":"hash"]:n.map}function _ke(t){var e=kv(this,t).delete(t);return this.size-=e?1:0,e}function Dke(t){return kv(this,t).get(t)}function Kke(t){return kv(this,t).has(t)}function zke(t,e){var n=kv(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function Zg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Zg.prototype.clear=Tke;Zg.prototype.delete=_ke;Zg.prototype.get=Dke;Zg.prototype.has=Kke;Zg.prototype.set=zke;var Pke=200;function Uke(t,e){var n=this.__data__;if(n instanceof $a){var i=n.__data__;if(!Jf||i.length<Pke-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zg(i)}return n.set(t,e),this.size=n.size,this}function TI(t){var e=this.__data__=new $a(t);this.size=e.size}TI.prototype.clear=ake;TI.prototype.delete=lke;TI.prototype.get=gke;TI.prototype.has=cke;TI.prototype.set=Uke;function jke(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var Oke=function(){try{var t=gu(Object,"defineProperty");return t({},"",{}),t}catch{}}();const hN=Oke;function BU(t,e,n){e=="__proto__"&&hN?hN(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Qke=Object.prototype,$ke=Qke.hasOwnProperty;function RU(t,e,n){var i=t[e];(!($ke.call(t,e)&&ZU(i,n))||n===void 0&&!(e in t))&&BU(t,e,n)}function Vv(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?BU(n,a,l):RU(n,a,l)}return n}function qke(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var eVe="[object Arguments]";function fN(t){return au(t)&&su(t)==eVe}var kU=Object.prototype,tVe=kU.hasOwnProperty,nVe=kU.propertyIsEnumerable,iVe=fN(function(){return arguments}())?fN:function(t){return au(t)&&tVe.call(t,"callee")&&!nVe.call(t,"callee")};const rVe=iVe;var oVe=Array.isArray;const Rm=oVe;function sVe(){return!1}var VU=typeof Er=="object"&&Er&&!Er.nodeType&&Er,mN=VU&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,aVe=mN&&mN.exports===VU,pN=aVe?Os.Buffer:void 0,lVe=pN?pN.isBuffer:void 0,gVe=lVe||sVe;const wU=gVe;var cVe=9007199254740991,uVe=/^(?:0|[1-9]\d*)$/;function dVe(t,e){var n=typeof t;return e=e??cVe,!!e&&(n=="number"||n!="symbol"&&uVe.test(t))&&t>-1&&t%1==0&&t<e}var IVe=9007199254740991;function WU(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=IVe}var CVe="[object Arguments]",hVe="[object Array]",fVe="[object Boolean]",mVe="[object Date]",pVe="[object Error]",AVe="[object Function]",bVe="[object Map]",yVe="[object Number]",vVe="[object Object]",SVe="[object RegExp]",ZVe="[object Set]",GVe="[object String]",BVe="[object WeakMap]",RVe="[object ArrayBuffer]",kVe="[object DataView]",VVe="[object Float32Array]",wVe="[object Float64Array]",WVe="[object Int8Array]",xVe="[object Int16Array]",XVe="[object Int32Array]",JVe="[object Uint8Array]",EVe="[object Uint8ClampedArray]",HVe="[object Uint16Array]",NVe="[object Uint32Array]",vn={};vn[VVe]=vn[wVe]=vn[WVe]=vn[xVe]=vn[XVe]=vn[JVe]=vn[EVe]=vn[HVe]=vn[NVe]=!0;vn[CVe]=vn[hVe]=vn[RVe]=vn[fVe]=vn[kVe]=vn[mVe]=vn[pVe]=vn[AVe]=vn[bVe]=vn[yVe]=vn[vVe]=vn[SVe]=vn[ZVe]=vn[GVe]=vn[BVe]=!1;function YVe(t){return au(t)&&WU(t.length)&&!!vn[su(t)]}function Iw(t){return function(e){return t(e)}}var xU=typeof Er=="object"&&Er&&!Er.nodeType&&Er,Yh=xU&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,FVe=Yh&&Yh.exports===xU,kG=FVe&&bU.process,MVe=function(){try{var t=Yh&&Yh.require&&Yh.require("util").types;return t||kG&&kG.binding&&kG.binding("util")}catch{}}();const bI=MVe;var AN=bI&&bI.isTypedArray,TVe=AN?Iw(AN):YVe;const LVe=TVe;var _Ve=Object.prototype,DVe=_Ve.hasOwnProperty;function XU(t,e){var n=Rm(t),i=!n&&rVe(t),r=!n&&!i&&wU(t),o=!n&&!i&&!r&&LVe(t),s=n||i||r||o,a=s?qke(t.length,String):[],l=a.length;for(var g in t)(e||DVe.call(t,g))&&!(s&&(g=="length"||r&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||dVe(g,l)))&&a.push(g);return a}var KVe=Object.prototype;function Cw(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||KVe;return t===n}var zVe=vU(Object.keys,Object);const PVe=zVe;var UVe=Object.prototype,jVe=UVe.hasOwnProperty;function OVe(t){if(!Cw(t))return PVe(t);var e=[];for(var n in Object(t))jVe.call(t,n)&&n!="constructor"&&e.push(n);return e}function JU(t){return t!=null&&WU(t.length)&&!GU(t)}function hw(t){return JU(t)?XU(t):OVe(t)}function QVe(t,e){return t&&Vv(e,hw(e),t)}function $Ve(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var qVe=Object.prototype,ewe=qVe.hasOwnProperty;function twe(t){if(!Bm(t))return $Ve(t);var e=Cw(t),n=[];for(var i in t)i=="constructor"&&(e||!ewe.call(t,i))||n.push(i);return n}function fw(t){return JU(t)?XU(t,!0):twe(t)}function nwe(t,e){return t&&Vv(e,fw(e),t)}var EU=typeof Er=="object"&&Er&&!Er.nodeType&&Er,bN=EU&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,iwe=bN&&bN.exports===EU,yN=iwe?Os.Buffer:void 0,vN=yN?yN.allocUnsafe:void 0;function rwe(t,e){if(e)return t.slice();var n=t.length,i=vN?vN(n):new t.constructor(n);return t.copy(i),i}function HU(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function owe(t,e){for(var n=-1,i=t==null?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function NU(){return[]}var swe=Object.prototype,awe=swe.propertyIsEnumerable,SN=Object.getOwnPropertySymbols,lwe=SN?function(t){return t==null?[]:(t=Object(t),owe(SN(t),function(e){return awe.call(t,e)}))}:NU;const mw=lwe;function gwe(t,e){return Vv(t,mw(t),e)}function YU(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var cwe=Object.getOwnPropertySymbols,uwe=cwe?function(t){for(var e=[];t;)YU(e,mw(t)),t=dw(t);return e}:NU;const FU=uwe;function dwe(t,e){return Vv(t,FU(t),e)}function MU(t,e,n){var i=e(t);return Rm(t)?i:YU(i,n(t))}function Iwe(t){return MU(t,hw,mw)}function Cwe(t){return MU(t,fw,FU)}var hwe=gu(Os,"DataView");const w1=hwe;var fwe=gu(Os,"Promise");const W1=fwe;var mwe=gu(Os,"Set");const x1=mwe;var pwe=gu(Os,"WeakMap");const X1=pwe;var ZN="[object Map]",Awe="[object Object]",GN="[object Promise]",BN="[object Set]",RN="[object WeakMap]",kN="[object DataView]",bwe=lu(w1),ywe=lu(Jf),vwe=lu(W1),Swe=lu(x1),Zwe=lu(X1),$g=su;(w1&&$g(new w1(new ArrayBuffer(1)))!=kN||Jf&&$g(new Jf)!=ZN||W1&&$g(W1.resolve())!=GN||x1&&$g(new x1)!=BN||X1&&$g(new X1)!=RN)&&($g=function(t){var e=su(t),n=e==Awe?t.constructor:void 0,i=n?lu(n):"";if(i)switch(i){case bwe:return kN;case ywe:return ZN;case vwe:return GN;case Swe:return BN;case Zwe:return RN}return e});const pw=$g;var Gwe=Object.prototype,Bwe=Gwe.hasOwnProperty;function Rwe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Bwe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var kwe=Os.Uint8Array;const VN=kwe;function Aw(t){var e=new t.constructor(t.byteLength);return new VN(e).set(new VN(t)),e}function Vwe(t,e){var n=e?Aw(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var wwe=/\w*$/;function Wwe(t){var e=new t.constructor(t.source,wwe.exec(t));return e.lastIndex=t.lastIndex,e}var wN=lg?lg.prototype:void 0,WN=wN?wN.valueOf:void 0;function xwe(t){return WN?Object(WN.call(t)):{}}function Xwe(t,e){var n=e?Aw(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Jwe="[object Boolean]",Ewe="[object Date]",Hwe="[object Map]",Nwe="[object Number]",Ywe="[object RegExp]",Fwe="[object Set]",Mwe="[object String]",Twe="[object Symbol]",Lwe="[object ArrayBuffer]",_we="[object DataView]",Dwe="[object Float32Array]",Kwe="[object Float64Array]",zwe="[object Int8Array]",Pwe="[object Int16Array]",Uwe="[object Int32Array]",jwe="[object Uint8Array]",Owe="[object Uint8ClampedArray]",Qwe="[object Uint16Array]",$we="[object Uint32Array]";function qwe(t,e,n){var i=t.constructor;switch(e){case Lwe:return Aw(t);case Jwe:case Ewe:return new i(+t);case _we:return Vwe(t,n);case Dwe:case Kwe:case zwe:case Pwe:case Uwe:case jwe:case Owe:case Qwe:case $we:return Xwe(t,n);case Hwe:return new i;case Nwe:case Mwe:return new i(t);case Ywe:return Wwe(t);case Fwe:return new i;case Twe:return xwe(t)}}var xN=Object.create,eWe=function(){function t(){}return function(e){if(!Bm(e))return{};if(xN)return xN(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const tWe=eWe;function nWe(t){return typeof t.constructor=="function"&&!Cw(t)?tWe(dw(t)):{}}var iWe="[object Map]";function rWe(t){return au(t)&&pw(t)==iWe}var XN=bI&&bI.isMap,oWe=XN?Iw(XN):rWe;const sWe=oWe;var aWe="[object Set]";function lWe(t){return au(t)&&pw(t)==aWe}var JN=bI&&bI.isSet,gWe=JN?Iw(JN):lWe;const cWe=gWe;var uWe=1,dWe=2,IWe=4,TU="[object Arguments]",CWe="[object Array]",hWe="[object Boolean]",fWe="[object Date]",mWe="[object Error]",LU="[object Function]",pWe="[object GeneratorFunction]",AWe="[object Map]",bWe="[object Number]",_U="[object Object]",yWe="[object RegExp]",vWe="[object Set]",SWe="[object String]",ZWe="[object Symbol]",GWe="[object WeakMap]",BWe="[object ArrayBuffer]",RWe="[object DataView]",kWe="[object Float32Array]",VWe="[object Float64Array]",wWe="[object Int8Array]",WWe="[object Int16Array]",xWe="[object Int32Array]",XWe="[object Uint8Array]",JWe="[object Uint8ClampedArray]",EWe="[object Uint16Array]",HWe="[object Uint32Array]",dn={};dn[TU]=dn[CWe]=dn[BWe]=dn[RWe]=dn[hWe]=dn[fWe]=dn[kWe]=dn[VWe]=dn[wWe]=dn[WWe]=dn[xWe]=dn[AWe]=dn[bWe]=dn[_U]=dn[yWe]=dn[vWe]=dn[SWe]=dn[ZWe]=dn[XWe]=dn[JWe]=dn[EWe]=dn[HWe]=!0;dn[mWe]=dn[LU]=dn[GWe]=!1;function Fh(t,e,n,i,r,o){var s,a=e&uWe,l=e&dWe,g=e&IWe;if(n&&(s=r?n(t,i,r,o):n(t)),s!==void 0)return s;if(!Bm(t))return t;var u=Rm(t);if(u){if(s=Rwe(t),!a)return HU(t,s)}else{var d=pw(t),h=d==LU||d==pWe;if(wU(t))return rwe(t,a);if(d==_U||d==TU||h&&!r){if(s=l||h?{}:nWe(t),!a)return l?dwe(t,nwe(s,t)):gwe(t,QVe(s,t))}else{if(!dn[d])return r?t:{};s=qwe(t,d,a)}}o||(o=new TI);var f=o.get(t);if(f)return f;o.set(t,s),cWe(t)?t.forEach(function(y){s.add(Fh(y,e,n,y,t,o))}):sWe(t)&&t.forEach(function(y,v){s.set(v,Fh(y,e,n,v,t,o))});var A=g?l?Cwe:Iwe:l?fw:hw,p=u?void 0:A(t);return jke(p||t,function(y,v){p&&(v=y,y=t[v]),RU(s,v,Fh(y,e,n,v,t,o))}),s}var NWe=1,YWe=4;function lh(t){return Fh(t,NWe|YWe)}var EN=Array.isArray,HN=Object.keys,FWe=Object.prototype.hasOwnProperty,MWe=typeof Element<"u";function J1(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=EN(t),i=EN(e),r,o,s;if(n&&i){if(o=t.length,o!=e.length)return!1;for(r=o;r--!==0;)if(!J1(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var g=t instanceof RegExp,u=e instanceof RegExp;if(g!=u)return!1;if(g&&u)return t.toString()==e.toString();var d=HN(t);if(o=d.length,o!==HN(e).length)return!1;for(r=o;r--!==0;)if(!FWe.call(e,d[r]))return!1;if(MWe&&t instanceof Element&&e instanceof Element)return t===e;for(r=o;r--!==0;)if(s=d[r],!(s==="_owner"&&t.$$typeof)&&!J1(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}var TWe=function(e,n){try{return J1(e,n)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}};const Bl=Ig(TWe);var LWe=!0;function DU(t,e){if(!LWe){if(t)return;var n="Warning: "+e;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var _We=4;function NN(t){return Fh(t,_We)}function KU(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var DWe="[object Symbol]";function bw(t){return typeof t=="symbol"||au(t)&&su(t)==DWe}var KWe="Expected a function";function yw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(KWe);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(yw.Cache||Zg),n}yw.Cache=Zg;var zWe=500;function PWe(t){var e=yw(t,function(i){return n.size===zWe&&n.clear(),i}),n=e.cache;return e}var UWe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jWe=/\\(\\)?/g,OWe=PWe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(UWe,function(n,i,r,o){e.push(r?o.replace(jWe,"$1"):i||n)}),e});const QWe=OWe;var $We=1/0;function qWe(t){if(typeof t=="string"||bw(t))return t;var e=t+"";return e=="0"&&1/t==-$We?"-0":e}var exe=1/0,YN=lg?lg.prototype:void 0,FN=YN?YN.toString:void 0;function zU(t){if(typeof t=="string")return t;if(Rm(t))return KU(t,zU)+"";if(bw(t))return FN?FN.call(t):"";var e=t+"";return e=="0"&&1/t==-exe?"-0":e}function txe(t){return t==null?"":zU(t)}function PU(t){return Rm(t)?KU(t,qWe):bw(t)?[t]:HU(QWe(txe(t)))}function jt(){return jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jt.apply(this,arguments)}function UU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Xl(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function MN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var wv=m.createContext(void 0);wv.displayName="FormikContext";var nxe=wv.Provider,ixe=wv.Consumer;function jU(){var t=m.useContext(wv);return t||DU(!1),t}var TN=function(e){return Array.isArray(e)&&e.length===0},Gi=function(e){return typeof e=="function"},km=function(e){return e!==null&&typeof e=="object"},rxe=function(e){return String(Math.floor(Number(e)))===e},VG=function(e){return Object.prototype.toString.call(e)==="[object String]"},OU=function(e){return m.Children.count(e)===0},wG=function(e){return km(e)&&Gi(e.then)};function Bn(t,e,n,i){i===void 0&&(i=0);for(var r=PU(e);t&&i<r.length;)t=t[r[i++]];return i!==r.length&&!t||t===void 0?n:t}function Ys(t,e,n){for(var i=NN(t),r=i,o=0,s=PU(e);o<s.length-1;o++){var a=s[o],l=Bn(t,s.slice(0,o+1));if(l&&(km(l)||Array.isArray(l)))r=r[a]=NN(l);else{var g=s[o+1];r=r[a]=rxe(g)&&Number(g)>=0?[]:{}}}return(o===0?t:r)[s[o]]===n?t:(n===void 0?delete r[s[o]]:r[s[o]]=n,o===0&&n===void 0&&delete i[s[o]],i)}function QU(t,e,n,i){n===void 0&&(n=new WeakMap),i===void 0&&(i={});for(var r=0,o=Object.keys(t);r<o.length;r++){var s=o[r],a=t[s];km(a)?n.get(a)||(n.set(a,!0),i[s]=Array.isArray(a)?[]:{},QU(a,e,n,i[s])):i[s]=e}return i}function oxe(t,e){switch(e.type){case"SET_VALUES":return jt({},t,{values:e.payload});case"SET_TOUCHED":return jt({},t,{touched:e.payload});case"SET_ERRORS":return Bl(t.errors,e.payload)?t:jt({},t,{errors:e.payload});case"SET_STATUS":return jt({},t,{status:e.payload});case"SET_ISSUBMITTING":return jt({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return jt({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return jt({},t,{values:Ys(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return jt({},t,{touched:Ys(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return jt({},t,{errors:Ys(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return jt({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return jt({},t,{touched:QU(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return jt({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return jt({},t,{isSubmitting:!1});default:return t}}var Tg={},qp={};function sxe(t){var e=t.validateOnChange,n=e===void 0?!0:e,i=t.validateOnBlur,r=i===void 0?!0:i,o=t.validateOnMount,s=o===void 0?!1:o,a=t.isInitialValid,l=t.enableReinitialize,g=l===void 0?!1:l,u=t.onSubmit,d=Xl(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=jt({validateOnChange:n,validateOnBlur:r,validateOnMount:s,onSubmit:u},d),f=m.useRef(h.initialValues),A=m.useRef(h.initialErrors||Tg),p=m.useRef(h.initialTouched||qp),y=m.useRef(h.initialStatus),v=m.useRef(!1),S=m.useRef({});m.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var Z=m.useState(0),R=Z[1],W=m.useRef({values:lh(h.initialValues),errors:lh(h.initialErrors)||Tg,touched:lh(h.initialTouched)||qp,status:lh(h.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),B=W.current,k=m.useCallback(function(j){var be=W.current;W.current=oxe(be,j),be!==W.current&&R(function(Ce){return Ce+1})},[]),w=m.useCallback(function(j,be){return new Promise(function(Ce,We){var je=h.validate(j,be);je==null?Ce(Tg):wG(je)?je.then(function(tt){Ce(tt||Tg)},function(tt){We(tt)}):Ce(je)})},[h.validate]),J=m.useCallback(function(j,be){var Ce=h.validationSchema,We=Gi(Ce)?Ce(be):Ce,je=be&&We.validateAt?We.validateAt(be,j):gxe(j,We);return new Promise(function(tt,ft){je.then(function(){tt(Tg)},function(ut){ut.name==="ValidationError"?tt(lxe(ut)):ft(ut)})})},[h.validationSchema]),X=m.useCallback(function(j,be){return new Promise(function(Ce){return Ce(S.current[j].validate(be))})},[]),Y=m.useCallback(function(j){var be=Object.keys(S.current).filter(function(We){return Gi(S.current[We].validate)}),Ce=be.length>0?be.map(function(We){return X(We,Bn(j,We))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Ce).then(function(We){return We.reduce(function(je,tt,ft){return tt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||tt&&(je=Ys(je,be[ft],tt)),je},{})})},[X]),z=m.useCallback(function(j){return Promise.all([Y(j),h.validationSchema?J(j):{},h.validate?w(j):{}]).then(function(be){var Ce=be[0],We=be[1],je=be[2],tt=V1.all([Ce,We,je],{arrayMerge:cxe});return tt})},[h.validate,h.validationSchema,Y,w,J]),P=ao(function(j){return j===void 0&&(j=B.values),k({type:"SET_ISVALIDATING",payload:!0}),z(j).then(function(be){return v.current&&(k({type:"SET_ISVALIDATING",payload:!1}),k({type:"SET_ERRORS",payload:be})),be})});m.useEffect(function(){s&&v.current===!0&&Bl(f.current,h.initialValues)&&P(f.current)},[s,P]);var $=m.useCallback(function(j){var be=j&&j.values?j.values:f.current,Ce=j&&j.errors?j.errors:A.current?A.current:h.initialErrors||{},We=j&&j.touched?j.touched:p.current?p.current:h.initialTouched||{},je=j&&j.status?j.status:y.current?y.current:h.initialStatus;f.current=be,A.current=Ce,p.current=We,y.current=je;var tt=function(){k({type:"RESET_FORM",payload:{isSubmitting:!!j&&!!j.isSubmitting,errors:Ce,touched:We,status:je,values:be,isValidating:!!j&&!!j.isValidating,submitCount:j&&j.submitCount&&typeof j.submitCount=="number"?j.submitCount:0}})};if(h.onReset){var ft=h.onReset(B.values,Ne);wG(ft)?ft.then(tt):tt()}else tt()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);m.useEffect(function(){v.current===!0&&!Bl(f.current,h.initialValues)&&g&&(f.current=h.initialValues,$(),s&&P(f.current))},[g,h.initialValues,$,s,P]),m.useEffect(function(){g&&v.current===!0&&!Bl(A.current,h.initialErrors)&&(A.current=h.initialErrors||Tg,k({type:"SET_ERRORS",payload:h.initialErrors||Tg}))},[g,h.initialErrors]),m.useEffect(function(){g&&v.current===!0&&!Bl(p.current,h.initialTouched)&&(p.current=h.initialTouched||qp,k({type:"SET_TOUCHED",payload:h.initialTouched||qp}))},[g,h.initialTouched]),m.useEffect(function(){g&&v.current===!0&&!Bl(y.current,h.initialStatus)&&(y.current=h.initialStatus,k({type:"SET_STATUS",payload:h.initialStatus}))},[g,h.initialStatus,h.initialTouched]);var oe=ao(function(j){if(S.current[j]&&Gi(S.current[j].validate)){var be=Bn(B.values,j),Ce=S.current[j].validate(be);return wG(Ce)?(k({type:"SET_ISVALIDATING",payload:!0}),Ce.then(function(We){return We}).then(function(We){k({type:"SET_FIELD_ERROR",payload:{field:j,value:We}}),k({type:"SET_ISVALIDATING",payload:!1})})):(k({type:"SET_FIELD_ERROR",payload:{field:j,value:Ce}}),Promise.resolve(Ce))}else if(h.validationSchema)return k({type:"SET_ISVALIDATING",payload:!0}),J(B.values,j).then(function(We){return We}).then(function(We){k({type:"SET_FIELD_ERROR",payload:{field:j,value:Bn(We,j)}}),k({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),q=m.useCallback(function(j,be){var Ce=be.validate;S.current[j]={validate:Ce}},[]),K=m.useCallback(function(j){delete S.current[j]},[]),_=ao(function(j,be){k({type:"SET_TOUCHED",payload:j});var Ce=be===void 0?r:be;return Ce?P(B.values):Promise.resolve()}),de=m.useCallback(function(j){k({type:"SET_ERRORS",payload:j})},[]),ne=ao(function(j,be){var Ce=Gi(j)?j(B.values):j;k({type:"SET_VALUES",payload:Ce});var We=be===void 0?n:be;return We?P(Ce):Promise.resolve()}),se=m.useCallback(function(j,be){k({type:"SET_FIELD_ERROR",payload:{field:j,value:be}})},[]),E=ao(function(j,be,Ce){k({type:"SET_FIELD_VALUE",payload:{field:j,value:be}});var We=Ce===void 0?n:Ce;return We?P(Ys(B.values,j,be)):Promise.resolve()}),M=m.useCallback(function(j,be){var Ce=be,We=j,je;if(!VG(j)){j.persist&&j.persist();var tt=j.target?j.target:j.currentTarget,ft=tt.type,ut=tt.name,Yn=tt.id,gi=tt.value,ci=tt.checked,ui=tt.outerHTML,di=tt.options,te=tt.multiple;Ce=be||ut||Yn,We=/number|range/.test(ft)?(je=parseFloat(gi),isNaN(je)?"":je):/checkbox/.test(ft)?dxe(Bn(B.values,Ce),ci,gi):di&&te?uxe(di):gi}Ce&&E(Ce,We)},[E,B.values]),T=ao(function(j){if(VG(j))return function(be){return M(be,j)};M(j)}),U=ao(function(j,be,Ce){be===void 0&&(be=!0),k({type:"SET_FIELD_TOUCHED",payload:{field:j,value:be}});var We=Ce===void 0?r:Ce;return We?P(B.values):Promise.resolve()}),H=m.useCallback(function(j,be){j.persist&&j.persist();var Ce=j.target,We=Ce.name,je=Ce.id,tt=Ce.outerHTML,ft=be||We||je;U(ft,!0)},[U]),ie=ao(function(j){if(VG(j))return function(be){return H(be,j)};H(j)}),Ae=m.useCallback(function(j){Gi(j)?k({type:"SET_FORMIK_STATE",payload:j}):k({type:"SET_FORMIK_STATE",payload:function(){return j}})},[]),Ie=m.useCallback(function(j){k({type:"SET_STATUS",payload:j})},[]),xe=m.useCallback(function(j){k({type:"SET_ISSUBMITTING",payload:j})},[]),Xe=ao(function(){return k({type:"SUBMIT_ATTEMPT"}),P().then(function(j){var be=j instanceof Error,Ce=!be&&Object.keys(j).length===0;if(Ce){var We;try{if(We=et(),We===void 0)return}catch(je){throw je}return Promise.resolve(We).then(function(je){return v.current&&k({type:"SUBMIT_SUCCESS"}),je}).catch(function(je){if(v.current)throw k({type:"SUBMIT_FAILURE"}),je})}else if(v.current&&(k({type:"SUBMIT_FAILURE"}),be))throw j})}),Je=ao(function(j){j&&j.preventDefault&&Gi(j.preventDefault)&&j.preventDefault(),j&&j.stopPropagation&&Gi(j.stopPropagation)&&j.stopPropagation(),Xe().catch(function(be){console.warn("Warning: An unhandled error was caught from submitForm()",be)})}),Ne={resetForm:$,validateForm:P,validateField:oe,setErrors:de,setFieldError:se,setFieldTouched:U,setFieldValue:E,setStatus:Ie,setSubmitting:xe,setTouched:_,setValues:ne,setFormikState:Ae,submitForm:Xe},et=ao(function(){return u(B.values,Ne)}),he=ao(function(j){j&&j.preventDefault&&Gi(j.preventDefault)&&j.preventDefault(),j&&j.stopPropagation&&Gi(j.stopPropagation)&&j.stopPropagation(),$()}),Be=m.useCallback(function(j){return{value:Bn(B.values,j),error:Bn(B.errors,j),touched:!!Bn(B.touched,j),initialValue:Bn(f.current,j),initialTouched:!!Bn(p.current,j),initialError:Bn(A.current,j)}},[B.errors,B.touched,B.values]),Ge=m.useCallback(function(j){return{setValue:function(Ce,We){return E(j,Ce,We)},setTouched:function(Ce,We){return U(j,Ce,We)},setError:function(Ce){return se(j,Ce)}}},[E,U,se]),Me=m.useCallback(function(j){var be=km(j),Ce=be?j.name:j,We=Bn(B.values,Ce),je={name:Ce,value:We,onChange:T,onBlur:ie};if(be){var tt=j.type,ft=j.value,ut=j.as,Yn=j.multiple;tt==="checkbox"?ft===void 0?je.checked=!!We:(je.checked=!!(Array.isArray(We)&&~We.indexOf(ft)),je.value=ft):tt==="radio"?(je.checked=We===ft,je.value=ft):ut==="select"&&Yn&&(je.value=je.value||[],je.multiple=!0)}return je},[ie,T,B.values]),Oe=m.useMemo(function(){return!Bl(f.current,B.values)},[f.current,B.values]),Ye=m.useMemo(function(){return typeof a<"u"?Oe?B.errors&&Object.keys(B.errors).length===0:a!==!1&&Gi(a)?a(h):a:B.errors&&Object.keys(B.errors).length===0},[a,Oe,B.errors,h]),Ct=jt({},B,{initialValues:f.current,initialErrors:A.current,initialTouched:p.current,initialStatus:y.current,handleBlur:ie,handleChange:T,handleReset:he,handleSubmit:Je,resetForm:$,setErrors:de,setFormikState:Ae,setFieldTouched:U,setFieldValue:E,setFieldError:se,setStatus:Ie,setSubmitting:xe,setTouched:_,setValues:ne,submitForm:Xe,validateForm:P,validateField:oe,isValid:Ye,dirty:Oe,unregisterField:K,registerField:q,getFieldProps:Me,getFieldMeta:Be,getFieldHelpers:Ge,validateOnBlur:r,validateOnChange:n,validateOnMount:s});return Ct}function axe(t){var e=sxe(t),n=t.component,i=t.children,r=t.render,o=t.innerRef;return m.useImperativeHandle(o,function(){return e}),m.createElement(nxe,{value:e},n?m.createElement(n,e):r?r(e):i?Gi(i)?i(e):OU(i)?null:m.Children.only(i):null)}function lxe(t){var e={};if(t.inner){if(t.inner.length===0)return Ys(e,t.path,t.message);for(var r=t.inner,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var s=o;Bn(e,s.path)||(e=Ys(e,s.path,s.message))}}return e}function gxe(t,e,n,i){n===void 0&&(n=!1);var r=E1(t);return e[n?"validateSync":"validate"](r,{abortEarly:!1,context:i||r})}function E1(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=String(n);Array.isArray(t[i])===!0?e[i]=t[i].map(function(r){return Array.isArray(r)===!0||IN(r)?E1(r):r!==""?r:void 0}):IN(t[i])?e[i]=E1(t[i]):e[i]=t[i]!==""?t[i]:void 0}return e}function cxe(t,e,n){var i=t.slice();return e.forEach(function(o,s){if(typeof i[s]>"u"){var a=n.clone!==!1,l=a&&n.isMergeableObject(o);i[s]=l?V1(Array.isArray(o)?[]:{},o,n):o}else n.isMergeableObject(o)?i[s]=V1(t[s],o,n):t.indexOf(o)===-1&&i.push(o)}),i}function uxe(t){return Array.from(t).filter(function(e){return e.selected}).map(function(e){return e.value})}function dxe(t,e,n){if(typeof t=="boolean")return!!e;var i=[],r=!1,o=-1;if(Array.isArray(t))i=t,o=t.indexOf(n),r=o>=0;else if(!n||n=="true"||n=="false")return!!e;return e&&n&&!r?i.concat(n):r?i.slice(0,o).concat(i.slice(o+1)):i}var Ixe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?m.useLayoutEffect:m.useEffect;function ao(t){var e=m.useRef(t);return Ixe(function(){e.current=t}),m.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current.apply(void 0,i)},[])}function lo(t){var e=t.validate,n=t.name,i=t.render,r=t.children,o=t.as,s=t.component,a=t.className,l=Xl(t,["validate","name","render","children","as","component","className"]),g=jU(),u=Xl(g,["validate","validationSchema"]),d=u.registerField,h=u.unregisterField;m.useEffect(function(){return d(n,{validate:e}),function(){h(n)}},[d,h,n,e]);var f=u.getFieldProps(jt({name:n},l)),A=u.getFieldMeta(n),p={field:f,form:u};if(i)return i(jt({},p,{meta:A}));if(Gi(r))return r(jt({},p,{meta:A}));if(s){if(typeof s=="string"){var y=l.innerRef,v=Xl(l,["innerRef"]);return m.createElement(s,jt({ref:y},f,v,{className:a}),r)}return m.createElement(s,jt({field:f,form:u},l,{className:a}),r)}var S=o||"input";if(typeof S=="string"){var Z=l.innerRef,R=Xl(l,["innerRef"]);return m.createElement(S,jt({ref:Z},f,R,{className:a}),r)}return m.createElement(S,jt({},f,l,{className:a}),r)}var $U=m.forwardRef(function(t,e){var n=t.action,i=Xl(t,["action"]),r=n??"#",o=jU(),s=o.handleReset,a=o.handleSubmit;return m.createElement("form",jt({onSubmit:a,ref:e,onReset:s,action:r},i))});$U.displayName="Form";function Cxe(t){var e=function(r){return m.createElement(ixe,null,function(o){return o||DU(!1),m.createElement(t,jt({},r,{formik:o}))})},n=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return e.WrappedComponent=t,e.displayName="FormikConnect("+n+")",E$(e,t)}var hxe=function(e,n,i){var r=Kc(e),o=r[n];return r.splice(n,1),r.splice(i,0,o),r},fxe=function(e,n,i){var r=Kc(e),o=r[n];return r[n]=r[i],r[i]=o,r},WG=function(e,n,i){var r=Kc(e);return r.splice(n,0,i),r},mxe=function(e,n,i){var r=Kc(e);return r[n]=i,r},Kc=function(e){if(e){if(Array.isArray(e))return[].concat(e);var n=Object.keys(e).map(function(i){return parseInt(i)}).reduce(function(i,r){return r>i?r:i},0);return Array.from(jt({},e,{length:n+1}))}else return[]},LN=function(e,n){var i=typeof e=="function"?e:n;return function(r){if(Array.isArray(r)||km(r)){var o=Kc(r);return i(o)}return r}},pxe=function(t){UU(e,t);function e(i){var r;return r=t.call(this,i)||this,r.updateArrayField=function(o,s,a){var l=r.props,g=l.name,u=l.formik.setFormikState;u(function(d){var h=LN(a,o),f=LN(s,o),A=Ys(d.values,g,o(Bn(d.values,g))),p=a?h(Bn(d.errors,g)):void 0,y=s?f(Bn(d.touched,g)):void 0;return TN(p)&&(p=void 0),TN(y)&&(y=void 0),jt({},d,{values:A,errors:a?Ys(d.errors,g,p):d.errors,touched:s?Ys(d.touched,g,y):d.touched})})},r.push=function(o){return r.updateArrayField(function(s){return[].concat(Kc(s),[lh(o)])},!1,!1)},r.handlePush=function(o){return function(){return r.push(o)}},r.swap=function(o,s){return r.updateArrayField(function(a){return fxe(a,o,s)},!0,!0)},r.handleSwap=function(o,s){return function(){return r.swap(o,s)}},r.move=function(o,s){return r.updateArrayField(function(a){return hxe(a,o,s)},!0,!0)},r.handleMove=function(o,s){return function(){return r.move(o,s)}},r.insert=function(o,s){return r.updateArrayField(function(a){return WG(a,o,s)},function(a){return WG(a,o,null)},function(a){return WG(a,o,null)})},r.handleInsert=function(o,s){return function(){return r.insert(o,s)}},r.replace=function(o,s){return r.updateArrayField(function(a){return mxe(a,o,s)},!1,!1)},r.handleReplace=function(o,s){return function(){return r.replace(o,s)}},r.unshift=function(o){var s=-1;return r.updateArrayField(function(a){var l=a?[o].concat(a):[o];return s=l.length,l},function(a){return a?[null].concat(a):[null]},function(a){return a?[null].concat(a):[null]}),s},r.handleUnshift=function(o){return function(){return r.unshift(o)}},r.handleRemove=function(o){return function(){return r.remove(o)}},r.handlePop=function(){return function(){return r.pop()}},r.remove=r.remove.bind(MN(r)),r.pop=r.pop.bind(MN(r)),r}var n=e.prototype;return n.componentDidUpdate=function(r){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Bl(Bn(r.formik.values,r.name),Bn(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(r){var o;return this.updateArrayField(function(s){var a=s?Kc(s):[];return o||(o=a[r]),Gi(a.splice)&&a.splice(r,1),Gi(a.every)&&a.every(function(l){return l===void 0})?[]:a},!0,!0),o},n.pop=function(){var r;return this.updateArrayField(function(o){var s=o.slice();return r||(r=s&&s.pop&&s.pop()),s},!0,!0),r},n.render=function(){var r={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},o=this.props,s=o.component,a=o.render,l=o.children,g=o.name,u=o.formik,d=Xl(u,["validate","validationSchema"]),h=jt({},r,{form:d,name:g});return s?m.createElement(s,h):a?a(h):l?typeof l=="function"?l(h):OU(l)?null:m.Children.only(l):null},e}(m.Component);pxe.defaultProps={validateOnChange:!0};var Axe=function(t){UU(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r){return Bn(this.props.formik.errors,this.props.name)!==Bn(r.formik.errors,this.props.name)||Bn(this.props.formik.touched,this.props.name)!==Bn(r.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(r).length},n.render=function(){var r=this.props,o=r.component,s=r.formik,a=r.render,l=r.children,g=r.name,u=Xl(r,["component","formik","render","children","name"]),d=Bn(s.touched,g),h=Bn(s.errors,g);return d&&h?a?Gi(a)?a(h):null:l?Gi(l)?l(h):null:o?m.createElement(o,u,h):h:null},e}(m.Component),Du=Cxe(Axe);function cu(t){this._maxSize=t,this.clear()}cu.prototype.clear=function(){this._size=0,this._values=Object.create(null)};cu.prototype.get=function(t){return this._values[t]};cu.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var bxe=/[^.^\]^[]+|(?=\[\]|\.\.)/g,qU=/^\d+$/,yxe=/^\d/,vxe=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Sxe=/^\s*(['"]?)(.*?)(\1)\s*$/,vw=512,_N=new cu(vw),DN=new cu(vw),KN=new cu(vw),Gc={Cache:cu,split:H1,normalizePath:xG,setter:function(t){var e=xG(t);return DN.get(t)||DN.set(t,function(i,r){for(var o=0,s=e.length,a=i;o<s-1;){var l=e[o];if(l==="__proto__"||l==="constructor"||l==="prototype")return i;a=a[e[o++]]}a[e[o]]=r})},getter:function(t,e){var n=xG(t);return KN.get(t)||KN.set(t,function(r){for(var o=0,s=n.length;o<s;)if(r!=null||!e)r=r[n[o++]];else return;return r})},join:function(t){return t.reduce(function(e,n){return e+(Sw(n)||qU.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){Zxe(Array.isArray(t)?t:H1(t),e,n)}};function xG(t){return _N.get(t)||_N.set(t,H1(t).map(function(e){return e.replace(Sxe,"$2")}))}function H1(t){return t.match(bxe)||[""]}function Zxe(t,e,n){var i=t.length,r,o,s,a;for(o=0;o<i;o++)r=t[o],r&&(Rxe(r)&&(r='"'+r+'"'),a=Sw(r),s=!a&&/^\d+$/.test(r),e.call(n,r,a,s,o,t))}function Sw(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function Gxe(t){return t.match(yxe)&&!t.match(qU)}function Bxe(t){return vxe.test(t)}function Rxe(t){return!Sw(t)&&(Gxe(t)||Bxe(t))}const kxe=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Wv=t=>t.match(kxe)||[],xv=t=>t[0].toUpperCase()+t.slice(1),Zw=(t,e)=>Wv(t).join(e).toLowerCase(),ej=t=>Wv(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Vxe=t=>xv(ej(t)),wxe=t=>Zw(t,"_"),Wxe=t=>Zw(t,"-"),xxe=t=>xv(Zw(t," ")),Xxe=t=>Wv(t).map(xv).join(" ");var XG={words:Wv,upperFirst:xv,camelCase:ej,pascalCase:Vxe,snakeCase:wxe,kebabCase:Wxe,sentenceCase:xxe,titleCase:Xxe},Gw={exports:{}};Gw.exports=function(t){return tj(Jxe(t),t)};Gw.exports.array=tj;function tj(t,e){var n=t.length,i=new Array(n),r={},o=n,s=Exe(e),a=Hxe(t);for(e.forEach(function(g){if(!a.has(g[0])||!a.has(g[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)r[o]||l(t[o],o,new Set);return i;function l(g,u,d){if(d.has(g)){var h;try{h=", node was:"+JSON.stringify(g)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!a.has(g))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(g));if(!r[u]){r[u]=!0;var f=s.get(g)||new Set;if(f=Array.from(f),u=f.length){d.add(g);do{var A=f[--u];l(A,a.get(A),d)}while(u);d.delete(g)}i[--n]=g}}}function Jxe(t){for(var e=new Set,n=0,i=t.length;n<i;n++){var r=t[n];e.add(r[0]),e.add(r[1])}return Array.from(e)}function Exe(t){for(var e=new Map,n=0,i=t.length;n<i;n++){var r=t[n];e.has(r[0])||e.set(r[0],new Set),e.has(r[1])||e.set(r[1],new Set),e.get(r[0]).add(r[1])}return e}function Hxe(t){for(var e=new Map,n=0,i=t.length;n<i;n++)e.set(t[n],n);return e}var Nxe=Gw.exports;const Yxe=Ig(Nxe),Fxe=Object.prototype.toString,Mxe=Error.prototype.toString,Txe=RegExp.prototype.toString,Lxe=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",_xe=/^Symbol\((.*)\)(.*)$/;function Dxe(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function zN(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return Dxe(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return Lxe.call(t).replace(_xe,"Symbol($1)");const i=Fxe.call(t).slice(8,-1);return i==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):i==="Error"||t instanceof Error?"["+Mxe.call(t)+"]":i==="RegExp"?Txe.call(t):null}function ql(t,e){let n=zN(t,e);return n!==null?n:JSON.stringify(t,function(i,r){let o=zN(this[i],e);return o!==null?o:r},2)}function nj(t){return t==null?[]:[].concat(t)}let ij,rj,oj,Kxe=/\$\{\s*(\w+)\s*\}/g;ij=Symbol.toStringTag;class PN{constructor(e,n,i,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[ij]="Error",this.name="ValidationError",this.value=n,this.path=i,this.type=r,this.errors=[],this.inner=[],nj(e).forEach(o=>{if(Oi.isError(o)){this.errors.push(...o.errors);const s=o.inner.length?o.inner:[o];this.inner.push(...s)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}rj=Symbol.hasInstance;oj=Symbol.toStringTag;class Oi extends Error{static formatError(e,n){const i=n.label||n.path||"this";return i!==n.path&&(n=Object.assign({},n,{path:i})),typeof e=="string"?e.replace(Kxe,(r,o)=>ql(n[o])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,i,r,o){const s=new PN(e,n,i,r);if(o)return s;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[oj]="Error",this.name=s.name,this.message=s.message,this.type=s.type,this.value=s.value,this.path=s.path,this.errors=s.errors,this.inner=s.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Oi)}static[rj](e){return PN[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let bs={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:i})=>{const r=i!=null&&i!==n?` (cast from the value \`${ql(i,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${ql(n,!0)}\``+r:`${t} must match the configured type. The validated value was: \`${ql(n,!0)}\``+r}},lr={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},zxe={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},N1={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pxe={isValue:"${path} field must be ${value}"},Y1={noUnknown:"${path} field has unspecified keys: ${unknown}"},Uxe={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},jxe={notType:t=>{const{path:e,value:n,spec:i}=t,r=i.types.length;if(Array.isArray(n)){if(n.length<r)return`${e} tuple value has too few items, expected a length of ${r} but got ${n.length} for value: \`${ql(n,!0)}\``;if(n.length>r)return`${e} tuple value has too many items, expected a length of ${r} but got ${n.length} for value: \`${ql(n,!0)}\``}return Oi.formatError(bs.notType,t)}};Object.assign(Object.create(null),{mixed:bs,string:lr,number:zxe,date:N1,object:Y1,array:Uxe,boolean:Pxe,tuple:jxe});const Bw=t=>t&&t.__isYupSchema__;class E0{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:r,otherwise:o}=n,s=typeof i=="function"?i:(...a)=>a.every(l=>l===i);return new E0(e,(a,l)=>{var g;let u=s(...a)?r:o;return(g=u==null?void 0:u(l))!=null?g:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let i=this.refs.map(o=>o.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),r=this.fn(i,e,n);if(r===void 0||r===e)return e;if(!Bw(r))throw new TypeError("conditions must return a schema object");return r.resolve(n)}}const eA={context:"$",value:"."};class uu{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===eA.context,this.isValue=this.key[0]===eA.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?eA.context:this.isValue?eA.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&Gc.getter(this.path,!0),this.map=n.map}getValue(e,n,i){let r=this.isContext?i:this.isValue?e:n;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}uu.prototype.__isYupRef=!0;const dc=t=>t==null;function Ku(t){function e({value:n,path:i="",options:r,originalValue:o,schema:s},a,l){const{name:g,test:u,params:d,message:h,skipAbsent:f}=t;let{parent:A,context:p,abortEarly:y=s.spec.abortEarly,disableStackTrace:v=s.spec.disableStackTrace}=r;function S(Y){return uu.isRef(Y)?Y.getValue(n,A,p):Y}function Z(Y={}){const z=Object.assign({value:n,originalValue:o,label:s.spec.label,path:Y.path||i,spec:s.spec,disableStackTrace:Y.disableStackTrace||v},d,Y.params);for(const $ of Object.keys(z))z[$]=S(z[$]);const P=new Oi(Oi.formatError(Y.message||h,z),n,z.path,Y.type||g,z.disableStackTrace);return P.params=z,P}const R=y?a:l;let W={path:i,parent:A,type:g,from:r.from,createError:Z,resolve:S,options:r,originalValue:o,schema:s};const B=Y=>{Oi.isError(Y)?R(Y):Y?l(null):R(Z())},k=Y=>{Oi.isError(Y)?R(Y):a(Y)};if(f&&dc(n))return B(!0);let J;try{var X;if(J=u.call(W,n,W),typeof((X=J)==null?void 0:X.then)=="function"){if(r.sync)throw new Error(`Validation test of type: "${W.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(J).then(B,k)}}catch(Y){k(Y);return}B(J)}return e.OPTIONS=t,e}function Oxe(t,e,n,i=n){let r,o,s;return e?(Gc.forEach(e,(a,l,g)=>{let u=l?a.slice(1,a.length-1):a;t=t.resolve({context:i,parent:r,value:n});let d=t.type==="tuple",h=g?parseInt(u,10):0;if(t.innerType||d){if(d&&!g)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${s}" must contain an index to the tuple element, e.g. "${s}[0]"`);if(n&&h>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);r=n,n=n&&n[h],t=d?t.spec.types[h]:t.innerType}if(!g){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${s} which is a type: "${t.type}")`);r=n,n=n&&n[u],t=t.fields[u]}o=u,s=l?"["+a+"]":"."+a}),{schema:t,parent:r,parentPath:o}):{parent:r,parentPath:e,schema:t}}class H0 extends Set{describe(){const e=[];for(const n of this.values())e.push(uu.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const i of this.values())n.push(e(i));return n}clone(){return new H0(this.values())}merge(e,n){const i=this.clone();return e.forEach(r=>i.add(r)),n.forEach(r=>i.delete(r)),i}}function Sd(t,e=new Map){if(Bw(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let i=0;i<t.length;i++)n[i]=Sd(t[i],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[i,r]of t.entries())n.set(i,Sd(r,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const i of t)n.add(Sd(i,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[i,r]of Object.entries(t))n[i]=Sd(r,e)}else throw Error(`Unable to clone ${t}`);return n}class _s{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new H0,this._blacklist=new H0,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(bs.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Sd(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let i=e(this);return this._mutate=n,i}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,i=e.clone();const r=Object.assign({},n.spec,i.spec);return i.spec=r,i.internalTests=Object.assign({},n.internalTests,i.internalTests),i._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),i._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),i.tests=n.tests,i.exclusiveTests=n.exclusiveTests,i.withMutation(o=>{e.tests.forEach(s=>{o.test(s.OPTIONS)})}),i.transforms=[...n.transforms,...i.transforms],i}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let i=n.conditions;n=n.clone(),n.conditions=[],n=i.reduce((r,o)=>o.resolve(r,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,i,r,o;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(i=e.abortEarly)!=null?i:this.spec.abortEarly,recursive:(r=e.recursive)!=null?r:this.spec.recursive,disableStackTrace:(o=e.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(e,n={}){let i=this.resolve(Object.assign({value:e},n)),r=n.assert==="ignore-optionality",o=i._cast(e,n);if(n.assert!==!1&&!i.isType(o)){if(r&&dc(o))return o;let s=ql(e),a=ql(o);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${s} 
`+(a!==s?`result of cast: ${a}`:""))}return o}_cast(e,n){let i=e===void 0?e:this.transforms.reduce((r,o)=>o.call(this,r,e,this),e);return i===void 0&&(i=this.getDefault(n)),i}_validate(e,n={},i,r){let{path:o,originalValue:s=e,strict:a=this.spec.strict}=n,l=e;a||(l=this._cast(l,Object.assign({assert:!1},n)));let g=[];for(let u of Object.values(this.internalTests))u&&g.push(u);this.runTests({path:o,value:l,originalValue:s,options:n,tests:g},i,u=>{if(u.length)return r(u,l);this.runTests({path:o,value:l,originalValue:s,options:n,tests:this.tests},i,r)})}runTests(e,n,i){let r=!1,{tests:o,value:s,originalValue:a,path:l,options:g}=e,u=p=>{r||(r=!0,n(p,s))},d=p=>{r||(r=!0,i(p,s))},h=o.length,f=[];if(!h)return d([]);let A={value:s,originalValue:a,path:l,options:g,schema:this};for(let p=0;p<o.length;p++){const y=o[p];y(A,u,function(S){S&&(Array.isArray(S)?f.push(...S):f.push(S)),--h<=0&&d(f)})}}asNestedTest({key:e,index:n,parent:i,parentPath:r,originalParent:o,options:s}){const a=e??n;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let g=i[a];const u=Object.assign({},s,{strict:!0,parent:i,value:g,originalValue:o[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${r||""}[${l?a:`"${a}"`}]`:(r?`${r}.`:"")+e});return(d,h,f)=>this.resolve(u)._validate(g,u,h,f)}validate(e,n){var i;let r=this.resolve(Object.assign({},n,{value:e})),o=(i=n==null?void 0:n.disableStackTrace)!=null?i:r.spec.disableStackTrace;return new Promise((s,a)=>r._validate(e,n,(l,g)=>{Oi.isError(l)&&(l.value=g),a(l)},(l,g)=>{l.length?a(new Oi(l,g,void 0,void 0,o)):s(g)}))}validateSync(e,n){var i;let r=this.resolve(Object.assign({},n,{value:e})),o,s=(i=n==null?void 0:n.disableStackTrace)!=null?i:r.spec.disableStackTrace;return r._validate(e,Object.assign({},n,{sync:!0}),(a,l)=>{throw Oi.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new Oi(a,e,void 0,void 0,s);o=l}),o}isValid(e,n){return this.validate(e,n).then(()=>!0,i=>{if(Oi.isError(i))return!1;throw i})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(i){if(Oi.isError(i))return!1;throw i}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):Sd(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const i=this.clone({nullable:e});return i.internalTests.nullable=Ku({message:n,name:"nullable",test(r){return r===null?this.schema.spec.nullable:!0}}),i}optionality(e,n){const i=this.clone({optional:e});return i.internalTests.optionality=Ku({message:n,name:"optionality",test(r){return r===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(e=bs.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=bs.notNull){return this.nullability(!1,e)}required(e=bs.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=bs.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),r=Ku(n),o=n.exclusive||n.name&&i.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(i.exclusiveTests[n.name]=!!n.exclusive),i.tests=i.tests.filter(s=>!(s.OPTIONS.name===n.name&&(o||s.OPTIONS.test===r.OPTIONS.test))),i.tests.push(r),i}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let i=this.clone(),r=nj(e).map(o=>new uu(o));return r.forEach(o=>{o.isSibling&&i.deps.push(o.key)}),i.conditions.push(typeof n=="function"?new E0(r,n):E0.fromOptions(r,n)),i}typeError(e){let n=this.clone();return n.internalTests.typeError=Ku({message:e,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=bs.oneOf){let i=this.clone();return e.forEach(r=>{i._whitelist.add(r),i._blacklist.delete(r)}),i.internalTests.whiteList=Ku({message:n,name:"oneOf",skipAbsent:!0,test(r){let o=this.schema._whitelist,s=o.resolveAll(this.resolve);return s.includes(r)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:s}})}}),i}notOneOf(e,n=bs.notOneOf){let i=this.clone();return e.forEach(r=>{i._blacklist.add(r),i._whitelist.delete(r)}),i.internalTests.blacklist=Ku({message:n,name:"notOneOf",test(r){let o=this.schema._blacklist,s=o.resolveAll(this.resolve);return s.includes(r)?this.createError({params:{values:Array.from(o).join(", "),resolved:s}}):!0}}),i}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:i,meta:r,optional:o,nullable:s}=n.spec;return{meta:r,label:i,optional:o,nullable:s,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,g,u)=>u.findIndex(d=>d.name===l.name)===g)}}}_s.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])_s.prototype[`${t}At`]=function(e,n,i={}){const{parent:r,parentPath:o,schema:s}=Oxe(this,e,n,i.context);return s[t](r&&r[o],Object.assign({},i,{parent:r,path:e}))};for(const t of["equals","is"])_s.prototype[t]=_s.prototype.oneOf;for(const t of["not","nope"])_s.prototype[t]=_s.prototype.notOneOf;const Qxe=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $xe(t){const e=F1(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function F1(t){var e,n;const i=Qxe.exec(t);return i?{year:Ia(i[1]),month:Ia(i[2],1)-1,day:Ia(i[3],1),hour:Ia(i[4]),minute:Ia(i[5]),second:Ia(i[6]),millisecond:i[7]?Ia(i[7].substring(0,3)):0,precision:(e=(n=i[7])==null?void 0:n.length)!=null?e:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:Ia(i[10]),minuteOffset:Ia(i[11])}:null}function Ia(t,e=0){return Number(t)||e}let qxe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,eXe=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,tXe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,nXe="^\\d{4}-\\d{2}-\\d{2}",iXe="\\d{2}:\\d{2}:\\d{2}",rXe="(([+-]\\d{2}(:?\\d{2})?)|Z)",oXe=new RegExp(`${nXe}T${iXe}(\\.\\d+)?${rXe}$`),sXe=t=>dc(t)||t===t.trim(),aXe={}.toString();function Ic(){return new sj}class sj extends _s{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,i)=>{if(!i.spec.coerce||i.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===aXe?e:r})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||bs.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=lr.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(i){return i.length===this.resolve(e)}})}min(e,n=lr.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i.length>=this.resolve(e)}})}max(e,n=lr.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(i){return i.length<=this.resolve(e)}})}matches(e,n){let i=!1,r,o;return n&&(typeof n=="object"?{excludeEmptyString:i=!1,message:r,name:o}=n:r=n),this.test({name:o||"matches",message:r||lr.matches,params:{regex:e},skipAbsent:!0,test:s=>s===""&&i||s.search(e)!==-1})}email(e=lr.email){return this.matches(qxe,{name:"email",message:e,excludeEmptyString:!0})}url(e=lr.url){return this.matches(eXe,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=lr.uuid){return this.matches(tXe,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",i,r;return e&&(typeof e=="object"?{message:n="",allowOffset:i=!1,precision:r=void 0}=e:n=e),this.matches(oXe,{name:"datetime",message:n||lr.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||lr.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:o=>{if(!o||i)return!0;const s=F1(o);return s?!!s.z:!1}}).test({name:"datetime_precision",message:n||lr.datetime_precision,params:{precision:r},skipAbsent:!0,test:o=>{if(!o||r==null)return!0;const s=F1(o);return s?s.precision===r:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=lr.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:sXe})}lowercase(e=lr.lowercase){return this.transform(n=>dc(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>dc(n)||n===n.toLowerCase()})}uppercase(e=lr.uppercase){return this.transform(n=>dc(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>dc(n)||n===n.toUpperCase()})}}Ic.prototype=sj.prototype;let lXe=new Date(""),gXe=t=>Object.prototype.toString.call(t)==="[object Date]";class Xv extends _s{constructor(){super({type:"date",check(e){return gXe(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,i)=>!i.spec.coerce||i.isType(e)||e===null?e:(e=$xe(e),isNaN(e)?Xv.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let i;if(uu.isRef(e))i=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);i=r}return i}min(e,n=N1.min){let i=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(i)}})}max(e,n=N1.max){let i=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(i)}})}}Xv.INVALID_DATE=lXe;Xv.prototype;function cXe(t,e=[]){let n=[],i=new Set,r=new Set(e.map(([s,a])=>`${s}-${a}`));function o(s,a){let l=Gc.split(s)[0];i.add(l),r.has(`${a}-${l}`)||n.push([a,l])}for(const s of Object.keys(t)){let a=t[s];i.add(s),uu.isRef(a)&&a.isSibling?o(a.path,s):Bw(a)&&"deps"in a&&a.deps.forEach(l=>o(l,s))}return Yxe.array(Array.from(i),n).reverse()}function UN(t,e){let n=1/0;return t.some((i,r)=>{var o;if((o=e.path)!=null&&o.includes(i))return n=r,!0}),n}function aj(t){return(e,n)=>UN(t,e)-UN(t,n)}const uXe=(t,e,n)=>{if(typeof t!="string")return t;let i=t;try{i=JSON.parse(t)}catch{}return n.isType(i)?i:t};function hb(t){if("fields"in t){const e={};for(const[n,i]of Object.entries(t.fields))e[n]=hb(i);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=hb(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(hb)}):"optional"in t?t.optional():t}const dXe=(t,e)=>{const n=[...Gc.normalizePath(e)];if(n.length===1)return n[0]in t;let i=n.pop(),r=Gc.getter(Gc.join(n),!0)(t);return!!(r&&i in r)};let jN=t=>Object.prototype.toString.call(t)==="[object Object]";function IXe(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(i=>n.indexOf(i)===-1)}const CXe=aj([]);function Rw(t){return new lj(t)}class lj extends _s{constructor(e){super({type:"object",check(n){return jN(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=CXe,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var i;let r=super._cast(e,n);if(r===void 0)return this.getDefault(n);if(!this._typeCheck(r))return r;let o=this.fields,s=(i=n.stripUnknown)!=null?i:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(r).filter(d=>!this._nodes.includes(d))),l={},g=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),u=!1;for(const d of a){let h=o[d],f=d in r;if(h){let A,p=r[d];g.path=(n.path?`${n.path}.`:"")+d,h=h.resolve({value:p,context:n.context,parent:l});let y=h instanceof _s?h.spec:void 0,v=y==null?void 0:y.strict;if(y!=null&&y.strip){u=u||d in r;continue}A=!n.__validating||!v?h.cast(r[d],g):r[d],A!==void 0&&(l[d]=A)}else f&&!s&&(l[d]=r[d]);(f!==d in l||l[d]!==r[d])&&(u=!0)}return u?l:r}_validate(e,n={},i,r){let{from:o=[],originalValue:s=e,recursive:a=this.spec.recursive}=n;n.from=[{schema:this,value:s},...o],n.__validating=!0,n.originalValue=s,super._validate(e,n,i,(l,g)=>{if(!a||!jN(g)){r(l,g);return}s=s||g;let u=[];for(let d of this._nodes){let h=this.fields[d];!h||uu.isRef(h)||u.push(h.asNestedTest({options:n,key:d,parent:g,parentPath:n.path,originalParent:s}))}this.runTests({tests:u,value:g,originalValue:s,options:n},i,d=>{r(d.sort(this._sortErrors).concat(l),g)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),i=n.fields;for(let[r,o]of Object.entries(this.fields)){const s=i[r];i[r]=s===void 0?o:s}return n.withMutation(r=>r.setFields(i,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(i=>{var r;const o=this.fields[i];let s=e;(r=s)!=null&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[i]})),n[i]=o&&"getDefault"in o?o.getDefault(s):void 0}),n}setFields(e,n){let i=this.clone();return i.fields=e,i._nodes=cXe(e,n),i._sortErrors=aj(Object.keys(e)),n&&(i._excludedEdges=n),i}shape(e,n=[]){return this.clone().withMutation(i=>{let r=i._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),r=[...i._excludedEdges,...n]),i.setFields(Object.assign(i.fields,e),r)})}partial(){const e={};for(const[n,i]of Object.entries(this.fields))e[n]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(e)}deepPartial(){return hb(this)}pick(e){const n={};for(const i of e)this.fields[i]&&(n[i]=this.fields[i]);return this.setFields(n,this._excludedEdges.filter(([i,r])=>e.includes(i)&&e.includes(r)))}omit(e){const n=[];for(const i of Object.keys(this.fields))e.includes(i)||n.push(i);return this.pick(n)}from(e,n,i){let r=Gc.getter(e,!0);return this.transform(o=>{if(!o)return o;let s=o;return dXe(o,e)&&(s=Object.assign({},o),i||delete s[e],s[n]=r(o)),s})}json(){return this.transform(uXe)}noUnknown(e=!0,n=Y1.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:n,test(r){if(r==null)return!0;const o=IXe(this.schema,r);return!e||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return i.spec.noUnknown=e,i}unknown(e=!0,n=Y1.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const i={};for(const r of Object.keys(n))i[e(r)]=n[r];return i})}camelCase(){return this.transformKeys(XG.camelCase)}snakeCase(){return this.transformKeys(XG.snakeCase)}constantCase(){return this.transformKeys(e=>XG.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),i=super.describe(e);i.fields={};for(const[o,s]of Object.entries(n.fields)){var r;let a=e;(r=a)!=null&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[o]})),i.fields[o]=s.describe(a)}return i}}Rw.prototype=lj.prototype;const hXe=()=>{const[t,e]=m.useState(!1),[n,i]=m.useState(!1),[r,o]=m.useState(!1),[s,a]=m.useState(""),l=za(Gv),g=ln(),u=za(an),d=m.useRef(null),h=()=>e(!t),f=async v=>{try{const Z=await(await fetch("/api/users/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v})})).json();if(Z.error){g("Error",Z.error,"error");return}i(!0),g("Success","OTP sent to your email","success")}catch(S){g("Error",S.message,"error")}},A=async v=>{try{const Z=await(await fetch("/api/users/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v,otp:s})})).json();if(Z.error){g("Error",Z.error,"error");return}o(!0),g("Success","OTP verified successfully","success")}catch(S){g("Error",S.message,"error")}},p=async v=>{if(!r){g("Error","Please verify the OTP","error");return}if(v.location!==v.locationInput){g("","Select a Location","error");return}try{const Z=await(await fetch("/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).json();if(Z.error){g("Error",Z.error,"error");return}localStorage.setItem("user-threads",JSON.stringify(Z)),u(Z),g("Success","Account Created Successfully","success")}catch(S){g("Error",S.message,"error")}},y=Rw({name:Ic().required("Name is required").matches(/^[A-Za-z\s]*$/,"Name can only contain alphabetic characters"),username:Ic().required("Username is required").matches(/^[a-z0-9_\-@\s]*$/,"Username can only contain lowercase letters"),email:Ic().email("Invalid email address").required("Email is required"),password:Ic().min(8,"Password must be at least 8 characters").required("Password is required")});return C.jsxs(ae,{maxW:"md",mx:"auto",flexDir:"column",children:[C.jsx(Wo,{as:"h1",size:"xl",textAlign:"center",mb:6,children:"Sign Up"}),C.jsx(Se,{maxW:"md",mx:"auto",bg:Ve("white","gray.dark"),mt:10,p:6,borderWidth:1,borderRadius:"lg",boxShadow:"lg",children:C.jsx(axe,{initialValues:{name:"",email:"",soloOrganizer:!1,location:"",dob:"",gender:"",interests:[],occupation:"",instagram:"",password:"",notificationsEnabled:!1},validationSchema:y,onSubmit:(v,{setSubmitting:S})=>{p(v),setTimeout(()=>{S(!1)},400)},children:({isSubmitting:v,setFieldValue:S,values:Z})=>C.jsxs($U,{children:[C.jsxs(Qi,{spacing:4,children:[C.jsxs(mt,{id:"firstName",children:[C.jsx(nt,{children:"Name"}),C.jsx(lo,{as:_e,type:"text",name:"name"}),C.jsx(Du,{name:"name",component:"div",style:{color:"red"}})]}),C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Username"}),C.jsx(lo,{as:_e,type:"text",name:"username"}),C.jsx(Du,{name:"username",component:"div",style:{color:"red"}})]}),C.jsxs(mt,{id:"email",children:[C.jsx(nt,{children:"Email"}),C.jsx(lo,{as:_e,type:"email",name:"email"}),C.jsx(Du,{name:"email",component:"div",style:{color:"red"}}),C.jsx(De,{mt:2,onClick:()=>f(Z.email),isDisabled:n,children:n?"OTP Sent":"Send OTP"})]}),n&&C.jsxs(mt,{id:"otp",children:[C.jsx(nt,{children:"Enter OTP"}),C.jsx(lo,{as:_e,type:"text",name:"otp",onChange:R=>a(R.target.value)}),C.jsx(De,{mt:2,onClick:()=>A(Z.email),isDisabled:r,children:r?"OTP Verified":"Verify OTP"}),C.jsx(Du,{name:"otp",component:"div",style:{color:"red"}})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Are you a Solo Organizer?"}),C.jsx(lo,{name:"soloOrganizer",children:({field:R})=>C.jsx(Ka,{id:"soloOrganizer",...R,isChecked:R.value})}),C.jsx(ue,{children:"Note: Solo Oragnizer Can Create their own Events.Turn it on if you want to create Events"})]}),C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Location"}),C.jsx(Bv,{onLoad:R=>d.current=R,onPlacesChanged:()=>{const R=d.current.getPlaces();if(R&&R.length>0){const W=R[0];S("location",W.formatted_address),S("locationInput",W.formatted_address)}},children:C.jsx(lo,{as:_e,type:"text",name:"locationInput",placeholder:"Enter your location"})}),C.jsx(Du,{name:"location",component:"div",style:{color:"red"}})]}),C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Date of Birth"}),C.jsx(lo,{as:_e,type:"date",name:"dob",placeholder:"Enter your location"})]}),C.jsx(Fc,{children:C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Gender"}),C.jsxs(lo,{placeholder:"Select gender",as:Ir,name:"gender",children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"}),C.jsx("option",{value:"trans male",children:"Trans Male"}),C.jsx("option",{value:"trans female",children:"Trans Female"}),C.jsx("option",{value:"non-binary",children:"Non-Binary"}),C.jsx("option",{value:"other",children:"Other"}),C.jsx("option",{value:"prefer not to say",children:"Prefer Not to Say"})]})]})}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Interests"}),C.jsx(lo,{name:"interests",type:"checkbox",render:({field:R})=>C.jsxs(Fc,{spacing:4,children:[C.jsxs("label",{children:[C.jsx("input",{type:"checkbox",...R,value:"sports",checked:Z==null?void 0:Z.interests.includes("sports"),onChange:()=>{Z.interests.includes("sports")?S("interests",Z.interests.filter(W=>W!=="sports")):S("interests",[...Z.interests,"sports"])}}),"Sports"]}),C.jsxs("label",{children:[C.jsx("input",{type:"checkbox",...R,value:"music",checked:Z.interests.includes("music"),onChange:()=>{Z!=null&&Z.interests.includes("music")?S("interests",Z.interests.filter(W=>W!=="music")):S("interests",[...Z.interests,"music"])}}),"Music"]}),C.jsxs("label",{children:[C.jsx("input",{type:"checkbox",...R,value:"reading",checked:Z==null?void 0:Z.interests.includes("reading"),onChange:()=>{Z.interests.includes("reading")?S("interests",Z.interests.filter(W=>W!=="reading")):S("interests",[...Z.interests,"reading"])}}),"Reading"]})]})})]}),C.jsxs(mt,{id:"password",children:[C.jsx(nt,{children:"Password"}),C.jsxs(ae,{children:[C.jsx(lo,{as:_e,type:t?"text":"password",name:"password"}),C.jsx(iD,{onClick:h,icon:t?C.jsx(yP,{}):C.jsx(bP,{}),style:{position:"absolute",right:"2px",zIndex:1}})]}),C.jsx(Du,{name:"password",component:"div",style:{color:"red"}})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Occupation"}),C.jsxs(lo,{as:Ir,placeholder:"Select occupation",value:Z.occupation,name:"occupation",children:[C.jsx("option",{value:"arts and entertainment",children:"Arts and Entertainment"}),C.jsx("option",{value:"business and finance",children:"Business and Finance"}),C.jsx("option",{value:"education",children:"Education"}),C.jsx("option",{value:"healthcare",children:"Healthcare"}),C.jsx("option",{value:"human services",children:"Human Services"}),C.jsx("option",{value:"IT and Tech",children:"IT and Tech"}),C.jsx("option",{value:"Law and Government",children:"Law and Government"}),C.jsx("option",{value:"Manufacturing and Production",children:"Manufacturing and Production"}),C.jsx("option",{value:"Sales and Marketing",children:"Sales and Marketing"}),C.jsx("option",{value:"Science and Research",children:"Science and Research"}),C.jsx("option",{value:"Transportation",children:"Transportation"}),C.jsx("option",{value:"Student",children:"Student"}),C.jsx("option",{value:"Other",children:"Other"})]})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Instagram "}),C.jsx(lo,{type:"text",as:_e,name:"instagram",value:Z.instagram,placeholder:"username"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Turn notifications?"}),C.jsx(Ka,{id:"notifications",isChecked:Z.notificationsEnabled,onChange:()=>{S("notificationsEnabled",!Z.notificationsEnabled)},name:"notificationsEnabled"})]}),C.jsx(De,{bg:Ve("gray.600","gray.700"),color:"white",_hover:{bg:Ve("gray.700","gray.800")},type:"submit",size:"lg",mt:4,isLoading:v,children:"Sign Up"})]}),C.jsx(Qi,{pt:6,children:C.jsxs(ue,{align:"center",children:["Already a user?"," ",C.jsx(Tn,{color:"blue.400",onClick:()=>l("login"),children:"Login"})]})})]})})})]})},fXe=()=>{const t=Nn(Gv);return C.jsx(C.Fragment,{children:t==="login"?C.jsx(B2e,{}):C.jsx(hXe,{})})},Jv=()=>{const[t,e]=m.useState(null),n=ln();return{handleImageChange:r=>{const o=r.target.files[0];if(o&&o.type.startsWith("image/")){const s=new FileReader;s.onloadend=()=>{e(s.result)},s.readAsDataURL(o)}else n("Invalid file type"," Please select an image file","error"),e(null)},imgUrl:t,setImgUrl:e}};function mXe(){const[t,e]=_i(an),[n,i]=m.useState({name:t.name,username:t.username,bio:t.bio,interests:t.interests,location:t.location,occupation:t.occupation,instagram:t.instagram,linkedin:t.linkedin,twitter:t.twitter,youtube:t.youtube,tiktok:t.tiktok,website:t.website});console.log(t);const r=m.useRef(null),[o,s]=m.useState(!1),a=ln(),{handleImageChange:l,imgUrl:g}=Jv(),u=m.useRef(),d=Qr(),h=async()=>{const[A]=await u.current.getPlaces();A&&(console.log(A.geometry.location.lat()),console.log(A.geometry.location.lng()),i({...n,location:A.formatted_address}))},f=async A=>{if(A.preventDefault(),!o){s(!0);try{const y=await(await fetch(`/api/users/update/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,profilePic:g})})).json();if(y.error){a("Error",y.error,"error");return}a("Success","Profile updated successfully","success"),e(y),localStorage.setItem("user-threads",JSON.stringify(y)),d(`/${t.username}`)}catch(p){a("Error",p,"error")}finally{s(!1)}}};return C.jsx("form",{onSubmit:f,children:C.jsx(ae,{align:"center",justify:"center",my:6,children:C.jsxs(Qi,{spacing:4,w:"full",maxW:"md",bg:Ve("white","gray.dark"),rounded:"xl",boxShadow:"lg",p:6,children:[C.jsx(Wo,{lineHeight:1.1,fontSize:{base:"2xl",sm:"3xl"},children:"User Profile Edit"}),C.jsx(mt,{id:"userName",children:C.jsxs(Qi,{direction:["column","row"],spacing:6,children:[C.jsx(A0,{children:C.jsx(Ni,{size:"xl",boxShadow:"md",src:g||t.profilePic})}),C.jsxs(A0,{w:"full",children:[C.jsx(De,{w:"full",onClick:()=>r.current.click(),children:"Change Avatar"}),C.jsx(_e,{type:"file",hidden:!0,ref:r,onChange:l})]})]})}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Full name"}),C.jsx(_e,{placeholder:"John Doe",value:n.name,onChange:A=>i({...n,name:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"User name"}),C.jsx(_e,{placeholder:"johndoe",value:n.username,onChange:A=>i({...n,username:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Bio"}),C.jsx(_e,{placeholder:"Your bio.",value:n.bio,onChange:A=>i({...n,bio:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Interests"}),C.jsx(rD,{value:n.interests,onChange:A=>i({...n,interests:A}),children:C.jsxs(Fc,{children:[C.jsx(Yd,{value:"sports",children:"Sports"}),C.jsx(Yd,{value:"music",children:"Music"}),C.jsx(Yd,{value:"reading",children:"Reading"})]})})]}),C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Location"}),C.jsx(Bv,{onLoad:A=>u.current=A,onPlacesChanged:h,children:C.jsx(_e,{placeholder:"Your location",value:n.location,onChange:A=>i({...n,location:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Occupation"}),C.jsxs(Ir,{placeholder:"Select occupation",value:n.occupation,onChange:A=>i({...n,occupation:A.target.value}),children:[C.jsx("option",{value:"arts and entertainment",children:"Arts and Entertainment"}),C.jsx("option",{value:"business and finance",children:"Business and Finance"}),C.jsx("option",{value:"education",children:"Education"}),C.jsx("option",{value:"healthcare",children:"Healthcare"}),C.jsx("option",{value:"human services",children:"Human Services"}),C.jsx("option",{value:"IT and Tech",children:"IT and Tech"}),C.jsx("option",{value:"Law and Government",children:"Law and Government"}),C.jsx("option",{value:"Manufacturing and Production",children:"Manufacturing and Production"}),C.jsx("option",{value:"Sales and Marketing",children:"Sales and Marketing"}),C.jsx("option",{value:"Science and Research",children:"Science and Research"}),C.jsx("option",{value:"Transportation",children:"Transportation"}),C.jsx("option",{value:"Student",children:"Student"}),C.jsx("option",{value:"Other",children:"Other"})]})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Instagram"}),C.jsx(_e,{placeholder:"Your Instagram handle",value:n.instagram,onChange:A=>i({...n,instagram:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"LinkedIn"}),C.jsx(_e,{placeholder:"Your LinkedIn Profile",value:n.linkedin,onChange:A=>i({...n,linkedin:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"X"}),C.jsx(_e,{placeholder:"Your X Profile",value:n.twitter,onChange:A=>i({...n,twitter:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Tiktok"}),C.jsx(_e,{placeholder:"Your Tiktok Profile",value:n.tiktok,onChange:A=>i({...n,tiktok:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Youtube"}),C.jsx(_e,{placeholder:"Your Youtube Profile",value:n.youtube,onChange:A=>i({...n,youtube:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Website"}),C.jsx(_e,{placeholder:"Your Website",value:n.website,onChange:A=>i({...n,website:A.target.value}),_placeholder:{color:"gray.500"},type:"text"})]}),C.jsxs(Qi,{spacing:6,direction:["column","row"],children:[C.jsx(De,{bg:"red.400",color:"white",w:"full",_hover:{bg:"red.500"},onClick:()=>d(`/${t.name}`),children:"Cancel"}),C.jsx(De,{bg:"green.400",color:"white",w:"full",_hover:{bg:"green.500"},type:"submit",isLoading:o,children:"Submit"})]})]})})})}const kw=vm({key:"conversationsAtom",default:[]}),LI=vm({key:"selectedConversationAtom",default:{_id:"",userId:"",username:"",userProfilePic:""}}),pXe=({conversation:t,isOnline:e})=>{const n=t.participants[0],i=Nn(an),r=t.lastMessage,[o,s]=_i(LI);return $c(),C.jsxs(ae,{gap:4,alignItems:"center",p:"2",borderBottom:"0.1px solid",borderBottomColor:Ve("gray.200","gray.800"),_hover:{cursor:"pointer",bg:Ve("gray.200","gray.dark")},onClick:()=>s({_id:t._id,userId:n._id,userProfilePic:n.profilePic,username:n.username,mock:t.mock}),bg:(o==null?void 0:o._id)===t._id?Ve("gray.200","gray.dark"):"",borderRadius:"md",children:[C.jsx(yV,{children:C.jsx(Ni,{size:{base:"xs",sm:"sm",md:"md"},src:n==null?void 0:n.profilePic,children:e?C.jsx($3,{boxSize:"1em",bg:"green.500"}):""})}),n&&C.jsxs(Qi,{direction:"column",fontSize:"sm",children:[C.jsxs(ue,{fontWeight:"700",display:"flex",alignItems:"center",children:[n.username," ",C.jsx(oi,{src:"/verified.png",w:4,h:4,ml:1})]}),C.jsxs(ue,{fontSize:"xs",display:"flex",alignItems:"center",gap:1,children:[i._id===(r==null?void 0:r.sender)?C.jsx(Se,{color:r!=null&&r.seen?"blue.400":"",children:C.jsx(l1,{size:16})}):"",(r==null?void 0:r.text.length)>18?(r==null?void 0:r.text.substring(0,18))+"...":(r==null?void 0:r.text)||C.jsx(HV,{size:16})]})]})]})};function AXe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M211.313 21.094c-51.776 0-98.754 12.252-133.5 32.718C43.066 74.28 19.874 103.78 19.874 137.69c0 33.54 22.692 62.81 56.813 83.25L48.156 327.094l96.97-79.844c20.65 4.58 42.924 7.063 66.186 7.063 51.776 0 98.786-12.252 133.532-32.72 34.746-20.466 57.937-49.997 57.937-83.905s-23.19-63.41-57.936-83.875c-34.746-20.467-81.756-32.72-133.53-32.72zm0 18.687c48.8 0 92.866 11.77 124.03 30.126 31.165 18.357 48.75 42.447 48.75 67.78 0 25.338-17.585 49.457-48.75 67.814-31.164 18.357-75.23 30.125-124.03 30.125S118.445 223.857 87.28 205.5c-31.163-18.357-48.718-42.476-48.718-67.813 0-25.336 17.555-49.424 48.72-67.78C118.445 51.55 162.51 39.78 211.31 39.78zM96.53 89.938v18.688h93.126V89.937H96.53zm111.814 0v18.688h28.094V89.937h-28.094zm46.78 0v18.688h71.97V89.937h-71.97zM96.532 129.844v18.72h29.657v-18.72H96.53zm48.345 0v18.72h65.938v-18.72h-65.938zm84.656 0v18.72h38.095v-18.72H229.53zm56.782 0v18.72h40.782v-18.72h-40.78zM96.532 166.78v18.69h70.874v-18.69H96.53zm89.562 0v18.69h57.03v-18.69h-57.03zm75.72 0l-.002 18.69h65.282v-18.69h-65.28zm92.342 90.25c-74.88 0-135.594 41.762-135.594 93.283 0 51.52 60.716 93.28 135.594 93.28 18.23 0 35.623-2.48 51.5-6.968l68.53 51.156-24.873-71.03c24.947-16.918 40.437-40.432 40.437-66.438 0-51.518-60.714-93.28-135.594-93.28zm-70.344 42.345h32.907v18.688H283.81v-18.688zm51.594 0h90.344v18.688h-90.344v-18.688zm-78.97 41.75h78.314v18.688h-78.313v-18.688zm97.002 0h20.968v18.688h-20.97l.002-18.688zm39.656 0h51v18.688h-51v-18.688zm-109.28 39h79.06v18.688h-79.062v-18.688zm97.748 0h44.188v18.688h-44.188v-18.688z"},child:[]}]})(t)}function bXe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M443.5 420.2L336.7 312.4c20.9-26.2 33.5-59.4 33.5-95.5 0-84.5-68.5-153-153.1-153S64 132.5 64 217s68.5 153 153.1 153c36.6 0 70.1-12.8 96.5-34.2l106.1 107.1c3.2 3.4 7.6 5.1 11.9 5.1 4.1 0 8.2-1.5 11.3-4.5 6.6-6.3 6.8-16.7.6-23.3zm-226.4-83.1c-32.1 0-62.3-12.5-85-35.2-22.7-22.7-35.2-52.9-35.2-84.9 0-32.1 12.5-62.3 35.2-84.9 22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2c22.7 22.7 35.2 52.9 35.2 84.9 0 32.1-12.5 62.3-35.2 84.9-22.7 22.7-52.9 35.2-85 35.2z"},child:[]}]})(t)}const ON=({ownMessage:t,message:e})=>{var s,a;Nn(LI),Nn(an);const[n,i]=m.useState(!1),r=Qr(),o=async l=>{const g=await fetch(`/api/posts/${l._id}`);if(g.ok){const u=await g.json();r(`/${u.postedBy.name}/post/${l._id}`)}else console.log("HTTP-Error: "+g.status)};return C.jsx(C.Fragment,{children:t?C.jsxs(ae,{gap:2,flexDirection:"column",children:[(s=e.sharedPost)==null?void 0:s.map(l=>C.jsxs(Se,{borderRadius:"lg",overflow:"hidden",maxW:"50%",bg:Ve("gray.200","gray.dark"),onClick:()=>o(l),children:[l.img&&C.jsx(oi,{mt:5,ms:"auto",me:"auto",borderRadius:10,maxH:"150px",src:l.img,alt:"image"}),C.jsxs(Se,{p:"6",children:[C.jsxs(Se,{mt:"1",fontWeight:"semibold",as:"h4",children:["Event Name : ",l.name,C.jsx("br",{}),"Venue : ",l.venue,C.jsx("br",{}),"Ticket Price : ",l.ticketPrice]}),C.jsx(Se,{children:l.price})]})]},l._id)),e.text&&C.jsxs(ae,{bg:Ve("gray.200","gray.dark"),maxW:"350px",w:"fit-content",p:2,borderRadius:"md",children:[C.jsx(ue,{style:{wordWrap:"break-word",maxWidth:"300px",whiteSpace:"pre-line"},children:e.text}),C.jsx(Se,{alignSelf:"flex-end",ml:1,color:e.seen?"blue.400":"",fontWeight:"bold",children:C.jsx(l1,{size:16})})]}),e.img&&!n&&C.jsxs(ae,{mt:5,w:"200px",children:[C.jsx(oi,{src:e.img,hidden:!0,onLoad:()=>i(!0),alt:"Message image",borderRadius:4}),C.jsx(Ro,{w:"200px",h:"200px"})]}),e.img&&n&&C.jsxs(ae,{mt:5,w:"200px",children:[C.jsx(oi,{src:e.img,alt:"Message image",borderRadius:4}),C.jsx(Se,{alignSelf:"flex-end",ml:1,color:e.seen?"blue.400":"",fontWeight:"bold",children:C.jsx(l1,{size:16})})]})]}):C.jsxs(ae,{gap:2,flexDirection:"column",alignSelf:"flex-end",children:[(a=e.sharedPost)==null?void 0:a.map(l=>C.jsxs(Se,{borderRadius:"lg",overflow:"hidden",bg:Ve("gray.200","gray.dark"),onClick:()=>o(l),children:[l.img&&C.jsx(oi,{mt:5,ms:"auto",me:"auto",borderRadius:10,maxH:"150px",src:l.img,alt:"image"}),C.jsxs(Se,{p:"6",children:[C.jsxs(Se,{mt:"1",fontWeight:"semibold",as:"h4",children:["Event Name : ",l.name,C.jsx("br",{}),"Venue : ",l.venue,C.jsx("br",{}),"Ticket Price : ",l.ticketPrice]}),C.jsx(Se,{children:l.price})]})]},l._id)),e.text&&C.jsx(ue,{bg:Ve("gray.200","gray.dark"),p:1,maxW:"330px",w:"fit-content",borderRadius:"md",children:e.text}),e.img&&!n&&C.jsxs(ae,{mt:5,w:"200px",children:[C.jsx(oi,{src:e.img,hidden:!0,onLoad:()=>i(!0),alt:"Message image",borderRadius:4}),C.jsx(Ro,{w:"200px",h:"200px"})]}),e.img&&n&&C.jsx(ae,{mt:5,w:"200px",children:C.jsx(oi,{src:e.img,alt:"Message image",borderRadius:4})})]})})};function JG(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368 144 144m224 0L144 368"},child:[]}]})(t)}function yXe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 0 1-48-48V36a4 4 0 0 0-4-4h-92a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h224a64 64 0 0 0 64-64V228a4 4 0 0 0-4-4zm-92 160H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-80H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32z"},child:[]},{tag:"path",attr:{d:"M419.22 188.59 275.41 44.78a2 2 0 0 0-3.41 1.41V176a16 16 0 0 0 16 16h129.81a2 2 0 0 0 1.41-3.41z"},child:[]}]})(t)}function QN(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m16 464 480-208L16 48v160l320 48-320 48z"},child:[]}]})(t)}function vXe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M366.05 146a46.7 46.7 0 0 1-2.42-63.42 3.87 3.87 0 0 0-.22-5.26l-44.13-44.18a3.89 3.89 0 0 0-5.5 0l-70.34 70.34a23.62 23.62 0 0 0-5.71 9.24 23.66 23.66 0 0 1-14.95 15 23.7 23.7 0 0 0-9.25 5.71L33.14 313.78a3.89 3.89 0 0 0 0 5.5l44.13 44.13a3.87 3.87 0 0 0 5.26.22 46.69 46.69 0 0 1 65.84 65.84 3.87 3.87 0 0 0 .22 5.26l44.13 44.13a3.89 3.89 0 0 0 5.5 0l180.4-180.39a23.7 23.7 0 0 0 5.71-9.25 23.66 23.66 0 0 1 14.95-15 23.62 23.62 0 0 0 9.24-5.71l70.34-70.34a3.89 3.89 0 0 0 0-5.5l-44.13-44.13a3.87 3.87 0 0 0-5.26-.22 46.7 46.7 0 0 1-63.42-2.32z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"m250.5 140.44-16.51-16.51m60.53 60.53-11.01-11m55.03 55.03-11-11.01m60.53 60.53-16.51-16.51"},child:[]}]})(t)}const SXe=({setMessages:t,post:e})=>{const[n,i]=m.useState(""),r=ln(),o=Nn(LI),s=za(kw),a=m.useRef(null),{onClose:l}=Go(),{handleImageChange:g,imgUrl:u,setImgUrl:d}=Jv(),[h,f]=m.useState(!1),[A,p]=m.useState(e),y=async v=>{if(v.preventDefault(),!(!n&&!u&&!A)&&!h){f(!0);try{const Z=await(await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,sharedPost:A&&A,recipientId:o.userId,img:u})})).json();if(Z.error){r("Error",Z.error,"error");return}t(R=>[...R,Z]),s(R=>R.map(B=>B._id===o._id?{...B,lastMessage:{text:n,sender:Z.sender}}:B)),i(""),d("")}catch(S){r("Error",S.message,"error")}finally{f(!1)}}};return C.jsxs(ae,{w:"full",pt:5,pb:5,ps:2,pe:2,flexDirection:"column",bg:Ve("gray.200","gray.dark"),children:[(A==null?void 0:A._id)&&C.jsxs(Se,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",position:"relative",p:"2",mb:"3",children:[C.jsx(JI,{position:"absolute",size:"md",right:0,onClick:()=>p(null)}),C.jsx(ue,{children:`Share event : ${A==null?void 0:A.name}`}),C.jsx(ue,{children:`Details : ${A==null?void 0:A.text}`})]}),C.jsxs(ae,{gap:2,alignItems:"center",w:"100%",children:[C.jsxs(ae,{flex:5,cursor:"pointer",ms:2,children:[C.jsx(HV,{size:20,onClick:()=>a.current.click()}),C.jsx(_e,{type:"file",hidden:!0,ref:a,onChange:g})]}),C.jsx("form",{onSubmit:y,style:{flex:95},children:C.jsxs(bV,{children:[C.jsx(_e,{w:"full",placeholder:"Type a message",onChange:v=>i(v.target.value),value:n,bg:Ve("gray.50","whiteAlpha.100"),borderRadius:20,border:"hidden"}),C.jsx(Oy,{onClick:y,cursor:"pointer",children:C.jsx(QN,{})})]})}),C.jsxs(Jo,{isOpen:u,onClose:()=>{l(),d("")},children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{}),C.jsx(Yo,{}),C.jsxs(ss,{children:[C.jsx(ae,{mt:5,w:"full",children:C.jsx(oi,{src:u})}),C.jsx(ae,{justifyContent:"flex-end",my:2,children:h?C.jsx(nr,{size:"md"}):C.jsx(QN,{size:24,cursor:"pointer",onClick:y})})]})]})]})]})]})},Ds=Object.create(null);Ds.open="0";Ds.close="1";Ds.ping="2";Ds.pong="3";Ds.message="4";Ds.upgrade="5";Ds.noop="6";const fb=Object.create(null);Object.keys(Ds).forEach(t=>{fb[Ds[t]]=t});const M1={type:"error",data:"parser error"},gj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cj=typeof ArrayBuffer=="function",uj=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Vw=({type:t,data:e},n,i)=>gj&&e instanceof Blob?n?i(e):$N(e,i):cj&&(e instanceof ArrayBuffer||uj(e))?n?i(e):$N(new Blob([e]),i):i(Ds[t]+(e||"")),$N=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function qN(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let EG;function ZXe(t,e){if(gj&&t.data instanceof Blob)return t.data.arrayBuffer().then(qN).then(e);if(cj&&(t.data instanceof ArrayBuffer||uj(t.data)))return e(qN(t.data));Vw(t,!1,n=>{EG||(EG=new TextEncoder),e(EG.encode(n))})}const eY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<eY.length;t++)gh[eY.charCodeAt(t)]=t;const GXe=t=>{let e=t.length*.75,n=t.length,i,r=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const g=new ArrayBuffer(e),u=new Uint8Array(g);for(i=0;i<n;i+=4)o=gh[t.charCodeAt(i)],s=gh[t.charCodeAt(i+1)],a=gh[t.charCodeAt(i+2)],l=gh[t.charCodeAt(i+3)],u[r++]=o<<2|s>>4,u[r++]=(s&15)<<4|a>>2,u[r++]=(a&3)<<6|l&63;return g},BXe=typeof ArrayBuffer=="function",ww=(t,e)=>{if(typeof t!="string")return{type:"message",data:dj(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:RXe(t.substring(1),e)}:fb[n]?t.length>1?{type:fb[n],data:t.substring(1)}:{type:fb[n]}:M1},RXe=(t,e)=>{if(BXe){const n=GXe(t);return dj(n,e)}else return{base64:!0,data:t}},dj=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ij=String.fromCharCode(30),kXe=(t,e)=>{const n=t.length,i=new Array(n);let r=0;t.forEach((o,s)=>{Vw(o,!1,a=>{i[s]=a,++r===n&&e(i.join(Ij))})})},VXe=(t,e)=>{const n=t.split(Ij),i=[];for(let r=0;r<n.length;r++){const o=ww(n[r],e);if(i.push(o),o.type==="error")break}return i};function wXe(){return new TransformStream({transform(t,e){ZXe(t,n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);const o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(n)})}})}let HG;function tA(t){return t.reduce((e,n)=>e+n.length,0)}function nA(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let i=0;for(let r=0;r<e;r++)n[r]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),n}function WXe(t,e){HG||(HG=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(i===0){if(tA(n)<1)break;const l=nA(n,1);o=(l[0]&128)===128,r=l[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(tA(n)<2)break;const l=nA(n,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(tA(n)<8)break;const l=nA(n,8),g=new DataView(l.buffer,l.byteOffset,l.length),u=g.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(M1);break}r=u*Math.pow(2,32)+g.getUint32(4),i=3}else{if(tA(n)<r)break;const l=nA(n,r);a.enqueue(ww(o?l:HG.decode(l),e)),i=0}if(r===0||r>t){a.enqueue(M1);break}}}})}const Cj=4;function ei(t){if(t)return xXe(t)}function xXe(t){for(var e in ei.prototype)t[e]=ei.prototype[e];return t}ei.prototype.on=ei.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ei.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ei.prototype.off=ei.prototype.removeListener=ei.prototype.removeAllListeners=ei.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ei.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};ei.prototype.emitReserved=ei.prototype.emit;ei.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ei.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ao=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function hj(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const XXe=Ao.setTimeout,JXe=Ao.clearTimeout;function Ev(t,e){e.useNativeTimers?(t.setTimeoutFn=XXe.bind(Ao),t.clearTimeoutFn=JXe.bind(Ao)):(t.setTimeoutFn=Ao.setTimeout.bind(Ao),t.clearTimeoutFn=Ao.clearTimeout.bind(Ao))}const EXe=1.33;function HXe(t){return typeof t=="string"?NXe(t):Math.ceil((t.byteLength||t.size)*EXe)}function NXe(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}function YXe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function FXe(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class MXe extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class Ww extends ei{constructor(e){super(),this.writable=!1,Ev(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new MXe(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ww(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=YXe(e);return n.length?"?"+n:""}}const fj="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),T1=64,TXe={};let tY=0,iA=0,nY;function iY(t){let e="";do e=fj[t%T1]+e,t=Math.floor(t/T1);while(t>0);return e}function mj(){const t=iY(+new Date);return t!==nY?(tY=0,nY=t):t+"."+iY(tY++)}for(;iA<T1;iA++)TXe[fj[iA]]=iA;let pj=!1;try{pj=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const LXe=pj;function Aj(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||LXe))return new XMLHttpRequest}catch{}if(!e)try{return new Ao[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function _Xe(){}const DXe=function(){return new Aj({xdomain:!1}).responseType!=null}();class KXe extends Ww{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const n=e&&e.forceBase64;this.supportsBinary=DXe&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};VXe(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,kXe(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=mj()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Fs(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}class Fs extends ei{constructor(e,n){super(),Ev(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=hj(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new Aj(n);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Fs.requestsCount++,Fs.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=_Xe,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Fs.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Fs.requestsCount=0;Fs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rY);else if(typeof addEventListener=="function"){const t="onpagehide"in Ao?"pagehide":"unload";addEventListener(t,rY,!1)}}function rY(){for(let t in Fs.requests)Fs.requests.hasOwnProperty(t)&&Fs.requests[t].abort()}const xw=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),rA=Ao.WebSocket||Ao.MozWebSocket,oY=!0,zXe="arraybuffer",sY=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class PXe extends Ww{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=sY?{}:hj(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=oY&&!sY?n?new rA(e,n):new rA(e):new rA(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;Vw(i,this.supportsBinary,o=>{const s={};try{oY&&this.ws.send(o)}catch{}r&&xw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=mj()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!rA}}class UXe extends Ww{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=WXe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=wXe();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const o=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this.writer.write(i).then(()=>{r&&xw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const jXe={websocket:PXe,webtransport:UXe,polling:KXe},OXe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,QXe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function L1(t){const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=OXe.exec(t||""),o={},s=14;for(;s--;)o[QXe[s]]=r[s]||"";return n!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=$Xe(o,o.path),o.queryKey=qXe(o,o.query),o}function $Xe(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function qXe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(n[r]=o)}),n}let bj=class Qu extends ei{constructor(e,n={}){super(),this.binaryType=zXe,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=L1(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=L1(n.host).host),Ev(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=FXe(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Cj,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new jXe[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Qu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),i=!1;Qu.priorWebsocketSuccess=!1;const r=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Qu.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function o(){i||(i=!0,u(),n.close(),n=null)}const s=d=>{const h=new Error("probe error: "+d);h.transport=n.name,o(),this.emitReserved("upgradeError",h)};function a(){s("transport closed")}function l(){s("socket closed")}function g(d){n&&d.name!==n.name&&o()}const u=()=>{n.removeListener("open",r),n.removeListener("error",s),n.removeListener("close",a),this.off("close",l),this.off("upgrading",g)};n.once("open",r),n.once("error",s),n.once("close",a),this.once("close",l),this.once("upgrading",g),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Qu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=HXe(r)),i>0&&n>this.maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:n,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Qu.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const r=e.length;for(;i<r;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};bj.protocol=Cj;function eJe(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=L1(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}const tJe=typeof ArrayBuffer=="function",nJe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,yj=Object.prototype.toString,iJe=typeof Blob=="function"||typeof Blob<"u"&&yj.call(Blob)==="[object BlobConstructor]",rJe=typeof File=="function"||typeof File<"u"&&yj.call(File)==="[object FileConstructor]";function Xw(t){return tJe&&(t instanceof ArrayBuffer||nJe(t))||iJe&&t instanceof Blob||rJe&&t instanceof File}function mb(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(mb(t[n]))return!0;return!1}if(Xw(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return mb(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&mb(t[n]))return!0;return!1}function oJe(t){const e=[],n=t.data,i=t;return i.data=_1(n,e),i.attachments=e.length,{packet:i,buffers:e}}function _1(t,e){if(!t)return t;if(Xw(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=_1(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=_1(t[i],e));return n}return t}function sJe(t,e){return t.data=D1(t.data,e),delete t.attachments,t}function D1(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=D1(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=D1(t[n],e));return t}const aJe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lJe=5;var wt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(wt||(wt={}));class gJe{constructor(e){this.replacer=e}encode(e){return(e.type===wt.EVENT||e.type===wt.ACK)&&mb(e)?this.encodeAsBinary({type:e.type===wt.EVENT?wt.BINARY_EVENT:wt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===wt.BINARY_EVENT||e.type===wt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=oJe(e),i=this.encodeAsString(n.packet),r=n.buffers;return r.unshift(i),r}}function aY(t){return Object.prototype.toString.call(t)==="[object Object]"}class Jw extends ei{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===wt.BINARY_EVENT;i||n.type===wt.BINARY_ACK?(n.type=i?wt.EVENT:wt.ACK,this.reconstructor=new cJe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Xw(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(wt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===wt.BINARY_EVENT||i.type===wt.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(o,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(s)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(o,n)}else i.nsp="/";const r=e.charAt(n+1);if(r!==""&&Number(r)==r){const o=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}i.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(Jw.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case wt.CONNECT:return aY(n);case wt.DISCONNECT:return n===void 0;case wt.CONNECT_ERROR:return typeof n=="string"||aY(n);case wt.EVENT:case wt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&aJe.indexOf(n[0])===-1);case wt.ACK:case wt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class cJe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=sJe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const uJe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jw,Encoder:gJe,get PacketType(){return wt},protocol:lJe},Symbol.toStringTag,{value:"Module"}));function Uo(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const dJe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vj extends ei{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Uo(e,"open",this.onopen.bind(this)),Uo(e,"packet",this.onpacket.bind(this)),Uo(e,"error",this.onerror.bind(this)),Uo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(dJe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:wt.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const s=this.ids++,a=n.pop();this._registerAckCallback(s,a),i.id=s}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);n.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...s)=>{this.io.clearTimeoutFn(o),n.apply(this,[null,...s])}}emitWithAck(e,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((r,o)=>{n.push((s,a)=>i?s?o(s):r(a):r(s)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(r)):(this._queue.shift(),n&&n(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:wt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case wt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wt.EVENT:case wt.BINARY_EVENT:this.onevent(e);break;case wt.ACK:case wt.BINARY_ACK:this.onack(e);break;case wt.DISCONNECT:this.ondisconnect();break;case wt.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,n.packet({type:wt.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function _I(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}_I.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};_I.prototype.reset=function(){this.attempts=0};_I.prototype.setMin=function(t){this.ms=t};_I.prototype.setMax=function(t){this.max=t};_I.prototype.setJitter=function(t){this.jitter=t};class K1 extends ei{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ev(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new _I({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||uJe;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new bj(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Uo(n,"open",function(){i.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=Uo(n,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Uo(e,"ping",this.onping.bind(this)),Uo(e,"data",this.ondata.bind(this)),Uo(e,"error",this.onerror.bind(this)),Uo(e,"close",this.onclose.bind(this)),Uo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){xw(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new vj(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const MC={};function pb(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=eJe(t,e.path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=MC[r]&&o in MC[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let l;return a?l=new K1(i,e):(MC[r]||(MC[r]=new K1(i,e)),l=MC[r]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(pb,{Manager:K1,Socket:vj,io:pb,connect:pb});const Sj=m.createContext(),Zj=()=>m.useContext(Sj),IJe=({children:t})=>{const[e,n]=m.useState(null),[i,r]=m.useState([]),o=Nn(an);return m.useEffect(()=>{const s=pb("/",{query:{userId:o==null?void 0:o._id}});return n(s),s.on("getOnlineUsers",a=>{r(a)}),()=>s&&s.close()},[o==null?void 0:o._id]),C.jsx(Sj.Provider,{value:{socket:e,onlineUsers:i},children:t})},CJe="/assets/message-f8647dae.mp3",hJe=({post:t,isActivitiesOpen:e,setIsActivitiesOpen:n,setSelectedConversation:i})=>{const r=ln(),o=Nn(LI),[s,a]=m.useState(!0),[l,g]=m.useState([]),[u,d]=m.useState(""),[h,f]=m.useState([]),[A,p]=m.useState(!1),y=Nn(an),{socket:v}=Zj(),S=za(kw),Z=m.useRef(null);m.useEffect(()=>(v.on("newMessage",B=>{o._id===B.conversationId&&g(k=>[...k,B]),document.hasFocus()||new Audio(CJe).play(),S(k=>k.map(J=>J._id===B.conversationId?{...J,lastMessage:{text:B.text,sender:B.sender}}:J))}),()=>v.off("newMessage")),[v,o,S]),m.useEffect(()=>{l.length&&l[l.length-1].sender!==(y==null?void 0:y._id)&&v.emit("markMessagesAsSeen",{conversationId:o._id,userId:o.userId}),v.on("messagesSeen",({conversationId:k})=>{o._id===k&&g(w=>w.map(X=>X.seen?X:{...X,seen:!0}))})},[v,y._id,l,o]),m.useEffect(()=>{var B;(B=Z.current)==null||B.scrollIntoView({behavior:"smooth"})},[l]),m.useEffect(()=>{(async()=>{a(!0),g([]);try{if(o.mock)return;if(o.userId){const w=await(await fetch(`/api/messages/${o.userId}`)).json();if(w.error){r("Error",w.error,"error");return}g(w)}}catch(k){r("Error",k.message,"error")}finally{a(!1)}})()},[r,o.userId,o.mock]),m.useEffect(()=>{u?R(u):f([])},[u]);const R=async B=>{if(o._id)try{const w=await(await fetch(`/api/messages/search/${o._id}?query=${B}`)).json();w.error?console.error("Error:",w.error):f(w)}catch(k){console.error("Error:",k.message)}},W=B=>{d(B.target.value)};return C.jsxs(ae,{display:{base:`${e?"none":"flex"}`,lg:"flex"},h:"80vh",borderRadius:"md",flexDirection:"column",borderStart:"0.1px solid",borderEnd:"0.1px solid",borderEndColor:Ve("gray.300","gray.600"),borderStartColor:Ve("gray.300","gray.600"),children:[C.jsxs(ae,{w:"full",h:12,alignItems:"center",justifyContent:"space-between",gap:2,pt:10,pb:10,ps:3,bg:Ve("gray.200","gray.dark"),children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(RGe,{display:{md:"none"},boxSize:8,onClick:()=>i({_id:"",userId:"",username:"",userProfilePic:""})}),C.jsx(Ni,{src:o.userProfilePic,size:"sm"}),C.jsxs(ue,{display:"flex",alignItems:"center",fontSize:"xl",children:[o.username," ",C.jsx(oi,{src:"/verified.png",w:4,h:4,ml:1})]})]}),C.jsxs(ae,{alignItems:"center",me:2,children:[C.jsx(De,{bg:Ve("black","white"),_hover:{bg:Ve("black","white")},rounded:"full",me:5,onClick:()=>p(!A),children:C.jsx(bXe,{color:Ve("white","black")})}),!e&&C.jsx(JRe,{size:30,color:"gray.500",onClick:()=>n(!0)})]})]}),C.jsx(aK,{}),A&&C.jsxs(ae,{flexDirection:"column",p:4,children:[C.jsx(_e,{placeholder:"Search messages...",value:u,onChange:W}),C.jsx(ae,{flexDirection:"column",mt:2,children:h.map(B=>C.jsx(ON,{message:B,ownMessage:y._id===B.sender},B._id))})]}),C.jsxs(ae,{flexDir:"column",gap:4,my:4,p:2,overflowY:"auto",flex:1,children:[s&&[...Array(5)].map((B,k)=>C.jsxs(ae,{gap:2,alignItems:"center",p:1,borderRadius:"md",alignSelf:k%2===0?"flex-start":"flex-end",children:[k%2===0&&C.jsx(Vf,{size:7}),C.jsxs(ae,{flexDir:"column",gap:2,children:[C.jsx(Ro,{h:"8px",w:"250px"}),C.jsx(Ro,{h:"8px",w:"250px"}),C.jsx(Ro,{h:"8px",w:"250px"})]}),k%2!==0&&C.jsx(Vf,{size:7})]},k)),!s&&l.map(B=>C.jsx(ae,{direction:"column",ref:l.length-1===l.indexOf(B)?Z:null,children:C.jsx(ON,{message:B,ownMessage:y._id===(B==null?void 0:B.sender)})},B._id))]}),C.jsx(SXe,{setMessages:g,post:t})]})},fJe=({setIsActivitiesOpen:t,isActivitiesOpen:e})=>{var Y;const n=Nn(LI),[i,r]=m.useState(!0),[o,s]=m.useState([]),[a,l]=m.useState(),[g,u]=m.useState(),[d,h]=m.useState(),[f,A]=m.useState(),[p,y]=m.useState(!0),[v,S]=m.useState(!1),[Z,R]=m.useState(!1),W=ln(),B=Qr(),k=async z=>{r(!0);const P=await z.reverse().filter($=>$.img);l(P),u(P.slice(0,6)),r(!1)},w=async z=>{try{const $=await(await fetch("/api/users/profile/"+z)).json();if($.error){W("Error",$.error,"error");return}return $}catch(P){W("Error",P.message,"error"),setPostUser(null)}},J=async z=>{const P=await z.filter($=>$.sharedPost.length>0);h(P),A(P.slice(0,3)),y(!1)};m.useEffect(()=>{(async()=>{s([]);try{if(n.mock)return;if(n.userId){const $=await(await fetch(`/api/messages/${n.userId}`)).json();if(s($),$.error){W("Error",$.error,"error");return}}}catch(P){W("Error",P.message,"error")}})()},[n.userId,n.mock]);const X=async z=>{try{const P=await w(z[0].postedBy);B(`/${P.username}/post/${z[0]._id}`)}catch{W("","Something went wrong","error")}};return m.useEffect(()=>{k(o),J(o)},[o]),C.jsxs(ae,{display:{sm:`${e?"flex":"none"}`,lg:"flex"},flex:30,gap:2,flexDirection:"column",p:3,h:"100%",w:"100%",overflowY:"scroll",bg:Ve("gray.200","gray.dark"),children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsx(ue,{fontSize:"lg",fontWeight:500,color:Ve("gray.800","white"),children:"Details"}),C.jsx(JG,{size:25,onClick:()=>t(!1)})]}),!v&&C.jsxs(ae,{flexDirection:"column",mt:10,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",mb:5,children:[C.jsx(ue,{fontSize:"lg",fontWeight:500,children:"Shared Images"}),Z?C.jsx(JG,{onClick:()=>{R(!1)}}):C.jsx(iH,{boxSize:4,onClick:()=>{R(!0)}})]}),i&&C.jsx(nr,{}),(a==null?void 0:a.length)>0&&!i?C.jsx(Ts,{gridTemplateColumns:{base:"1fr 1fr",md:"1fr 1fr 1fr"},w:"100%",gap:3,overflow:"auto",children:(Z?a:g).map(z=>C.jsx(Se,{h:20,w:"100%",overflow:"hidden",rounded:"lg",children:C.jsx(oi,{objectFit:"cover",h:"100%",w:"100%",src:z==null?void 0:z.img,alt:"image"})},z._id))}):C.jsx(ue,{children:"No Image Found"})]}),!Z&&C.jsxs(ae,{flexDirection:"column",mt:2,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",mb:5,children:[C.jsx(ue,{fontSize:"lg",fontWeight:500,children:"Shared Events"}),v?C.jsx(JG,{onClick:()=>{S(!1)}}):C.jsx(iH,{boxSize:4,onClick:()=>{S(!0)}})]}),i&&C.jsx(nr,{}),(d==null?void 0:d.length)>0&&!p?(Y=v?d:f)==null?void 0:Y.map(z=>C.jsxs(ae,{h:12,w:"100%",overflow:"hidden",rounded:"lg",alignItems:"center",p:2,gap:2,cursor:"pointer",onClick:()=>X(z.sharedPost),children:[C.jsx(ae,{borderRadius:"full",bg:Ve("gray.dark","white"),h:10,w:10,alignItems:"center",justifyContent:"center",children:C.jsx(yXe,{size:24,color:Ve("white","black")})}),C.jsx(ue,{color:Ve("black","white"),children:z.sharedPost[0].name})]},z.conversationId)):C.jsx(ue,{children:"No Events Found"})]})]})},mJe=()=>{var W,B;const[t,e]=m.useState(!1),[n,i]=m.useState(!0),[r,o]=m.useState(""),[s,a]=_i(LI),[l,g]=_i(kw),u=Nn(an),d=ln(),{socket:h,onlineUsers:f}=Zj(),A=bg(),p=(W=A==null?void 0:A.state)==null?void 0:W.post,y=(B=A==null?void 0:A.state)==null?void 0:B.user,[v,S]=m.useState(!1);m.useEffect(()=>{h==null||h.on("messagesSeen",({conversationId:k})=>{g(w=>w.map(X=>X._id===k?{...X,lastMessage:{...X.lastMessage,seen:!0}}:X))})},[h,g]);const Z=async()=>{if(y&&(y==null?void 0:y._id)!==(u==null?void 0:u._id)){const k=l.find(w=>w.participants[0]._id===y._id);if(k){a({_id:k._id,userId:y._id,username:y.username,userProfilePic:y.profilePic});return}else{const w={_id:Date.now(),userId:y._id,username:y.username,userProfilePic:y.profilePic,participants:[{_id:y._id,username:y.username,profilePic:y.profilePic}]};g(J=>[...J,w])}}};m.useEffect(()=>{Z()},[y,l,u,a]),m.useEffect(()=>{(async()=>{try{const J=await(await fetch("/api/messages/conversations")).json();if(J.error){d("Error",J.error,"error");return}g(J)}catch(w){d("Error",w.message,"error")}finally{i(!1)}})()},[d,g]);const R=async k=>{k.preventDefault(),e(!0);try{const J=await(await fetch(`/api/users/profile/${r}`)).json();if(J.error){d("Error",J.error,"error");return}if(J._id===u._id){d("Error","You cannot message yourself","error");return}const Y=l.find(P=>P.participants[0]._id===J._id);if(Y){a({_id:Y._id,userId:J._id,username:J.username,userProfilePic:J.profilePic});return}const z={mock:!0,lastMessage:{text:"",sender:""},_id:Date.now(),participants:[{_id:J._id,username:J.username,profilePic:J.profilePic}]};g(P=>[...P,z])}catch(w){d("Error",w.message,"error")}finally{e(!1)}};return C.jsx(Se,{position:"absolute",left:"50%",w:{base:"100%",md:"100%",lg:"100%"},h:"80vh",transform:"translateX(-50%)",children:C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"1fr 2fr",lg:`1fr 2fr ${v?"1fr":""}`},height:"80vh",mx:"auto",children:[C.jsxs(ae,{display:{base:`${s!=null&&s._id?"none":"flex"}`,md:"flex"},flex:30,gap:2,flexDirection:"column",p:3,overflowY:"auto",sx:{"&::-webkit-scrollbar":{display:"none"}},mx:"auto",w:"100%",children:[C.jsx(ue,{fontSize:"3xl",fontWeight:500,color:Ve("gray.800","white"),children:"Messages"}),C.jsxs(Fc,{mt:4,children:[C.jsx(De,{w:"50%",bg:"red.500",_hover:{bg:"red.600"},borderRadius:30,color:"white",children:"Connections"}),C.jsx(De,{w:"50%",borderRadius:30,bg:Ve("gray.200","gray.dark"),color:Ve("black","white"),children:"Communities"})]}),C.jsx("form",{onSubmit:R,children:C.jsxs(ae,{alignItems:"center",gap:2,borderBottom:"0.1px solid",borderBottomColor:Ve("gray.200","gray.800"),pb:5,mt:4,children:[C.jsx(_e,{placeholder:"Search for a user",onChange:k=>o(k.target.value)}),C.jsx(De,{size:"sm",onClick:R,isLoading:t,children:C.jsx(BGe,{})})]})}),n&&[0,1,2,3,4].map((k,w)=>C.jsxs(ae,{gap:4,alignItems:"center",p:"1",borderRadius:"md",children:[C.jsx(Se,{children:C.jsx(Vf,{size:"10"})}),C.jsxs(ae,{w:"full",flexDirection:"column",gap:3,children:[C.jsx(Ro,{h:"10px",w:"80px"}),C.jsx(Ro,{h:"8px",w:"90%"})]})]},w)),!n&&l.map(k=>{var w;return C.jsx(pXe,{isOnline:f.includes((w=k.participants[0])==null?void 0:w._id),conversation:k},k._id)})]}),!s._id&&C.jsxs(ae,{flex:70,borderRadius:"md",display:{base:"none",md:"flex"},p:2,flexDir:"column",alignItems:"center",justifyContent:"center",children:[C.jsx(AXe,{size:100}),C.jsx(ue,{fontSize:20,children:"Select a conversation to start messaging"})]}),s._id&&C.jsx(hJe,{display:{md:"$isActivitiesOpen?'none'"},post:p,isActivitiesOpen:v,setSelectedConversation:a,setIsActivitiesOpen:S}),v&&C.jsx(fJe,{setIsActivitiesOpen:S,isActivitiesOpen:v})]})})};function pJe(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"},child:[]},{tag:"path",attr:{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]}]})(t)}function AJe(t){return ct({tag:"svg",attr:{version:"1.1",viewBox:"0 0 20 16"},child:[{tag:"path",attr:{d:"M13 11.5l1.5 1.5 5-5-5-5-1.5 1.5 3.5 3.5z"},child:[]},{tag:"path",attr:{d:"M7 4.5l-1.5-1.5-5 5 5 5 1.5-1.5-3.5-3.5z"},child:[]},{tag:"path",attr:{d:"M10.958 2.352l1.085 0.296-3 11-1.085-0.296 3-11z"},child:[]}]})(t)}const Gj=()=>{const[t,e]=m.useState(!1),[n,i]=m.useState(!1),r=Nn(an);m.useEffect(()=>{(async()=>{var l,g;const a=await fn.get("/api/users/settings",{params:{userId:r._id}});i((l=a.data)==null?void 0:l.feedback),e((g=a.data)==null?void 0:g.publicguest)})()},[r]);const o=async(s,a,l)=>{try{const g=await fn.post("/api/users/update-settings",{userId:s,setting:a,value:l});g.status===200?a==="publicGuest"?e(l):a==="feedback"&&i(l):console.error("Error updating setting:",g.status)}catch(g){console.error("Error updating setting:",g)}};return C.jsxs(ae,{flexDir:"column",gap:2,children:[C.jsx(Wo,{fontSize:"xl",fontWeight:"medium",children:"Event Defaults"}),C.jsx(ue,{color:"gray.600",children:"Default settings for events"}),C.jsxs(ae,{flexDir:"column",bg:Ve("white","gray.800"),borderRadius:"lg",children:[C.jsxs(ae,{justifyContent:"space-between",alignItems:"center",p:2,children:[C.jsxs(Se,{children:[C.jsx(ue,{fontWeight:500,children:"Public Guest List"}),C.jsx(ue,{fontSize:"sm",color:"gray.500",children:"Whether to show guest list on event pages."})]}),C.jsx(Ka,{isChecked:t,onChange:s=>o(r._id,"publicGuest",s.target.checked)})]}),C.jsxs(ae,{justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,children:[C.jsxs(Se,{children:[C.jsx(ue,{fontWeight:500,children:"Collect Feedback"}),C.jsx(ue,{fontSize:"sm",color:"gray.500",children:"Email guests after the event to collect feedback."})]}),C.jsx(Ka,{isChecked:n,onChange:s=>o(r._id,"feedback",s.target.checked)})]})]})]})},Bj=()=>C.jsxs(Se,{children:[C.jsx(Wo,{size:"md",fontWeight:500,mb:3,children:"Ticket Sales"}),C.jsxs(Se,{borderRadius:"lg",background:Ve("white","gray.800"),p:3,children:[C.jsx(Wo,{size:"md",fontWeight:500,children:"Start Selling Tickets"}),C.jsx(ue,{mt:1,fontSize:"sm",color:"gray.500",children:"Start selling tickets to your events by creating a Stripe account. It usually takes less than 5 minutes to set up."}),C.jsx(De,{mt:3,bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,children:"Get Started"})]}),C.jsx(ue,{mt:2,fontSize:"sm",color:"gray.500",children:"Stripe is a secure payment processor with low fees."})]}),Rj=()=>{const{isOpen:t,onOpen:e,onClose:n}=Go(),[i,r]=m.useState(""),[o,s]=m.useState([]),[a,l]=m.useState([]),g=Nn(an),u=ln();m.useEffect(()=>{(async()=>{const v=await fn.get("/api/users/settings",{params:{userId:g._id}});l(v.data.admins)})()},[g]),m.useEffect(()=>{},[a]);const d=async y=>{const v=y.target.value;if(r(v),v.length<3){s([]);return}try{const S=await fn.get(`/api/users/search?q=${v}`);s(S.data)}catch(S){console.error("Error fetching search results:",S)}},h=(y,v)=>y.some(S=>S.userid===v.userid),f=y=>{if((a==null?void 0:a.length)>=5){alert("You can only select Maximum of 5 users");return}const v={name:y.name,userid:y._id,email:y.email};l(S=>h(S,v)?(u("error","user already added","error"),S):[...S,v])},A=async()=>{try{const y=await fn.post("/api/users/add-admins",{userId:g._id,selectedUsers:a});l(y.data),u("success","Admins Updated","success"),n()}catch{u("error","Something went wrong","error")}},p=async y=>{try{const v=await fn.post("/api/users/remove-admins",{userId:g._id,currentUser:y});l(v.data),u("success","Admins Updated","success")}catch{u("error","Something went wrong","error")}};return C.jsxs(C.Fragment,{children:[C.jsxs(Se,{children:[C.jsxs(ae,{justifyContent:"space-between",children:[C.jsx(Wo,{as:"h1",size:"md",mb:4,fontWeight:500,children:"Admins"}),C.jsxs(De,{size:"sm",bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,gap:2,onClick:e,children:[C.jsx(qV,{boxSize:"0.75em"}),"Add Admin"]})]}),a.length==0&&C.jsx(ue,{children:"No Admins"}),C.jsx(sm,{w:"full",gap:2,children:a.map(y=>C.jsxs(ae,{borderColor:"gray.400",borderRadius:"lg",bg:Ve("pink.100","gray.500"),p:2,justifyContent:"space-between",w:"full",children:[C.jsxs(Se,{children:[C.jsx(ue,{children:y.name}),C.jsx(ue,{children:y.email})]}),C.jsx(De,{colorScheme:"red",size:"xs",onClick:()=>p(y),children:"Remove"})]},y._id))})]}),C.jsxs(Jo,{isOpen:t,onClose:n,isCentered:!0,children:[C.jsx(No,{}),C.jsxs(Eo,{maxW:"sm",children:[C.jsx(Ho,{children:"Add Admins"}),C.jsx(Yo,{}),C.jsxs(ss,{children:[C.jsx(ue,{mb:2,children:"Add admins by searching the user"}),C.jsx(_e,{placeholder:"Search user",value:i,onChange:d}),C.jsx(Fc,{gap:2,mt:2,children:a.map(y=>C.jsx(oK,{colorScheme:"green",children:y.name},y.email))}),o.length>0&&C.jsx(_a,{children:o.map(y=>C.jsx(Yc,{children:C.jsx(Se,{p:2,w:"full",_hover:{background:Ve("gray.200","gray.600")},borderRadius:"lg",onClick:()=>f(y),children:C.jsxs(ue,{_hover:{textDecoration:"underline",cursor:"pointer"},children:[C.jsx("strong",{children:y.username})," - ",y.name]})})},y._id))})]}),C.jsx(is,{children:C.jsx(De,{w:"full",onClick:A,bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},children:"Add Admins"})})]})]})]})},kj=()=>C.jsx("div",{children:C.jsx("h1",{children:"Embed"})}),Vj=()=>C.jsxs(Se,{bg:Ve("white","gray.800"),p:3,borderRadius:"lg",children:[C.jsx(ae,{mb:2,children:C.jsxs(Se,{children:[C.jsx(ue,{fontSize:"sm",color:"gray.500",fontWeight:500,children:"Upgrade to"}),C.jsx(ue,{color:"blue.700",fontWeight:"bold",letterSpacing:1,fontSize:"lg",fontStyle:"italic",children:"Evntiq Plus"})]})}),C.jsxs(ae,{gap:3,flexDir:"column",mb:3,children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(pG,{color:"green.400"})," ",C.jsx(ue,{children:"No Platform fees"})]}),C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(pG,{color:"green.400"})," ",C.jsx(ue,{children:"Priority Support"})]}),C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(pG,{color:"green.400"})," ",C.jsx(ue,{children:"5 Admins Included"})]})]}),C.jsx(De,{w:"full",bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},children:"Upgrade"})]}),wj=()=>{const[t,e]=_i(an),n=ln(),i=sU(),[r,o]=m.useState(t.email),[s,a]=m.useState({password:"",newPassword:""}),[l,g]=m.useState({}),[u,d]=m.useState(!1),h=async()=>{if(window.confirm("Are you sure you want to freeze your account?"))try{const S=await(await fetch("/api/users/freeze",{method:"PUT",headers:{"Content-Type":"application/json"}})).json();if(S.error)return n("Error",S.error,"error");S.success&&(await i(),n("Success","Your account has been frozen","success"))}catch(v){n("Error",v.message,"error")}},f=async()=>{if(r===t.email)return n("Error","Please enter a new email","error");try{const v=await fn.put(`/api/users/update-email/${t._id}`,{userId:t._id,email:r});n("Success","Email updated successfully","success"),e(v.data),localStorage.setItem("user-threads",JSON.stringify(v.data))}catch{console.log("error")}},A=Rw().shape({password:Ic().min(8,"Password must be at least 8 characters").required("Password is required"),newPassword:Ic().min(8,"New password must be at least 8 characters").required("New password is required")}),p=v=>{const{name:S,value:Z}=v.target;a({...s,[S]:Z})},y=async v=>{var S,Z;v.preventDefault(),d(!0);try{if(await A.validate(s,{abortEarly:!1}),s.password===s.newPassword)throw new Oi("New password cannot be the same as the current password",null,"newPassword");const R=await fn.put("/api/users/update-password",{userId:t._id,password:s.password,newPassword:s.newPassword});console.log(R.data),a({password:"",newPassword:""}),n("Success","Password updated successfully","success")}catch(R){const W=((Z=(S=R.response)==null?void 0:S.data)==null?void 0:Z.error)||"Something went wrong";if(R.name==="ValidationError"){const B=R.inner.reduce((k,w)=>(k[w.path]=w.message,k),{});g(B)}else n("Error",W,"error")}finally{d(!1)}};return C.jsxs(C.Fragment,{children:[C.jsx(ue,{my:1,fontWeight:"bold",children:"Freeze Your Account"}),C.jsx(ue,{my:1,children:"You can unfreeze your account anytime by logging in."}),C.jsx(De,{size:"sm",colorScheme:"red",onClick:h,children:"Freeze"}),C.jsx(ue,{mt:5,fontWeight:"bold",fontSize:"lg",children:"Change Account Settings"}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Email address"}),C.jsxs(ae,{gap:2,children:[" ",C.jsx(_e,{placeholder:"your-email@example.com",value:r,onChange:v=>o(v.target.value),_placeholder:{color:"gray.500"},type:"email"}),C.jsx(De,{size:"md",bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,gap:2,mr:3,onClick:f,children:"Submit"})]})]}),C.jsxs(mt,{as:"form",onSubmit:y,children:[C.jsx(nt,{children:"Password"}),C.jsx(_e,{name:"password",id:"password",placeholder:"Current Password",value:s.password,onChange:p,_placeholder:{color:"gray.500"},type:"password"}),l.password&&C.jsx(ue,{color:"red.500",children:l.password}),C.jsx(nt,{mt:4,children:"New Password"}),C.jsx(_e,{name:"newPassword",id:"newPassword",placeholder:"New Password",value:s.newPassword,onChange:p,_placeholder:{color:"gray.500"},type:"password"}),l.newPassword&&C.jsx(ue,{color:"red.500",children:l.newPassword}),C.jsx(De,{type:"submit",size:"md",w:"full",bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,gap:2,mr:3,mt:3,isLoading:u,children:"Change Password"})]})]})},bJe=()=>{const t=[{label:"Account",path:"/settings/account",icon:C.jsx(VRe,{})},{label:"Options",key:"options",icon:C.jsx(WRe,{}),path:"/settings/options"},{label:"Payment",key:"payment",icon:C.jsx(pJe,{}),path:"/settings/payment"},{label:"Admins",key:"admins",icon:C.jsx(kRe,{}),path:"/settings/admins"},{label:"Embed",key:"embed",icon:C.jsx(AJe,{}),path:"/settings/embed"},{label:"Evntiq+",key:"evntiq-plus",icon:C.jsx(HRe,{}),path:"/settings/evntiq-plus"}];return C.jsxs(Ts,{w:{base:"full",md:"60%"},justifyContent:"center",m:"auto",gridTemplateColumns:{base:"1fr",md:"1fr 3fr"},children:[C.jsx(ae,{w:{base:"100%",md:"200px"},borderBottom:{base:"1px",md:"none"},borderColor:"gray.200",p:4,overflowX:{base:"auto",md:"visible"},maxW:{base:"100%",md:"none"},overflowY:{base:"visible",md:"auto"},alignItems:"center",css:{"&::-webkit-scrollbar":{width:"1px",height:"1px"},"&::-webkit-scrollbar-thumb":{background:"rgba(0, 0, 0, 0.2)",borderRadius:"10px"},"&::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.1)",borderRadius:"10px"},"&":{scrollbarWidth:"",scrollbarColor:"rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.1)"}},children:C.jsx(_a,{spacing:2,display:{base:"flex",md:"block"},flexDirection:{base:"row",md:"column"},alignItems:"center",children:t.map(e=>C.jsx(Yc,{p:3,children:C.jsxs(Tn,{as:vAe,to:e.path,display:"flex",flexDir:"row",alignItems:"center",gap:1,color:"gray.500",_activeLink:{fontWeight:"bold",color:Ve("gray.800","white")},_hover:{textDecoration:"none"},children:[e.icon&&e.icon,e.label]})},e.key))})}),C.jsx(Se,{flex:"1",p:4,justifyContent:"start",children:C.jsxs(QK,{children:[C.jsx(yn,{path:"/options",element:C.jsx(Gj,{})}),C.jsx(yn,{path:"/payment",element:C.jsx(Bj,{})}),C.jsx(yn,{path:"/admins",element:C.jsx(Rj,{})}),C.jsx(yn,{path:"/embed",element:C.jsx(kj,{})}),C.jsx(yn,{path:"/Evntiq-plus",element:C.jsx(Vj,{})}),C.jsx(yn,{path:"/account",element:C.jsx(wj,{})})]})})]})},yJe=()=>{const[t,e]=m.useState([]),[n,i]=m.useState([]),[r,o]=m.useState(""),[s,a]=m.useState(!0),l=rV();m.useEffect(()=>{(async()=>{try{const{data:f}=await fn.get("/api/users/all");e(f)}catch(f){console.error("Error fetching users:",f)}finally{a(!1)}})()},[]);const g=h=>{let f=[...t];switch(h){case"age":f.sort((A,p)=>new Date(p.dob)-new Date(A.dob));break;case"student":f.sort((A,p)=>p.student-A.student);break;case"interests":f.sort((A,p)=>p.interests.length-A.interests.length);break;case"location":f.sort((A,p)=>A.location.localeCompare(p.location));break}e(f),o(h)},u=h=>{i(f=>f.includes(h)?f.filter(A=>A!==h):[...f,h])},d=async()=>{try{await fn.post("/api/users/send-email",{userIds:n}),l({title:"Emails sent",description:"Emails have been sent to the selected users.",status:"success",duration:5e3,isClosable:!0}),i([])}catch(h){console.error("Error sending emails:",h),l({title:"Error",description:"There was an error sending the emails.",status:"error",duration:5e3,isClosable:!0})}};return C.jsx(A0,{py:6,children:C.jsxs(sm,{spacing:4,w:"full",maxW:"1200px",children:[C.jsx(Wo,{as:"h1",size:"xl",children:"Users List"}),C.jsxs(Fc,{spacing:4,children:[C.jsx(De,{onClick:()=>g("age"),colorScheme:r==="age"?"blue":"gray",children:"Sort by Age"}),C.jsx(De,{onClick:()=>g("student"),colorScheme:r==="student"?"blue":"gray",children:"Sort by Student Status"}),C.jsx(De,{onClick:()=>g("interests"),colorScheme:r==="interests"?"blue":"gray",children:"Sort by Interests"}),C.jsx(De,{onClick:()=>g("location"),colorScheme:r==="location"?"blue":"gray",children:"Sort by Location"})]}),C.jsx(De,{colorScheme:"teal",onClick:d,isDisabled:n.length===0,children:"Send Email to Selected Users"}),s?C.jsx(nr,{size:"xl"}):C.jsxs(LK,{variant:"striped",colorScheme:"teal",children:[C.jsx(Zpe,{children:C.jsxs(S5,{children:[C.jsx(hl,{children:"Select"}),C.jsx(hl,{children:"Name"}),C.jsx(hl,{children:"Username"}),C.jsx(hl,{children:"Email"}),C.jsx(hl,{children:"Age"}),C.jsx(hl,{children:"Student"}),C.jsx(hl,{children:"Interests"}),C.jsx(hl,{children:"Location"})]})}),C.jsx(Gpe,{children:t.map(h=>C.jsxs(S5,{children:[C.jsx(Cl,{children:C.jsx(Yd,{isChecked:n.includes(h._id),onChange:()=>u(h._id)})}),C.jsx(Cl,{children:h.name}),C.jsx(Cl,{children:h.username}),C.jsx(Cl,{children:h.email}),C.jsx(Cl,{children:h.dob?new Date().getFullYear()-new Date(h.dob).getFullYear():"N/A"}),C.jsx(Cl,{children:h.student?"Yes":"No"}),C.jsx(Cl,{children:h.interests.join(", ")}),C.jsx(Cl,{children:h.location})]},h._id))})]})]})})};function vJe(t){if(Array.isArray(t))return t}function SJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,o,s,a=[],l=!0,g=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){g=!0,r=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(g)throw r}}return a}}function lY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ZJe(t,e){if(t){if(typeof t=="string")return lY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lY(t,e)}}function GJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BJe(t,e){return vJe(t)||SJe(t,e)||ZJe(t,e)||GJe()}function RJe(t,e){if(t==null)return{};var n=cD(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var Wj={exports:{}},en={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=typeof Symbol=="function"&&Symbol.for,Ew=Ai?Symbol.for("react.element"):60103,Hw=Ai?Symbol.for("react.portal"):60106,Hv=Ai?Symbol.for("react.fragment"):60107,Nv=Ai?Symbol.for("react.strict_mode"):60108,Yv=Ai?Symbol.for("react.profiler"):60114,Fv=Ai?Symbol.for("react.provider"):60109,Mv=Ai?Symbol.for("react.context"):60110,Nw=Ai?Symbol.for("react.async_mode"):60111,Tv=Ai?Symbol.for("react.concurrent_mode"):60111,Lv=Ai?Symbol.for("react.forward_ref"):60112,_v=Ai?Symbol.for("react.suspense"):60113,kJe=Ai?Symbol.for("react.suspense_list"):60120,Dv=Ai?Symbol.for("react.memo"):60115,Kv=Ai?Symbol.for("react.lazy"):60116,VJe=Ai?Symbol.for("react.block"):60121,wJe=Ai?Symbol.for("react.fundamental"):60117,WJe=Ai?Symbol.for("react.responder"):60118,xJe=Ai?Symbol.for("react.scope"):60119;function $r(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ew:switch(t=t.type,t){case Nw:case Tv:case Hv:case Yv:case Nv:case _v:return t;default:switch(t=t&&t.$$typeof,t){case Mv:case Lv:case Kv:case Dv:case Fv:return t;default:return e}}case Hw:return e}}}function xj(t){return $r(t)===Tv}en.AsyncMode=Nw;en.ConcurrentMode=Tv;en.ContextConsumer=Mv;en.ContextProvider=Fv;en.Element=Ew;en.ForwardRef=Lv;en.Fragment=Hv;en.Lazy=Kv;en.Memo=Dv;en.Portal=Hw;en.Profiler=Yv;en.StrictMode=Nv;en.Suspense=_v;en.isAsyncMode=function(t){return xj(t)||$r(t)===Nw};en.isConcurrentMode=xj;en.isContextConsumer=function(t){return $r(t)===Mv};en.isContextProvider=function(t){return $r(t)===Fv};en.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ew};en.isForwardRef=function(t){return $r(t)===Lv};en.isFragment=function(t){return $r(t)===Hv};en.isLazy=function(t){return $r(t)===Kv};en.isMemo=function(t){return $r(t)===Dv};en.isPortal=function(t){return $r(t)===Hw};en.isProfiler=function(t){return $r(t)===Yv};en.isStrictMode=function(t){return $r(t)===Nv};en.isSuspense=function(t){return $r(t)===_v};en.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hv||t===Tv||t===Yv||t===Nv||t===_v||t===kJe||typeof t=="object"&&t!==null&&(t.$$typeof===Kv||t.$$typeof===Dv||t.$$typeof===Fv||t.$$typeof===Mv||t.$$typeof===Lv||t.$$typeof===wJe||t.$$typeof===WJe||t.$$typeof===xJe||t.$$typeof===VJe)};en.typeOf=$r;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var gY=Object.getOwnPropertySymbols,XJe=Object.prototype.hasOwnProperty,JJe=Object.prototype.propertyIsEnumerable;function EJe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function HJe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}HJe();var NJe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YJe=NJe;Function.call.bind(Object.prototype.hasOwnProperty);var FJe=YJe;function Xj(){}function Jj(){}Jj.resetWarningCache=Xj;var MJe=function(){function t(i,r,o,s,a,l){if(l!==FJe){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Jj,resetWarningCache:Xj};return n.PropTypes=n,n};Wj.exports=MJe();var zu=Wj.exports;function TJe(t,e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),r=0,o=n.length;r<o;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}function LJe(t,e,n){var i=e===void 0?null:e,r=n===void 0?!1:n,o=TJe(t,r),s=o.indexOf(`
`,10)+1,a=o.substring(s)+(i?"//# sourceMappingURL="+i:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function _Je(t,e,n){var i;return function(o){return i=i||LJe(t,e,n),new Worker(i,o)}}var DJe=_Je("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),KJe=["constraints","onError","onLoad","onScan","resolution","qrArea"];function cY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cY(Object(n),!0).forEach(function(i){BD(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cY(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var zJe=function(){return new DJe},dY=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach(function(n){e.removeTrack(n),n.stop()}),e.getAudioTracks().forEach(function(n){e.removeTrack(n),n.stop()})):e.stop())},Yw=function(e){var n=e.constraints,i=e.onError,r=e.onLoad,o=e.onScan,s=e.resolution,a=e.qrArea,l=RJe(e,KJe),g=m.useRef(null),u=m.useRef(null),d=m.useRef(document.createElement("canvas")),h=m.useRef(null),f=m.useRef(),A=m.useState(null),p=BJe(A,2),y=p[0],v=p[1],S=m.useRef(!1),Z=m.useRef();m.useEffect(function(){Z.current=zJe();var k=Z.current;return k.onmessage=function(w){o&&o(w.data?uY(uY({},w.data),{},{canvas:d.current}):null),S.current=!1},function(){k.terminate()}},[o]);var R=JSON.stringify(a),W=m.useCallback(function(){var k=JSON.parse(R),w=Z.current,J=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!S.current&&J){S.current=!0;var X=u.current.videoWidth,Y=u.current.videoHeight,z=X>Y?X:Y,P=Math.floor(s/z*100)/100;Y=Math.floor(P*Y),X=Math.floor(P*X),d.current.width=X,d.current.height=Y,h.current=d.current.getContext("2d"),h.current.drawImage(u.current,0,0,X,Y);var $;k&&k.length===2&&k[0]>0&&k[1]>0?$=h.current.getImageData(Math.floor((X-k[0])/2),Math.floor((Y-k[1])/2),k[0],k[1]):$=h.current.getImageData(0,0,X,Y),w.postMessage($)}f.current=requestAnimationFrame(W)},[s,R]),B=JSON.stringify(n);return m.useEffect(function(){var k=JSON.parse(B),w=!0;return navigator.mediaDevices.getUserMedia(k).then(function(J){if(!w)dY(J);else{g.current=J;try{u.current&&(u.current.srcObject=J,u.current.setAttribute("playsinline",!0))}catch{v(window.URL.createObjectURL(J))}r&&r(),f.current=requestAnimationFrame(W)}}).catch(function(J){return w?i(J):null}),function(){cancelAnimationFrame(f.current),w=!1,dY(g.current),y&&window.URL.revokeObjectURL(y)}},[W,B,i,r,y]),m.createElement("video",og({autoPlay:!0,playsInline:!0,src:y,ref:u},l))};Yw.propTypes={constraints:zu.object,onError:zu.func.isRequired,onLoad:zu.func,onScan:zu.func.isRequired,resolution:zu.number,qrArea:zu.array};Yw.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};const PJe=["1234","5678","91011","121314","151617"],UJe=({onAuthenticate:t})=>{const[e,n]=m.useState(""),[i,r]=m.useState(null),[o,s]=m.useState(""),[a,l]=m.useState(null),[g,u]=m.useState(null),{isOpen:d,onOpen:h,onClose:f}=Go(),A=()=>{PJe.includes(e)?(t(),r(null)):r("Invalid PIN. Please try again.")},p=async()=>{try{await fn.post("/api/sendAccessCodes",{email:o}),u("Access codes sent successfully!"),l(null),f()}catch{l("Failed to send access codes. Please try again."),u(null)}};return C.jsxs(C.Fragment,{children:[C.jsx(ue,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Enter PIN to Access QR Verification Page"}),C.jsx(_e,{placeholder:"Enter PIN",value:e,onChange:y=>n(y.target.value),type:"password",mb:4}),C.jsx(De,{onClick:A,colorScheme:"teal",mb:4,children:"Submit"}),i&&C.jsxs(bc,{status:"error",mt:4,children:[C.jsx(Ac,{}),i]}),C.jsx(De,{onClick:h,colorScheme:"blue",mb:4,children:"Get Access Codes"}),g&&C.jsxs(bc,{status:"success",mt:4,children:[C.jsx(Ac,{}),g]}),a&&C.jsxs(bc,{status:"error",mt:4,children:[C.jsx(Ac,{}),a]}),C.jsxs(Jo,{isOpen:d,onClose:f,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{children:"Request Access Codes"}),C.jsx(Yo,{}),C.jsx(ss,{children:C.jsx(_e,{placeholder:"Enter your email",value:o,onChange:y=>s(y.target.value),type:"email",mb:4})}),C.jsxs(is,{children:[C.jsx(De,{colorScheme:"blue",mr:3,onClick:p,children:"Send Access Codes"}),C.jsx(De,{variant:"ghost",onClick:f,children:"Cancel"})]})]})]})]})},jJe=()=>{const[t,e]=m.useState("No result"),[n,i]=m.useState(!1),[r,o]=m.useState(null),[s,a]=m.useState(null),[l,g]=m.useState(!1),u=async h=>{var f,A;if(h){console.log(h),e(h.text),i(!1);try{const p=await fn.post("/api/tickets/verifyTicket",{ticketid:h.text});a(p.data.message)}catch(p){console.error(p),o(((A=(f=p.response)==null?void 0:f.data)==null?void 0:A.error)||"Failed to verify ticket")}}},d=h=>{console.error(h),o("Failed to scan the QR code. Please try again."),i(!1)};return C.jsx(Se,{p:4,children:l?C.jsxs(C.Fragment,{children:[C.jsx(ue,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"QR Verification Page"}),n?C.jsxs(C.Fragment,{children:[C.jsx(Yw,{delay:300,onError:d,onScan:u,style:{width:"100%"}}),C.jsx(nr,{size:"xl",mt:4})]}):C.jsx(De,{onClick:()=>{i(!0),o(null),a(null)},colorScheme:"teal",children:"Start Scanning"}),r&&C.jsxs(bc,{status:"error",mt:4,children:[C.jsx(Ac,{}),r]}),s&&C.jsxs(bc,{status:s==="Ticket used successfully"?"success":"warning",mt:4,children:[C.jsx(Ac,{}),s]}),C.jsxs(ue,{mt:4,children:["Scanned Result: ",t]})]}):C.jsx(UJe,{onAuthenticate:()=>g(!0)})})};function OJe(t){return ct({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function QJe(t){return ct({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144 208c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm112 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm112 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zM256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"},child:[]}]})(t)}function $Je(t){return ct({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#F44336",d:"M34,9c-4.2,0-7.9,2.1-10,5.4C21.9,11.1,18.2,9,14,9C7.4,9,2,14.4,2,21c0,11.9,22,24,22,24s22-12,22-24 C46,14.4,40.6,9,34,9z"},child:[]}]})(t)}function qJe(t){return ct({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#F57C00",d:"M40,41H8c-2.2,0-4-1.8-4-4V11c0-2.2,1.8-4,4-4h32c2.2,0,4,1.8,4,4v26C44,39.2,42.2,41,40,41z"},child:[]},{tag:"circle",attr:{fill:"#FFF9C4",cx:"35",cy:"16",r:"3"},child:[]},{tag:"polygon",attr:{fill:"#942A09",points:"20,16 9,32 31,32"},child:[]},{tag:"polygon",attr:{fill:"#BF360C",points:"31,22 23,32 39,32"},child:[]}]})(t)}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Vm(t){return t+.5|0}const Jl=(t,e,n)=>Math.max(Math.min(t,n),e);function ch(t){return Jl(Vm(t*2.55),0,255)}function eg(t){return Jl(Vm(t*255),0,255)}function ya(t){return Jl(Vm(t/2.55)/100,0,1)}function IY(t){return Jl(Vm(t*100),0,100)}const go={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},z1=[..."0123456789ABCDEF"],eEe=t=>z1[t&15],tEe=t=>z1[(t&240)>>4]+z1[t&15],oA=t=>(t&240)>>4===(t&15),nEe=t=>oA(t.r)&&oA(t.g)&&oA(t.b)&&oA(t.a);function iEe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&go[t[1]]*17,g:255&go[t[2]]*17,b:255&go[t[3]]*17,a:e===5?go[t[4]]*17:255}:(e===7||e===9)&&(n={r:go[t[1]]<<4|go[t[2]],g:go[t[3]]<<4|go[t[4]],b:go[t[5]]<<4|go[t[6]],a:e===9?go[t[7]]<<4|go[t[8]]:255})),n}const rEe=(t,e)=>t<255?e(t):"";function oEe(t){var e=nEe(t)?eEe:tEe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+rEe(t.a,e):void 0}const sEe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ej(t,e,n){const i=e*Math.min(n,1-n),r=(o,s=(o+t/30)%12)=>n-i*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function aEe(t,e,n){const i=(r,o=(r+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function lEe(t,e,n){const i=Ej(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function gEe(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Fw(t){const n=t.r/255,i=t.g/255,r=t.b/255,o=Math.max(n,i,r),s=Math.min(n,i,r),a=(o+s)/2;let l,g,u;return o!==s&&(u=o-s,g=a>.5?u/(2-o-s):u/(o+s),l=gEe(n,i,r,u,o),l=l*60+.5),[l|0,g||0,a]}function Mw(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(eg)}function Tw(t,e,n){return Mw(Ej,t,e,n)}function cEe(t,e,n){return Mw(lEe,t,e,n)}function uEe(t,e,n){return Mw(aEe,t,e,n)}function Hj(t){return(t%360+360)%360}function dEe(t){const e=sEe.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ch(+e[5]):eg(+e[5]));const r=Hj(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?i=cEe(r,o,s):e[1]==="hsv"?i=uEe(r,o,s):i=Tw(r,o,s),{r:i[0],g:i[1],b:i[2],a:n}}function IEe(t,e){var n=Fw(t);n[0]=Hj(n[0]+e),n=Tw(n),t.r=n[0],t.g=n[1],t.b=n[2]}function CEe(t){if(!t)return;const e=Fw(t),n=e[0],i=IY(e[1]),r=IY(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ya(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const CY={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hY={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hEe(){const t={},e=Object.keys(hY),n=Object.keys(CY);let i,r,o,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],r=0;r<n.length;r++)o=n[r],a=a.replace(o,CY[o]);o=parseInt(hY[s],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let sA;function fEe(t){sA||(sA=hEe(),sA.transparent=[0,0,0,0]);const e=sA[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const mEe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function pEe(t){const e=mEe.exec(t);let n=255,i,r,o;if(e){if(e[7]!==i){const s=+e[7];n=e[8]?ch(s):Jl(s*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?ch(i):Jl(i,0,255)),r=255&(e[4]?ch(r):Jl(r,0,255)),o=255&(e[6]?ch(o):Jl(o,0,255)),{r:i,g:r,b:o,a:n}}}function AEe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ya(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const NG=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Pu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function bEe(t,e,n){const i=Pu(ya(t.r)),r=Pu(ya(t.g)),o=Pu(ya(t.b));return{r:eg(NG(i+n*(Pu(ya(e.r))-i))),g:eg(NG(r+n*(Pu(ya(e.g))-r))),b:eg(NG(o+n*(Pu(ya(e.b))-o))),a:t.a+n*(e.a-t.a)}}function aA(t,e,n){if(t){let i=Fw(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Tw(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Nj(t,e){return t&&Object.assign(e||{},t)}function fY(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=eg(t[3]))):(e=Nj(t,{r:0,g:0,b:0,a:1}),e.a=eg(e.a)),e}function yEe(t){return t.charAt(0)==="r"?pEe(t):dEe(t)}class Hf{constructor(e){if(e instanceof Hf)return e;const n=typeof e;let i;n==="object"?i=fY(e):n==="string"&&(i=iEe(e)||fEe(e)||yEe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Nj(this._rgb);return e&&(e.a=ya(e.a)),e}set rgb(e){this._rgb=fY(e)}rgbString(){return this._valid?AEe(this._rgb):void 0}hexString(){return this._valid?oEe(this._rgb):void 0}hslString(){return this._valid?CEe(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let o;const s=n===o?.5:n,a=2*s-1,l=i.a-r.a,g=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-g,i.r=255&g*i.r+o*r.r+.5,i.g=255&g*i.g+o*r.g+.5,i.b=255&g*i.b+o*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=bEe(this._rgb,e._rgb,n)),this}clone(){return new Hf(this.rgb)}alpha(e){return this._rgb.a=eg(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return aA(this._rgb,2,e),this}darken(e){return aA(this._rgb,2,-e),this}saturate(e){return aA(this._rgb,1,e),this}desaturate(e){return aA(this._rgb,1,-e),this}rotate(e){return IEe(this._rgb,e),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ca(){}const vEe=(()=>{let t=0;return()=>t++})();function qt(t){return t===null||typeof t>"u"}function Jn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ft(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function hi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function wr(t,e){return hi(t)?t:e}function Ut(t,e){return typeof t>"u"?e:t}const SEe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function In(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ot(t,e,n,i){let r,o,s;if(Jn(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(Ft(t))for(s=Object.keys(t),o=s.length,r=0;r<o;r++)e.call(n,t[s[r]],s[r])}function N0(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Y0(t){if(Jn(t))return t.map(Y0);if(Ft(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Y0(t[n[r]]);return e}return t}function Yj(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ZEe(t,e,n,i){if(!Yj(t))return;const r=e[t],o=n[t];Ft(r)&&Ft(o)?Nf(r,o,i):e[t]=Y0(o)}function Nf(t,e,n){const i=Jn(e)?e:[e],r=i.length;if(!Ft(t))return t;n=n||{};const o=n.merger||ZEe;let s;for(let a=0;a<r;++a){if(s=i[a],!Ft(s))continue;const l=Object.keys(s);for(let g=0,u=l.length;g<u;++g)o(l[g],t,s,n)}return t}function Mh(t,e){return Nf(t,e,{merger:GEe})}function GEe(t,e,n){if(!Yj(t))return;const i=e[t],r=n[t];Ft(i)&&Ft(r)?Mh(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Y0(r))}const mY={"":t=>t,x:t=>t.x,y:t=>t.y};function BEe(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function REe(t){const e=BEe(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function yI(t,e){return(mY[e]||(mY[e]=REe(e)))(t)}function Lw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yf=t=>typeof t<"u",gg=t=>typeof t=="function",pY=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function kEe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ti=Math.PI,Ms=2*Ti,F0=Number.POSITIVE_INFINITY,VEe=Ti/180,Jr=Ti/2,Lg=Ti/4,AY=Ti*2/3,El=Math.log10,tg=Math.sign;function Ab(t,e,n){return Math.abs(t-e)<n}function bY(t){const e=Math.round(t);t=Ab(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(El(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function wEe(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,o)=>r-o).pop(),e}function M0(t){return!isNaN(parseFloat(t))&&isFinite(t)}function WEe(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Fj(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Hl(t){return t*(Ti/180)}function _w(t){return t*(180/Ti)}function yY(t){if(!hi(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xEe(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*Ti&&(o+=Ms),{angle:o,distance:r}}function XEe(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ys(t){return(t%Ms+Ms)%Ms}function JEe(t,e,n,i){const r=ys(t),o=ys(e),s=ys(n),a=ys(o-r),l=ys(s-r),g=ys(r-o),u=ys(r-s);return r===o||r===s||i&&o===s||a>l&&g<u}function $o(t,e,n){return Math.max(e,Math.min(n,t))}function EEe(t){return $o(t,-32768,32767)}function Zd(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Dw(t,e,n){n=n||(s=>t[s]<e);let i=t.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,n(o)?r=o:i=o;return{lo:r,hi:i}}const P1=(t,e,n,i)=>Dw(t,n,i?r=>{const o=t[r][e];return o<n||o===n&&t[r+1][e]===n}:r=>t[r][e]<n),HEe=(t,e,n)=>Dw(t,n,i=>t[i][e]>=n);function NEe(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Mj=["push","pop","shift","splice","unshift"];function YEe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Mj.forEach(n=>{const i="_onData"+Lw(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const s=r.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),s}})})}function vY(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Mj.forEach(o=>{delete t[o]}),delete t._chartjs)}function Tj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Lj=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function _j(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Lj.call(window,()=>{i=!1,t.apply(e,n)}))}}function FEe(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Dj=t=>t==="start"?"left":t==="end"?"right":"center",Vr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,MEe=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,lA=t=>t===0||t===1,SY=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ms/n)),ZY=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ms/n)+1,Th={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Jr)+1,easeOutSine:t=>Math.sin(t*Jr),easeInOutSine:t=>-.5*(Math.cos(Ti*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>lA(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>lA(t)?t:SY(t,.075,.3),easeOutElastic:t=>lA(t)?t:ZY(t,.075,.3),easeInOutElastic(t){return lA(t)?t:t<.5?.5*SY(t*2,.1125,.45):.5+.5*ZY(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Th.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Th.easeInBounce(t*2)*.5:Th.easeOutBounce(t*2-1)*.5+.5};function Kj(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function GY(t){return Kj(t)?t:new Hf(t)}function YG(t){return Kj(t)?t:new Hf(t).saturate(.5).darken(.1).hexString()}const TEe=["x","y","borderWidth","radius","tension"],LEe=["color","borderColor","backgroundColor"];function _Ee(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:LEe},numbers:{type:"number",properties:TEe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function DEe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const BY=new Map;function KEe(t,e){e=e||{};const n=t+JSON.stringify(e);let i=BY.get(n);return i||(i=new Intl.NumberFormat(t,e),BY.set(n,i)),i}function Kw(t,e,n){return KEe(e,n).format(t)}const zj={values(t){return Jn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=zEe(t,n)}const s=El(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Kw(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(El(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?zj.numeric.call(this,t,e,n):""}};function zEe(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var zv={formatters:zj};function PEe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zc=Object.create(null),U1=Object.create(null);function Lh(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const o=n[i];t=t[o]||(t[o]=Object.create(null))}return t}function FG(t,e,n){return typeof e=="string"?Nf(Lh(t,e),n):Nf(Lh(t,""),e)}class UEe{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>YG(r.backgroundColor),this.hoverBorderColor=(i,r)=>YG(r.borderColor),this.hoverColor=(i,r)=>YG(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return FG(this,e,n)}get(e){return Lh(this,e)}describe(e,n){return FG(U1,e,n)}override(e,n){return FG(zc,e,n)}route(e,n,i,r){const o=Lh(this,e),s=Lh(this,i),a="_"+n;Object.defineProperties(o,{[a]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],g=s[r];return Ft(l)?Object.assign({},g,l):Ut(l,g)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Dn=new UEe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_Ee,DEe,PEe]);function jEe(t){return!t||qt(t.size)||qt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function T0(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function OEe(t,e,n,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const a=n.length;let l,g,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Jn(d))s=T0(t,r,o,s,d);else if(Jn(d))for(g=0,u=d.length;g<u;g++)h=d[g],h!=null&&!Jn(h)&&(s=T0(t,r,o,s,h));t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[o[l]];o.splice(0,f)}return s}function _g(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function RY(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function kY(t,e,n,i){Pj(t,e,n,i,null)}function Pj(t,e,n,i,r){let o,s,a,l,g,u,d,h;const f=e.pointStyle,A=e.rotation,p=e.radius;let y=(A||0)*VEe;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(y),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,p,0,0,Ms):t.arc(n,i,p,0,Ms),t.closePath();break;case"triangle":u=r?r/2:p,t.moveTo(n+Math.sin(y)*u,i-Math.cos(y)*p),y+=AY,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*p),y+=AY,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*p),t.closePath();break;case"rectRounded":g=p*.516,l=p-g,s=Math.cos(y+Lg)*l,d=Math.cos(y+Lg)*(r?r/2-g:l),a=Math.sin(y+Lg)*l,h=Math.sin(y+Lg)*(r?r/2-g:l),t.arc(n-d,i-a,g,y-Ti,y-Jr),t.arc(n+h,i-s,g,y-Jr,y),t.arc(n+d,i+a,g,y,y+Jr),t.arc(n-h,i+s,g,y+Jr,y+Ti),t.closePath();break;case"rect":if(!A){l=Math.SQRT1_2*p,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}y+=Lg;case"rectRot":d=Math.cos(y)*(r?r/2:p),s=Math.cos(y)*p,a=Math.sin(y)*p,h=Math.sin(y)*(r?r/2:p),t.moveTo(n-d,i-a),t.lineTo(n+h,i-s),t.lineTo(n+d,i+a),t.lineTo(n-h,i+s),t.closePath();break;case"crossRot":y+=Lg;case"cross":d=Math.cos(y)*(r?r/2:p),s=Math.cos(y)*p,a=Math.sin(y)*p,h=Math.sin(y)*(r?r/2:p),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"star":d=Math.cos(y)*(r?r/2:p),s=Math.cos(y)*p,a=Math.sin(y)*p,h=Math.sin(y)*(r?r/2:p),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s),y+=Lg,d=Math.cos(y)*(r?r/2:p),s=Math.cos(y)*p,a=Math.sin(y)*p,h=Math.sin(y)*(r?r/2:p),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"line":s=r?r/2:Math.cos(y)*p,a=Math.sin(y)*p,t.moveTo(n-s,i-a),t.lineTo(n+s,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(r?r/2:p),i+Math.sin(y)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function zw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Pw(t){t.restore()}function QEe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $Ee(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,g=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+g)/2:g;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function qEe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function vI(t,e,n,i,r,o={}){const s=Jn(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,g;for(t.save(),t.font=r.string,QEe(t,o),l=0;l<s.length;++l)g=s[l],o.backdrop&&qEe(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),qt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(g,n,i,o.maxWidth)),t.fillText(g,n,i,o.maxWidth),$Ee(t,n,i,g,o),i+=Number(r.lineHeight);t.restore()}function Ff(t,e){const{x:n,y:i,w:r,h:o,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,1.5*Ti,Ti,!0),t.lineTo(n,i+o-s.bottomLeft),t.arc(n+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,Ti,Jr,!0),t.lineTo(n+r-s.bottomRight,i+o),t.arc(n+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,Jr,0,!0),t.lineTo(n+r,i+s.topRight),t.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-Jr,!0),t.lineTo(n+s.topLeft,i)}const e5e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,t5e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function n5e(t,e){const n=(""+t).match(e5e);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const i5e=t=>+t||0;function Uj(t,e){const n={},i=Ft(e),r=i?Object.keys(e):e,o=Ft(t)?i?s=>Ut(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of r)n[s]=i5e(o(s));return n}function jj(t){return Uj(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Bc(t){return Uj(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ir(t){const e=jj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ki(t,e){t=t||{},e=e||Dn.font;let n=Ut(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ut(t.style,e.style);i&&!(""+i).match(t5e)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ut(t.family,e.family),lineHeight:n5e(Ut(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ut(t.weight,e.weight),string:""};return r.string=jEe(r),r}function gA(t,e,n,i){let r=!0,o,s,a;for(o=0,s=t.length;o<s;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&Jn(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function r5e(t,e,n){const{min:i,max:r}=t,o=SEe(e,(r-i)/2),s=(a,l)=>n&&a===0?0:a+l;return{min:s(i,-Math.abs(o)),max:s(r,o)}}function du(t,e){return Object.assign(Object.create(t),e)}function Uw(t,e=[""],n,i,r=()=>t[0]){const o=n||t;typeof i>"u"&&(i=qj("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:r,override:a=>Uw([a,...t],e,o,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Qj(a,l,()=>d5e(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return wY(a).includes(l)},ownKeys(a){return wY(a)},set(a,l,g){const u=a._storage||(a._storage=r());return a[l]=u[l]=g,delete a._keys,!0}})}function SI(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Oj(t,i),setContext:o=>SI(t,o,n,i),override:o=>SI(t.override(o),e,n,i)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete t[s],!0},get(o,s,a){return Qj(o,s,()=>s5e(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(o,s,a){return t[s]=a,delete o[s],!0}})}function Oj(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:gg(n)?n:()=>n,isIndexable:gg(i)?i:()=>i}}const o5e=(t,e)=>t?t+Lw(e):e,jw=(t,e)=>Ft(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Qj(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function s5e(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=t;let a=i[e];return gg(a)&&s.isScriptable(e)&&(a=a5e(e,a,t,n)),Jn(a)&&a.length&&(a=l5e(e,a,t,s.isIndexable)),jw(e,a)&&(a=SI(a,r,o&&o[e],s)),a}function a5e(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,s||i);return a.delete(t),jw(t,l)&&(l=Ow(r._scopes,r,t,l)),l}function l5e(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=n;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(Ft(e[0])){const l=e,g=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=Ow(g,r,t,u);e.push(SI(d,o,s&&s[t],a))}}return e}function $j(t,e,n){return gg(t)?t(e,n):t}const g5e=(t,e)=>t===!0?e:typeof t=="string"?yI(e,t):void 0;function c5e(t,e,n,i,r){for(const o of e){const s=g5e(n,o);if(s){t.add(s);const a=$j(s._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(s===!1&&typeof i<"u"&&n!==i)return null}return!1}function Ow(t,e,n,i){const r=e._rootScopes,o=$j(e._fallback,n,i),s=[...t,...r],a=new Set;a.add(i);let l=VY(a,s,n,o||n,i);return l===null||typeof o<"u"&&o!==n&&(l=VY(a,s,o,l,i),l===null)?!1:Uw(Array.from(a),[""],r,o,()=>u5e(e,n,i))}function VY(t,e,n,i,r){for(;n;)n=c5e(t,e,n,i,r);return n}function u5e(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Jn(r)&&Ft(n)?n:r||{}}function d5e(t,e,n,i){let r;for(const o of e)if(r=qj(o5e(o,t),n),typeof r<"u")return jw(t,r)?Ow(n,i,t,r):r}function qj(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function wY(t){let e=t._keys;return e||(e=t._keys=I5e(t._scopes)),e}function I5e(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function Qw(){return typeof window<"u"&&typeof document<"u"}function $w(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function L0(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Pv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function C5e(t,e){return Pv(t).getPropertyValue(e)}const h5e=["top","right","bottom","left"];function Rc(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=h5e[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const f5e=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function m5e(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:o}=i;let s=!1,a,l;if(f5e(r,o,t.target))a=r,l=o;else{const g=e.getBoundingClientRect();a=i.clientX-g.left,l=i.clientY-g.top,s=!0}return{x:a,y:l,box:s}}function qg(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Pv(n),o=r.boxSizing==="border-box",s=Rc(r,"padding"),a=Rc(r,"border","width"),{x:l,y:g,box:u}=m5e(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:A}=e;return o&&(f-=s.width+a.width,A-=s.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((g-h)/A*n.height/i)}}function p5e(t,e,n){let i,r;if(e===void 0||n===void 0){const o=t&&$w(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const s=o.getBoundingClientRect(),a=Pv(o),l=Rc(a,"border","width"),g=Rc(a,"padding");e=s.width-g.width-l.width,n=s.height-g.height-l.height,i=L0(a.maxWidth,o,"clientWidth"),r=L0(a.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:i||F0,maxHeight:r||F0}}const cA=t=>Math.round(t*10)/10;function A5e(t,e,n,i){const r=Pv(t),o=Rc(r,"margin"),s=L0(r.maxWidth,t,"clientWidth")||F0,a=L0(r.maxHeight,t,"clientHeight")||F0,l=p5e(t,e,n);let{width:g,height:u}=l;if(r.boxSizing==="content-box"){const h=Rc(r,"border","width"),f=Rc(r,"padding");g-=f.width+h.width,u-=f.height+h.height}return g=Math.max(0,g-o.width),u=Math.max(0,i?g/i:u-o.height),g=cA(Math.min(g,s,l.maxWidth)),u=cA(Math.min(u,a,l.maxHeight)),g&&!u&&(u=cA(g/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,g=cA(Math.floor(u*i))),{width:g,height:u}}function WY(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||s.height!==r||s.width!==o?(t.currentDevicePixelRatio=i,s.height=r,s.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const b5e=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Qw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xY(t,e){const n=C5e(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const y5e=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},v5e=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Pd(t,e,n){return t?y5e(e,n):v5e()}function e4(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function t4(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class S5e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const o=n.listeners[r],s=n.duration;o.forEach(a=>a({chart:e,initial:n.initial,numSteps:s,currentStep:Math.min(i-n.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Lj.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ma=new S5e;const XY="transparent",Z5e={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=GY(t||XY),r=i.valid&&GY(e||XY);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class G5e{constructor(e,n,i,r){const o=n[i];r=gA([e.to,r,o,e.from]);const s=gA([e.from,o,r]);this._active=!0,this._fn=e.fn||Z5e[e.type||typeof s],this._easing=Th[e.easing]||Th.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=gA([e.to,n,r,e.from]),this._from=gA([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to;let l;if(this._active=o!==a&&(s||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=o;return}l=n/i%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class n4{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ft(e))return;const n=Object.keys(Dn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!Ft(o))return;const s={};for(const a of n)s[a]=o[a];(Jn(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,s)})})}_animateOptions(e,n){const i=n.options,r=R5e(e,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&B5e(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,n){const i=this._properties,r=[],o=e.$animations||(e.$animations={}),s=Object.keys(n),a=Date.now();let l;for(l=s.length-1;l>=0;--l){const g=s[l];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[g];let d=o[g];const h=i.get(g);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[g]=u;continue}o[g]=d=new G5e(h,e,g,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ma.add(this._chart,i),!0}}function B5e(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const o=t[i[r]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function R5e(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function JY(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function k5e(t,e,n){if(n===!1)return!1;const i=JY(t,n),r=JY(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function V5e(t){let e,n,i,r;return Ft(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function i4(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function EY(t,e,n,i={}){const r=t.keys,o=i.mode==="single";let s,a,l,g;if(e!==null){for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===n){if(i.all)continue;break}g=t.values[l],hi(g)&&(o||e===0||tg(e)===tg(g))&&(e+=g)}return e}}function w5e(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",s=Object.keys(t),a=new Array(s.length);let l,g,u;for(l=0,g=s.length;l<g;++l)u=s[l],a[l]={[r]:u,[o]:t[u]};return a}function HY(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function W5e(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function x5e(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function X5e(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function NY(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const o=t[r.index];if(n&&o>0||!n&&o<0)return r.index}return null}function YY(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=i,l=o.axis,g=s.axis,u=W5e(o,s,i),d=e.length;let h;for(let f=0;f<d;++f){const A=e[f],{[l]:p,[g]:y}=A,v=A._stacks||(A._stacks={});h=v[g]=X5e(r,u,p),h[a]=y,h._top=NY(h,s,!0,i.type),h._bottom=NY(h,s,!1,i.type);const S=h._visualValues||(h._visualValues={});S[a]=y}}function MG(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function J5e(t,e){return du(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function E5e(t,e,n){return du(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function TC(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const o=r._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}const TG=t=>t==="reset"||t==="none",FY=(t,e)=>e?t:Object.assign({},t),H5e=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:i4(n,!0),values:null};class _h{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=HY(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&TC(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,h,f,A)=>d==="x"?h:d==="r"?A:f,o=n.xAxisID=Ut(i.xAxisID,MG(e,"x")),s=n.yAxisID=Ut(i.yAxisID,MG(e,"y")),a=n.rAxisID=Ut(i.rAxisID,MG(e,"r")),l=n.indexAxis,g=n.iAxisID=r(l,o,s,a),u=n.vAxisID=r(l,s,o,a);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(s),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&vY(this._data,this),e._stacked&&TC(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Ft(n)){const r=this._cachedMeta;this._data=w5e(n,r)}else if(i!==n){if(i){vY(i,this);const r=this._cachedMeta;TC(r),r._parsed=[]}n&&Object.isExtensible(n)&&YEe(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=n._stacked;n._stacked=HY(n.vScale,n),n.stack!==i.stack&&(r=!0,TC(n),n.stack=i.stack),this._resyncElements(e),(r||o!==n._stacked)&&YY(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:s}=i,a=o.axis;let l=e===0&&n===r.length?!0:i._sorted,g=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{Jn(r[e])?h=this.parseArrayData(i,r,e,n):Ft(r[e])?h=this.parseObjectData(i,r,e,n):h=this.parsePrimitiveData(i,r,e,n);const f=()=>d[a]===null||g&&d[a]<g[a];for(u=0;u<n;++u)i._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),g=d);i._sorted=l}s&&YY(this,h)}parsePrimitiveData(e,n,i,r){const{iScale:o,vScale:s}=e,a=o.axis,l=s.axis,g=o.getLabels(),u=o===s,d=new Array(r);let h,f,A;for(h=0,f=r;h<f;++h)A=h+i,d[h]={[a]:u||o.parse(g[A],A),[l]:s.parse(n[A],A)};return d}parseArrayData(e,n,i,r){const{xScale:o,yScale:s}=e,a=new Array(r);let l,g,u,d;for(l=0,g=r;l<g;++l)u=l+i,d=n[u],a[l]={x:o.parse(d[0],u),y:s.parse(d[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:o,yScale:s}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,g=new Array(r);let u,d,h,f;for(u=0,d=r;u<d;++u)h=u+i,f=n[h],g[u]={x:o.parse(yI(f,a),h),y:s.parse(yI(f,l),h)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,o=this._cachedMeta,s=n[e.axis],a={keys:i4(r,!0),values:n._stacks[e.axis]._visualValues};return EY(a,s,o.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const o=i[n.axis];let s=o===null?NaN:o;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,s=EY(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&e===i.iScale,s=r.length,a=this._getOtherScale(e),l=H5e(n,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=x5e(a);let h,f;function A(){f=r[h];const p=f[a.axis];return!hi(f[e.axis])||u>p||d<p}for(h=0;h<s&&!(!A()&&(this.updateRangeFromParsed(g,e,f,l),o));++h);if(o){for(h=s-1;h>=0;--h)if(!A()){this.updateRangeFromParsed(g,e,f,l);break}}return g}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,o,s;for(r=0,o=n.length;r<o;++r)s=n[r][e.axis],hi(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=V5e(Ut(this.options.clip,k5e(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],o=n.chartArea,s=[],a=this._drawStart||0,l=this._drawCount||r.length-a,g=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const d=r[u];d.hidden||(d.active&&g?s.push(d):d.draw(e,o))}for(u=0;u<s.length;++u)s[u].draw(e,o)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];o=s.$context||(s.$context=E5e(this.getContext(),e,s)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=J5e(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",o=this._cachedDataOpts,s=e+"-"+n,a=o[s],l=this.enableOptionSharing&&Yf(i);if(a)return FY(a,l);const g=this.chart.config,u=g.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=g.getOptionScopes(this.getDataset(),u),f=Object.keys(Dn.elements[e]),A=()=>this.getContext(i,r,n),p=g.resolveNamedOptions(h,f,A,d);return p.$shared&&(p.$shared=l,o[s]=Object.freeze(FY(p,l))),p}_resolveAnimations(e,n,i){const r=this.chart,o=this._cachedDataOpts,s=`animation-${n}`,a=o[s];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,n))}const g=new n4(r,l&&l.animations);return l&&l._cacheable&&(o[s]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||TG(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,o=this.getSharedOptions(i),s=this.includeOptions(n,o)||o!==r;return this.updateSharedOptions(o,n,i),{sharedOptions:o,includeOptions:s}}updateElement(e,n,i,r){TG(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!TG(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const o=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,g]of this._syncList)this[a](l,g);this._syncList=[];const r=i.length,o=n.length,s=Math.min(o,r);s&&this.parse(0,s),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,n,i=!0){const r=this._cachedMeta,o=r.data,s=e+n;let a;const l=g=>{for(g.length+=n,a=g.length-1;a>=s;a--)g[a]=g[a-n]};for(l(o),a=e;a<s;++a)o[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(o,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&TC(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}St(_h,"defaults",{}),St(_h,"datasetElementType",null),St(_h,"dataElementType",null);function N5e(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,o=n.length;r<o;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=Tj(i.sort((r,o)=>r-o))}return t._cache.$bar}function Y5e(t){const e=t.iScale,n=N5e(e,t.type);let i=e._length,r,o,s,a;const l=()=>{s===32767||s===-32768||(Yf(a)&&(i=Math.min(i,Math.abs(s-a)||i)),a=s)};for(r=0,o=n.length;r<o;++r)s=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,o=e.ticks.length;r<o;++r)s=e.getPixelForTick(r),l();return i}function F5e(t,e,n,i){const r=n.barThickness;let o,s;return qt(r)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=r*i,s=1),{chunk:o/i,ratio:s,start:e.pixels[t]-o/2}}function M5e(t,e,n,i){const r=e.pixels,o=r[t];let s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);const g=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/i,ratio:n.barPercentage,start:g}}function T5e(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),s=Math.min(r,o),a=Math.max(r,o);let l=s,g=a;Math.abs(s)>Math.abs(a)&&(l=a,g=s),e[n.axis]=g,e._custom={barStart:l,barEnd:g,start:r,end:o,min:s,max:a}}function r4(t,e,n,i){return Jn(t)?T5e(t,e,n,i):e[n.axis]=n.parse(t,i),e}function MY(t,e,n,i){const r=t.iScale,o=t.vScale,s=r.getLabels(),a=r===o,l=[];let g,u,d,h;for(g=n,u=n+i;g<u;++g)h=e[g],d={},d[r.axis]=a||r.parse(s[g],g),l.push(r4(h,d,o,g));return l}function LG(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function L5e(t,e,n){return t!==0?tg(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function _5e(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}function D5e(t,e,n,i){let r=e.borderSkipped;const o={};if(!r){t.borderSkipped=o;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:a,reverse:l,top:g,bottom:u}=_5e(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=g:(n._bottom||0)===i?r=u:(o[TY(u,s,a,l)]=!0,r=g)),o[TY(r,s,a,l)]=!0,t.borderSkipped=o}function TY(t,e,n,i){return i?(t=K5e(t,e,n),t=LY(t,n,e)):t=LY(t,e,n),t}function K5e(t,e,n){return t===e?n:t===n?e:t}function LY(t,e,n){return t==="start"?e:t==="end"?n:t}function z5e(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class bb extends _h{parsePrimitiveData(e,n,i,r){return MY(e,n,i,r)}parseArrayData(e,n,i,r){return MY(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:o,vScale:s}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,g=o.axis==="x"?a:l,u=s.axis==="x"?a:l,d=[];let h,f,A,p;for(h=i,f=i+r;h<f;++h)p=n[h],A={},A[o.axis]=o.parse(yI(p,g),h),d.push(r4(yI(p,u),A,s,h));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const o=i._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,o=this.getParsed(e),s=o._custom,a=LG(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const o=r==="reset",{index:s,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),g=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const A=this.getParsed(f),p=o||qt(A[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),y=this._calculateBarIndexPixels(f,u),v=(A._stacks||{})[a.axis],S={horizontal:g,base:p.base,enableBorderRadius:!v||LG(A._custom)||s===v._top||s===v._bottom,x:g?p.head:y.center,y:g?y.center:p.head,height:g?y.size:Math.abs(p.size),width:g?Math.abs(p.size):y.size};h&&(S.options=d||this.resolveDataElementOptions(f,e[f].active?"active":r));const Z=S.options||e[f].options;D5e(S,Z,v,s),z5e(S,Z,u.ratio),this.updateElement(e[f],f,S,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,s=[],a=l=>{const g=l.controller.getParsed(n),u=g&&g[l.vScale.axis];if(qt(u)||isNaN(u))return!0};for(const l of r)if(!(n!==void 0&&a(l))&&((o===!1||s.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&s.push(l.stack),l.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),o=n!==void 0?r.indexOf(n):-1;return o===-1?r.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let o,s;for(o=0,s=n.data.length;o<s;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const a=e.barThickness;return{min:a||Y5e(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:o,minBarLength:s}}=this,a=o||0,l=this.getParsed(e),g=l._custom,u=LG(g);let d=l[n.axis],h=0,f=i?this.applyStack(n,l,i):d,A,p;f!==d&&(h=f-d,f=d),u&&(d=g.barStart,f=g.barEnd-g.barStart,d!==0&&tg(d)!==tg(g.barEnd)&&(h=0),h+=d);const y=!qt(o)&&!u?o:h;let v=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?A=n.getPixelForValue(h+f):A=v,p=A-v,Math.abs(p)<s){p=L5e(p,n,a)*s,d===a&&(v-=p/2);const S=n.getPixelForDecimal(0),Z=n.getPixelForDecimal(1),R=Math.min(S,Z),W=Math.max(S,Z);v=Math.max(Math.min(v,W),R),A=v+p,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(A)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const S=tg(p)*n.getLineWidthForValue(a)/2;v+=S,p-=S}return{size:p,base:v,head:A,center:A+p/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,o=r.skipNull,s=Ut(r.maxBarThickness,1/0);let a,l;if(n.grouped){const g=o?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?M5e(e,n,r,g):F5e(e,n,r,g),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(s,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(s,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[n.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}St(bb,"id","bar"),St(bb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),St(bb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Dg(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qw{constructor(e){St(this,"options");this.options=e||{}}static override(e){Object.assign(qw.prototype,e)}init(){}formats(){return Dg()}parse(){return Dg()}format(){return Dg()}add(){return Dg()}diff(){return Dg()}startOf(){return Dg()}endOf(){return Dg()}}var P5e={_date:qw};function U5e(t,e,n,i){const{controller:r,data:o,_sorted:s}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&s&&o.length){const l=a._reversePixels?HEe:P1;if(i){if(r._sharedOptions){const g=o[0],u=typeof g.getRange=="function"&&g.getRange(e);if(u){const d=l(o,e,n-u),h=l(o,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return l(o,e,n)}return{lo:0,hi:o.length-1}}function wm(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let a=0,l=o.length;a<l;++a){const{index:g,data:u}=o[a],{lo:d,hi:h}=U5e(o[a],e,s,r);for(let f=d;f<=h;++f){const A=u[f];A.skip||i(A,g,f)}}}function j5e(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const o=e?Math.abs(i.x-r.x):0,s=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function _G(t,e,n,i,r){const o=[];return!r&&!t.isPointInArea(e)||wm(t,n,e,function(a,l,g){!r&&!Gd(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&o.push({element:a,datasetIndex:l,index:g})},!0),o}function O5e(t,e,n,i){let r=[];function o(s,a,l){const{startAngle:g,endAngle:u}=s.getProps(["startAngle","endAngle"],i),{angle:d}=xEe(s,{x:e.x,y:e.y});JEe(d,g,u)&&r.push({element:s,datasetIndex:a,index:l})}return wm(t,n,e,o),r}function Q5e(t,e,n,i,r,o){let s=[];const a=j5e(n);let l=Number.POSITIVE_INFINITY;function g(u,d,h){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const A=u.getCenterPoint(r);if(!(!!o||t.isPointInArea(A))&&!f)return;const y=a(e,A);y<l?(s=[{element:u,datasetIndex:d,index:h}],l=y):y===l&&s.push({element:u,datasetIndex:d,index:h})}return wm(t,n,e,g),s}function DG(t,e,n,i,r,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!i?O5e(t,e,n,r):Q5e(t,e,n,i,r,o)}function _Y(t,e,n,i,r){const o=[],s=n==="x"?"inXRange":"inYRange";let a=!1;return wm(t,n,e,(l,g,u)=>{l[s](e[n],r)&&(o.push({element:l,datasetIndex:g,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:o}var $5e={evaluateInteractionItems:wm,modes:{index(t,e,n,i){const r=qg(e,t),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?_G(t,r,o,i,s):DG(t,r,o,!1,i,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(g=>{const u=a[0].index,d=g.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:g.index,index:u})}),l):[]},dataset(t,e,n,i){const r=qg(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?_G(t,r,o,i,s):DG(t,r,o,!1,i,s);if(a.length>0){const l=a[0].datasetIndex,g=t.getDatasetMeta(l).data;a=[];for(let u=0;u<g.length;++u)a.push({element:g[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=qg(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return _G(t,r,o,i,s)},nearest(t,e,n,i){const r=qg(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return DG(t,r,o,n.intersect,i,s)},x(t,e,n,i){const r=qg(e,t);return _Y(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=qg(e,t);return _Y(t,r,"y",n.intersect,i)}}};const o4=["left","top","right","bottom"];function LC(t,e){return t.filter(n=>n.pos===e)}function DY(t,e){return t.filter(n=>o4.indexOf(n.pos)===-1&&n.box.axis===e)}function _C(t,e){return t.sort((n,i)=>{const r=e?i:n,o=e?n:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function q5e(t){const e=[];let n,i,r,o,s,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:o,options:{stack:s,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}function eHe(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:o}=n;if(!i||!o4.includes(r))continue;const s=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function tHe(t,e){const n=eHe(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:l}=a.box,g=n[a.stack],u=g&&a.stackWeight/g.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function nHe(t){const e=q5e(t),n=_C(e.filter(g=>g.box.fullSize),!0),i=_C(LC(e,"left"),!0),r=_C(LC(e,"right")),o=_C(LC(e,"top"),!0),s=_C(LC(e,"bottom")),a=DY(e,"x"),l=DY(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:LC(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}function KY(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function s4(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function iHe(t,e,n,i){const{pos:r,box:o}=n,s=t.maxPadding;if(!Ft(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?o.height:o.width),n.size=d.size/d.count,t[r]+=n.size}o.getPadding&&s4(s,o.getPadding());const a=Math.max(0,e.outerWidth-KY(s,t,"left","right")),l=Math.max(0,e.outerHeight-KY(s,t,"top","bottom")),g=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:g,other:u}:{same:u,other:g}}function rHe(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function oHe(t,e){const n=e.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(e[s],n[s])}),o}return i(t?["left","right"]:["top","bottom"])}function uh(t,e,n,i){const r=[];let o,s,a,l,g,u;for(o=0,s=t.length,g=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,oHe(a.horizontal,e));const{same:d,other:h}=iHe(e,n,a,i);g|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return g&&uh(r,e,n,i)||u}function uA(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function zY(t,e,n,i){const r=n.padding;let{x:o,y:s}=e;for(const a of t){const l=a.box,g=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/g.weight||1;if(a.horizontal){const d=e.w*u,h=g.size||l.height;Yf(g.start)&&(s=g.start),l.fullSize?uA(l,r.left,s,n.outerWidth-r.right-r.left,h):uA(l,e.left+g.placed,s,d,h),g.start=s,g.placed+=d,s=l.bottom}else{const d=e.h*u,h=g.size||l.width;Yf(g.start)&&(o=g.start),l.fullSize?uA(l,o,r.top,h,n.outerHeight-r.bottom-r.top):uA(l,o,e.top+g.placed,h,d),g.start=o,g.placed+=d,o=l.right}}e.x=o,e.y=s}var Nl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=ir(t.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(n-r.height,0),a=nHe(t.boxes),l=a.vertical,g=a.horizontal;Ot(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,y)=>y.box.options&&y.box.options.display===!1?p:p+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},r);s4(h,ir(i));const f=Object.assign({maxPadding:h,w:o,h:s,x:r.left,y:r.top},r),A=tHe(l.concat(g),d);uh(a.fullSize,f,d,A),uh(l,f,d,A),uh(g,f,d,A)&&uh(l,f,d,A),rHe(f),zY(a.leftAndTop,f,d,A),f.x+=f.w,f.y+=f.h,zY(a.rightAndBottom,f,d,A),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ot(a.chartArea,p=>{const y=p.box;Object.assign(y,t.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class a4{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class sHe extends a4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yb="$chartjs",aHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},PY=t=>t===null||t==="";function lHe(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[yb]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",PY(r)){const o=xY(t,"width");o!==void 0&&(t.width=o)}if(PY(i))if(t.style.height==="")t.height=t.width/(e||2);else{const o=xY(t,"height");o!==void 0&&(t.height=o)}return t}const l4=b5e?{passive:!0}:!1;function gHe(t,e,n){t&&t.addEventListener(e,n,l4)}function cHe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,l4)}function uHe(t,e){const n=aHe[t.type]||t.type,{x:i,y:r}=qg(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function _0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function dHe(t,e,n){const i=t.canvas,r=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||_0(a.addedNodes,i),s=s&&!_0(a.removedNodes,i);s&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function IHe(t,e,n){const i=t.canvas,r=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||_0(a.removedNodes,i),s=s&&!_0(a.addedNodes,i);s&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Mf=new Map;let UY=0;function g4(){const t=window.devicePixelRatio;t!==UY&&(UY=t,Mf.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function CHe(t,e){Mf.size||window.addEventListener("resize",g4),Mf.set(t,e)}function hHe(t){Mf.delete(t),Mf.size||window.removeEventListener("resize",g4)}function fHe(t,e,n){const i=t.canvas,r=i&&$w(i);if(!r)return;const o=_j((a,l)=>{const g=r.clientWidth;n(a,l),g<r.clientWidth&&n()},window),s=new ResizeObserver(a=>{const l=a[0],g=l.contentRect.width,u=l.contentRect.height;g===0&&u===0||o(g,u)});return s.observe(r),CHe(t,o),s}function KG(t,e,n){n&&n.disconnect(),e==="resize"&&hHe(t)}function mHe(t,e,n){const i=t.canvas,r=_j(o=>{t.ctx!==null&&n(uHe(o,t))},t);return gHe(i,e,r),r}class pHe extends a4{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(lHe(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[yb])return!1;const i=n[yb].initial;["height","width"].forEach(o=>{const s=i[o];qt(s)?n.removeAttribute(o):n.setAttribute(o,s)});const r=i.style||{};return Object.keys(r).forEach(o=>{n.style[o]=r[o]}),n.width=n.width,delete n[yb],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),s={attach:dHe,detach:IHe,resize:fHe}[n]||mHe;r[n]=s(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:KG,detach:KG,resize:KG}[n]||cHe)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return A5e(e,n,i,r)}isAttached(e){const n=e&&$w(e);return!!(n&&n.isConnected)}}function AHe(t){return!Qw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?sHe:pHe}var JA;let Wm=(JA=class{constructor(){St(this,"x");St(this,"y");St(this,"active",!1);St(this,"options");St(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return M0(this.x)&&M0(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}},St(JA,"defaults",{}),St(JA,"defaultRoutes"),JA);function bHe(t,e){const n=t.options.ticks,i=yHe(t),r=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?SHe(e):[],s=o.length,a=o[0],l=o[s-1],g=[];if(s>r)return ZHe(e,g,o,s/r),g;const u=vHe(o,e,r);if(s>0){let d,h;const f=s>1?Math.round((l-a)/(s-1)):null;for(dA(e,g,u,qt(f)?0:a-f,a),d=0,h=s-1;d<h;d++)dA(e,g,u,o[d],o[d+1]);return dA(e,g,u,l,qt(f)?e.length:l+f),g}return dA(e,g,u),g}function yHe(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function vHe(t,e,n){const i=GHe(t),r=e.length/n;if(!i)return Math.max(r,1);const o=wEe(i);for(let s=0,a=o.length-1;s<a;s++){const l=o[s];if(l>r)return l}return Math.max(r,1)}function SHe(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function ZHe(t,e,n,i){let r=0,o=n[0],s;for(i=Math.ceil(i),s=0;s<t.length;s++)s===o&&(e.push(t[s]),r++,o=n[r*i])}function dA(t,e,n,i,r){const o=Ut(i,0),s=Math.min(Ut(r,t.length),t.length);let a=0,l,g,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=o;u<0;)a++,u=Math.round(o+a*n);for(g=Math.max(o,0);g<s;g++)g===u&&(e.push(t[g]),a++,u=Math.round(o+a*n))}function GHe(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const BHe=t=>t==="left"?"right":t==="right"?"left":t,jY=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,OY=(t,e)=>Math.min(e||t,t);function QY(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function RHe(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),g;if(!(n&&(i===1?g=Math.max(l-o,s-l):e===0?g=(t.getPixelForTick(1)-l)/2:g=(l-t.getPixelForTick(r-1))/2,l+=r<e?g:-g,l<o-a||l>s+a)))return l}function kHe(t,e){Ot(t,n=>{const i=n.gc,r=i.length/2;let o;if(r>e){for(o=0;o<r;++o)delete n.data[i[o]];i.splice(0,r)}})}function DC(t){return t.drawTicks?t.tickLength:0}function $Y(t,e){if(!t.display)return 0;const n=ki(t.font,e),i=ir(t.padding);return(Jn(t.text)?t.text.length:1)*n.lineHeight+i.height}function VHe(t,e){return du(t,{scale:e,type:"scale"})}function wHe(t,e,n){return du(t,{tick:n,index:e,type:"tick"})}function WHe(t,e,n){let i=Dj(t);return(n&&e!=="right"||!n&&e==="right")&&(i=BHe(i)),i}function xHe(t,e,n,i){const{top:r,left:o,bottom:s,right:a,chart:l}=t,{chartArea:g,scales:u}=l;let d=0,h,f,A;const p=s-r,y=a-o;if(t.isHorizontal()){if(f=Vr(i,o,a),Ft(n)){const v=Object.keys(n)[0],S=n[v];A=u[v].getPixelForValue(S)+p-e}else n==="center"?A=(g.bottom+g.top)/2+p-e:A=jY(t,n,e);h=a-o}else{if(Ft(n)){const v=Object.keys(n)[0],S=n[v];f=u[v].getPixelForValue(S)-y+e}else n==="center"?f=(g.left+g.right)/2-y+e:f=jY(t,n,e);A=Vr(i,s,r),d=n==="left"?-Jr:Jr}return{titleX:f,titleY:A,maxWidth:h,rotation:d}}class Iu extends Wm{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=wr(e,Number.POSITIVE_INFINITY),n=wr(n,Number.NEGATIVE_INFINITY),i=wr(i,Number.POSITIVE_INFINITY),r=wr(r,Number.NEGATIVE_INFINITY),{min:wr(e,i),max:wr(n,r),minDefined:hi(e),maxDefined:hi(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,g=a.length;l<g;++l)s=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,s.min)),o||(i=Math.max(i,s.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:wr(n,wr(i,n)),max:wr(i,wr(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){In(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r5e(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?QY(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=bHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){In(this.options.afterUpdate,[this])}beforeSetDimensions(){In(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){In(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),In(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){In(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=In(n.callback,[o.value,i,e],this)}afterTickToLabelConversion(){In(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){In(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=OY(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,o=n.maxRotation;let s=r,a,l,g;if(!this._isVisible()||!n.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=$o(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-DC(e.grid)-n.padding-$Y(e.title,this.chart.options.font),g=Math.sqrt(d*d+h*h),s=_w(Math.min(Math.asin($o((u.highest.height+6)/a,-1,1)),Math.asin($o(l/g,-1,1))-Math.asin($o(h/g,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){In(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){In(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const l=$Y(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=DC(o)+l):(e.height=this.maxHeight,e.width=DC(o)+l),i.display&&this.ticks.length){const{first:g,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,A=Hl(this.labelRotation),p=Math.cos(A),y=Math.sin(A);if(a){const v=i.mirror?0:y*d.width+p*h.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=i.mirror?0:p*d.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(g,u,y,p)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,g=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?g?(h=r*e.width,f=i*n.height):(h=i*e.height,f=r*n.width):o==="start"?f=n.width:o==="end"?h=e.width:o!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+s)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;o==="start"?(u=0,d=e.height):o==="end"&&(u=n.height,d=0),this.paddingTop=u+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){In(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)qt(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=QY(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(n/OY(n,i));let g=0,u=0,d,h,f,A,p,y,v,S,Z,R,W;for(d=0;d<n;d+=l){if(A=e[d].label,p=this._resolveTickFontOptions(d),r.font=y=p.string,v=o[y]=o[y]||{data:{},gc:[]},S=p.lineHeight,Z=R=0,!qt(A)&&!Jn(A))Z=T0(r,v.data,v.gc,Z,A),R=S;else if(Jn(A))for(h=0,f=A.length;h<f;++h)W=A[h],!qt(W)&&!Jn(W)&&(Z=T0(r,v.data,v.gc,Z,W),R+=S);s.push(Z),a.push(R),g=Math.max(Z,g),u=Math.max(R,u)}kHe(o,n);const B=s.indexOf(g),k=a.indexOf(u),w=J=>({width:s[J]||0,height:a[J]||0});return{first:w(0),last:w(n-1),widest:w(B),highest:w(k),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return EEe(this._alignToPixels?_g(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=wHe(this.getContext(),e,i))}return this.$context||(this.$context=VHe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hl(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,g=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=DC(o),f=[],A=a.setContext(this.getContext()),p=A.display?A.width:0,y=p/2,v=function(q){return _g(i,q,p)};let S,Z,R,W,B,k,w,J,X,Y,z,P;if(s==="top")S=v(this.bottom),k=this.bottom-h,J=S-y,Y=v(e.top)+y,P=e.bottom;else if(s==="bottom")S=v(this.top),Y=e.top,P=v(e.bottom)-y,k=S+y,J=this.top+h;else if(s==="left")S=v(this.right),B=this.right-h,w=S-y,X=v(e.left)+y,z=e.right;else if(s==="right")S=v(this.left),X=e.left,z=v(e.right)-y,B=S+y,w=this.left+h;else if(n==="x"){if(s==="center")S=v((e.top+e.bottom)/2+.5);else if(Ft(s)){const q=Object.keys(s)[0],K=s[q];S=v(this.chart.scales[q].getPixelForValue(K))}Y=e.top,P=e.bottom,k=S+y,J=k+h}else if(n==="y"){if(s==="center")S=v((e.left+e.right)/2);else if(Ft(s)){const q=Object.keys(s)[0],K=s[q];S=v(this.chart.scales[q].getPixelForValue(K))}B=S-y,w=B-h,X=e.left,z=e.right}const $=Ut(r.ticks.maxTicksLimit,d),oe=Math.max(1,Math.ceil(d/$));for(Z=0;Z<d;Z+=oe){const q=this.getContext(Z),K=o.setContext(q),_=a.setContext(q),de=K.lineWidth,ne=K.color,se=_.dash||[],E=_.dashOffset,M=K.tickWidth,T=K.tickColor,U=K.tickBorderDash||[],H=K.tickBorderDashOffset;R=RHe(this,Z,l),R!==void 0&&(W=_g(i,R,de),g?B=w=X=z=W:k=J=Y=P=W,f.push({tx1:B,ty1:k,tx2:w,ty2:J,x1:X,y1:Y,x2:z,y2:P,width:de,color:ne,borderDash:se,borderDashOffset:E,tickWidth:M,tickColor:T,tickBorderDash:U,tickBorderDashOffset:H}))}return this._ticksLength=d,this._borderValue=S,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:o}=i,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:g,padding:u,mirror:d}=o,h=DC(i.grid),f=h+u,A=d?-u:f,p=-Hl(this.labelRotation),y=[];let v,S,Z,R,W,B,k,w,J,X,Y,z,P="middle";if(r==="top")B=this.bottom-A,k=this._getXAxisLabelAlignment();else if(r==="bottom")B=this.top+A,k=this._getXAxisLabelAlignment();else if(r==="left"){const oe=this._getYAxisLabelAlignment(h);k=oe.textAlign,W=oe.x}else if(r==="right"){const oe=this._getYAxisLabelAlignment(h);k=oe.textAlign,W=oe.x}else if(n==="x"){if(r==="center")B=(e.top+e.bottom)/2+f;else if(Ft(r)){const oe=Object.keys(r)[0],q=r[oe];B=this.chart.scales[oe].getPixelForValue(q)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")W=(e.left+e.right)/2-f;else if(Ft(r)){const oe=Object.keys(r)[0],q=r[oe];W=this.chart.scales[oe].getPixelForValue(q)}k=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const $=this._getLabelSizes();for(v=0,S=a.length;v<S;++v){Z=a[v],R=Z.label;const oe=o.setContext(this.getContext(v));w=this.getPixelForTick(v)+o.labelOffset,J=this._resolveTickFontOptions(v),X=J.lineHeight,Y=Jn(R)?R.length:1;const q=Y/2,K=oe.color,_=oe.textStrokeColor,de=oe.textStrokeWidth;let ne=k;s?(W=w,k==="inner"&&(v===S-1?ne=this.options.reverse?"left":"right":v===0?ne=this.options.reverse?"right":"left":ne="center"),r==="top"?g==="near"||p!==0?z=-Y*X+X/2:g==="center"?z=-$.highest.height/2-q*X+X:z=-$.highest.height+X/2:g==="near"||p!==0?z=X/2:g==="center"?z=$.highest.height/2-q*X:z=$.highest.height-Y*X,d&&(z*=-1),p!==0&&!oe.showLabelBackdrop&&(W+=X/2*Math.sin(p))):(B=w,z=(1-Y)*X/2);let se;if(oe.showLabelBackdrop){const E=ir(oe.backdropPadding),M=$.heights[v],T=$.widths[v];let U=z-E.top,H=0-E.left;switch(P){case"middle":U-=M/2;break;case"bottom":U-=M;break}switch(k){case"center":H-=T/2;break;case"right":H-=T;break;case"inner":v===S-1?H-=T:v>0&&(H-=T/2);break}se={left:H,top:U,width:T+E.width,height:M+E.height,color:oe.backdropColor}}y.push({label:R,font:J,textOffset:z,options:{rotation:p,color:K,strokeColor:_,strokeWidth:de,textAlign:ne,textBaseline:P,translation:[W,B],backdrop:se}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hl(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,l=s.widest.width;let g,u;return n==="left"?r?(u=this.right+o,i==="near"?g="left":i==="center"?(g="center",u+=l/2):(g="right",u+=l)):(u=this.right-a,i==="near"?g="right":i==="center"?(g="center",u-=l/2):(g="left",u=this.left)):n==="right"?r?(u=this.left+o,i==="near"?g="right":i==="center"?(g="center",u-=l/2):(g="left",u-=l)):(u=this.left+a,i==="near"?g="left":i==="center"?(g="center",u+=l/2):(g="right",u=this.right)):g="right",{textAlign:g,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:o,height:s}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,o,s),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,s;const a=(l,g,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(n.display)for(o=0,s=r.length;o<s;++o){const l=r[o];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let g,u,d,h;this.isHorizontal()?(g=_g(e,this.left,s)-s/2,u=_g(e,this.right,a)+a/2,d=h=l):(d=_g(e,this.top,s)-s/2,h=_g(e,this.bottom,a)+a/2,g=u=l),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(g,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&zw(i,r);const o=this.getLabelItems(e);for(const s of o){const a=s.options,l=s.font,g=s.label,u=s.textOffset;vI(i,g,0,u,l,a)}r&&Pw(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const o=ki(i.font),s=ir(i.padding),a=i.align;let l=o.lineHeight/2;n==="bottom"||n==="center"||Ft(n)?(l+=s.bottom,Jn(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=s.top;const{titleX:g,titleY:u,maxWidth:d,rotation:h}=xHe(this,l,n,a);vI(e,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:h,textAlign:WHe(a,n,r),textBaseline:"middle",translation:[g,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ut(e.grid&&e.grid.z,-1),r=Ut(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Iu.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,s;for(o=0,s=n.length;o<s;++o){const a=n[o];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ki(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class IA{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;EHe(n)&&(i=this.register(n));const r=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,XHe(e,s,i),this.override&&Dn.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Dn[r]&&(delete Dn[r][i],this.override&&delete zc[i])}}function XHe(t,e,n){const i=Nf(Object.create(null),[n?Dn.get(n):{},Dn.get(e),t.defaults]);Dn.set(e,i),t.defaultRoutes&&JHe(e,t.defaultRoutes),t.descriptors&&Dn.describe(e,t.descriptors)}function JHe(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");Dn.route(o,r,l,a)})}function EHe(t){return"id"in t&&"defaults"in t}class HHe{constructor(){this.controllers=new IA(_h,"datasets",!0),this.elements=new IA(Wm,"elements"),this.plugins=new IA(Object,"plugins"),this.scales=new IA(Iu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Ot(r,s=>{const a=i||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,n,i){const r=Lw(e);In(i["before"+r],[],i),n[e](i),In(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var ps=new HHe;class NHe{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(o,e,n,i);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,n,i,r){r=r||{};for(const o of e){const s=o.plugin,a=s[i],l=[n,r,o.options];if(In(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Ut(i.options&&i.options.plugins,{}),o=YHe(i);return r===!1&&!n?[]:MHe(e,o,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function YHe(t){const e={},n=[],i=Object.keys(ps.plugins.items);for(let o=0;o<i.length;o++)n.push(ps.getPlugin(i[o]));const r=t.plugins||[];for(let o=0;o<r.length;o++){const s=r[o];n.indexOf(s)===-1&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}function FHe(t,e){return!e&&t===!1?null:t===!0?{}:t}function MHe(t,{plugins:e,localIds:n},i,r){const o=[],s=t.getContext();for(const a of e){const l=a.id,g=FHe(i[l],r);g!==null&&o.push({plugin:a,options:THe(t.config,{plugin:a,local:n[l]},g,s)})}return o}function THe(t,{plugin:e,local:n},i,r){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(i,o);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function j1(t,e){const n=Dn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function LHe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function _He(t,e){return t===e?"_index_":"_value_"}function qY(t){if(t==="x"||t==="y"||t==="r")return t}function DHe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function O1(t,...e){if(qY(t))return t;for(const n of e){const i=n.axis||DHe(n.position)||t.length>1&&qY(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function eF(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function KHe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return eF(t,"x",n[0])||eF(t,"y",n[0])}return{}}function zHe(t,e){const n=zc[t.type]||{scales:{}},i=e.scales||{},r=j1(t.type,e),o=Object.create(null);return Object.keys(i).forEach(s=>{const a=i[s];if(!Ft(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=O1(s,a,KHe(s,t),Dn.scales[a.type]),g=_He(l,r),u=n.scales||{};o[s]=Mh(Object.create(null),[{axis:l},a,u[l],u[g]])}),t.data.datasets.forEach(s=>{const a=s.type||t.type,l=s.indexAxis||j1(a,e),u=(zc[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=LHe(d,l),f=s[h+"AxisID"]||h;o[f]=o[f]||Object.create(null),Mh(o[f],[{axis:h},i[f],u[d]])})}),Object.keys(o).forEach(s=>{const a=o[s];Mh(a,[Dn.scales[a.type],Dn.scale])}),o}function c4(t){const e=t.options||(t.options={});e.plugins=Ut(e.plugins,{}),e.scales=zHe(t,e)}function u4(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function PHe(t){return t=t||{},t.data=u4(t.data),c4(t),t}const tF=new Map,d4=new Set;function CA(t,e){let n=tF.get(t);return n||(n=e(),tF.set(t,n),d4.add(n)),n}const KC=(t,e,n)=>{const i=yI(e,n);i!==void 0&&t.add(i)};class UHe{constructor(e){this._config=PHe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=u4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),c4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return CA(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return CA(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return CA(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return CA(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:o}=this,s=this._cachedScopes(e,i),a=s.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>KC(l,e,d))),u.forEach(d=>KC(l,r,d)),u.forEach(d=>KC(l,zc[o]||{},d)),u.forEach(d=>KC(l,Dn,d)),u.forEach(d=>KC(l,U1,d))});const g=Array.from(l);return g.length===0&&g.push(Object.create(null)),d4.has(n)&&s.set(n,g),g}chartOptionScopes(){const{options:e,type:n}=this;return[e,zc[n]||{},Dn.datasets[n]||{},{type:n},Dn,U1]}resolveNamedOptions(e,n,i,r=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=nF(this._resolverCache,e,r);let l=s;if(OHe(s,n)){o.$shared=!1,i=gg(i)?i():i;const g=this.createResolver(e,i,a);l=SI(s,i,g)}for(const g of n)o[g]=l[g];return o}createResolver(e,n,i=[""],r){const{resolver:o}=nF(this._resolverCache,e,i);return Ft(n)?SI(o,n,void 0,r):o}}function nF(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);return o||(o={resolver:Uw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,o)),o}const jHe=t=>Ft(t)&&Object.getOwnPropertyNames(t).some(e=>gg(t[e]));function OHe(t,e){const{isScriptable:n,isIndexable:i}=Oj(t);for(const r of e){const o=n(r),s=i(r),a=(s||o)&&t[r];if(o&&(gg(a)||jHe(a))||s&&Jn(a))return!0}return!1}var QHe="4.4.3";const $He=["top","bottom","left","right","chartArea"];function iF(t,e){return t==="top"||t==="bottom"||$He.indexOf(t)===-1&&e==="x"}function rF(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function oF(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),In(n&&n.onComplete,[t],e)}function qHe(t){const e=t.chart,n=e.options.animation;In(n&&n.onProgress,[t],e)}function I4(t){return Qw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const vb={},sF=t=>{const e=I4(t);return Object.values(vb).filter(n=>n.canvas===e).pop()};function eNe(t,e,n){const i=Object.keys(t);for(const r of i){const o=+r;if(o>=e){const s=t[r];delete t[r],(n>0||o>e)&&(t[o+n]=s)}}}function tNe(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function hA(t,e,n){return t.options.clip?t[n]:e[n]}function nNe(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:hA(n,e,"left"),right:hA(n,e,"right"),top:hA(i,e,"top"),bottom:hA(i,e,"bottom")}:e}var pl;let Uv=(pl=class{static register(...e){ps.add(...e),aF()}static unregister(...e){ps.remove(...e),aF()}constructor(e,n){const i=this.config=new UHe(n),r=I4(e),o=sF(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||AHe(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,s.aspectRatio),l=a&&a.canvas,g=l&&l.height,u=l&&l.width;if(this.id=vEe(),this.ctx=a,this.canvas=l,this.width=u,this.height=g,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=FEe(d=>this.update(d),s.resizeDelay||0),this._dataChanges=[],vb[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ma.listen(this,"complete",oF),ma.listen(this,"progress",qHe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:o}=this;return qt(e)?n&&o?o:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ps}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():WY(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return RY(this.canvas,this.ctx),this}stop(){return ma.stop(this),this}resize(e,n){ma.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,n,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,WY(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),In(i.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ot(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((s,a)=>(s[a]=!1,s),{});let o=[];n&&(o=o.concat(Object.keys(n).map(s=>{const a=n[s],l=O1(s,a),g=l==="r",u=l==="x";return{options:a,dposition:g?"chartArea":u?"bottom":"left",dtype:g?"radialLinear":u?"category":"linear"}}))),Ot(o,s=>{const a=s.options,l=a.id,g=O1(l,a),u=Ut(a.type,s.dtype);(a.position===void 0||iF(a.position,g)!==iF(s.dposition))&&(a.position=s.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=ps.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ot(r,(s,a)=>{s||delete i[a]}),Ot(i,s=>{Nl.configure(this,s,s.options),Nl.addBox(this,s)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,o)=>r.index-o.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(rF("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const o=n[i];let s=this.getDatasetMeta(i);const a=o.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=a,s.indexAxis=o.indexAxis||j1(a,this.options),s.order=o.order||0,s.index=i,s.label=""+o.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{const l=ps.getController(a),{datasetElementType:g,dataElementType:u}=Dn.datasets[a];Object.assign(l,{dataElementType:ps.getElement(u),datasetElementType:g&&ps.getElement(g)}),s.controller=new l(this,i),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Ot(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let g=0,u=this.data.datasets.length;g<u;g++){const{controller:d}=this.getDatasetMeta(g),h=!r&&o.indexOf(d)===-1;d.buildOrUpdateElements(h),s=Math.max(+d.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),r||Ot(o,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rF("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ot(this.scales,e=>{Nl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!pY(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of n){const s=i==="_removeElements"?-o:o;eNe(e,r,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=o=>new Set(e.filter(s=>s[0]===o).map((s,a)=>a+","+s.splice(1).join(","))),r=i(0);for(let o=1;o<n;o++)if(!pY(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nl.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ot(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,gg(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ma.has(this)?this.attached&&!ma.running(this)&&ma.start(this):(this.draw(),oF({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,o;for(r=0,o=n.length;r<o;++r){const s=n[r];(!e||s.visible)&&i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,o=nNe(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&zw(n,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),e.controller.draw(),r&&Pw(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Gd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const o=$5e.modes[n];return typeof o=="function"?o(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(o=>o&&o._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=du(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",o=this.getDatasetMeta(e),s=o.controller._resolveAnimations(void 0,r);Yf(n)?(o.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),s.update(o,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ma.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),RY(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete vb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(o,s)=>{n.addEventListener(this,o,s),e[o]=s},r=(o,s,a)=>{o.offsetX=s,o.offsetY=a,this._eventHandler(o)};Ot(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,g)=>{n.addEventListener(this,l,g),e[l]=g},r=(l,g)=>{e[l]&&(n.removeEventListener(this,l,g),delete e[l])},o=(l,g)=>{this.canvas&&this.resize(l,g)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",s)};s=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():s()}unbindEvents(){Ot(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ot(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let o,s,a,l;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){s=e[a];const g=s&&this.getDatasetMeta(s.datasetIndex).controller;g&&g[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:o,index:s})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[s],index:s}});!N0(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,o=(l,g)=>l.filter(u=>!g.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),s=o(n,e),a=i?e:o(e,n);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:o}=this,s=n,a=this._getActiveElements(e,r,i,s),l=kEe(e),g=tNe(e,this._lastEvent,i,l);i&&(this._lastEvent=null,In(o.onHover,[e,a,this],this),l&&In(o.onClick,[e,a,this],this));const u=!N0(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=g,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}},St(pl,"defaults",Dn),St(pl,"instances",vb),St(pl,"overrides",zc),St(pl,"registry",ps),St(pl,"version",QHe),St(pl,"getChart",sF),pl);function aF(){return Ot(Uv.instances,t=>t._plugins.invalidate())}function C4(t,e){const{x:n,y:i,base:r,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,g,u,d;return t.horizontal?(d=s/2,a=Math.min(n,r),l=Math.max(n,r),g=i-d,u=i+d):(d=o/2,a=n-d,l=n+d,g=Math.min(i,r),u=Math.max(i,r)),{left:a,top:g,right:l,bottom:u}}function Yl(t,e,n,i){return t?0:$o(e,n,i)}function iNe(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=jj(i);return{t:Yl(r.top,o.top,0,n),r:Yl(r.right,o.right,0,e),b:Yl(r.bottom,o.bottom,0,n),l:Yl(r.left,o.left,0,e)}}function rNe(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Bc(r),s=Math.min(e,n),a=t.borderSkipped,l=i||Ft(r);return{topLeft:Yl(!l||a.top||a.left,o.topLeft,0,s),topRight:Yl(!l||a.top||a.right,o.topRight,0,s),bottomLeft:Yl(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Yl(!l||a.bottom||a.right,o.bottomRight,0,s)}}function oNe(t){const e=C4(t),n=e.right-e.left,i=e.bottom-e.top,r=iNe(t,n/2,i/2),o=rNe(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function zG(t,e,n,i){const r=e===null,o=n===null,a=t&&!(r&&o)&&C4(t,i);return a&&(r||Zd(e,a.left,a.right))&&(o||Zd(n,a.top,a.bottom))}function sNe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function aNe(t,e){t.rect(e.x,e.y,e.w,e.h)}function PG(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+s,radius:t.radius}}class Sb extends Wm{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:s}=oNe(this),a=sNe(s.radius)?Ff:aNe;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,PG(s,n,o)),e.clip(),a(e,PG(o,-n,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,PG(o,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return zG(this,e,n,i)}inXRange(e,n){return zG(this,e,null,n)}inYRange(e,n){return zG(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+r)/2:n,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}St(Sb,"id","bar"),St(Sb,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),St(Sb,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const lF=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},lNe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class gF extends Wm{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=In(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=ki(i.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=lF(i,o);let g,u;n.font=r.string,this.isHorizontal()?(g=this.maxWidth,u=this._fitRows(s,o,a,l)+10):(u=this.maxHeight,g=this._fitCols(s,r,a,l)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],g=this.lineWidths=[0],u=r+a;let d=e;o.textAlign="left",o.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((A,p)=>{const y=i+n/2+o.measureText(A.text).width;(p===0||g[g.length-1]+y+2*a>s)&&(d+=u,g[g.length-(p>0?0:1)]=0,f+=u,h++),l[p]={left:0,top:f,row:h,width:y,height:r},g[g.length-1]+=y+a}),d}_fitCols(e,n,i,r){const{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],g=this.columnSizes=[],u=s-e;let d=a,h=0,f=0,A=0,p=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:S,itemHeight:Z}=gNe(i,n,o,y,r);v>0&&f+Z+2*a>u&&(d+=h+a,g.push({width:h,height:f}),A+=h+a,p++,h=f=0),l[v]={left:A,top:f,col:p,width:S,height:Z},h=Math.max(h,S),f+=Z+a}),d+=h,g.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:o}}=this,s=Pd(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Vr(i,this.left+r,this.right-this.lineWidths[a]);for(const g of n)a!==g.row&&(a=g.row,l=Vr(i,this.left+r,this.right-this.lineWidths[a])),g.top+=this.top+e+r,g.left=s.leftForLtr(s.x(l),g.width),l+=g.width+r}else{let a=0,l=Vr(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const g of n)g.col!==a&&(a=g.col,l=Vr(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),g.top=l,g.left+=this.left+r,g.left=s.leftForLtr(s.x(g.left),g.width),l+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;zw(e,this),this._draw(),Pw(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:o,labels:s}=e,a=Dn.color,l=Pd(e.rtl,this.left,this.width),g=ki(s.font),{padding:u}=s,d=g.size,h=d/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:A,boxHeight:p,itemHeight:y}=lF(s,d),v=function(B,k,w){if(isNaN(A)||A<=0||isNaN(p)||p<0)return;r.save();const J=Ut(w.lineWidth,1);if(r.fillStyle=Ut(w.fillStyle,a),r.lineCap=Ut(w.lineCap,"butt"),r.lineDashOffset=Ut(w.lineDashOffset,0),r.lineJoin=Ut(w.lineJoin,"miter"),r.lineWidth=J,r.strokeStyle=Ut(w.strokeStyle,a),r.setLineDash(Ut(w.lineDash,[])),s.usePointStyle){const X={radius:p*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:J},Y=l.xPlus(B,A/2),z=k+h;Pj(r,X,Y,z,s.pointStyleWidth&&A)}else{const X=k+Math.max((d-p)/2,0),Y=l.leftForLtr(B,A),z=Bc(w.borderRadius);r.beginPath(),Object.values(z).some(P=>P!==0)?Ff(r,{x:Y,y:X,w:A,h:p,radius:z}):r.rect(Y,X,A,p),r.fill(),J!==0&&r.stroke()}r.restore()},S=function(B,k,w){vI(r,w.text,B,k+y/2,g,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},Z=this.isHorizontal(),R=this._computeTitleHeight();Z?f={x:Vr(o,this.left+u,this.right-i[0]),y:this.top+u+R,line:0}:f={x:this.left+u,y:Vr(o,this.top+R+u,this.bottom-n[0].height),line:0},e4(this.ctx,e.textDirection);const W=y+u;this.legendItems.forEach((B,k)=>{r.strokeStyle=B.fontColor,r.fillStyle=B.fontColor;const w=r.measureText(B.text).width,J=l.textAlign(B.textAlign||(B.textAlign=s.textAlign)),X=A+h+w;let Y=f.x,z=f.y;l.setWidth(this.width),Z?k>0&&Y+X+u>this.right&&(z=f.y+=W,f.line++,Y=f.x=Vr(o,this.left+u,this.right-i[f.line])):k>0&&z+W>this.bottom&&(Y=f.x=Y+n[f.line].width+u,f.line++,z=f.y=Vr(o,this.top+R+u,this.bottom-n[f.line].height));const P=l.x(Y);if(v(P,z,B),Y=MEe(J,Y+A+h,Z?Y+X:this.right,e.rtl),S(l.x(Y),z,B),Z)f.x+=X+u;else if(typeof B.text!="string"){const $=g.lineHeight;f.y+=h4(B,$)+u}else f.y+=W}),t4(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ki(n.font),r=ir(n.padding);if(!n.display)return;const o=Pd(e.rtl,this.left,this.width),s=this.ctx,a=n.position,l=i.size/2,g=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+g,d=Vr(e.align,d,this.right-h);else{const A=this.columnSizes.reduce((p,y)=>Math.max(p,y.height),0);u=g+Vr(e.align,this.top,this.bottom-A-e.labels.padding-this._computeTitleHeight())}const f=Vr(a,d,d+h);s.textAlign=o.textAlign(Dj(a)),s.textBaseline="middle",s.strokeStyle=n.color,s.fillStyle=n.color,s.font=i.string,vI(s,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=ki(e.font),i=ir(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,o;if(Zd(e,this.left,this.right)&&Zd(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Zd(e,r.left,r.left+r.width)&&Zd(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!dNe(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=lNe(r,i);r&&!o&&In(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&In(n.onHover,[e,i,this],this)}else i&&In(n.onClick,[e,i,this],this)}}function gNe(t,e,n,i,r){const o=cNe(i,t,e,n),s=uNe(r,i,e.lineHeight);return{itemWidth:o,itemHeight:s}}function cNe(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),e+n.size/2+i.measureText(r).width}function uNe(t,e,n){let i=t;return typeof e.text!="string"&&(i=h4(e,n)),i}function h4(t,e){const n=t.text?t.text.length:0;return e*n}function dNe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var INe={id:"legend",_element:gF,start(t,e,n){const i=t.legend=new gF({ctx:t.ctx,options:n,chart:t});Nl.configure(t,i,n),Nl.addBox(t,i)},stop(t){Nl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Nl.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const g=l.controller.getStyle(n?0:void 0),u=ir(g.borderWidth);return{text:e[l.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:s&&(a||g.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const dh={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,o=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++o}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=t.length;o<s;++o){const l=t[o].element;if(l&&l.hasValue()){const g=l.getCenterPoint(),u=XEe(e,g);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function fs(t,e){return e&&(Jn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function pa(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function CNe(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:t,label:s,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function cF(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=ki(e.bodyFont),g=ki(e.titleFont),u=ki(e.footerFont),d=o.length,h=r.length,f=i.length,A=ir(e.padding);let p=A.height,y=0,v=i.reduce((R,W)=>R+W.before.length+W.lines.length+W.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*g.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*R+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let S=0;const Z=function(R){y=Math.max(y,n.measureText(R).width+S)};return n.save(),n.font=g.string,Ot(t.title,Z),n.font=l.string,Ot(t.beforeBody.concat(t.afterBody),Z),S=e.displayColors?s+2+e.boxPadding:0,Ot(i,R=>{Ot(R.before,Z),Ot(R.lines,Z),Ot(R.after,Z)}),S=0,n.font=u.string,Ot(t.footer,Z),n.restore(),y+=A.width,{width:y,height:p}}function hNe(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function fNe(t,e,n,i){const{x:r,width:o}=i,s=n.caretSize+n.caretPadding;if(t==="left"&&r+o+s>e.width||t==="right"&&r-o-s<0)return!0}function mNe(t,e,n,i){const{x:r,width:o}=n,{width:s,chartArea:{left:a,right:l}}=t;let g="center";return i==="center"?g=r<=(a+l)/2?"left":"right":r<=o/2?g="left":r>=s-o/2&&(g="right"),fNe(g,t,e,n)&&(g="center"),g}function uF(t,e,n){const i=n.yAlign||e.yAlign||hNe(t,n);return{xAlign:n.xAlign||e.xAlign||mNe(t,e,n,i),yAlign:i}}function pNe(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function ANe(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function dF(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,g=r+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Bc(s);let A=pNe(e,a);const p=ANe(e,l,g);return l==="center"?a==="left"?A+=g:a==="right"&&(A-=g):a==="left"?A-=Math.max(u,h)+r:a==="right"&&(A+=Math.max(d,f)+r),{x:$o(A,0,i.width-e.width),y:$o(p,0,i.height-e.height)}}function fA(t,e,n){const i=ir(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function IF(t){return fs([],pa(t))}function bNe(t,e,n){return du(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function CF(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const f4={beforeTitle:Ca,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Ca,beforeBody:Ca,beforeLabel:Ca,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return qt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ca,afterBody:Ca,beforeFooter:Ca,footer:Ca,afterFooter:Ca};function ar(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?f4[e].call(n,i):r}class Q1 extends Wm{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,o=new n4(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=bNe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=ar(i,"beforeTitle",this,e),o=ar(i,"title",this,e),s=ar(i,"afterTitle",this,e);let a=[];return a=fs(a,pa(r)),a=fs(a,pa(o)),a=fs(a,pa(s)),a}getBeforeBody(e,n){return IF(ar(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ot(e,o=>{const s={before:[],lines:[],after:[]},a=CF(i,o);fs(s.before,pa(ar(a,"beforeLabel",this,o))),fs(s.lines,ar(a,"label",this,o)),fs(s.after,pa(ar(a,"afterLabel",this,o))),r.push(s)}),r}getAfterBody(e,n){return IF(ar(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=ar(i,"beforeFooter",this,e),o=ar(i,"footer",this,e),s=ar(i,"afterFooter",this,e);let a=[];return a=fs(a,pa(r)),a=fs(a,pa(o)),a=fs(a,pa(s)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],o=[],s=[];let a=[],l,g;for(l=0,g=n.length;l<g;++l)a.push(CNe(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),Ot(a,u=>{const d=CF(e.callbacks,u);r.push(ar(d,"labelColor",this,u)),o.push(ar(d,"labelPointStyle",this,u)),s.push(ar(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let o,s=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const a=dh[i.position].call(this,r,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const l=this._size=cF(this,i),g=Object.assign({},a,l),u=uF(this.chart,i,g),d=dF(i,g,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const o=this.getCaretPosition(e,i,r);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:o}=this,{caretSize:s,cornerRadius:a}=i,{topLeft:l,topRight:g,bottomLeft:u,bottomRight:d}=Bc(a),{x:h,y:f}=e,{width:A,height:p}=n;let y,v,S,Z,R,W;return o==="center"?(R=f+p/2,r==="left"?(y=h,v=y-s,Z=R+s,W=R-s):(y=h+A,v=y+s,Z=R-s,W=R+s),S=y):(r==="left"?v=h+Math.max(l,u)+s:r==="right"?v=h+A-Math.max(g,d)-s:v=this.caretX,o==="top"?(Z=f,R=Z-s,y=v-s,S=v+s):(Z=f+p,R=Z+s,y=v+s,S=v-s),W=Z),{x1:y,x2:v,x3:S,y1:Z,y2:R,y3:W}}drawTitle(e,n,i){const r=this.title,o=r.length;let s,a,l;if(o){const g=Pd(i.rtl,this.x,this.width);for(e.x=fA(this,i.titleAlign,i),n.textAlign=g.textAlign(i.titleAlign),n.textBaseline="middle",s=ki(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=s.string,l=0;l<o;++l)n.fillText(r[l],g.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,l+1===o&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,o){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:g}=o,u=ki(o.bodyFont),d=fA(this,"left",o),h=r.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,A=n.y+f;if(o.usePointStyle){const p={radius:Math.min(g,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(h,g)+g/2,v=A+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,kY(e,p,y,v),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,kY(e,p,y,v)}else{e.lineWidth=Ft(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const p=r.leftForLtr(h,g),y=r.leftForLtr(r.xPlus(h,1),g-2),v=Bc(s.borderRadius);Object.values(v).some(S=>S!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Ff(e,{x:p,y:A,w:g,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Ff(e,{x:y,y:A+1,w:g-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(p,A,g,l),e.strokeRect(p,A,g,l),e.fillStyle=s.backgroundColor,e.fillRect(y,A+1,g-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:l,boxWidth:g,boxPadding:u}=i,d=ki(i.bodyFont);let h=d.lineHeight,f=0;const A=Pd(i.rtl,this.x,this.width),p=function(w){n.fillText(w,A.x(e.x+f),e.y+h/2),e.y+=h+o},y=A.textAlign(s);let v,S,Z,R,W,B,k;for(n.textAlign=s,n.textBaseline="middle",n.font=d.string,e.x=fA(this,y,i),n.fillStyle=i.bodyColor,Ot(this.beforeBody,p),f=a&&y!=="right"?s==="center"?g/2+u:g+2+u:0,R=0,B=r.length;R<B;++R){for(v=r[R],S=this.labelTextColors[R],n.fillStyle=S,Ot(v.before,p),Z=v.lines,a&&Z.length&&(this._drawColorBox(n,e,R,A,i),h=Math.max(d.lineHeight,l)),W=0,k=Z.length;W<k;++W)p(Z[W]),h=d.lineHeight;Ot(v.after,p)}f=0,h=d.lineHeight,Ot(this.afterBody,p),e.y-=o}drawFooter(e,n,i){const r=this.footer,o=r.length;let s,a;if(o){const l=Pd(i.rtl,this.x,this.width);for(e.x=fA(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",s=ki(i.footerFont),n.fillStyle=i.footerColor,n.font=s.string,a=0;a<o;++a)n.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:o,yAlign:s}=this,{x:a,y:l}=e,{width:g,height:u}=i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:A}=Bc(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),s==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+g-h,l),n.quadraticCurveTo(a+g,l,a+g,l+h),s==="center"&&o==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+u-A),n.quadraticCurveTo(a+g,l+u,a+g-A,l+u),s==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),s==="center"&&o==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const s=dh[e.position].call(this,this._active,this._eventPosition);if(!s)return;const a=this._size=cF(this,e),l=Object.assign({},s,this._size),g=uF(n,e,l),u=dF(e,l,g,n);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=a.width,this.height=a.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=ir(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,r,n),e4(e,n.textDirection),o.y+=s.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),t4(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const g=this.chart.getDatasetMeta(a);if(!g)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:g.data[l],index:l}}),o=!N0(i,r),s=this._positionChanged(r,n);(o||s)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],s=this._getActiveElements(e,o,n,i),a=this._positionChanged(s,e),l=n||!N0(s,o)||a;return l&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&s.reverse(),s}_positionChanged(e,n){const{caretX:i,caretY:r,options:o}=this,s=dh[o.position].call(this,e,n);return s!==!1&&(i!==s.x||r!==s.y)}}St(Q1,"positioners",dh);var yNe={id:"tooltip",_element:Q1,positioners:dh,afterInit(t,e,n){n&&(t.tooltip=new Q1({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:f4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const vNe=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function SNe(t,e,n,i){const r=t.indexOf(e);if(r===-1)return vNe(t,e,n,i);const o=t.lastIndexOf(e);return r!==o?n:r}const ZNe=(t,e)=>t===null?null:$o(Math.round(t),0,e);function hF(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $1 extends Iu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:o}of n)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(qt(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:SNe(i,e,Ut(n,e),this._addedLabels),ZNe(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=e;s<=n;s++)r.push({value:s});return r}getLabelForValue(e){return hF.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}St($1,"id","category"),St($1,"defaults",{ticks:{callback:hF}});function GNe(t,e){const n=[],{bounds:r,step:o,min:s,max:a,precision:l,count:g,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=o||1,A=u-1,{min:p,max:y}=e,v=!qt(s),S=!qt(a),Z=!qt(g),R=(y-p)/(d+1);let W=bY((y-p)/A/f)*f,B,k,w,J;if(W<1e-14&&!v&&!S)return[{value:p},{value:y}];J=Math.ceil(y/W)-Math.floor(p/W),J>A&&(W=bY(J*W/A/f)*f),qt(l)||(B=Math.pow(10,l),W=Math.ceil(W*B)/B),r==="ticks"?(k=Math.floor(p/W)*W,w=Math.ceil(y/W)*W):(k=p,w=y),v&&S&&o&&WEe((a-s)/o,W/1e3)?(J=Math.round(Math.min((a-s)/W,u)),W=(a-s)/J,k=s,w=a):Z?(k=v?s:k,w=S?a:w,J=g-1,W=(w-k)/J):(J=(w-k)/W,Ab(J,Math.round(J),W/1e3)?J=Math.round(J):J=Math.ceil(J));const X=Math.max(yY(W),yY(k));B=Math.pow(10,qt(l)?X:l),k=Math.round(k*B)/B,w=Math.round(w*B)/B;let Y=0;for(v&&(h&&k!==s?(n.push({value:s}),k<s&&Y++,Ab(Math.round((k+Y*W)*B)/B,s,fF(s,R,t))&&Y++):k<s&&Y++);Y<J;++Y){const z=Math.round((k+Y*W)*B)/B;if(S&&z>a)break;n.push({value:z})}return S&&h&&w!==a?n.length&&Ab(n[n.length-1].value,a,fF(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!S||w===a)&&n.push({value:w}),n}function fF(t,e,{horizontal:n,minRotation:i}){const r=Hl(i),o=(n?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}class D0 extends Iu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return qt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const s=l=>r=n?r:l,a=l=>o=i?o:l;if(e){const l=tg(r),g=tg(o);l<0&&g<0?a(0):l>0&&g>0&&s(0)}if(r===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||s(r-l)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,s=GNe(r,o);return e.bounds==="ticks"&&Fj(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Kw(e,this.chart.options.locale,this.options.ticks.format)}}class q1 extends D0{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=hi(e)?e:0,this.max=hi(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Hl(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}St(q1,"id","linear"),St(q1,"defaults",{ticks:{callback:zv.formatters.numeric}});const Tf=t=>Math.floor(El(t)),Kg=(t,e)=>Math.pow(10,Tf(t)+e);function mF(t){return t/Math.pow(10,Tf(t))===1}function pF(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function BNe(t,e){const n=e-t;let i=Tf(n);for(;pF(t,e,i)>10;)i++;for(;pF(t,e,i)<10;)i--;return Math.min(i,Tf(t))}function RNe(t,{min:e,max:n}){e=wr(t.min,e);const i=[],r=Tf(e);let o=BNe(e,n),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=r>o?Math.pow(10,r):0,g=Math.round((e-l)*s)/s,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((g-u)/Math.pow(10,o)),h=wr(t.min,Math.round((l+u+d*Math.pow(10,o))*s)/s);for(;h<n;)i.push({value:h,major:mF(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),h=Math.round((l+u+d*Math.pow(10,o))*s)/s;const f=wr(t.max,h);return i.push({value:f,major:mF(f),significand:d}),i}class AF extends Iu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=D0.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return hi(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=hi(e)?Math.max(0,e):null,this.max=hi(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!hi(this._userMin)&&(this.min=e===Kg(this.min,0)?Kg(this.min,-1):Kg(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const o=a=>i=e?i:a,s=a=>r=n?r:a;i===r&&(i<=0?(o(1),s(10)):(o(Kg(i,-1)),s(Kg(r,1)))),i<=0&&o(Kg(r,-1)),r<=0&&s(Kg(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=RNe(n,this);return e.bounds==="ticks"&&Fj(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Kw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=El(e),this._valueRange=El(this.max)-El(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(El(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}St(AF,"id","logarithmic"),St(AF,"defaults",{ticks:{callback:zv.formatters.logarithmic,major:{enabled:!0}}});function e2(t){const e=t.ticks;if(e.display&&t.display){const n=ir(e.backdropPadding);return Ut(e.font&&e.font.size,Dn.font.size)+n.height}return 0}function kNe(t,e,n){return n=Jn(n)?n:[n],{w:OEe(t,e.string,n),h:n.length*e.lineHeight}}function bF(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function VNe(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?Ti/o:0;for(let l=0;l<o;l++){const g=s.setContext(t.getPointLabelContext(l));r[l]=g.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),d=ki(g.font),h=kNe(t.ctx,d,t._pointLabels[l]);i[l]=h;const f=ys(t.getIndexAngle(l)+a),A=Math.round(_w(f)),p=bF(A,u.x,h.w,0,180),y=bF(A,u.y,h.h,90,270);wNe(n,e,f,p,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=XNe(t,i,r)}function wNe(t,e,n,i,r){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/s,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function WNe(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=n,l=t.getPointPosition(e,i+r+s,o),g=Math.round(_w(ys(l.angle+Jr))),u=HNe(l.y,a.h,g),d=JNe(g),h=ENe(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function xNe(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:o}=t;return!(Gd({x:n,y:i},e)||Gd({x:n,y:o},e)||Gd({x:r,y:i},e)||Gd({x:r,y:o},e))}function XNe(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:e2(o)/2,additionalAngle:s?Ti/r:0};let g;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const d=WNe(t,u,l);i.push(d),a==="auto"&&(d.visible=xNe(d,g),d.visible&&(g=d))}return i}function JNe(t){return t===0||t===180?"center":t<180?"left":"right"}function ENe(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function HNe(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function NNe(t,e,n){const{left:i,top:r,right:o,bottom:s}=n,{backdropColor:a}=e;if(!qt(a)){const l=Bc(e.borderRadius),g=ir(e.backdropPadding);t.fillStyle=a;const u=i-g.left,d=r-g.top,h=o-i+g.width,f=s-r+g.height;Object.values(l).some(A=>A!==0)?(t.beginPath(),Ff(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function YNe(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const o=t._pointLabelItems[r];if(!o.visible)continue;const s=i.setContext(t.getPointLabelContext(r));NNe(n,s,o);const a=ki(s.font),{x:l,y:g,textAlign:u}=o;vI(n,t._pointLabels[r],l,g+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function m4(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Ms);else{let o=t.getPointPosition(0,e);r.moveTo(o.x,o.y);for(let s=1;s<i;s++)o=t.getPointPosition(s,e),r.lineTo(o.x,o.y)}}function FNe(t,e,n,i,r){const o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!i||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),m4(t,n,s,i),o.closePath(),o.stroke(),o.restore())}function MNe(t,e,n){return du(t,{label:n,index:e,type:"pointLabel"})}class mA extends D0{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ir(e2(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=hi(e)&&!isNaN(e)?e:0,this.max=hi(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/e2(this.options))}generateTickLabels(e){D0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=In(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?VNe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Ms/(this._pointLabels.length||1),i=this.options.startAngle||0;return ys(e*n+Hl(i))}getDistanceFromCenterForValue(e){if(qt(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(qt(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return MNe(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Jr+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:o}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),m4(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:o}=n,s=this._pointLabels.length;let a,l,g;if(n.pointLabels.display&&YNe(this,s),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=r.setContext(h),A=o.setContext(h);FNe(this,f,l,s,A)}}),i.display){for(e.save(),a=s-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),g=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(g.x,g.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const g=i.setContext(this.getContext(l)),u=ki(g.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),g.showLabelBackdrop){e.font=u.string,s=e.measureText(a.label).width,e.fillStyle=g.backdropColor;const d=ir(g.backdropPadding);e.fillRect(-s/2-d.left,-o-u.size/2-d.top,s+d.width,u.size+d.height)}vI(e,a.label,0,-o,u,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),e.restore()}drawTitle(){}}St(mA,"id","radialLinear"),St(mA,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:zv.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),St(mA,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),St(mA,"descriptors",{angleLines:{_fallback:"grid"}});const jv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ur=Object.keys(jv);function yF(t,e){return t-e}function vF(t,e){if(qt(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let s=e;return typeof i=="function"&&(s=i(s)),hi(s)||(s=typeof i=="string"?n.parse(s,i):n.parse(s)),s===null?null:(r&&(s=r==="week"&&(M0(o)||o===!0)?n.startOf(s,"isoWeek",o):n.startOf(s,r)),+s)}function SF(t,e,n,i){const r=ur.length;for(let o=ur.indexOf(t);o<r-1;++o){const s=jv[ur[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((n-e)/(a*s.size))<=i)return ur[o]}return ur[r-1]}function TNe(t,e,n,i,r){for(let o=ur.length-1;o>=ur.indexOf(n);o--){const s=ur[o];if(jv[s].common&&t._adapter.diff(r,i,s)>=e-1)return s}return ur[n?ur.indexOf(n):0]}function LNe(t){for(let e=ur.indexOf(t)+1,n=ur.length;e<n;++e)if(jv[ur[e]].common)return ur[e]}function ZF(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Dw(n,e),o=n[i]>=e?n[i]:n[r];t[o]=!0}}function _Ne(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function GF(t,e,n){const i=[],r={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,i.push({value:a,major:!1});return o===0||!n?i:_Ne(t,i,r,n)}class K0 extends Iu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new P5e._date(e.adapters.date);r.init(n),Mh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:vF(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:o,minDefined:s,maxDefined:a}=this.getUserBounds();function l(g){!s&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!a&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!s||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=hi(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),o=hi(o)&&!isNaN(o)?o:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,s=this.max,a=NEe(r,o,s);return this._unit=n.unit||(i.autoSkip?SF(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):TNe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:LNe(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),GF(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;n=$o(n,0,s),i=$o(i,0,s),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,o=r.time,s=o.unit||SF(o.minUnit,n,i,this._getLabelCapacity(n)),a=Ut(r.ticks.stepSize,1),l=s==="week"?o.isoWeekday:!1,g=M0(l)||l===!0,u={};let d=n,h,f;if(g&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,g?"day":s),e.diff(i,n,s)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+s);const A=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<i;h=+e.add(h,a,s),f++)ZF(u,h,A);return(h===i||r.bounds==="ticks"||f===1)&&ZF(u,h,A),Object.keys(u).sort(yF).map(p=>+p)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,o=this._unit,s=n||r[o];return this._adapter.format(e,s)}_tickFormatFunction(e,n,i,r){const o=this.options,s=o.ticks.callback;if(s)return In(s,[e,n,i],this);const a=o.time.displayFormats,l=this._unit,g=this._majorUnit,u=l&&a[l],d=g&&a[g],h=i[n],f=g&&d&&h&&h.major;return this._adapter.format(e,r||(f?d:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Hl(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*s,h:i*s+a*o}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,o=this._tickFormatFunction(e,0,GF(this,[e],this._majorUnit),r),s=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(vF(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Tj(e.sort(yF))}}St(K0,"id","time"),St(K0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function pA(t,e,n){let i=0,r=t.length-1,o,s,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=P1(t,"pos",e)),{pos:o,time:a}=t[i],{pos:s,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=P1(t,"time",e)),{time:o,pos:a}=t[i],{time:s,pos:l}=t[r]);const g=s-o;return g?a+(l-a)*(e-o)/g:a}class BF extends K0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=pA(n,this.min),this._tableRange=pA(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],o=[];let s,a,l,g,u;for(s=0,a=e.length;s<a;++s)g=e[s],g>=n&&g<=i&&r.push(g);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(s=0,a=r.length;s<a;++s)u=r[s+1],l=r[s-1],g=r[s],Math.round((u+l)/2)!==g&&o.push({time:g,pos:s/(a-1)});return o}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(pA(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return pA(this._table,i*this._tableRange+this._minPos,!0)}}St(BF,"id","timeseries"),St(BF,"defaults",K0.defaults);const p4="label";function RF(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function DNe(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function A4(t,e){t.labels=e}function b4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p4;const i=[];t.datasets=e.map(r=>{const o=t.datasets.find(s=>s[n]===r[n]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function KNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p4;const n={labels:[],datasets:[]};return A4(n,t.labels),b4(n,t.datasets,e),n}function zNe(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:s,data:a,options:l,plugins:g=[],fallbackContent:u,updateMode:d,...h}=t,f=m.useRef(null),A=m.useRef(),p=()=>{f.current&&(A.current=new Uv(f.current,{type:s,data:KNe(a,o),options:l&&{...l},plugins:g}),RF(e,A.current))},y=()=>{RF(e,null),A.current&&(A.current.destroy(),A.current=null)};return m.useEffect(()=>{!r&&A.current&&l&&DNe(A.current,l)},[r,l]),m.useEffect(()=>{!r&&A.current&&A4(A.current.config.data,a.labels)},[r,a.labels]),m.useEffect(()=>{!r&&A.current&&a.datasets&&b4(A.current.config.data,a.datasets,o)},[r,a.datasets]),m.useEffect(()=>{A.current&&(r?(y(),setTimeout(p)):A.current.update(d))},[r,l,a.labels,a.datasets,d]),m.useEffect(()=>{A.current&&(y(),setTimeout(p))},[s]),m.useEffect(()=>(p(),()=>y()),[]),gt.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},h),u)}const PNe=m.forwardRef(zNe);function UNe(t,e){return Uv.register(e),m.forwardRef((n,i)=>gt.createElement(PNe,Object.assign({},n,{ref:i,type:t})))}const UG=UNe("bar",bb);Uv.register($1,q1,Sb,yNe,INe);const jNe=()=>{const[t,e]=_i(an),[n,i]=m.useState(!0),[r,o]=m.useState([]),s=async()=>{const v=await fn.get(`/api/analytics/${t._id}`);i(!1),o(v.data)},a=r==null?void 0:r.reduce((v,S)=>v+S.totalLikes,0),l=r==null?void 0:r.reduce((v,S)=>v+S.totalComments,0),g=r==null?void 0:r.reduce((v,S)=>v+S.totalSales,0),u=r==null?void 0:r.reduce((v,S)=>v+S.numberOfMales,0),h=(r==null?void 0:r.reduce((v,S)=>v+S.numberOfFemales,0))/u;m.useEffect(()=>{s()},[t]);const f={labels:r.map(v=>v.eventid.name),datasets:[{label:"Sales",data:r.map(v=>v.totalSales),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},A={labels:r.map(v=>v.eventid.name),datasets:[{label:"Likes",data:r.map(v=>v.totalLikes),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},p={labels:r.map(v=>v.eventid.name),datasets:[{label:"Female/Male Ratio",data:r.map(v=>v.numberOfFemales/v.numberOfMales),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},y={responsive:!0,plugins:{legend:{position:"top"}}};return C.jsx(Se,{children:n?C.jsx(ae,{justify:"center",mt:5,children:C.jsx(nr,{size:"xl"})}):C.jsx(C.Fragment,{children:r.length<1?C.jsx(ue,{children:"No Data Found"}):C.jsxs(C.Fragment,{children:[C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr 1fr"},ms:8,me:8,h:"7em",gap:12,mt:5,children:[C.jsxs(Se,{bg:"blue.800",color:"white",p:5,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsx(ue,{fontSize:"lg",children:"Earnings"}),C.jsx(SRe,{size:25})]}),C.jsx(ue,{fontSize:"4xl",children:g})]}),C.jsxs(Se,{boxShadow:"2xl",alignItems:"center",justifyContent:"space-between",p:5,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsx(ue,{fontSize:"lg",children:"Comments"}),C.jsx(QJe,{size:25})]}),C.jsx(ue,{fontSize:"4xl",children:l})]}),C.jsxs(Se,{boxShadow:"2xl",alignItems:"center",justifyContent:"space-between",p:5,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsx(ue,{fontSize:"lg",children:"Likes"}),C.jsx($Je,{size:30})]}),C.jsx(ue,{fontSize:"4xl",children:a})]}),C.jsxs(Se,{boxShadow:"2xl",alignItems:"center",justifyContent:"space-between",p:5,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-between",children:[C.jsx(ue,{fontSize:"lg",children:"Female/Male Ratio"}),C.jsx(OJe,{size:30,color:"green"})]}),C.jsx(ue,{fontSize:"4xl",children:h})]})]}),C.jsx(ae,{maxH:"50vh",ms:"auto",justifyContent:"center",mt:10,children:C.jsx(UG,{data:f,options:y})}),C.jsx(ae,{maxH:"50vh",ms:"auto",justifyContent:"center",mt:10,children:C.jsx(UG,{data:A,options:y})}),C.jsx(ae,{maxH:"50vh",ms:"auto",justifyContent:"center",mt:10,children:C.jsx(UG,{data:p,options:y})})]})})})};function ONe(){const[t,e]=m.useState("");return C.jsxs(Se,{children:[C.jsxs(ae,{w:"fit-content",m:"auto",bg:Ve("gray.200","gray.dark"),borderRadius:5,p:2,gap:3,children:[C.jsx(ue,{onClick:()=>e(""),cursor:"pointer",fontWeight:!t&&"bold",children:"Home"}),C.jsx(ue,{onClick:()=>e("analytics"),cursor:"pointer",fontWeight:t==="analytics"&&"bold",children:"Analytics"}),C.jsx(ue,{onClick:()=>e("qr"),cursor:"pointer",fontWeight:t==="qr"&&"bold",children:"QR Verification"})]}),!t&&C.jsx(jNe,{}),t==="analytics"&&C.jsx(yJe,{}),t==="qr"&&C.jsx(jJe,{})]})}var Ov={},y4={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QNe=y4;function v4(t){this.mode=QNe.MODE_8BIT_BYTE,this.data=t}v4.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var $Ne=v4,S4={L:1,M:0,Q:3,H:2},AA=S4;function ks(t,e){this.totalCount=t,this.dataCount=e}ks.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ks.getRSBlocks=function(t,e){var n=ks.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=new Array,o=0;o<i;o++)for(var s=n[o*3+0],a=n[o*3+1],l=n[o*3+2],g=0;g<s;g++)r.push(new ks(a,l));return r};ks.getRsBlockTable=function(t,e){switch(e){case AA.L:return ks.RS_BLOCK_TABLE[(t-1)*4+0];case AA.M:return ks.RS_BLOCK_TABLE[(t-1)*4+1];case AA.Q:return ks.RS_BLOCK_TABLE[(t-1)*4+2];case AA.H:return ks.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var qNe=ks;function Z4(){this.buffer=new Array,this.length=0}Z4.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var eYe=Z4,Qo={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Qo.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Qo.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Ri=0;Ri<8;Ri++)Qo.EXP_TABLE[Ri]=1<<Ri;for(var Ri=8;Ri<256;Ri++)Qo.EXP_TABLE[Ri]=Qo.EXP_TABLE[Ri-4]^Qo.EXP_TABLE[Ri-5]^Qo.EXP_TABLE[Ri-6]^Qo.EXP_TABLE[Ri-8];for(var Ri=0;Ri<255;Ri++)Qo.LOG_TABLE[Qo.EXP_TABLE[Ri]]=Ri;var G4=Qo,zg=G4;function Zb(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}Zb.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=zg.gexp(zg.glog(this.get(n))+zg.glog(t.get(i)));return new Zb(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=zg.glog(this.get(0))-zg.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var i=0;i<t.getLength();i++)n[i]^=zg.gexp(zg.glog(t.get(i))+e);return new Zb(n,0).mod(t)}};var B4=Zb,co=y4,kF=B4,tYe=G4,ml={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},vi={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;vi.getBCHDigit(e)-vi.getBCHDigit(vi.G15)>=0;)e^=vi.G15<<vi.getBCHDigit(e)-vi.getBCHDigit(vi.G15);return(t<<10|e)^vi.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;vi.getBCHDigit(e)-vi.getBCHDigit(vi.G18)>=0;)e^=vi.G18<<vi.getBCHDigit(e)-vi.getBCHDigit(vi.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return vi.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case ml.PATTERN000:return(e+n)%2==0;case ml.PATTERN001:return e%2==0;case ml.PATTERN010:return n%3==0;case ml.PATTERN011:return(e+n)%3==0;case ml.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case ml.PATTERN101:return e*n%2+e*n%3==0;case ml.PATTERN110:return(e*n%2+e*n%3)%2==0;case ml.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new kF([1],0),n=0;n<t;n++)e=e.multiply(new kF([1,tYe.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case co.MODE_NUMBER:return 10;case co.MODE_ALPHA_NUM:return 9;case co.MODE_8BIT_BYTE:return 8;case co.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case co.MODE_NUMBER:return 12;case co.MODE_ALPHA_NUM:return 11;case co.MODE_8BIT_BYTE:return 16;case co.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case co.MODE_NUMBER:return 14;case co.MODE_ALPHA_NUM:return 13;case co.MODE_8BIT_BYTE:return 16;case co.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,s=t.isDark(i,r),a=-1;a<=1;a++)if(!(i+a<0||e<=i+a))for(var l=-1;l<=1;l++)r+l<0||e<=r+l||a==0&&l==0||s==t.isDark(i+a,r+l)&&o++;o>5&&(n+=3+o-5)}for(var i=0;i<e-1;i++)for(var r=0;r<e-1;r++){var g=0;t.isDark(i,r)&&g++,t.isDark(i+1,r)&&g++,t.isDark(i,r+1)&&g++,t.isDark(i+1,r+1)&&g++,(g==0||g==4)&&(n+=3)}for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);for(var u=0,r=0;r<e;r++)for(var i=0;i<e;i++)t.isDark(i,r)&&u++;var d=Math.abs(100*u/e/e-50)/5;return n+=d*10,n}},nYe=vi,iYe=$Ne,R4=qNe,k4=eYe,Gg=nYe,rYe=B4;function ws(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var qr=ws.prototype;qr.addData=function(t){var e=new iYe(t);this.dataList.push(e),this.dataCache=null};qr.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};qr.getModuleCount=function(){return this.moduleCount};qr.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=R4.getRSBlocks(t,this.errorCorrectLevel),n=new k4,i=0,r=0;r<e.length;r++)i+=e[r].dataCount;for(var r=0;r<this.dataList.length;r++){var o=this.dataList[r];n.put(o.mode,4),n.put(o.getLength(),Gg.getLengthInBits(o.mode,t)),o.write(n)}if(n.getLengthInBits()<=i*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};qr.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=ws.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};qr.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(0<=n&&n<=6&&(i==0||i==6)||0<=i&&i<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=i&&i<=4?this.modules[t+n][e+i]=!0:this.modules[t+n][e+i]=!1)};qr.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=Gg.getLostPoint(this);(n==0||t>i)&&(t=i,e=n)}return e};qr.createMovieClip=function(t,e,n){var i=t.createEmptyMovieClip(e,n),r=1;this.make();for(var o=0;o<this.modules.length;o++)for(var s=o*r,a=0;a<this.modules[o].length;a++){var l=a*r,g=this.modules[o][a];g&&(i.beginFill(0,100),i.moveTo(l,s),i.lineTo(l+r,s),i.lineTo(l+r,s+r),i.lineTo(l,s+r),i.endFill())}return i};qr.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};qr.setupPositionAdjustPattern=function(){for(var t=Gg.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(this.modules[i][r]==null)for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)o==-2||o==2||s==-2||s==2||o==0&&s==0?this.modules[i+o][r+s]=!0:this.modules[i+o][r+s]=!1}};qr.setupTypeNumber=function(t){for(var e=Gg.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;n<18;n++){var i=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}};qr.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=Gg.getBCHTypeInfo(n),r=0;r<15;r++){var o=!t&&(i>>r&1)==1;r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;r<15;r++){var o=!t&&(i>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!t};qr.mapData=function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(var a=0;a<2;a++)if(this.modules[i][s-a]==null){var l=!1;o<t.length&&(l=(t[o]>>>r&1)==1);var g=Gg.getMask(e,i,s-a);g&&(l=!l),this.modules[i][s-a]=l,r--,r==-1&&(o++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}};ws.PAD0=236;ws.PAD1=17;ws.createData=function(t,e,n){for(var i=R4.getRSBlocks(t,e),r=new k4,o=0;o<n.length;o++){var s=n[o];r.put(s.mode,4),r.put(s.getLength(),Gg.getLengthInBits(s.mode,t)),s.write(r)}for(var a=0,o=0;o<i.length;o++)a+=i[o].dataCount;if(r.getLengthInBits()>a*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+a*8+")");for(r.getLengthInBits()+4<=a*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=a*8||(r.put(ws.PAD0,8),r.getLengthInBits()>=a*8));)r.put(ws.PAD1,8);return ws.createBytes(r,i)};ws.createBytes=function(t,e){for(var n=0,i=0,r=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,g=e[a].totalCount-l;i=Math.max(i,l),r=Math.max(r,g),o[a]=new Array(l);for(var u=0;u<o[a].length;u++)o[a][u]=255&t.buffer[u+n];n+=l;var d=Gg.getErrorCorrectPolynomial(g),h=new rYe(o[a],d.getLength()-1),f=h.mod(d);s[a]=new Array(d.getLength()-1);for(var u=0;u<s[a].length;u++){var A=u+f.getLength()-s[a].length;s[a][u]=A>=0?f.get(A):0}}for(var p=0,u=0;u<e.length;u++)p+=e[u].totalCount;for(var y=new Array(p),v=0,u=0;u<i;u++)for(var a=0;a<e.length;a++)u<o[a].length&&(y[v++]=o[a][u]);for(var u=0;u<r;u++)for(var a=0;a<e.length;a++)u<s[a].length&&(y[v++]=s[a][u]);return y};var oYe=ws,eW={};Object.defineProperty(eW,"__esModule",{value:!0});var sYe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},aYe=CD,uo=w4(aYe),V4=m,bA=w4(V4);function w4(t){return t&&t.__esModule?t:{default:t}}function lYe(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var gYe={bgColor:uo.default.oneOfType([uo.default.object,uo.default.string]).isRequired,bgD:uo.default.string.isRequired,fgColor:uo.default.oneOfType([uo.default.object,uo.default.string]).isRequired,fgD:uo.default.string.isRequired,size:uo.default.number.isRequired,title:uo.default.string,viewBoxSize:uo.default.number.isRequired,xmlns:uo.default.string},cYe={title:void 0,xmlns:"http://www.w3.org/2000/svg"},Qv=(0,V4.forwardRef)(function(t,e){var n=t.bgColor,i=t.bgD,r=t.fgD,o=t.fgColor,s=t.size,a=t.title,l=t.viewBoxSize,g=lYe(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize"]);return bA.default.createElement("svg",sYe({},g,{height:s,ref:e,viewBox:"0 0 "+l+" "+l,width:s}),a?bA.default.createElement("title",null,a):null,bA.default.createElement("path",{d:i,fill:n}),bA.default.createElement("path",{d:r,fill:o}))});Qv.displayName="QRCodeSvg";Qv.propTypes=gYe;Qv.defaultProps=cYe;eW.default=Qv;Object.defineProperty(Ov,"__esModule",{value:!0});Ov.QRCode=void 0;var uYe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dYe=oYe,IYe=xm(dYe),CYe=S4,hYe=xm(CYe),fYe=CD,ha=xm(fYe),W4=m,mYe=xm(W4),pYe=eW,AYe=xm(pYe);function xm(t){return t&&t.__esModule?t:{default:t}}function bYe(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var yYe={bgColor:ha.default.oneOfType([ha.default.object,ha.default.string]),fgColor:ha.default.oneOfType([ha.default.object,ha.default.string]),level:ha.default.string,size:ha.default.number,value:ha.default.string.isRequired},vYe={bgColor:"#FFFFFF",fgColor:"#000000",level:"L",size:256},Xm=(0,W4.forwardRef)(function(t,e){var n=t.bgColor,i=t.fgColor,r=t.level,o=t.size,s=t.value,a=bYe(t,["bgColor","fgColor","level","size","value"]),l=new IYe.default(-1,hYe.default[r]);l.addData(s),l.make();var g=l.modules;return mYe.default.createElement(AYe.default,uYe({},a,{bgColor:n,bgD:g.map(function(u,d){return u.map(function(h,f){return h?"":"M "+f+" "+d+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:g.map(function(u,d){return u.map(function(h,f){return h?"M "+f+" "+d+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:o,viewBoxSize:g.length}))});Ov.QRCode=Xm;Xm.displayName="QRCode";Xm.propTypes=yYe;Xm.defaultProps=vYe;var SYe=Ov.default=Xm;const ZYe=()=>{const t=Nn(an),[e,n]=m.useState([]),[i,r]=m.useState(),{isOpen:o,onOpen:s,onClose:a}=Go(),l=ln();m.useEffect(()=>{t&&(async()=>{try{const h=await fn.get(`/api/tickets/gettickets/${t._id}`);n(h.data)}catch(h){console.error("Error fetching tickets:",h)}})()},[t]);const g=d=>{r(d),s()},u=async d=>{try{const f=await(await fn.put(`/api/posts/checkin/${d.eventid._id}`,{ticketId:d._id})).data;l("success",f.message,"success"),a()}catch{l("Error","error")}};return console.log(e),C.jsxs(ae,{w:"100%",flexDirection:"column",alignItems:"center",gap:"4",children:[C.jsx(Wo,{size:"lg",children:"My Tickets"}),e.length<1?C.jsx(ue,{children:"No Tickets Found"}):e==null?void 0:e.map(d=>{var h,f,A,p,y;return C.jsxs(ae,{bgGradient:"linear(to-r,#ad5389, #3c1053)",h:"fit-content",p:3,w:{sm:"90%",md:"80%",lg:"60%"},borderRadius:"md",justifyContent:"space-between",onClick:()=>g(d),children:[C.jsxs(Se,{children:[C.jsxs(ue,{fontSize:"md",fontWeight:"500",children:["Event : ",d.ticketDetails.eventname]}),C.jsxs(ue,{fontSize:"md",fontWeight:"500",children:["Venue : ",(h=d.eventid)==null?void 0:h.venue]}),C.jsxs(ue,{fontSize:"md",fontWeight:"500",children:["No.of Tickets : ",d.ticketDetails.count]}),C.jsxs(ue,{fontSize:"md",fontWeight:"500",children:["Start :"," ",new Date(d.ticketDetails.eventdate).toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"})]})]}),(f=d.eventid)!=null&&f.img?C.jsx(Se,{w:"25%",h:"100px ",background:"white",alignSelf:"flex-end",borderRadius:"md",objectFit:"contain",overflow:"hidden",children:C.jsx(oi,{h:"100%",w:"100%",src:d.eventid.img?d.eventid.img:""})}):"",C.jsxs(Jo,{isOpen:o,onClose:a,mt:0,children:[C.jsx(No,{}),C.jsxs(Eo,{bgGradient:"linear(to-l, #7928CA, #FF0080)",borderRadius:"1em",children:[C.jsx(Ho,{textAlign:"center",children:"Ticket Details"}),C.jsx(De,{colorScheme:"green",size:"xs",mt:"1",onClick:()=>u(i),children:"Check In"}),C.jsx(Yo,{size:"md"}),C.jsx(ss,{children:C.jsx(Se,{borderWidth:"1px",borderRadius:"1em",border:"1px",borderColor:"gray.500",children:i&&C.jsxs(Se,{p:"6",background:"",children:[((A=i.eventid)==null?void 0:A.img)&&C.jsx(Se,{w:"100%",h:"200px",background:"white",alignSelf:"flex-end",borderRadius:"1em",objectFit:"contain",overflow:"hidden",mb:"3",children:C.jsx(oi,{h:"100%",w:"100%",src:i.eventid.img})}),C.jsxs(Se,{mt:"1",fontWeight:"semibold",as:"h4",children:["Event Name : ",i.ticketDetails.eventname,C.jsx("br",{}),"User Name : ",i.ticketDetails.name,C.jsx("br",{}),"Ticket Price :"," ",i.ticketDetails.ticketprice,C.jsx("br",{}),"My Contact : ",i.ticketDetails.contactNo,C.jsx("br",{}),"Start :"," ",new Date(i.ticketDetails.eventdate).toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"}),C.jsx("br",{}),"Time : ",i.ticketDetails.eventtime,C.jsx("br",{}),"Venue : ",(p=i.eventid)==null?void 0:p.venue," (",(y=i.eventid)==null?void 0:y.eventType,")",C.jsx("br",{})]}),C.jsx(SYe,{size:256,style:{marginTop:"1em",height:"100px",maxWidth:"60%",marginLeft:"auto",marginRight:"auto"},value:i._id,viewBox:"0 0 256 256"})]})})}),C.jsx(is,{})]})]})]},d._id)})]})};var $v,ot,x4,X4,ZI,oc,VF,J4,E4,z0={},H4=[],GYe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Fl(t,e){for(var n in e)t[n]=e[n];return t}function N4(t){var e=t.parentNode;e&&e.removeChild(t)}function F(t,e,n){var i,r,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?$v.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return Gb(t,s,i,r,null)}function Gb(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++x4};return r==null&&ot.vnode!=null&&ot.vnode(o),o}function tr(){return{current:null}}function on(t){return t.children}function BYe(t,e,n,i,r){var o;for(o in n)o==="children"||o==="key"||o in e||P0(t,o,null,n[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||P0(t,o,e[o],n[o],i)}function wF(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||GYe.test(e)?n:n+"px"}function P0(t,e,n,i,r){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||wF(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||wF(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i||t.addEventListener(e,o?xF:WF,o):t.removeEventListener(e,o?xF:WF,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function WF(t){ZI=!0;try{return this.l[t.type+!1](ot.event?ot.event(t):t)}finally{ZI=!1}}function xF(t){ZI=!0;try{return this.l[t.type+!0](ot.event?ot.event(t):t)}finally{ZI=!1}}function Mr(t,e){this.props=t,this.context=e}function Lf(t,e){if(e==null)return t.__?Lf(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Lf(t):null}function Y4(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Y4(t)}}function RYe(t){ZI?setTimeout(t):J4(t)}function t2(t){(!t.__d&&(t.__d=!0)&&oc.push(t)&&!U0.__r++||VF!==ot.debounceRendering)&&((VF=ot.debounceRendering)||RYe)(U0)}function U0(){var t,e,n,i,r,o,s,a;for(oc.sort(function(l,g){return l.__v.__b-g.__v.__b});t=oc.shift();)t.__d&&(e=oc.length,i=void 0,r=void 0,s=(o=(n=t).__v).__e,(a=n.__P)&&(i=[],(r=Fl({},o)).__v=o.__v+1,tW(a,o,r,n.__n,a.ownerSVGElement!==void 0,o.__h!=null?[s]:null,i,s??Lf(o),o.__h),_4(i,o),o.__e!=s&&Y4(o)),oc.length>e&&oc.sort(function(l,g){return l.__v.__b-g.__v.__b}));U0.__r=0}function F4(t,e,n,i,r,o,s,a,l,g){var u,d,h,f,A,p,y,v=i&&i.__k||H4,S=v.length;for(n.__k=[],u=0;u<e.length;u++)if((f=n.__k[u]=(f=e[u])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?Gb(null,f,null,null,f):Array.isArray(f)?Gb(on,{children:f},null,null,null):f.__b>0?Gb(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(h=v[u])===null||h&&f.key==h.key&&f.type===h.type)v[u]=void 0;else for(d=0;d<S;d++){if((h=v[d])&&f.key==h.key&&f.type===h.type){v[d]=void 0;break}h=null}tW(t,f,h=h||z0,r,o,s,a,l,g),A=f.__e,(d=f.ref)&&h.ref!=d&&(y||(y=[]),h.ref&&y.push(h.ref,null,f),y.push(d,f.__c||A,f)),A!=null?(p==null&&(p=A),typeof f.type=="function"&&f.__k===h.__k?f.__d=l=M4(f,l,t):l=T4(t,f,h,v,A,l),typeof n.type=="function"&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=t&&(l=Lf(h))}for(n.__e=p,u=S;u--;)v[u]!=null&&(typeof n.type=="function"&&v[u].__e!=null&&v[u].__e==n.__d&&(n.__d=L4(i).nextSibling),K4(v[u],v[u]));if(y)for(u=0;u<y.length;u++)D4(y[u],y[++u],y[++u])}function M4(t,e,n){for(var i,r=t.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=t,e=typeof i.type=="function"?M4(i,e,n):T4(n,i,i,r,i.__e,e));return e}function j0(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){j0(n,e)}):e.push(t)),e}function T4(t,e,n,i,r,o){var s,a,l;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(n==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(r),s=null;else{for(a=o,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==r)break e;t.insertBefore(r,o),s=o}return s!==void 0?s:r.nextSibling}function L4(t){var e,n,i;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(i=L4(n)))return i}return null}function tW(t,e,n,i,r,o,s,a,l){var g,u,d,h,f,A,p,y,v,S,Z,R,W,B,k,w=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,a=e.__e=n.__e,e.__h=null,o=[a]),(g=ot.__b)&&g(e);try{e:if(typeof w=="function"){if(y=e.props,v=(g=w.contextType)&&i[g.__c],S=g?v?v.props.value:g.__:i,n.__c?p=(u=e.__c=n.__c).__=u.__E:("prototype"in w&&w.prototype.render?e.__c=u=new w(y,S):(e.__c=u=new Mr(y,S),u.constructor=w,u.render=VYe),v&&v.sub(u),u.props=y,u.state||(u.state={}),u.context=S,u.__n=i,d=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),w.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Fl({},u.__s)),Fl(u.__s,w.getDerivedStateFromProps(y,u.__s))),h=u.props,f=u.state,u.__v=e,d)w.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(w.getDerivedStateFromProps==null&&y!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,S),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,S)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(J){J&&(J.__=e)}),Z=0;Z<u._sb.length;Z++)u.__h.push(u._sb[Z]);u._sb=[],u.__h.length&&s.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,S),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,f,A)})}if(u.context=S,u.props=y,u.__P=t,R=ot.__r,W=0,"prototype"in w&&w.prototype.render){for(u.state=u.__s,u.__d=!1,R&&R(e),g=u.render(u.props,u.state,u.context),B=0;B<u._sb.length;B++)u.__h.push(u._sb[B]);u._sb=[]}else do u.__d=!1,R&&R(e),g=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++W<25);u.state=u.__s,u.getChildContext!=null&&(i=Fl(Fl({},i),u.getChildContext())),d||u.getSnapshotBeforeUpdate==null||(A=u.getSnapshotBeforeUpdate(h,f)),k=g!=null&&g.type===on&&g.key==null?g.props.children:g,F4(t,Array.isArray(k)?k:[k],e,n,i,r,o,s,a,l),u.base=e.__e,e.__h=null,u.__h.length&&s.push(u),p&&(u.__E=u.__=null),u.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=kYe(n.__e,e,n,i,r,o,s,l);(g=ot.diffed)&&g(e)}catch(J){e.__v=null,(l||o!=null)&&(e.__e=a,e.__h=!!l,o[o.indexOf(a)]=null),ot.__e(J,e,n)}}function _4(t,e){ot.__c&&ot.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){ot.__e(i,n.__v)}})}function kYe(t,e,n,i,r,o,s,a){var l,g,u,d=n.props,h=e.props,f=e.type,A=0;if(f==="svg"&&(r=!0),o!=null){for(;A<o.length;A++)if((l=o[A])&&"setAttribute"in l==!!f&&(f?l.localName===f:l.nodeType===3)){t=l,o[A]=null;break}}if(t==null){if(f===null)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),o=null,a=!1}if(f===null)d===h||a&&t.data===h||(t.data=h);else{if(o=o&&$v.call(t.childNodes),g=(d=n.props||z0).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!a){if(o!=null)for(d={},A=0;A<t.attributes.length;A++)d[t.attributes[A].name]=t.attributes[A].value;(u||g)&&(u&&(g&&u.__html==g.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(BYe(t,h,d,r,a),u)e.__k=[];else if(A=e.props.children,F4(t,Array.isArray(A)?A:[A],e,n,i,r&&f!=="foreignObject",o,s,o?o[0]:n.__k&&Lf(n,0),a),o!=null)for(A=o.length;A--;)o[A]!=null&&N4(o[A]);a||("value"in h&&(A=h.value)!==void 0&&(A!==t.value||f==="progress"&&!A||f==="option"&&A!==d.value)&&P0(t,"value",A,d.value,!1),"checked"in h&&(A=h.checked)!==void 0&&A!==t.checked&&P0(t,"checked",A,d.checked,!1))}return t}function D4(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){ot.__e(i,n)}}function K4(t,e,n){var i,r;if(ot.unmount&&ot.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||D4(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){ot.__e(o,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&K4(i[r],e,n||typeof t.type!="function");n||t.__e==null||N4(t.__e),t.__=t.__e=t.__d=void 0}function VYe(t,e,n){return this.constructor(t,n)}function _f(t,e,n){var i,r,o;ot.__&&ot.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,o=[],tW(e,t=(!i&&n||e).__k=F(on,null,[t]),r||z0,z0,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?$v.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i),_4(o,t)}function wYe(t,e){var n={__c:e="__cC"+E4++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.some(function(a){a.__e=!0,t2(a)})},this.sub=function(s){r.push(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){r.splice(r.indexOf(s),1),a&&a.call(s)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}$v=H4.slice,ot={__e:function(t,e,n,i){for(var r,o,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),s=r.__d),s)return r.__E=r}catch(a){t=a}throw t}},x4=0,X4=function(t){return t!=null&&t.constructor===void 0},ZI=!1,Mr.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Fl({},this.state),typeof t=="function"&&(t=t(Fl({},n),this.props)),t&&Fl(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),t2(this))},Mr.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),t2(this))},Mr.prototype.render=on,oc=[],J4=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U0.__r=0,E4=0;var Zs,jG,XF,z4=[],OG=[],JF=ot.__b,EF=ot.__r,HF=ot.diffed,NF=ot.__c,YF=ot.unmount;function WYe(){for(var t;t=z4.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Bb),t.__H.__h.forEach(n2),t.__H.__h=[]}catch(e){t.__H.__h=[],ot.__e(e,t.__v)}}ot.__b=function(t){Zs=null,JF&&JF(t)},ot.__r=function(t){EF&&EF(t);var e=(Zs=t.__c).__H;e&&(jG===Zs?(e.__h=[],Zs.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=OG,n.__N=n.i=void 0})):(e.__h.forEach(Bb),e.__h.forEach(n2),e.__h=[])),jG=Zs},ot.diffed=function(t){HF&&HF(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(z4.push(e)!==1&&XF===ot.requestAnimationFrame||((XF=ot.requestAnimationFrame)||xYe)(WYe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==OG&&(n.__=n.__V),n.i=void 0,n.__V=OG})),jG=Zs=null},ot.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Bb),n.__h=n.__h.filter(function(i){return!i.__||n2(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],ot.__e(i,n.__v)}}),NF&&NF(t,e)},ot.unmount=function(t){YF&&YF(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Bb(i)}catch(r){e=r}}),n.__H=void 0,e&&ot.__e(e,n.__v))};var FF=typeof requestAnimationFrame=="function";function xYe(t){var e,n=function(){clearTimeout(i),FF&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);FF&&(e=requestAnimationFrame(n))}function Bb(t){var e=Zs,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Zs=e}function n2(t){var e=Zs;t.__c=t.__(),Zs=e}function XYe(t,e){for(var n in e)t[n]=e[n];return t}function MF(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function TF(t){this.props=t}(TF.prototype=new Mr).isPureReactComponent=!0,TF.prototype.shouldComponentUpdate=function(t,e){return MF(this.props,t)||MF(this.state,e)};var LF=ot.__b;ot.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),LF&&LF(t)};var JYe=ot.__e;ot.__e=function(t,e,n,i){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}JYe(t,e,n,i)};var _F=ot.unmount;function P4(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=XYe({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return P4(i,e,n)})),t}function U4(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return U4(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function QG(){this.__u=0,this.t=null,this.__b=null}function j4(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function yA(){this.u=null,this.o=null}ot.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),_F&&_F(t)},(QG.prototype=new Mr).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=j4(i.__v),o=!1,s=function(){o||(o=!0,n.__R=null,r?r(a):a())};n.__R=s;var a=function(){if(!--i.__u){if(i.state.__a){var g=i.state.__a;i.__v.__k[0]=U4(g,g.__c.__P,g.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}},l=e.__h===!0;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(s,s)},QG.prototype.componentWillUnmount=function(){this.t=[]},QG.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=P4(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&F(on,null,t.fallback);return r&&(r.__h=null),[F(on,null,e.__a?null:t.children),r]};var DF=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function EYe(t){return this.getChildContext=function(){return t.context},t.children}function HYe(t){var e=this,n=t.i;e.componentWillUnmount=function(){_f(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,r){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),_f(F(EYe,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function NYe(t,e){var n=F(HYe,{__v:t,i:e});return n.containerInfo=e,n}(yA.prototype=new Mr).__a=function(t){var e=this,n=j4(e.__v),i=e.o.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),DF(e,t,i)):r()};n?n(o):o()}},yA.prototype.render=function(t){this.u=null,this.o=new Map;var e=j0(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},yA.prototype.componentDidUpdate=yA.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){DF(t,n,e)})};var YYe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,FYe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,MYe=typeof document<"u",TYe=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};Mr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Mr.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var KF=ot.event;function LYe(){}function _Ye(){return this.cancelBubble}function DYe(){return this.defaultPrevented}ot.event=function(t){return KF&&(t=KF(t)),t.persist=LYe,t.isPropagationStopped=_Ye,t.isDefaultPrevented=DYe,t.nativeEvent=t};var zF={configurable:!0,get:function(){return this.class}},PF=ot.vnode;ot.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var o in i={},n){var s=n[o];MYe&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in n&&s==null||(o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&s===!0?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!TYe(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():r&&FYe.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),i[o]&&(o="oninputCapture")),i[o]=s)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=j0(n.children).forEach(function(a){a.props.selected=i.value.indexOf(a.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=j0(n.children).forEach(function(a){a.props.selected=i.multiple?i.defaultValue.indexOf(a.props.value)!=-1:i.defaultValue==a.props.value})),t.props=i,n.class!=n.className&&(zF.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",zF))}t.$$typeof=YYe,PF&&PF(t)};var UF=ot.__r;ot.__r=function(t){UF&&UF(t),t.__c};const O4=[],i2=new Map;function qv(t){O4.push(t),i2.forEach(e=>{$4(e,t)})}function KYe(t){t.isConnected&&t.getRootNode&&Q4(t.getRootNode())}function Q4(t){let e=i2.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=PYe();n&&(e.nonce=n);const i=t===document?document.head:t,r=t===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,r)}i2.set(t,e),zYe(e)}}function zYe(t){for(const e of O4)$4(t,e)}function $4(t,e){const{sheet:n}=t,i=n.cssRules.length;e.split("}").forEach((r,o)=>{r=r.trim(),r&&n.insertRule(r+"}",i+o)})}let $G;function PYe(){return $G===void 0&&($G=UYe()),$G}function UYe(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&Q4(document);var jYe=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';qv(jYe);class nW{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:i}=this;e in i&&(n?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function iW(t){t.parentNode&&t.parentNode.removeChild(t)}function Mi(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(OYe(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function OYe(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function QYe(t,e){let n=t instanceof HTMLElement?[t]:t,i=[];for(let r=0;r<n.length;r+=1){let o=n[r].querySelectorAll(e);for(let s=0;s<o.length;s+=1)i.push(o[s])}return i}const $Ye=/(top|left|right|bottom|width|height)$/i;function Dh(t,e){for(let n in e)q4(t,n,e[n])}function q4(t,e,n){n==null?t.style[e]="":typeof n=="number"&&$Ye.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function eO(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let jF=0;function ng(){return jF+=1,"fc-dom-"+jF}function eS(t){t.preventDefault()}function qYe(t,e){return n=>{let i=Mi(n.target,t);i&&e.call(i,n,i)}}function tO(t,e,n,i){let r=qYe(n,i);return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}function eFe(t,e,n,i){let r;return tO(t,"mouseover",e,(o,s)=>{if(s!==r){r=s,n(o,s);let a=l=>{r=null,i(l,s),s.removeEventListener("mouseleave",a)};s.addEventListener("mouseleave",a)}})}const OF=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function tFe(t,e){let n=i=>{e(i),OF.forEach(r=>{t.removeEventListener(r,n)})};OF.forEach(i=>{t.addEventListener(i,n)})}function nO(t){return Object.assign({onClick:t},iO(t))}function iO(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let QF=0;function Cu(){return QF+=1,String(QF)}function rW(){document.body.classList.add("fc-not-allowed")}function oW(){document.body.classList.remove("fc-not-allowed")}function nFe(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",eS)}function iFe(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",eS)}function rFe(t){t.addEventListener("contextmenu",eS)}function oFe(t){t.removeEventListener("contextmenu",eS)}function sFe(t){let e=[],n=[],i,r;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),i=0;i<n.length;i+=1)r=n[i],typeof r=="string"?e.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&e.push({func:r});return e}function aFe(t,e,n){let i,r;for(i=0;i<n.length;i+=1)if(r=lFe(t,e,n[i]),r)return r;return 0}function lFe(t,e,n){return n.func?n.func(t,e):gFe(t[n.field],e[n.field])*(n.order||1)}function gFe(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function Ud(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Kh(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((i,r,o)=>i.replace("$"+o,r||""),t):n}function cFe(t,e){return t-e}function Rb(t){return t%1===0}function uFe(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const $F=["years","months","days","milliseconds"],dFe=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function xt(t,e){return typeof t=="string"?IFe(t):typeof t=="object"&&t?qF(t):typeof t=="number"?qF({[e||"milliseconds"]:t}):null}function IFe(t){let e=dFe.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function qF(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function CFe(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function r2(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function hFe(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function fFe(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function mFe(t){return jd(t)/365}function pFe(t){return jd(t)/30}function jd(t){return qo(t)/864e5}function qo(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function sW(t,e){let n=null;for(let i=0;i<$F.length;i+=1){let r=$F[i];if(e[r]){let o=t[r]/e[r];if(!Rb(o)||n!==null&&n!==o)return null;n=o}else if(t[r])return null}return n}function o2(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function cg(t,e,n){if(t===e)return!0;let i=t.length,r;if(i!==e.length)return!1;for(r=0;r<i;r+=1)if(!(n?n(t[r],e[r]):t[r]===e[r]))return!1;return!0}const AFe=["sun","mon","tue","wed","thu","fri","sat"];function e9(t,e){let n=Ml(t);return n[2]+=e*7,Cr(n)}function mi(t,e){let n=Ml(t);return n[2]+=e,Cr(n)}function ug(t,e){let n=Ml(t);return n[6]+=e,Cr(n)}function bFe(t,e){return Bg(t,e)/7}function Bg(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function yFe(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function vFe(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function SFe(t,e){return(e.valueOf()-t.valueOf())/1e3}function ZFe(t,e){let n=sn(t),i=sn(e);return{years:0,months:0,days:Math.round(Bg(n,i)),milliseconds:e.valueOf()-i.valueOf()-(t.valueOf()-n.valueOf())}}function GFe(t,e){let n=O0(t,e);return n!==null&&n%7===0?n/7:null}function O0(t,e){return Tl(t)===Tl(e)?Math.round(Bg(t,e)):null}function sn(t){return Cr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function BFe(t){return Cr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function RFe(t){return Cr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function kFe(t){return Cr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function VFe(t,e,n){let i=t.getUTCFullYear(),r=qG(t,i,e,n);if(r<1)return qG(t,i-1,e,n);let o=qG(t,i+1,e,n);return o>=1?Math.min(r,o):r}function qG(t,e,n,i){let r=Cr([e,0,1+wFe(e,n,i)]),o=sn(t),s=Math.round(Bg(r,o));return Math.floor(s/7)+1}function wFe(t,e,n){let i=7+e-n;return-((7+Cr([t,0,i]).getUTCDay()-e)%7)+i-1}function t9(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function n9(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Ml(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Cr(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function rO(t){return!isNaN(t.valueOf())}function Tl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function oO(t,e,n=!1){let i=t.toISOString();return i=i.replace(".000",""),n&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",aW(e,!0)))),i}function Jm(t){return t.toISOString().replace(/T.*$/,"")}function WFe(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function xFe(t){return Ud(t.getUTCHours(),2)+":"+Ud(t.getUTCMinutes(),2)+":"+Ud(t.getUTCSeconds(),2)}function aW(t,e=!1){let n=t<0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),o=Math.round(i%60);return e?`${n+Ud(r,2)}:${Ud(o,2)}`:`GMT${n}${r}${o?`:${Ud(o,2)}`:""}`}function rt(t,e,n){let i,r;return function(...o){if(!i)r=t.apply(this,o);else if(!cg(i,o)){n&&n(r);let s=t.apply(this,o);(!e||!e(s,r))&&(r=s)}return i=o,r}}function kb(t,e,n){let i,r;return o=>{if(!i)r=t.call(this,o);else if(!Ks(i,o)){n&&n(r);let s=t.call(this,o);(!e||!e(s,r))&&(r=s)}return i=o,r}}const i9={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},Q0={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},vA=/\s*([ap])\.?m\.?/i,XFe=/,/g,JFe=/\s+/g,EFe=/\u200e/g,HFe=/UTC|GMT/;class NFe{constructor(e){let n={},i={},r=0;for(let o in e)o in i9?(i[o]=e[o],r=Math.max(i9[o],r)):(n[o]=e[o],o in Q0&&(r=Math.max(Q0[o],r)));this.standardDateProps=n,this.extendedSettings=i,this.severity=r,this.buildFormattingFunc=rt(r9)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,i,r){let{standardDateProps:o,extendedSettings:s}=this,a=_Fe(e.marker,n.marker,i.calendarSystem);if(!a)return this.format(e,i);let l=a;l>1&&(o.year==="numeric"||o.year==="2-digit")&&(o.month==="numeric"||o.month==="2-digit")&&(o.day==="numeric"||o.day==="2-digit")&&(l=1);let g=this.format(e,i),u=this.format(n,i);if(g===u)return g;let d=DFe(o,l),h=r9(d,s,i),f=h(e),A=h(n),p=KFe(g,f,u,A),y=s.separator||r||i.defaultSeparator||"";return p?p.before+f+y+A+p.after:g+y+u}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function r9(t,e,n){let i=Object.keys(t).length;return i===1&&t.timeZoneName==="short"?r=>aW(r.timeZoneOffset):i===0&&e.week?r=>LFe(n.computeWeekNumber(r.marker),n.weekText,n.weekTextLong,n.locale,e.week):YFe(t,e,n)}function YFe(t,e,n){t=Object.assign({},t),e=Object.assign({},e),FFe(t,e),t.timeZone="UTC";let i=new Intl.DateTimeFormat(n.locale.codes,t),r;if(e.omitZeroMinute){let o=Object.assign({},t);delete o.minute,r=new Intl.DateTimeFormat(n.locale.codes,o)}return o=>{let{marker:s}=o,a;r&&!s.getUTCMinutes()?a=r:a=i;let l=a.format(s);return MFe(l,o,t,e,n)}}function FFe(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function MFe(t,e,n,i,r){return t=t.replace(EFe,""),n.timeZoneName==="short"&&(t=TFe(t,r.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":aW(e.timeZoneOffset))),i.omitCommas&&(t=t.replace(XFe,"").trim()),i.omitZeroMinute&&(t=t.replace(":00","")),i.meridiem===!1?t=t.replace(vA,"").trim():i.meridiem==="narrow"?t=t.replace(vA,(o,s)=>s.toLocaleLowerCase()):i.meridiem==="short"?t=t.replace(vA,(o,s)=>`${s.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(t=t.replace(vA,o=>o.toLocaleLowerCase())),t=t.replace(JFe," "),t=t.trim(),t}function TFe(t,e){let n=!1;return t=t.replace(HFe,()=>(n=!0,e)),n||(t+=` ${e}`),t}function LFe(t,e,n,i,r){let o=[];return r==="long"?o.push(n):(r==="short"||r==="narrow")&&o.push(e),(r==="long"||r==="short")&&o.push(" "),o.push(i.simpleNumberFormat.format(t)),i.options.direction==="rtl"&&o.reverse(),o.join("")}function _Fe(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:Tl(t)!==Tl(e)?1:0}function DFe(t,e){let n={};for(let i in t)(!(i in Q0)||Q0[i]<=e)&&(n[i]=t[i]);return n}function KFe(t,e,n,i){let r=0;for(;r<t.length;){let o=t.indexOf(e,r);if(o===-1)break;let s=t.substr(0,o);r=o+e.length;let a=t.substr(r),l=0;for(;l<n.length;){let g=n.indexOf(i,l);if(g===-1)break;let u=n.substr(0,g);l=g+i.length;let d=n.substr(l);if(s===u&&a===d)return{before:s,after:a}}}return null}function o9(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function $0(t,e,n,i){let r=o9(t,n.calendarSystem),o=e?o9(e,n.calendarSystem):null;return{date:r,start:r,end:o,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:i||n.defaultSeparator}}class zFe{constructor(e){this.cmdStr=e}format(e,n,i){return n.cmdFormatter(this.cmdStr,$0(e,null,n,i))}formatRange(e,n,i,r){return i.cmdFormatter(this.cmdStr,$0(e,n,i,r))}}class PFe{constructor(e){this.func=e}format(e,n,i){return this.func($0(e,null,n,i))}formatRange(e,n,i,r){return this.func($0(e,n,i,r))}}function Zn(t){return typeof t=="object"&&t?new NFe(t):typeof t=="string"?new zFe(t):typeof t=="function"?new PFe(t):null}const s9={navLinkDayClick:ge,navLinkWeekClick:ge,duration:xt,bootstrapFontAwesome:ge,buttonIcons:ge,customButtons:ge,defaultAllDayEventDuration:xt,defaultTimedEventDuration:xt,nextDayThreshold:xt,scrollTime:xt,scrollTimeReset:Boolean,slotMinTime:xt,slotMaxTime:xt,dayPopoverFormat:Zn,slotDuration:xt,snapDuration:xt,headerToolbar:ge,footerToolbar:ge,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Zn,dayHeaderClassNames:ge,dayHeaderContent:ge,dayHeaderDidMount:ge,dayHeaderWillUnmount:ge,dayCellClassNames:ge,dayCellContent:ge,dayCellDidMount:ge,dayCellWillUnmount:ge,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ge,weekNumbers:Boolean,weekNumberClassNames:ge,weekNumberContent:ge,weekNumberDidMount:ge,weekNumberWillUnmount:ge,editable:Boolean,viewClassNames:ge,viewDidMount:ge,viewWillUnmount:ge,nowIndicator:Boolean,nowIndicatorClassNames:ge,nowIndicatorContent:ge,nowIndicatorDidMount:ge,nowIndicatorWillUnmount:ge,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ge,locale:ge,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ge,eventOrder:sFe,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ge,contentHeight:ge,direction:String,weekNumberFormat:Zn,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ge,initialDate:ge,now:ge,eventDataTransform:ge,stickyHeaderDates:ge,stickyFooterScrollbar:ge,viewHeight:ge,defaultAllDay:Boolean,eventSourceFailure:ge,eventSourceSuccess:ge,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ge,eventConstraint:ge,eventAllow:ge,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ge,eventContent:ge,eventDidMount:ge,eventWillUnmount:ge,selectConstraint:ge,selectOverlap:ge,selectAllow:ge,droppable:Boolean,unselectCancel:String,slotLabelFormat:ge,slotLaneClassNames:ge,slotLaneContent:ge,slotLaneDidMount:ge,slotLaneWillUnmount:ge,slotLabelClassNames:ge,slotLabelContent:ge,slotLabelDidMount:ge,slotLabelWillUnmount:ge,dayMaxEvents:ge,dayMaxEventRows:ge,dayMinWidth:Number,slotLabelInterval:xt,allDayText:String,allDayClassNames:ge,allDayContent:ge,allDayDidMount:ge,allDayWillUnmount:ge,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Zn,rerenderDelay:Number,moreLinkText:ge,moreLinkHint:ge,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ge,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:xt,hiddenDays:ge,fixedWeekCount:Boolean,validRange:ge,visibleRange:ge,titleFormat:ge,eventInteractive:Boolean,noEventsText:String,viewHint:ge,navLinkHint:ge,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ge,moreLinkClassNames:ge,moreLinkContent:ge,moreLinkDidMount:ge,moreLinkWillUnmount:ge,monthStartFormat:Zn,handleCustomRendering:ge,customRenderingMetaMap:ge,customRenderingReplaces:Boolean},zh={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},a9={datesSet:ge,eventsSet:ge,eventAdd:ge,eventChange:ge,eventRemove:ge,windowResize:ge,eventClick:ge,eventMouseEnter:ge,eventMouseLeave:ge,select:ge,unselect:ge,loading:ge,_unmount:ge,_beforeprint:ge,_afterprint:ge,_noEventDrop:ge,_noEventResize:ge,_resize:ge,_scrollRequest:ge},l9={buttonText:ge,buttonHints:ge,views:ge,plugins:ge,initialEvents:ge,events:ge,eventSources:ge},ec={headerToolbar:tc,footerToolbar:tc,buttonText:tc,buttonHints:tc,buttonIcons:tc,dateIncrement:tc,plugins:SA,events:SA,eventSources:SA,resources:SA};function tc(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?Ks(t,e):t===e}function SA(t,e){return Array.isArray(t)&&Array.isArray(e)?cg(t,e):t===e}const UFe={type:String,component:ge,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ge,usesMinMaxTime:Boolean,classNames:ge,content:ge,didMount:ge,willUnmount:ge};function eB(t){return gW(t,ec)}function lW(t,e){let n={},i={};for(let r in e)r in t&&(n[r]=e[r](t[r]));for(let r in t)r in e||(i[r]=t[r]);return{refined:n,extra:i}}function ge(t){return t}const{hasOwnProperty:q0}=Object.prototype;function gW(t,e){let n={};if(e){for(let i in e)if(e[i]===tc){let r=[];for(let o=t.length-1;o>=0;o-=1){let s=t[o][i];if(typeof s=="object"&&s)r.unshift(s);else if(s!==void 0){n[i]=s;break}}r.length&&(n[i]=gW(r))}}for(let i=t.length-1;i>=0;i-=1){let r=t[i];for(let o in r)o in n||(n[o]=r[o])}return n}function Pc(t,e){let n={};for(let i in t)e(t[i],i)&&(n[i]=t[i]);return n}function Pa(t,e){let n={};for(let i in t)n[i]=e(t[i],i);return n}function sO(t){let e={};for(let n of t)e[n]=!0;return e}function cW(t){let e=[];for(let n in t)e.push(t[n]);return e}function Ks(t,e){if(t===e)return!0;for(let n in t)if(q0.call(t,n)&&!(n in e))return!1;for(let n in e)if(q0.call(e,n)&&t[n]!==e[n])return!1;return!0}const jFe=/^on[A-Z]/;function OFe(t,e){const n=s2(t,e);for(let i of n)if(!jFe.test(i))return!1;return!0}function s2(t,e){let n=[];for(let i in t)q0.call(t,i)&&(i in e||n.push(i));for(let i in e)q0.call(e,i)&&t[i]!==e[i]&&n.push(i);return n}function tB(t,e,n={}){if(t===e)return!0;for(let i in e)if(!(i in t&&QFe(t[i],e[i],n[i])))return!1;for(let i in t)if(!(i in e))return!1;return!0}function QFe(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function $Fe(t,e=0,n,i=1){let r=[];n==null&&(n=Object.keys(t).length);for(let o=e;o<n;o+=i){let s=t[o];s!==void 0&&r.push(s)}return r}let aO={};function qFe(t,e){aO[t]=e}function e9e(t){return new aO[t]}class t9e{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Cr(e)}markerToArray(e){return Ml(e)}}qFe("gregory",t9e);const n9e=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function i9e(t){let e=n9e.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(rO(n)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class r9e{constructor(e){let n=this.timeZone=e.timeZone,i=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=e9e(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Cr(t9(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=Cr(e)),n===null||!rO(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=i9e(e);if(n===null)return null;let{marker:i}=n,r=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-n.timeZoneOffset*60*1e3):r=n.timeZoneOffset),{marker:i,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n.years,i[1]+=n.months,i[2]+=n.days,i[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]-=n.years,i[1]-=n.months,i[2]-=n.days,i[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n,this.calendarSystem.arrayToMarker(i)}addMonths(e,n){let i=this.calendarSystem.markerToArray(e);return i[1]+=n,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,n){let{calendarSystem:i}=this;return Tl(e)===Tl(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)&&i.getMarkerMonth(e)===i.getMarkerMonth(n)?i.getMarkerYear(n)-i.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:i}=this;return Tl(e)===Tl(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)?i.getMarkerMonth(n)-i.getMarkerMonth(e)+(i.getMarkerYear(n)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let i=this.diffWholeYears(e,n);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,n),i!==null?{unit:"month",value:i}:(i=GFe(e,n),i!==null?{unit:"week",value:i}:(i=O0(e,n),i!==null?{unit:"day",value:i}:(i=yFe(e,n),Rb(i)?{unit:"hour",value:i}:(i=vFe(e,n),Rb(i)?{unit:"minute",value:i}:(i=SFe(e,n),Rb(i)?{unit:"second",value:i}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,i){let r;return i.years&&(r=this.diffWholeYears(e,n),r!==null)?r/mFe(i):i.months&&(r=this.diffWholeMonths(e,n),r!==null)?r/pFe(i):i.days&&(r=O0(e,n),r!==null)?r/jd(i):(n.valueOf()-e.valueOf())/qo(i)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?sn(e):n==="hour"?BFe(e):n==="minute"?RFe(e):n==="second"?kFe(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):VFe(e,this.weekDow,this.weekDoy)}format(e,n,i={}){return n.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,i,r={}){return r.isEndExclusive&&(n=ug(n,-1)),i.formatRange({marker:e,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(n)},this,r.defaultSeparator)}formatIso(e,n={}){let i=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?i=n.forcedTzo:i=this.offsetForMarker(e)),oO(e,i,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Cr(t9(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Cr(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-n9(Ml(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Ml(e)):null}toDate(e,n){return this.timeZone==="local"?n9(Ml(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Ml(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class Em{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,i;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(i in e)n[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let i;return n&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}Em.prototype.classes={};Em.prototype.iconClasses={};Em.prototype.baseIconClass="";Em.prototype.iconOverridePrefix="";function ey(t){t();let e=ot.debounceRendering,n=[];function i(r){n.push(r)}for(ot.debounceRendering=i,_f(F(o9e,{}),document.createElement("div"));n.length;)n.shift()();ot.debounceRendering=e}class o9e extends Mr{render(){return F("div",{})}componentDidMount(){this.setState({})}}function lO(t){let e=wYe(t),n=e.Provider;return e.Provider=function(){let i=!this.getChildContext,r=n.apply(this,arguments);if(i){let o=[];this.shouldComponentUpdate=s=>{this.props.value!==s.value&&o.forEach(a=>{a.context=s.value,a.forceUpdate()})},this.sub=s=>{o.push(s);let a=s.componentWillUnmount;s.componentWillUnmount=()=>{o.splice(o.indexOf(s),1),a&&a.call(s)}}}return r},e}class s9e{constructor(e,n,i,r){this.execFunc=e,this.emitter=n,this.scrollTime=i,this.scrollTimeReset=r,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const qa=lO({});function a9e(t,e,n,i,r,o,s,a,l,g,u,d,h){return{dateEnv:r,options:n,pluginHooks:s,emitter:g,dispatch:a,getCurrentData:l,calendarApi:u,viewSpec:t,viewApi:e,dateProfileGenerator:i,theme:o,isRtl:n.direction==="rtl",addResizeHandler(f){g.on("_resize",f)},removeResizeHandler(f){g.off("_resize",f)},createScrollResponder(f){return new s9e(f,g,xt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:d,unregisterInteractiveComponent:h}}class hu extends Mr{shouldComponentUpdate(e,n){return this.debug&&console.log(s2(e,this.props),s2(n,this.state)),!tB(this.props,e,this.propEquality)||!tB(this.state,n,this.stateEquality)}safeSetState(e){tB(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}hu.addPropsEquality=l9e;hu.addStateEquality=g9e;hu.contextType=qa;hu.prototype.propEquality={};hu.prototype.stateEquality={};class Mt extends hu{}Mt.contextType=qa;function l9e(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function g9e(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Ua(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class uW extends Mt{constructor(){super(...arguments),this.id=Cu(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:i}=this.props;(!n.customRenderingReplaces||!a2(i,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Ua(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:i}=n,{customGenerator:r,defaultGenerator:o,renderProps:s}=e,a=gO(e,[],this.handleEl);let l=!1,g,u=[],d;if(r!=null){const h=typeof r=="function"?r(s,F):r;if(h===!0)l=!0;else{const f=h&&typeof h=="object";f&&"html"in h?a.dangerouslySetInnerHTML={__html:h.html}:f&&"domNodes"in h?u=Array.prototype.slice.call(h.domNodes):(f?X4(h):typeof h!="function")?g=h:d=h}}else l=!a2(e.generatorName,i);return l&&o&&(g=o(s)),this.queuedDomNodes=u,this.currentGeneratorMeta=d,F(e.elTag,a,g)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:i,context:r}=this,{handleCustomRendering:o,customRenderingMetaMap:s}=r.options;if(o){const a=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:s==null?void 0:s[i.generatorName];a&&o(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:a},i),{elClasses:(i.elClasses||[]).filter(c9e)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,i=this.base;if(!cg(e,n)){n.forEach(iW);for(let r of e)i.appendChild(r);this.currentDomNodes=e}}}uW.addPropsEquality({elClasses:cg,elStyle:Ks,elAttrs:OFe,renderProps:Ks});function a2(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function gO(t,e,n){const i=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(i.className=(t.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),t.elStyle&&(i.style=t.elStyle),i}function c9e(t){return!!t}const cO=lO(0);class Di extends Mr{constructor(){super(...arguments),this.InnerContent=u9e.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Ua(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=d9e(e.classNameGenerator,e.renderProps);if(e.children){const i=gO(e,n,this.handleEl),r=e.children(this.InnerContent,e.renderProps,i);return e.elTag?F(e.elTag,i,r):r}else return F(uW,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Di.contextType=cO;function u9e(t,e){const n=t.props;return F(uW,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function d9e(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Df extends Mt{render(){let{props:e,context:n}=this,{options:i}=n,r={view:n.viewApi};return F(Di,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...uO(e.viewSpec),...e.elClasses||[]],renderProps:r,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function uO(t){return[`fc-${t.type}-view`,"fc-view"]}function I9e(t,e){let n=null,i=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(i=e.createMarker(t.end)),!n&&!i||n&&i&&i<n?null:{start:n,end:i}}function g9(t,e){let n=[],{start:i}=e,r,o;for(t.sort(C9e),r=0;r<t.length;r+=1)o=t[r],o.start>i&&n.push({start:i,end:o.start}),o.end>i&&(i=o.end);return i<e.end&&n.push({start:i,end:e.end}),n}function C9e(t,e){return t.start.valueOf()-e.start.valueOf()}function dg(t,e){let{start:n,end:i}=t,r=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(n===null||i===null||n<i)&&(r={start:n,end:i}),r}function h9e(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function dW(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function tS(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Ea(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function f9e(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function dO(t){let e=Math.floor(Bg(t.start,t.end))||1,n=sn(t.start),i=mi(n,e);return{start:n,end:i}}function IW(t,e=xt(0)){let n=null,i=null;if(t.end){i=sn(t.end);let r=t.end.valueOf()-i.valueOf();r&&r>=qo(e)&&(i=mi(i,1))}return t.start&&(n=sn(t.start),i&&i<=n&&(i=mi(n,1))),{start:n,end:i}}function m9e(t){let e=IW(t);return Bg(e.start,e.end)>1}function Bd(t,e,n,i){return i==="year"?xt(n.diffWholeYears(t,e),"year"):i==="month"?xt(n.diffWholeMonths(t,e),"month"):ZFe(t,e)}function p9e(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function A9e(t,e){let n=t.initialDate;return n!=null?e.createMarker(n):Hm(t.now,e)}function Hm(t,e){return typeof t=="function"&&(t=t()),t==null?e.createNowMarker():e.createMarker(t)}class IO{constructor(e){this.props=e,this.nowDate=Hm(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,n,i){let{dateEnv:r}=this.props,o=r.subtract(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(o,-1,i)}buildNext(e,n,i){let{dateEnv:r}=this.props,o=r.add(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(o,1,i)}build(e,n,i=!0){let{props:r}=this,o,s,a,l,g,u;return o=this.buildValidRange(),o=this.trimHiddenDays(o),i&&(e=f9e(e,o)),s=this.buildCurrentRangeInfo(e,n),a=/^(year|month|week|day)$/.test(s.unit),l=this.buildRenderRange(this.trimHiddenDays(s.range),s.unit,a),l=this.trimHiddenDays(l),g=l,r.showNonCurrentDates||(g=dg(g,s.range)),g=this.adjustActiveRange(g),g=dg(g,o),u=dW(s.range,o),Ea(l,e)||(e=l.start),{currentDate:e,validRange:o,currentRange:s.range,currentRangeUnit:s.unit,isRangeAllDay:a,activeRange:g,renderRange:l,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(s.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:i}=this,r=null,o=null,s=null,a;return i.duration?(r=i.duration,o=i.durationUnit,s=this.buildRangeFromDuration(e,n,r,o)):(a=this.props.dayCount)?(o="day",s=this.buildRangeFromDayCount(e,n,a)):(s=this.buildCustomVisibleRange(e))?o=i.dateEnv.greatestWholeUnit(s.start,s.end).unit:(r=this.getFallbackDuration(),o=o2(r).unit,s=this.buildRangeFromDuration(e,n,r,o)),{duration:r,unit:o,range:s}}getFallbackDuration(){return xt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:i,slotMinTime:r,slotMaxTime:o}=this.props,{start:s,end:a}=e;return i&&(jd(r)<0&&(s=sn(s),s=n.add(s,r)),jd(o)>1&&(a=sn(a),a=mi(a,-1),a=n.add(a,o))),{start:s,end:a}}buildRangeFromDuration(e,n,i,r){let{dateEnv:o,dateAlignment:s}=this.props,a,l,g;if(!s){let{dateIncrement:d}=this.props;d&&qo(d)<qo(i)?s=o2(d).unit:s=r}jd(i)<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,n),a=sn(a));function u(){a=o.startOf(e,s),l=o.add(a,i),g={start:a,end:l}}return u(),this.trimHiddenDays(g)||(e=this.skipHiddenDays(e,n),u()),g}buildRangeFromDayCount(e,n,i){let{dateEnv:r,dateAlignment:o}=this.props,s=0,a=e,l;o&&(a=r.startOf(a,o)),a=sn(a),a=this.skipHiddenDays(a,n),l=a;do l=mi(l,1),this.isHiddenDay(l)||(s+=1);while(s<i);return{start:a,end:l}}buildCustomVisibleRange(e){let{props:n}=this,i=n.visibleRangeInput,r=typeof i=="function"?i.call(n.calendarApi,n.dateEnv.toDate(e)):i,o=this.refineRange(r);return o&&(o.start==null||o.end==null)?null:o}buildRenderRange(e,n,i){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,i;return n||((i=this.props.dateAlignment)?xt(1,i):e||xt({days:1}))}refineRange(e){if(e){let n=I9e(e,this.props.dateEnv);return n&&(n=IW(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],i=0,r;for(this.props.weekends===!1&&e.push(0,6),r=0;r<7;r+=1)(n[r]=e.indexOf(r)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:i}=e;return n&&(n=this.skipHiddenDays(n)),i&&(i=this.skipHiddenDays(i,-1,!0)),n==null||i==null||n<i?{start:n,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?n:0)+7)%7];)e=mi(e,n);return e}}function CW(t,e,n,i){return{instanceId:Cu(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:i??null}}function b9e(t,e,n,i){for(let r=0;r<i.length;r+=1){let o=i[r].parse(t,n);if(o){let{allDay:s}=t;return s==null&&(s=e,s==null&&(s=o.allDayGuess,s==null&&(s=!1))),{allDay:s,duration:o.duration,typeData:o.typeData,typeId:r}}}return null}function Uc(t,e,n){let{dateEnv:i,pluginHooks:r,options:o}=n,{defs:s,instances:a}=t;a=Pc(a,l=>!s[l.defId].recurringDef);for(let l in s){let g=s[l];if(g.recurringDef){let{duration:u}=g.recurringDef;u||(u=g.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let d=y9e(g,u,e,i,r.recurringTypes);for(let h of d){let f=CW(l,{start:h,end:i.add(h,u)});a[f.instanceId]=f}}}return{defs:s,instances:a}}function y9e(t,e,n,i,r){let s=r[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:i.subtract(n.start,e),end:n.end},i);return t.allDay&&(s=s.map(sn)),s}const Vb={id:String,groupId:String,title:String,url:String,interactive:Boolean},CO={start:ge,end:ge,date:ge,allDay:Boolean},v9e=Object.assign(Object.assign(Object.assign({},Vb),CO),{extendedProps:ge});function hO(t,e,n,i,r=hW(n),o,s){let{refined:a,extra:l}=fO(t,n,r),g=Z9e(e,n),u=b9e(a,g,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let h=l2(a,l,e?e.sourceId:"",u.allDay,!!u.duration,n,o);return h.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:h,instance:null}}let d=S9e(a,g,n,i);if(d){let h=l2(a,l,e?e.sourceId:"",d.allDay,d.hasEnd,n,o),f=CW(h.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return s&&h.publicId&&s[h.publicId]&&(f.instanceId=s[h.publicId]),{def:h,instance:f}}return null}function fO(t,e,n=hW(e)){return lW(t,n)}function hW(t){return Object.assign(Object.assign(Object.assign({},ty),v9e),t.pluginHooks.eventRefiners)}function l2(t,e,n,i,r,o,s){let a={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(s&&t.id?s[t.id]:"")||Cu(),sourceId:n,allDay:i,hasEnd:r,interactive:t.interactive,ui:ny(t,o),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let l of o.pluginHooks.eventDefMemberAdders)Object.assign(a,l(t));return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function S9e(t,e,n,i){let{allDay:r}=t,o,s=null,a=!1,l,g=null,u=t.start!=null?t.start:t.date;if(o=n.dateEnv.createMarkerMeta(u),o)s=o.marker;else if(!i)return null;return t.end!=null&&(l=n.dateEnv.createMarkerMeta(t.end)),r==null&&(e!=null?r=e:r=(!o||o.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),r&&s&&(s=sn(s)),l&&(g=l.marker,r&&(g=sn(g)),s&&g<=s&&(g=null)),g?a=!0:i||(a=n.options.forceEventDuration||!1,g=n.dateEnv.add(s,r?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:r,hasEnd:a,range:{start:s,end:g},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function Z9e(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Kf(t,e,n,i,r,o){let s=Tr(),a=hW(n);for(let l of t){let g=hO(l,e,n,i,a,r,o);g&&g2(g,s)}return s}function g2(t,e=Tr()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function fW(t,e){let n=t.instances[e];if(n){let i=t.defs[n.defId],r=nS(t,o=>G9e(i,o));return r.defs[i.defId]=i,r.instances[n.instanceId]=n,r}return Tr()}function G9e(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Tr(){return{defs:{},instances:{}}}function mW(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function nS(t,e){let n=Pc(t.defs,e),i=Pc(t.instances,r=>n[r.defId]);return{defs:n,instances:i}}function B9e(t,e){let{defs:n,instances:i}=t,r={},o={};for(let s in n)e.defs[s]||(r[s]=n[s]);for(let s in i)!e.instances[s]&&r[i[s].defId]&&(o[s]=i[s]);return{defs:r,instances:o}}function R9e(t,e){return Array.isArray(t)?Kf(t,null,e,!0):typeof t=="object"&&t?Kf([t],null,e,!0):t!=null?String(t):null}function c9(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const ty={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ge,overlap:ge,allow:ge,className:c9,classNames:c9,color:String,backgroundColor:String,borderColor:String,textColor:String},k9e={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function ny(t,e){let n=R9e(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function mO(t){return t.reduce(V9e,k9e)}function V9e(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const w9e={id:String,defaultAllDay:Boolean,url:String,format:String,events:ge,eventDataTransform:ge,success:ge,failure:ge};function pO(t,e,n=AO(e)){let i;if(typeof t=="string"?i={url:t}:typeof t=="function"||Array.isArray(t)?i={events:t}:typeof t=="object"&&t&&(i=t),i){let{refined:r,extra:o}=lW(i,n),s=W9e(r,e);if(s)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:Cu(),sourceDefId:s.sourceDefId,meta:s.meta,ui:ny(r,e),extendedProps:o}}return null}function AO(t){return Object.assign(Object.assign(Object.assign({},ty),w9e),t.pluginHooks.eventSourceRefiners)}function W9e(t,e){let n=e.pluginHooks.eventSourceDefs;for(let i=n.length-1;i>=0;i-=1){let o=n[i].parseMeta(t);if(o)return{sourceDefId:i,meta:o}}return null}function x9e(t,e,n,i,r){switch(e.type){case"RECEIVE_EVENTS":return X9e(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return J9e(t,n[e.sourceId],e.rawEvents,i.activeRange,r);case"ADD_EVENTS":return E9e(t,e.eventStore,i?i.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return mW(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?Uc(t,i.activeRange,r):t;case"REMOVE_EVENTS":return B9e(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return yO(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return nS(t,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return Tr();default:return t}}function X9e(t,e,n,i,r,o){if(e&&n===e.latestFetchId){let s=Kf(bO(r,e,o),e,o);return i&&(s=Uc(s,i,o)),mW(yO(t,e.sourceId),s)}return t}function J9e(t,e,n,i,r){const{defIdMap:o,instanceIdMap:s}=N9e(t);let a=Kf(bO(n,e,r),e,r,!1,o,s);return Uc(a,i,r)}function bO(t,e,n){let i=n.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(t=u9(t,r)),i&&(t=u9(t,i)),t}function u9(t,e){let n;if(!e)n=t;else{n=[];for(let i of t){let r=e(i);r?n.push(r):r==null&&n.push(i)}}return n}function E9e(t,e,n,i){return n&&(e=Uc(e,n,i)),mW(t,e)}function d9(t,e,n){let{defs:i}=t,r=Pa(t.instances,o=>i[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:n.createMarker(e.toDate(o.range.start,o.forcedStartTzo)),end:n.createMarker(e.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:o.forcedEndTzo}));return{defs:i,instances:r}}function yO(t,e){return nS(t,n=>n.sourceId!==e)}function H9e(t,e){return{defs:t.defs,instances:Pc(t.instances,n=>!e[n.instanceId])}}function N9e(t){const{defs:e,instances:n}=t,i={},r={};for(let o in e){const s=e[o],{publicId:a}=s;a&&(i[a]=o)}for(let o in n){const s=n[o],a=e[s.defId],{publicId:l}=a;l&&(r[l]=o)}return{defIdMap:i,instanceIdMap:r}}class iS{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){Y9e(this.handlers,e,n)}off(e,n){F9e(this.handlers,e,n)}trigger(e,...n){let i=this.handlers[e]||[],r=this.options&&this.options[e],o=[].concat(r||[],i);for(let s of o)s.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Y9e(t,e,n){(t[e]||(t[e]=[])).push(n)}function F9e(t,e,n){n?t[e]&&(t[e]=t[e].filter(i=>i!==n)):delete t[e]}const M9e={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function T9e(t,e){return Kf(L9e(t),null,e)}function L9e(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},M9e),n)),e}function vO(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},pW(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function _9e(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function pW(t,e){let n={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(n,i(t,e));return Object.assign(n,iMe(t,e.dateEnv)),n}function I9(t,e,n){let{dateEnv:i,options:r}=n,o=e;return t?(o=sn(o),o=i.add(o,r.defaultAllDayEventDuration)):o=i.add(o,r.defaultTimedEventDuration),o}function AW(t,e,n,i){let r=iy(t.defs,e),o=Tr();for(let s in t.defs){let a=t.defs[s];o.defs[s]=D9e(a,r[s],n,i)}for(let s in t.instances){let a=t.instances[s],l=o.defs[a.defId];o.instances[s]=K9e(a,l,r[a.defId],n,i)}return o}function D9e(t,e,n,i){let r=n.standardProps||{};r.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(r.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},t),r),{ui:Object.assign(Object.assign({},t.ui),r.ui)});n.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),n.extendedProps));for(let s of i.pluginHooks.eventDefMutationAppliers)s(o,n,i);return!o.hasEnd&&i.options.forceEventDuration&&(o.hasEnd=!0),o}function K9e(t,e,n,i,r){let{dateEnv:o}=r,s=i.standardProps&&i.standardProps.allDay===!0,a=i.standardProps&&i.standardProps.hasEnd===!1,l=Object.assign({},t);return s&&(l.range=dO(l.range)),i.datesDelta&&n.startEditable&&(l.range={start:o.add(l.range.start,i.datesDelta),end:o.add(l.range.end,i.datesDelta)}),i.startDelta&&n.durationEditable&&(l.range={start:o.add(l.range.start,i.startDelta),end:l.range.end}),i.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:o.add(l.range.end,i.endDelta)}),a&&(l.range={start:l.range.start,end:I9(e.allDay,l.range.start,r)}),e.allDay&&(l.range={start:sn(l.range.start),end:sn(l.range.end)}),l.range.end<l.range.start&&(l.range.end=I9(e.allDay,l.range.start,r)),l}class $u{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Vn{constructor(e,n,i){this._context=e,this._def=n,this._instance=i||null}setProp(e,n){if(e in CO)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=Vb[e](n),this.mutate({standardProps:{publicId:n}});else if(e in Vb)n=Vb[e](n),this.mutate({standardProps:{[e]:n}});else if(e in ty){let i=ty[e](n);e==="color"?i={backgroundColor:n,borderColor:n}:e==="editable"?i={startEditable:n,durationEditable:n}:i={[e]:n},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:i}=this._context,r=i.createMarker(e);if(r&&this._instance){let o=this._instance.range,s=Bd(o.start,r,i,n.granularity);n.maintainDuration?this.mutate({datesDelta:s}):this.mutate({startDelta:s})}}setEnd(e,n={}){let{dateEnv:i}=this._context,r;if(!(e!=null&&(r=i.createMarker(e),!r))&&this._instance)if(r){let o=Bd(this._instance.range.end,r,i,n.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,i={}){let{dateEnv:r}=this._context,o={allDay:i.allDay},s=r.createMarker(e),a;if(s&&!(n!=null&&(a=r.createMarker(n),!a))&&this._instance){let l=this._instance.range;i.allDay===!0&&(l=dO(l));let g=Bd(l.start,s,r,i.granularity);if(a){let u=Bd(l.end,a,r,i.granularity);CFe(g,u)?this.mutate({datesDelta:g,standardProps:o}):this.mutate({startDelta:g,endDelta:u,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:g,standardProps:o})}}moveStart(e){let n=xt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=xt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=xt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let i={allDay:e},{maintainDuration:r}=n;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=r),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:n}=this._context,i=this._instance,r=Zn(e);return this._def.hasEnd?n.formatRange(i.range.start,i.range.end,r,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):n.format(i.range.start,r,{forcedTzo:i.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let i=this._def,r=this._context,{eventStore:o}=r.getCurrentData(),s=fW(o,n.instanceId);s=AW(s,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let l=new Vn(r,i,n);this._def=s.defs[i.defId],this._instance=s.instances[n.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:s}),r.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:kc(s,r,n),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let e=this._context,n=SO(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new $u(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:i}=n,{startStr:r,endStr:o}=this,s={allDay:n.allDay};return n.title&&(s.title=n.title),r&&(s.start=r),o&&(s.end=o),n.publicId&&(s.id=n.publicId),n.groupId&&(s.groupId=n.groupId),n.url&&(s.url=n.url),i.display&&i.display!=="auto"&&(s.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?s.color=i.backgroundColor:(i.backgroundColor&&(s.backgroundColor=i.backgroundColor),i.borderColor&&(s.borderColor=i.borderColor)),i.textColor&&(s.textColor=i.textColor),i.classNames.length&&(s.classNames=i.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(s,n.extendedProps):s.extendedProps=n.extendedProps),s}toJSON(){return this.toPlainObject()}}function SO(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function kc(t,e,n){let{defs:i,instances:r}=t,o=[],s=n?n.instanceId:"";for(let a in r){let l=r[a],g=i[l.defId];l.instanceId!==s&&o.push(new Vn(e,g,l))}return o}function c2(t,e,n,i){let r={},o={},s={},a=[],l=[],g=iy(t.defs,e);for(let u in t.defs){let d=t.defs[u];g[d.defId].display==="inverse-background"&&(d.groupId?(r[d.groupId]=[],s[d.groupId]||(s[d.groupId]=d)):o[u]=[])}for(let u in t.instances){let d=t.instances[u],h=t.defs[d.defId],f=g[h.defId],A=d.range,p=!h.allDay&&i?IW(A,i):A,y=dg(p,n);y&&(f.display==="inverse-background"?h.groupId?r[h.groupId].push(y):o[d.defId].push(y):f.display!=="none"&&(f.display==="background"?a:l).push({def:h,ui:f,instance:d,range:y,isStart:p.start&&p.start.valueOf()===y.start.valueOf(),isEnd:p.end&&p.end.valueOf()===y.end.valueOf()}))}for(let u in r){let d=r[u],h=g9(d,n);for(let f of h){let A=s[u],p=g[A.defId];a.push({def:A,ui:p,instance:null,range:f,isStart:!1,isEnd:!1})}}for(let u in o){let d=o[u],h=g9(d,n);for(let f of h)a.push({def:t.defs[u],ui:g[u],instance:null,range:f,isStart:!1,isEnd:!1})}return{bg:a,fg:l}}function z9e(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function C9(t,e){t.fcSeg=e}function GI(t){return t.fcSeg||t.parentNode.fcSeg||null}function iy(t,e){return Pa(t,n=>ZO(n,e))}function ZO(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),mO(n)}function bW(t,e){let n=t.map(P9e);return n.sort((i,r)=>aFe(i,r,e)),n.map(i=>i._seg)}function P9e(t){let{eventRange:e}=t,n=e.def,i=e.instance?e.instance.range:e.range,r=i.start?i.start.valueOf():0,o=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:r,end:o,duration:o-r,allDay:Number(n.allDay),_seg:t})}function U9e(t,e){let{pluginHooks:n}=e,i=n.isDraggableTransformers,{def:r,ui:o}=t.eventRange,s=o.startEditable;for(let a of i)s=a(s,r,o,e);return s}function j9e(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function O9e(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function Ph(t,e,n,i,r,o,s){let{dateEnv:a,options:l}=n,{displayEventTime:g,displayEventEnd:u}=l,d=t.eventRange.def,h=t.eventRange.instance;g==null&&(g=i!==!1),u==null&&(u=r!==!1);let f=h.range.start,A=h.range.end,p=o||t.start||t.eventRange.range.start,y=s||t.end||t.eventRange.range.end,v=sn(f).valueOf()===sn(p).valueOf(),S=sn(ug(A,-1)).valueOf()===sn(ug(y,-1)).valueOf();return g&&!d.allDay&&(v||S)?(p=v?f:p,y=S?A:y,u&&d.hasEnd?a.formatRange(p,y,e,{forcedStartTzo:o?null:h.forcedStartTzo,forcedEndTzo:s?null:h.forcedEndTzo}):a.format(p,e,{forcedTzo:o?null:h.forcedStartTzo})):""}function Ha(t,e,n){let i=t.eventRange.range;return{isPast:i.end<=(n||e.start),isFuture:i.start>=(n||e.end),isToday:e&&Ea(e,i.start)}}function Q9e(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function GO(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function yW(t,e){let{def:n,instance:i}=t.eventRange,{url:r}=n;if(r)return{href:r};let{emitter:o,options:s}=e,{eventInteractive:a}=s;return a==null&&(a=n.interactive,a==null&&(a=!!o.hasHandlers("eventClick"))),a?iO(l=>{o.trigger("eventClick",{el:l.target,event:new Vn(e,n,i),jsEvent:l,view:e.viewApi})}):{}}const $9e={start:ge,end:ge,allDay:Boolean};function q9e(t,e,n){let i=eMe(t,e),{range:r}=i;if(!r.start)return null;if(!r.end){if(n==null)return null;r.end=e.add(r.start,n)}return i}function eMe(t,e){let{refined:n,extra:i}=lW(t,$9e),r=n.start?e.createMarkerMeta(n.start):null,o=n.end?e.createMarkerMeta(n.end):null,{allDay:s}=n;return s==null&&(s=r&&r.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:o?o.marker:null},allDay:s},i)}function tMe(t,e){return h9e(t.range,e.range)&&t.allDay===e.allDay&&nMe(t,e)}function nMe(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function iMe(t,e){return Object.assign(Object.assign({},RO(t.range,e,t.allDay)),{allDay:t.allDay})}function BO(t,e,n){return Object.assign(Object.assign({},RO(t,e,n)),{timeZone:e.timeZone})}function RO(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function rMe(t,e,n){let i=fO({editable:!1},n),r=l2(i.refined,i.extra,"",t.allDay,!0,n);return{def:r,ui:ZO(r,e),instance:CW(r.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function oMe(t,e,n){let i=!1,r=function(a){i||(i=!0,e(a))},o=function(a){i||(i=!0,n(a))},s=t(r,o);s&&typeof s.then=="function"&&s.then(r,o)}class h9 extends Error{constructor(e,n){super(e),this.response=n}}function sMe(t,e,n){t=t.toUpperCase();const i={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(i.body=new URLSearchParams(n),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(r=>{if(r.ok)return r.json().then(o=>[o,r],()=>{throw new h9("Failure parsing JSON",r)});throw new h9("Request failed",r)})}let nB;function kO(){return nB==null&&(nB=aMe()),nB}function aMe(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class lMe extends Mt{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{ey(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{ey(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:i}=this.state,r=i||n.height==="auto"||n.contentHeight==="auto",o=!r&&n.height!=null?n.height:"",s=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return kO()||s.push("fc-liquid-hack"),e.children(s,o,r,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class DI{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function gMe(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function vW(t){return{[t.component.uid]:t}}const u2={};class cMe{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let i=this.getCurrentData(),r;n=n||"day",r=i.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:i}=this.getCurrentData(),r=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),o,s;for(let a in n)r.push(a);for(o=0;o<r.length;o+=1)if(s=n[r[o]],s&&s.singleUnit===e)return s;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Hm(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),i=xt(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),Zn(n))}formatRange(e,n,i){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(n),Zn(i),i)}formatIso(e,n){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:n})}select(e,n){let i;n==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:n};let r=this.getCurrentData(),o=q9e(i,r.dateEnv,xt({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),vO(o,null,r))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),_9e(e,n))}addEvent(e,n){if(e instanceof Vn){let s=e._def,a=e._instance;return this.getCurrentData().eventStore.defs[s.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:g2({def:s,instance:a})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),r;if(n instanceof $u)r=n.internalEventSource;else if(typeof n=="boolean")n&&([r]=cW(i.eventSources));else if(n!=null){let s=this.getEventSourceById(n);if(!s)return console.warn(`Could not find an event source with ID "${n}"`),null;r=s.internalEventSource}let o=hO(e,r,i,!1);if(o){let s=new Vn(i,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:g2(o)}),this.triggerEventAdd(s),s}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:SO(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:i,instances:r}=n.eventStore;e=String(e);for(let o in i){let s=i[o];if(s.publicId===e){if(s.recurringDef)return new Vn(n,s,null);for(let a in r){let l=r[a];if(l.defId===s.defId)return new Vn(n,s,l)}}}return null}getEvents(){let e=this.getCurrentData();return kc(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,i=[];for(let r in n)i.push(new $u(e,n[r]));return i}getEventSourceById(e){let n=this.getCurrentData(),i=n.eventSources;e=String(e);for(let r in i)if(i[r].publicId===e)return new $u(n,i[r]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof $u)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=pO(e,n);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new $u(n,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=xt(e);n&&this.trigger("_scrollRequest",{time:n})}}function uMe(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function VO(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function dMe(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function IMe(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function CMe(t,e){return{left:t.left-e.left,top:t.top-e.top}}const iB=Tr();class hMe{constructor(){this.getKeysForEventDefs=rt(this._getKeysForEventDefs),this.splitDateSelection=rt(this._splitDateSpan),this.splitEventStore=rt(this._splitEventStore),this.splitIndividualUi=rt(this._splitIndividualUi),this.splitEventDrag=rt(this._splitInteraction),this.splitEventResize=rt(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),i=this.getKeysForEventDefs(e.eventStore),r=this.splitDateSelection(e.dateSelection),o=this.splitIndividualUi(e.eventUiBases,i),s=this.splitEventStore(e.eventStore,i),a=this.splitEventDrag(e.eventDrag),l=this.splitEventResize(e.eventResize),g={};this.eventUiBuilders=Pa(n,(u,d)=>this.eventUiBuilders[d]||rt(fMe));for(let u in n){let d=n[u],h=s[u]||iB,f=this.eventUiBuilders[u];g[u]={businessHours:d.businessHours||e.businessHours,dateSelection:r[u]||null,eventStore:h,eventUiBases:f(e.eventUiBases[""],d.ui,o[u]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:a[u]||null,eventResize:l[u]||null}}return g}_splitDateSpan(e){let n={};if(e){let i=this.getKeysForDateSpan(e);for(let r of i)n[r]=e}return n}_getKeysForEventDefs(e){return Pa(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:i,instances:r}=e,o={};for(let s in i)for(let a of n[s])o[a]||(o[a]=Tr()),o[a].defs[s]=i[s];for(let s in r){let a=r[s];for(let l of n[a.defId])o[l]&&(o[l].instances[s]=a)}return o}_splitIndividualUi(e,n){let i={};for(let r in e)if(r)for(let o of n[r])i[o]||(i[o]={}),i[o][r]=e[r];return i}_splitInteraction(e){let n={};if(e){let i=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),r=this._getKeysForEventDefs(e.mutatedEvents),o=this._splitEventStore(e.mutatedEvents,r),s=a=>{n[a]||(n[a]={affectedEvents:i[a]||iB,mutatedEvents:o[a]||iB,isEvent:e.isEvent})};for(let a in i)s(a);for(let a in o)s(a)}return n}}function fMe(t,e,n){let i=[];t&&i.push(t),e&&i.push(e);let r={"":mO(i)};return n&&Object.assign(r,n),r}function SW(t,e,n,i){return{dow:t.getUTCDay(),isDisabled:!!(i&&!Ea(i.activeRange,t)),isOther:!!(i&&!Ea(i.currentRange,t)),isToday:!!(e&&Ea(e,t)),isPast:!!(n?t<n:e&&t<e.start),isFuture:!!(n?t>n:e&&t>=e.end)}}function rS(t,e){let n=["fc-day",`fc-day-${AFe[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const mMe=Zn({year:"numeric",month:"long",day:"numeric"}),pMe=Zn({week:"long"});function BI(t,e,n="day",i=!0){const{dateEnv:r,options:o,calendarApi:s}=t;let a=r.format(e,n==="week"?pMe:mMe);if(o.navLinks){let l=r.toDate(e);const g=u=>{let d=n==="day"?o.navLinkDayClick:n==="week"?o.navLinkWeekClick:null;typeof d=="function"?d.call(s,r.toDate(e),u):(typeof d=="string"&&(n=d),s.zoomTo(e,n))};return Object.assign({title:Kh(o.navLinkHint,[a,l],a),"data-navlink":""},i?nO(g):{onClick:g})}return{"aria-label":a}}let rB=null;function AMe(){return rB===null&&(rB=bMe()),rB}function bMe(){let t=document.createElement("div");Dh(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return iW(t),n}let oB;function yMe(){return oB||(oB=vMe()),oB}function vMe(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=wO(t);return document.body.removeChild(t),e}function wO(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function SMe(t,e=!1){let n=window.getComputedStyle(t),i=parseInt(n.borderLeftWidth,10)||0,r=parseInt(n.borderRightWidth,10)||0,o=parseInt(n.borderTopWidth,10)||0,s=parseInt(n.borderBottomWidth,10)||0,a=wO(t),l=a.y-i-r,g=a.x-o-s,u={borderLeft:i,borderRight:r,borderTop:o,borderBottom:s,scrollbarBottom:g,scrollbarLeft:0,scrollbarRight:0};return AMe()&&n.direction==="rtl"?u.scrollbarLeft=l:u.scrollbarRight=l,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function ZMe(t,e=!1,n){let i=n?t.getBoundingClientRect():ZW(t),r=SMe(t,e),o={left:i.left+r.borderLeft+r.scrollbarLeft,right:i.right-r.borderRight-r.scrollbarRight,top:i.top+r.borderTop,bottom:i.bottom-r.borderBottom-r.scrollbarBottom};return e&&(o.left+=r.paddingLeft,o.right-=r.paddingRight,o.top+=r.paddingTop,o.bottom-=r.paddingBottom),o}function ZW(t){let e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset}}function GMe(t){let e=WO(t),n=t.getBoundingClientRect();for(let i of e){let r=VO(n,i.getBoundingClientRect());if(r)n=r;else return null}return n}function WO(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class RI{constructor(e,n,i,r){this.els=n;let o=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(o.left),r&&this.buildElVerticals(o.top)}buildElHorizontals(e){let n=[],i=[];for(let r of this.els){let o=r.getBoundingClientRect();n.push(o.left-e),i.push(o.right-e)}this.lefts=n,this.rights=i}buildElVerticals(e){let n=[],i=[];for(let r of this.els){let o=r.getBoundingClientRect();n.push(o.top-e),i.push(o.bottom-e)}this.tops=n,this.bottoms=i}leftToIndex(e){let{lefts:n,rights:i}=this,r=n.length,o;for(o=0;o<r;o+=1)if(e>=n[o]&&e<i[o])return o}topToIndex(e){let{tops:n,bottoms:i}=this,r=n.length,o;for(o=0;o<r;o+=1)if(e>=n[o]&&e<i[o])return o}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return ZA(this.tops||[],e.tops||[])&&ZA(this.bottoms||[],e.bottoms||[])&&ZA(this.lefts||[],e.lefts||[])&&ZA(this.rights||[],e.rights||[])}}function ZA(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(Math.round(t[i])!==Math.round(e[i]))return!1;return!0}class GW{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class BMe extends GW{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class RMe extends GW{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(e){window.scroll(window.pageXOffset,e)}setScrollLeft(e){window.scroll(e,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class as extends Mt{constructor(){super(...arguments),this.uid=Cu()}prepareHits(){}queryHit(e,n,i,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Mi(e,".fc-event-mirror")}isValidDateDownEl(e){return!Mi(e,".fc-event:not(.fc-bg-event)")&&!Mi(e,".fc-more-link")&&!Mi(e,"a[data-navlink]")&&!Mi(e,".fc-popover")}}class xO{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let i of e)this.insertEntry(i,n);return n}insertEntry(e,n){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,i){if(this.allowReslicing&&e.touchingEntry){const r=Object.assign(Object.assign({},n),{span:BW(n.span,e.touchingEntry.span)});i.push(r),this.splitEntry(n,e.touchingEntry,i)}else i.push(n)}splitEntry(e,n,i){let r=e.span,o=n.span;r.start<o.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:o.start}},i),r.end>o.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.end,end:r.end}},i)}insertEntryAt(e,n){let{entriesByLevel:i,levelCoords:r}=this;n.lateral===-1?(sB(r,n.level,n.levelCoord),sB(i,n.level,[e])):sB(i[n.level],n.lateral,e),this.stackCnts[Vc(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:i,strictOrder:r,stackCnts:o}=this,s=n.length,a=0,l=-1,g=-1,u=null,d=0;for(let A=0;A<s;A+=1){const p=n[A];if(!r&&p>=a+this.getEntryThickness(e))break;let y=i[A],v,S=I2(y,e.span.start,d2),Z=S[0]+S[1];for(;(v=y[Z])&&v.span.start<e.span.end;){let R=p+this.getEntryThickness(v);R>a&&(a=R,u=v,l=A,g=Z),R===a&&(d=Math.max(d,o[Vc(v)]+1)),Z+=1}}let h=0;if(u)for(h=l+1;h<s&&n[h]<a;)h+=1;let f=-1;return h<s&&n[h]===a&&(f=I2(i[h],e.span.end,d2)[0]),{touchingLevel:l,touchingLateral:g,touchingEntry:u,stackCnt:d,levelCoord:a,level:h,lateral:f}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,i=e.length,r=[];for(let o=0;o<i;o+=1){let s=e[o],a=n[o];for(let l of s)r.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:a}))}return r}}function d2(t){return t.span.end}function Vc(t){return t.index+":"+t.span.start}function kMe(t){let e=[];for(let n of t){let i=[],r={span:n.span,entries:[n]};for(let o of e)BW(o.span,r.span)?r={entries:o.entries.concat(r.entries),span:VMe(o.span,r.span)}:i.push(o);i.push(r),e=i}return e}function VMe(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function BW(t,e){let n=Math.max(t.start,e.start),i=Math.min(t.end,e.end);return n<i?{start:n,end:i}:null}function sB(t,e,n){t.splice(e,0,n)}function I2(t,e,n){let i=0,r=t.length;if(!r||e<n(t[i]))return[0,0];if(e>n(t[r-1]))return[r,0];for(;i<r;){let o=Math.floor(i+(r-i)/2),s=n(t[o]);if(e<s)r=o;else if(e>s)i=o+1;else return[o,1]}return[i,0]}class wMe{constructor(e,n){this.emitter=new iS}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const RW={};function WMe(t,e){return!t||e>10?Zn({weekday:"short"}):e>1?Zn({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Zn({weekday:"long"})}const XO="fc-col-header-cell";function JO(t){return t.text}class xMe extends Mt{render(){let{dateEnv:e,options:n,theme:i,viewApi:r}=this.context,{props:o}=this,{date:s,dateProfile:a}=o,l=SW(s,o.todayRange,null,a),g=[XO].concat(rS(l,i)),u=e.format(s,o.dayHeaderFormat),d=!l.isDisabled&&o.colCnt>1?BI(this.context,s):{},h=Object.assign(Object.assign(Object.assign({date:e.toDate(s),view:r},o.extraRenderProps),{text:u}),l);return F(Di,{elTag:"th",elClasses:g,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":l.isDisabled?void 0:Jm(s)},o.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:JO,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},f=>F("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&F(f,{elTag:"a",elAttrs:d,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}}const XMe=Zn({weekday:"long"});class JMe extends Mt{render(){let{props:e}=this,{dateEnv:n,theme:i,viewApi:r,options:o}=this.context,s=mi(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=n.format(s,e.dayHeaderFormat),g=Object.assign(Object.assign(Object.assign(Object.assign({date:s},a),{view:r}),e.extraRenderProps),{text:l});return F(Di,{elTag:"th",elClasses:[XO,...rS(a,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:JO,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},u=>F("div",{className:"fc-scrollgrid-sync-inner"},F(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(s,XMe)}})))}}class KI extends Mr{constructor(e,n){super(e,n),this.initialNowDate=Hm(n.options.now,n.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:n}=this,i=ug(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),r=n.dateEnv.startOf(i,e.unit),o=n.dateEnv.add(r,xt(1,e.unit)),s=o.valueOf()-i.valueOf();return s=Math.min(1e3*60*60*24,s),{currentState:{nowDate:r,todayRange:f9(r)},nextState:{nowDate:o,todayRange:f9(o)},waitMs:s}}setTimeout(){let{nextState:e,waitMs:n}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},n)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}KI.contextType=qa;function f9(t){let e=sn(t),n=mi(e,1);return{start:e,end:n}}class EO extends Mt{constructor(){super(...arguments),this.createDayHeaderFormatter=rt(EMe)}render(){let{context:e}=this,{dates:n,dateProfile:i,datesRepDistinctDays:r,renderIntro:o}=this.props,s=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,n.length);return F(KI,{unit:"day"},(a,l)=>F("tr",{role:"row"},o&&o("day"),n.map(g=>r?F(xMe,{key:g.toISOString(),date:g,dateProfile:i,todayRange:l,colCnt:n.length,dayHeaderFormat:s}):F(JMe,{key:g.getUTCDay(),dow:g.getUTCDay(),dayHeaderFormat:s}))))}}function EMe(t,e,n){return t||WMe(e,n)}class HO{constructor(e,n){let i=e.start,{end:r}=e,o=[],s=[],a=-1;for(;i<r;)n.isHiddenDay(i)?o.push(a+.5):(a+=1,o.push(a),s.push(i)),i=mi(i,1);this.dates=s,this.indices=o,this.cnt=s.length}sliceRange(e){let n=this.getDateDayIndex(e.start),i=this.getDateDayIndex(mi(e.end,-1)),r=Math.max(0,n),o=Math.min(this.cnt-1,i);return r=Math.ceil(r),o=Math.floor(o),r<=o?{firstIndex:r,lastIndex:o,isStart:n===r,isEnd:i===o}:null}getDateDayIndex(e){let{indices:n}=this,i=Math.floor(Bg(this.dates[0],e));return i<0?n[0]-1:i>=n.length?n[n.length-1]+1:n[i]}}class NO{constructor(e,n){let{dates:i}=e,r,o,s;if(n){for(o=i[0].getUTCDay(),r=1;r<i.length&&i[r].getUTCDay()!==o;r+=1);s=Math.ceil(i.length/r)}else s=1,r=i.length;this.rowCnt=s,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let i=[];for(let r=0;r<this.colCnt;r+=1)i.push(this.buildCell(n,r));e.push(i)}return e}buildCell(e,n){let i=this.daySeries.dates[e*this.colCnt+n];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,i=this.daySeries.sliceRange(e),r=[];if(i){let{firstIndex:o,lastIndex:s}=i,a=o;for(;a<=s;){let l=Math.floor(a/n),g=Math.min((l+1)*n,s+1);r.push({row:l,firstCol:a%n,lastCol:(g-1)%n,isStart:i.isStart&&a===o,isEnd:i.isEnd&&g-1===s}),a=g}}return r}}class YO{constructor(){this.sliceBusinessHours=rt(this._sliceBusinessHours),this.sliceDateSelection=rt(this._sliceDateSpan),this.sliceEventStore=rt(this._sliceEventStore),this.sliceEventDrag=rt(this._sliceInteraction),this.sliceEventResize=rt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,i,r,...o){let{eventUiBases:s}=e,a=this.sliceEventStore(e.eventStore,s,n,i,...o);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,i,s,r,...o),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,i,r,...o),fgEventSegs:a.fg,bgEventSegs:a.bg,eventDrag:this.sliceEventDrag(e.eventDrag,s,n,i,...o),eventResize:this.sliceEventResize(e.eventResize,s,n,i,...o),eventSelection:e.eventSelection}}sliceNowDate(e,n,i,r,...o){return this._sliceDateSpan({range:{start:e,end:ug(e,1)},allDay:!1},n,i,{},r,...o)}_sliceBusinessHours(e,n,i,r,...o){return e?this._sliceEventStore(Uc(e,GA(n,!!i),r),{},n,i,...o).bg:[]}_sliceEventStore(e,n,i,r,...o){if(e){let s=c2(e,n,GA(i,!!r),r);return{bg:this.sliceEventRanges(s.bg,o),fg:this.sliceEventRanges(s.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,i,r,...o){if(!e)return null;let s=c2(e.mutatedEvents,n,GA(i,!!r),r);return{segs:this.sliceEventRanges(s.fg,o),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,i,r,o,...s){if(!e)return[];let a=GA(n,!!i),l=dg(e.range,a);if(l){e=Object.assign(Object.assign({},e),{range:l});let g=rMe(e,r,o),u=this.sliceRange(e.range,...s);for(let d of u)d.eventRange=g;return u}return[]}sliceEventRanges(e,n){let i=[];for(let r of e)i.push(...this.sliceEventRange(r,n));return i}sliceEventRange(e,n){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:mi(i.start,1)});let r=this.sliceRange(i,...n);for(let o of r)o.eventRange=e,o.isStart=e.isStart&&o.isStart,o.isEnd=e.isEnd&&o.isEnd;return r}}function GA(t,e){let n=t.activeRange;return e?n:{start:ug(n.start,t.slotMinTime.milliseconds),end:ug(n.end,t.slotMaxTime.milliseconds-864e5)}}function FO(t,e,n){let{instances:i}=t.mutatedEvents;for(let r in i)if(!tS(e.validRange,i[r].range))return!1;return MO({eventDrag:t},n)}function HMe(t,e,n){return tS(e.validRange,t.range)?MO({dateSelection:t},n):!1}function MO(t,e){let n=e.getCurrentData(),i=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||NMe)(i,e)}function NMe(t,e,n={},i){return!(t.eventDrag&&!YMe(t,e,n,i)||t.dateSelection&&!FMe(t,e,n,i))}function YMe(t,e,n,i){let r=e.getCurrentData(),o=t.eventDrag,s=o.mutatedEvents,a=s.defs,l=s.instances,g=iy(a,o.isEvent?t.eventUiBases:{"":r.selectionConfig});i&&(g=Pa(g,i));let u=H9e(t.eventStore,o.affectedEvents.instances),d=u.defs,h=u.instances,f=iy(d,t.eventUiBases);for(let A in l){let p=l[A],y=p.range,v=g[p.defId],S=a[p.defId];if(!TO(v.constraints,y,u,t.businessHours,e))return!1;let{eventOverlap:Z}=e.options,R=typeof Z=="function"?Z:null;for(let B in h){let k=h[B];if(dW(y,k.range)&&(f[k.defId].overlap===!1&&o.isEvent||v.overlap===!1||R&&!R(new Vn(e,d[k.defId],k),new Vn(e,S,p))))return!1}let W=r.eventStore;for(let B of v.allows){let k=Object.assign(Object.assign({},n),{range:p.range,allDay:S.allDay}),w=W.defs[S.defId],J=W.instances[A],X;if(w?X=new Vn(e,w,J):X=new Vn(e,S),!B(pW(k,e),X))return!1}}return!0}function FMe(t,e,n,i){let r=t.eventStore,o=r.defs,s=r.instances,a=t.dateSelection,l=a.range,{selectionConfig:g}=e.getCurrentData();if(i&&(g=i(g)),!TO(g.constraints,l,r,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,d=typeof u=="function"?u:null;for(let h in s){let f=s[h];if(dW(l,f.range)&&(g.overlap===!1||d&&!d(new Vn(e,o[f.defId],f),null)))return!1}for(let h of g.allows){let f=Object.assign(Object.assign({},n),a);if(!h(pW(f,e),null))return!1}return!0}function TO(t,e,n,i,r){for(let o of t)if(!TMe(MMe(o,e,n,i,r),e))return!1;return!0}function MMe(t,e,n,i,r){return t==="businessHours"?aB(Uc(i,e,r)):typeof t=="string"?aB(nS(n,o=>o.groupId===t)):typeof t=="object"&&t?aB(Uc(t,e,r)):[]}function aB(t){let{instances:e}=t,n=[];for(let i in e)n.push(e[i].range);return n}function TMe(t,e){for(let n of t)if(tS(n,e))return!0;return!1}const BA=/^(visible|hidden)$/;class LO extends Mt{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Ua(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:i}=e,r=n&&i,o=["fc-scroller"];return n&&(i?o.push("fc-scroller-liquid-absolute"):o.push("fc-scroller-liquid")),F("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(BA.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(BA.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return BA.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return BA.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Va{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,i)=>{let{depths:r,currentMap:o}=this,s=!1,a=!1;n!==null?(s=i in o,o[i]=n,r[i]=(r[i]||0)+1,a=!0):(r[i]-=1,r[i]||(delete o[i],delete this.callbackMap[i],s=!0)),this.masterCallback&&(s&&this.masterCallback(null,String(i)),a&&this.masterCallback(n,String(i)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),n}collect(e,n,i){return $Fe(this.currentMap,e,n,i)}getAll(){return cW(this.currentMap)}}function LMe(t){let e=QYe(t,".fc-scrollgrid-shrink"),n=0;for(let i of e)n=Math.max(n,uFe(i));return Math.ceil(n)}function _O(t,e){return t.liquid&&e.liquid}function _Me(t,e){return e.maxHeight!=null||_O(t,e)}function DMe(t,e,n,i){let{expandRows:r}=n;return typeof e.content=="function"?e.content(n):F("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:r?n.clientHeight:""}},n.tableColGroupNode,F(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function KMe(t,e){return cg(t,e,Ks)}function zMe(t,e){let n=[];for(let i of t){let r=i.span||1;for(let o=0;o<r;o+=1)n.push(F("col",{style:{width:i.width==="shrink"?PMe(e):i.width||"",minWidth:i.minWidth||""}}))}return F("colgroup",{},...n)}function PMe(t){return t??4}function UMe(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function jMe(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function OMe(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function C2(t){return F("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function ry(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function DO(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class kW extends Mt{constructor(){super(...arguments),this.processCols=rt(e=>e,KMe),this.renderMicroColGroup=rt(zMe),this.scrollerRefs=new Va,this.scrollerElRefs=new Va(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:i}=this,r=e.sections||[],o=this.processCols(e.cols),s=this.renderMicroColGroup(o,n.shrinkWidth),a=jMe(e.liquid,i);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let l=r.length,g=0,u,d=[],h=[],f=[];for(;g<l&&(u=r[g]).type==="header";)d.push(this.renderSection(u,s,!0)),g+=1;for(;g<l&&(u=r[g]).type==="body";)h.push(this.renderSection(u,s,!1)),g+=1;for(;g<l&&(u=r[g]).type==="footer";)f.push(this.renderSection(u,s,!0)),g+=1;let A=!kO();const p={role:"rowgroup"};return F("table",{role:"grid",className:a.join(" "),style:{height:e.height}},!!(!A&&d.length)&&F("thead",p,...d),!!(!A&&h.length)&&F("tbody",p,...h),!!(!A&&f.length)&&F("tfoot",p,...f),A&&F("tbody",p,...d,...h,...f))}renderSection(e,n,i){return"outerContent"in e?F(on,{key:e.key},e.outerContent):F("tr",{key:e.key,role:"presentation",className:OMe(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,i))}renderChunkTd(e,n,i,r){if("outerContent"in i)return i.outerContent;let{props:o}=this,{forceYScrollbars:s,scrollerClientWidths:a,scrollerClientHeights:l}=this.state,g=_Me(o,e),u=_O(o,e),d=o.liquid?s?"scroll":g?"auto":"hidden":"visible",h=e.key,f=DMe(e,i,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!o.collapsibleWidth&&a[h]!==void 0?a[h]:null,clientHeight:l[h]!==void 0?l[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return F(r?"th":"td",{ref:i.elRef,role:"presentation"},F("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},F(LO,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:d,overflowX:o.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},f)))}_handleScrollerEl(e,n){let i=QMe(this.props.sections,n);i&&Ua(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return UMe(this.props.cols)?LMe(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=yMe(),{scrollerRefs:n,scrollerElRefs:i}=this,r=!1,o={},s={};for(let a in n.currentMap){let l=n.currentMap[a];if(l&&l.needsYScrolling()){r=!0;break}}for(let a of this.props.sections){let l=a.key,g=i.currentMap[l];if(g){let u=g.parentNode;o[l]=Math.floor(u.getBoundingClientRect().width-(r?e.y:0)),s[l]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:o,scrollerClientHeights:s}}}kW.addStateEquality({scrollerClientWidths:Ks,scrollerClientHeights:Ks});function QMe(t,e){for(let n of t)if(n.key===e)return n;return null}class oS extends Mt{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&C9(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{eventRange:o}=r,{ui:s}=o,a={event:new Vn(n,o.def,o.instance),view:n.viewApi,timeText:e.timeText,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,isDraggable:!e.disableDragging&&U9e(r,n),isStartResizable:!e.disableResizing&&j9e(r,n),isEndResizable:!e.disableResizing&&O9e(r),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!r.isStart,isEnd:!!r.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return F(Di,Object.assign({},e,{elRef:this.handleEl,elClasses:[...Q9e(a),...r.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&C9(this.el,this.props.seg)}}class KO extends Mt{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{ui:o}=r.eventRange,s=i.eventTimeFormat||e.defaultTimeFormat,a=Ph(r,s,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return F(oS,Object.assign({},e,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:yW(r,n),defaultGenerator:$Me,timeText:a}),(l,g)=>F(on,null,F(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:g.textColor}}),!!g.isStartResizable&&F("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!g.isEndResizable&&F("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function $Me(t){return F("div",{className:"fc-event-main-frame"},t.timeText&&F("div",{className:"fc-event-time"},t.timeText),F("div",{className:"fc-event-title-container"},F("div",{className:"fc-event-title fc-sticky"},t.event.title||F(on,null,""))))}const VW=t=>F(qa.Consumer,null,e=>{let{options:n}=e,i={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return F(Di,Object.assign({},t,{elTag:t.elTag||"div",renderProps:i,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount}))}),qMe=Zn({day:"numeric"});class wW extends Mt{constructor(){super(...arguments),this.refineRenderProps=kb(eTe)}render(){let{props:e,context:n}=this,{options:i}=n,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:i.monthStartFormat});return F(Di,Object.assign({},e,{elClasses:[...rS(r,n.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":Jm(e.date)}),renderProps:r,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function WW(t){return!!(t.dayCellContent||a2("dayCellContent",t))}function eTe(t){let{date:e,dateEnv:n,dateProfile:i,isMonthStart:r}=t,o=SW(e,t.todayRange,null,i),s=t.showDayNumber?n.format(e,r?t.monthStartFormat:qMe):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},o),{isMonthStart:r,dayNumberText:s}),t.extraRenderProps)}class zO extends Mt{render(){let{props:e}=this,{seg:n}=e;return F(oS,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:tTe,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function tTe(t){let{title:e}=t.event;return e&&F("div",{className:"fc-event-title"},t.event.title)}function PO(t){return F("div",{className:`fc-${t}`})}const UO=t=>F(qa.Consumer,null,e=>{let{dateEnv:n,options:i}=e,{date:r}=t,o=i.weekNumberFormat||t.defaultFormat,s=n.computeWeekNumber(r),a=n.format(r,o);return F(Di,Object.assign({},t,{renderProps:{num:s,text:a,date:r},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:nTe,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function nTe(t){return t.text}const lB=10;class iTe extends Mt{constructor(){super(...arguments),this.state={titleId:ng()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Ua(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=eO(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:i,state:r}=this,o=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return NYe(F("div",Object.assign({},i.extraAttrs,{id:i.id,className:o.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),F("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},F("span",{className:"fc-popover-title",id:r.titleId},i.title),F("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),F("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:i}=this.props,{rootEl:r}=this,o=GMe(n);if(o){let s=r.getBoundingClientRect(),a=i?Mi(n,".fc-scrollgrid").getBoundingClientRect().top:o.top,l=e?o.right-s.width:o.left;a=Math.max(a,lB),l=Math.min(l,document.documentElement.clientWidth-lB-s.width),l=Math.max(l,lB);let g=r.offsetParent.getBoundingClientRect();Dh(r,{top:a-g.top,left:l-g.left})}}}class rTe extends as{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:i}=this,{startDate:r,todayRange:o,dateProfile:s}=i,a=n.format(r,e.dayPopoverFormat);return F(wW,{elRef:this.handleRootEl,date:r,dateProfile:s,todayRange:o},(l,g,u)=>F(iTe,{elRef:u.ref,id:i.id,title:a,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},WW(e)&&F(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,n,i,r){let{rootEl:o,props:s}=this;return e>=0&&e<i&&n>=0&&n<r?{dateProfile:s.dateProfile,dateSpan:Object.assign({allDay:!s.forceTimed,range:{start:s.startDate,end:s.endDate}},s.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:i,bottom:r},layer:1}:null}}class jO extends Mt{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:ng()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Ua(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:i}=this,{moreLinkClick:r}=i.options,o=m9(n).start;function s(a){let{def:l,instance:g,range:u}=a.eventRange;return{event:new Vn(i,l,g),start:i.dateEnv.toDate(u.start),end:i.dateEnv.toDate(u.end),isStart:a.isStart,isEnd:a.isEnd}}typeof r=="function"&&(r=r({date:o,allDay:!!n.allDayDate,allSegs:n.allSegs.map(s),hiddenSegs:n.hiddenSegs.map(s),jsEvent:e,view:i.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&i.calendarApi.zoomTo(o,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return F(qa.Consumer,null,i=>{let{viewApi:r,options:o,calendarApi:s}=i,{moreLinkText:a}=o,{moreCnt:l}=e,g=m9(e),u=typeof a=="function"?a.call(s,l):`+${l} ${a}`,d=Kh(o.moreLinkHint,[l],u),h={num:l,shortText:`+${l}`,text:u,view:r};return F(on,null,!!e.moreCnt&&F(Di,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),nO(this.handleClick)),{title:d,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:e.defaultGenerator||oTe,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},e.children),n.isPopoverOpen&&F(rTe,{id:n.popoverId,startDate:g.start,endDate:g.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Mi(this.linkEl,".fc-view-harness"))}}function oTe(t){return t.text}function m9(t){if(t.allDayDate)return{start:t.allDayDate,end:mi(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:OO(e),end:aTe(e)}}function OO(t){return t.reduce(sTe).eventRange.range.start}function sTe(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function aTe(t){return t.reduce(lTe).eventRange.range.end}function lTe(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class gTe{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class cTe extends gTe{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let i=!1;e.isActive?(n.set(e.id,e),i=!0):n.has(e.id)&&(n.delete(e.id),i=!0),i&&this.set(n)}}const uTe=[],QO={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},$O=Object.assign(Object.assign({},QO),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function dTe(t){let e=t.length>0?t[0].code:"en",n=uTe.concat(t),i={en:$O};for(let r of n)i[r.code]=r;return{map:i,defaultCode:e}}function qO(t,e){return typeof t=="object"&&!Array.isArray(t)?eQ(t.code,[t.code],t):ITe(t,e)}function ITe(t,e){let n=[].concat(t||[]),i=CTe(n,e)||$O;return eQ(t,n,i)}function CTe(t,e){for(let n=0;n<t.length;n+=1){let i=t[n].toLocaleLowerCase().split("-");for(let r=i.length;r>0;r-=1){let o=i.slice(0,r).join("-");if(e[o])return e[o]}}return null}function eQ(t,e,n){let i=gW([QO,n],["buttonText"]);delete i.code;let{week:r}=i;return delete i.week,{codeArg:t,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(t),options:i}}function Qs(t){return{id:Cu(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function hTe(t,e){let n={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(o){for(let s of o){const a=s.name,l=n[a];l===void 0?(n[a]=s.id,r(s.deps),i=mTe(i,s)):l!==s.id&&console.warn(`Duplicate plugin '${a}'`)}}return t&&r(t),r(e),i}function fTe(){let t=[],e=[],n;return(i,r)=>((!n||!cg(i,t)||!cg(r,e))&&(n=hTe(i,r)),t=i,e=r,n)}function mTe(t,e){return{premiumReleaseDate:pTe(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function pTe(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Rg extends Em{}Rg.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Rg.prototype.baseIconClass="fc-icon";Rg.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Rg.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Rg.prototype.iconOverrideOption="buttonIcons";Rg.prototype.iconOverrideCustomButtonOption="icon";Rg.prototype.iconOverridePrefix="fc-icon-";function ATe(t,e){let n={},i;for(i in t)h2(i,n,t,e);for(i in e)h2(i,n,t,e);return n}function h2(t,e,n,i){if(e[t])return e[t];let r=bTe(t,e,n,i);return r&&(e[t]=r),r}function bTe(t,e,n,i){let r=n[t],o=i[t],s=u=>r&&r[u]!==null?r[u]:o&&o[u]!==null?o[u]:null,a=s("component"),l=s("superType"),g=null;if(l){if(l===t)throw new Error("Can't have a custom view type that references itself");g=h2(l,e,n,i)}return!a&&g&&(a=g.component),a?{type:t,component:a,defaults:Object.assign(Object.assign({},g?g.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},g?g.overrides:{}),o?o.rawOptions:{})}:null}function p9(t){return Pa(t,yTe)}function yTe(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=A9(e):n&&!(n.prototype instanceof Mt)&&(n=A9(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function A9(t){return e=>F(qa.Consumer,null,n=>F(Di,{elTag:"div",elClasses:uO(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function vTe(t,e,n,i){let r=p9(t),o=p9(e.views),s=ATe(r,o);return Pa(s,a=>STe(a,o,e,n,i))}function STe(t,e,n,i,r){let o=t.overrides.duration||t.defaults.duration||i.duration||n.duration,s=null,a="",l="",g={};if(o&&(s=ZTe(o),s)){let h=o2(s);a=h.unit,h.value===1&&(l=a,g=e[a]?e[a].rawOptions:{})}let u=h=>{let f=h.buttonText||{},A=t.defaults.buttonTextKey;return A!=null&&f[A]!=null?f[A]:f[t.type]!=null?f[t.type]:f[l]!=null?f[l]:null},d=h=>{let f=h.buttonHints||{},A=t.defaults.buttonTextKey;return A!=null&&f[A]!=null?f[A]:f[t.type]!=null?f[t.type]:f[l]!=null?f[l]:null};return{type:t.type,component:t.component,duration:s,durationUnit:a,singleUnit:l,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},g),t.overrides),buttonTextOverride:u(i)||u(n)||t.overrides.buttonText,buttonTextDefault:u(r)||t.defaults.buttonText||u(zh)||t.type,buttonTitleOverride:d(i)||d(n)||t.overrides.buttonHint,buttonTitleDefault:d(r)||t.defaults.buttonHint||d(zh)}}let b9={};function ZTe(t){let e=JSON.stringify(t),n=b9[e];return n===void 0&&(n=xt(t),b9[e]=n),n}function GTe(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function BTe(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function RTe(t,e,n,i){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||n);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(r=i.buildPrev(t,n),r.isValid)return r;break;case"NEXT":if(r=i.buildNext(t,n),r.isValid)return r;break}return t}function kTe(t,e,n){let i=e?e.activeRange:null;return nQ({},ETe(t,n),i,n)}function VTe(t,e,n,i){let r=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return nQ(t,e.sources,r,i);case"REMOVE_EVENT_SOURCE":return WTe(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?iQ(t,r,i):t;case"FETCH_EVENT_SOURCES":return xW(t,e.sourceIds?sO(e.sourceIds):rQ(t,i),r,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return JTe(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function wTe(t,e,n){let i=e?e.activeRange:null;return xW(t,rQ(t,n),i,!0,n)}function tQ(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function nQ(t,e,n,i){let r={};for(let o of e)r[o.sourceId]=o;return n&&(r=iQ(r,n,i)),Object.assign(Object.assign({},t),r)}function WTe(t,e){return Pc(t,n=>n.sourceId!==e)}function iQ(t,e,n){return xW(t,Pc(t,i=>xTe(i,e,n)),e,!1,n)}function xTe(t,e,n){return oQ(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function xW(t,e,n,i,r){let o={};for(let s in t){let a=t[s];e[s]?o[s]=XTe(a,n,i,r):o[s]=a}return o}function XTe(t,e,n,i){let{options:r,calendarApi:o}=i,s=i.pluginHooks.eventSourceDefs[t.sourceDefId],a=Cu();return s.fetch({eventSource:t,range:e,isRefetch:n,context:i},l=>{let{rawEvents:g}=l;r.eventSourceSuccess&&(g=r.eventSourceSuccess.call(o,g,l.response)||g),t.success&&(g=t.success.call(o,g,l.response)||g),i.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:a,fetchRange:e,rawEvents:g})},l=>{let g=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(o,l),g=!0),t.failure&&(t.failure(l),g=!0),g||console.warn(l.message,l),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:a,fetchRange:e,error:l})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:a})}function JTe(t,e,n,i){let r=t[e];return r&&n===r.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:i})}):t}function rQ(t,e){return Pc(t,n=>oQ(n,e))}function ETe(t,e){let n=AO(e),i=[].concat(t.eventSources||[]),r=[];t.initialEvents&&i.unshift(t.initialEvents),t.events&&i.unshift(t.events);for(let o of i){let s=pO(o,e,n);s&&r.push(s)}return r}function oQ(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function HTe(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function NTe(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function YTe(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function FTe(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function MTe(t,e,n,i,r){let o=t.headerToolbar?y9(t.headerToolbar,t,e,n,i,r):null,s=t.footerToolbar?y9(t.footerToolbar,t,e,n,i,r):null;return{header:o,footer:s}}function y9(t,e,n,i,r,o){let s={},a=[],l=!1;for(let g in t){let u=t[g],d=TTe(u,e,n,i,r,o);s[g]=d.widgets,a.push(...d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:s,viewsWithButtons:a,hasTitle:l}}function TTe(t,e,n,i,r,o){let s=e.direction==="rtl",a=e.customButtons||{},l=n.buttonText||{},g=e.buttonText||{},u=n.buttonHints||{},d=e.buttonHints||{},h=t?t.split(" "):[],f=[],A=!1;return{widgets:h.map(y=>y.split(",").map(v=>{if(v==="title")return A=!0,{buttonName:v};let S,Z,R,W,B,k;if(S=a[v])R=w=>{S.click&&S.click.call(w.target,w,w.target)},(W=i.getCustomButtonIconClass(S))||(W=i.getIconClass(v,s))||(B=S.text),k=S.hint||S.text;else if(Z=r[v]){f.push(v),R=()=>{o.changeView(v)},(B=Z.buttonTextOverride)||(W=i.getIconClass(v,s))||(B=Z.buttonTextDefault);let w=Z.buttonTextOverride||Z.buttonTextDefault;k=Kh(Z.buttonTitleOverride||Z.buttonTitleDefault||e.viewHint,[w,v],w)}else if(o[v])if(R=()=>{o[v]()},(B=l[v])||(W=i.getIconClass(v,s))||(B=g[v]),v==="prevYear"||v==="nextYear"){let w=v==="prevYear"?"prev":"next";k=Kh(u[w]||d[w],[g.year||"year","year"],g[v])}else k=w=>Kh(u[v]||d[v],[g[w]||w,w],g[v]);return{buttonName:v,buttonClick:R,buttonIcon:W,buttonText:B,buttonHint:k}})),viewsWithButtons:f,hasTitle:A}}class LTe{constructor(e,n,i){this.type=e,this.getCurrentData=n,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let _Te={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const DTe=Qs({name:"array-event-source",eventSourceDefs:[_Te]});let KTe={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:i}=t.context,r=t.eventSource.meta;oMe(r.bind(null,BO(t.range,i)),o=>e({rawEvents:o}),n)}};const zTe=Qs({name:"func-event-source",eventSourceDefs:[KTe]}),PTe={method:String,extraParams:ge,startParam:String,endParam:String,timeZoneParam:String};let UTe={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:i}=t.eventSource,r=OTe(i,t.range,t.context);sMe(i.method,i.url,r).then(([o,s])=>{e({rawEvents:o,response:s})},n)}};const jTe=Qs({name:"json-event-source",eventSourceRefiners:PTe,eventSourceDefs:[UTe]});function OTe(t,e,n){let{dateEnv:i,options:r}=n,o,s,a,l,g={};return o=t.startParam,o==null&&(o=r.startParam),s=t.endParam,s==null&&(s=r.endParam),a=t.timeZoneParam,a==null&&(a=r.timeZoneParam),typeof t.extraParams=="function"?l=t.extraParams():l=t.extraParams||{},Object.assign(g,l),g[o]=i.formatIso(e.start),g[s]=i.formatIso(e.end),i.timeZone!=="local"&&(g[a]=i.timeZone),g}const QTe={daysOfWeek:ge,startTime:xt,endTime:xt,duration:xt,startRecur:ge,endRecur:ge};let $Te={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null},i;return t.duration&&(i=t.duration),!i&&t.startTime&&t.endTime&&(i=hFe(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:i,typeData:n}}return null},expand(t,e,n){let i=dg(e,{start:t.startRecur,end:t.endRecur});return i?eLe(t.daysOfWeek,t.startTime,i,n):[]}};const qTe=Qs({name:"simple-recurring-event",recurringTypes:[$Te],eventRefiners:QTe});function eLe(t,e,n,i){let r=t?sO(t):null,o=sn(n.start),s=n.end,a=[];for(;o<s;){let l;(!r||r[o.getUTCDay()])&&(e?l=i.add(o,e):l=o,a.push(l)),o=mi(o,1)}return a}const tLe=Qs({name:"change-handler",optionChangeHandlers:{events(t,e){v9([t],e)},eventSources:v9}});function v9(t,e){let n=cW(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let i=[];for(let r of t){let o=!1;for(let s=0;s<n.length;s+=1)if(n[s]._raw===r){n.splice(s,1),o=!0;break}o||i.push(r)}for(let r of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of i)e.calendarApi.addEventSource(r)}function nLe(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},BO(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function iLe(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",kc(t,e))}const rLe=[DTe,zTe,jTe,qTe,tLe,Qs({name:"misc",isLoadingFuncs:[t=>tQ(t.eventSources)],propSetHandlers:{dateProfile:nLe,eventStore:iLe}})];class oLe{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new nW(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],i;for(;i=e.shift();)this.runTask(i),n.push(i);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function sLe(t,e,n){let i;return/^(year|month)$/.test(t.currentRangeUnit)?i=t.currentRange:i=t.activeRange,n.formatRange(i.start,i.end,Zn(e.titleFormat||aLe(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function aLe(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=O0(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class lLe{constructor(e){this.computeCurrentViewData=rt(this._computeCurrentViewData),this.organizeRawLocales=rt(dTe),this.buildLocale=rt(qO),this.buildPluginHooks=fTe(),this.buildDateEnv=rt(gLe),this.buildTheme=rt(cLe),this.parseToolbars=rt(MTe),this.buildViewSpecs=rt(vTe),this.buildDateProfileGenerator=kb(uLe),this.buildViewApi=rt(dLe),this.buildViewUiProps=kb(hLe),this.buildEventUiBySource=rt(ILe,Ks),this.buildEventUiBases=rt(CLe),this.parseContextBusinessHours=kb(fLe),this.buildTitle=rt(sLe),this.emitter=new iS,this.actionRunner=new oLe(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause();let n={},i=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),r=i.calendarOptions.initialView||i.pluginHooks.initialView,o=this.computeCurrentViewData(r,i,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(o.options);let s=A9e(i.calendarOptions,i.dateEnv),a=o.dateProfileGenerator.build(s);Ea(a.activeRange,s)||(s=a.currentRange.start);let l={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let h of i.pluginHooks.contextInit)h(l);let g=kTe(i.calendarOptions,a,l),u={dynamicOptionOverrides:n,currentViewType:r,currentDate:s,dateProfile:a,businessHours:this.parseContextBusinessHours(l),eventSources:g,eventUiBases:{},eventStore:Tr(),renderableEventStore:Tr(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},d=Object.assign(Object.assign({},l),u);for(let h of i.pluginHooks.reducers)Object.assign(u,h(null,null,d));gB(u,l)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:i}=this;n===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:i,emitter:r}=this,o=BTe(i.dynamicOptionOverrides,e),s=this.computeOptionsData(n.optionOverrides,o,n.calendarApi),a=GTe(i.currentViewType,e),l=this.computeCurrentViewData(a,s,n.optionOverrides,o);n.calendarApi.currentDataManager=this,r.setThisContext(n.calendarApi),r.setOptions(l.options);let g={dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:d}=i;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(d=l.dateProfileGenerator.build(u)),u=p9e(u,e),d=RTe(d,e,u,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ea(d.currentRange,u))&&(u=d.currentRange.start);let h=VTe(i.eventSources,e,d,g),f=x9e(i.eventStore,e,h,d,g),p=tQ(h)&&!l.options.progressiveEventRendering&&i.renderableEventStore||f,{eventUiSingleBase:y,selectionConfig:v}=this.buildViewUiProps(g),S=this.buildEventUiBySource(h),Z=this.buildEventUiBases(p.defs,y,S),R={dynamicOptionOverrides:o,currentViewType:a,currentDate:u,dateProfile:d,eventSources:h,eventStore:f,renderableEventStore:p,selectionConfig:v,eventUiBases:Z,businessHours:this.parseContextBusinessHours(g),dateSelection:HTe(i.dateSelection,e),eventSelection:NTe(i.eventSelection,e),eventDrag:YTe(i.eventDrag,e),eventResize:FTe(i.eventResize,e)},W=Object.assign(Object.assign({},g),R);for(let w of s.pluginHooks.reducers)Object.assign(R,w(i,e,W));let B=gB(i,g),k=gB(R,g);!B&&k?r.trigger("loading",!0):B&&!k&&r.trigger("loading",!1),this.state=R,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,i=this.data,r=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),o=this.computeCurrentViewData(n.currentViewType,r,e.optionOverrides,n.dynamicOptionOverrides),s=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(n.dateProfile,o.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),o),n),a=r.pluginHooks.optionChangeHandlers,l=i&&i.calendarOptions,g=r.calendarOptions;if(l&&l!==g){l.timeZone!==g.timeZone&&(n.eventSources=s.eventSources=wTe(s.eventSources,n.dateProfile,s),n.eventStore=s.eventStore=d9(s.eventStore,i.dateEnv,s.dateEnv),n.renderableEventStore=s.renderableEventStore=d9(s.renderableEventStore,i.dateEnv,s.dateEnv));for(let u in a)(this.optionsForHandling.indexOf(u)!==-1||l[u]!==g[u])&&a[u](g[u],s)}this.optionsForHandling=[],e.onData&&e.onData(s)}computeOptionsData(e,n,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:o,localeDefaults:s,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,n);S9(l);let g=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,o,a,r.defaultRangeSeparator),u=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,s),d=this.buildTheme(r,o),h=this.parseToolbars(r,this.stableOptionOverrides,d,u,i);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:o,dateEnv:g,viewSpecs:u,theme:d,toolbarConfig:h,localeDefaults:s,availableRawLocales:a.map}}processRawCalendarOptions(e,n){let{locales:i,locale:r}=eB([zh,e,n]),o=this.organizeRawLocales(i),s=o.map,a=this.buildLocale(r||o.defaultCode,s).options,l=this.buildPluginHooks(e.plugins||[],rLe),g=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s9),a9),l9),l.listenerRefiners),l.optionRefiners),u={},d=eB([zh,a,e,n]),h={},f=this.currentCalendarOptionsInput,A=this.currentCalendarOptionsRefined,p=!1;for(let y in d)this.optionsForRefining.indexOf(y)===-1&&(d[y]===f[y]||ec[y]&&y in f&&ec[y](f[y],d[y]))?h[y]=A[y]:g[y]?(h[y]=g[y](d[y]),p=!0):u[y]=f[y];return p&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:o,localeDefaults:a,extra:u}}_computeCurrentViewData(e,n,i,r){let o=n.viewSpecs[e];if(!o)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:s,extra:a}=this.processRawViewOptions(o,n.pluginHooks,n.localeDefaults,i,r);S9(a);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,nowInput:s.now,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,fixedWeekCount:s.fixedWeekCount}),g=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:o,options:s,dateProfileGenerator:l,viewApi:g}}processRawViewOptions(e,n,i,r,o){let s=eB([zh,e.optionDefaults,i,r,e.optionOverrides,o]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s9),a9),l9),UFe),n.listenerRefiners),n.optionRefiners),l={},g=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,d=!1,h={};for(let f in s)s[f]===g[f]||ec[f]&&ec[f](s[f],g[f])?l[f]=u[f]:(s[f]===this.currentCalendarOptionsInput[f]||ec[f]&&ec[f](s[f],this.currentCalendarOptionsInput[f])?f in this.currentCalendarOptionsRefined&&(l[f]=this.currentCalendarOptionsRefined[f]):a[f]?l[f]=a[f](s[f]):h[f]=s[f],d=!0);return d&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function gLe(t,e,n,i,r,o,s,a){let l=qO(e||s.defaultCode,s.map);return new r9e({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:i,weekText:r,cmdFormatter:o.cmdFormatter,defaultSeparator:a})}function cLe(t,e){let n=e.themeClasses[t.themeSystem]||Rg;return new n(t)}function uLe(t){let e=t.dateProfileGeneratorClass||IO;return new e(t)}function dLe(t,e,n){return new LTe(t,e,n)}function ILe(t){return Pa(t,e=>e.ui)}function CLe(t,e,n){let i={"":e};for(let r in t){let o=t[r];o.sourceId&&n[o.sourceId]&&(i[r]=n[o.sourceId])}return i}function hLe(t){let{options:e}=t;return{eventUiSingleBase:ny({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:ny({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function gB(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function fLe(t){return T9e(t.options.businessHours,t)}function S9(t,e){for(let n in t)console.warn(`Unknown option '${n}'`+(e?` for view '${e}'`:""))}class mLe extends Mt{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return F("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:i}=this.context,r=[],o=!0;for(let s of e){let{buttonName:a,buttonClick:l,buttonText:g,buttonIcon:u,buttonHint:d}=s;if(a==="title")o=!1,r.push(F("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=a===n.activeButton,f=!n.isTodayEnabled&&a==="today"||!n.isPrevEnabled&&a==="prev"||!n.isNextEnabled&&a==="next",A=[`fc-${a}-button`,i.getClass("button")];h&&A.push(i.getClass("buttonActive")),r.push(F("button",{type:"button",title:typeof d=="function"?d(n.navUnit):d,disabled:f,"aria-pressed":h,className:A.join(" "),onClick:l},g||(u?F("span",{className:u,role:"img"}):"")))}}if(r.length>1){let s=o&&i.getClass("buttonGroup")||"";return F("div",{className:s},...r)}return r[0]}}class Z9 extends Mt{render(){let{model:e,extraClassName:n}=this.props,i=!1,r,o,s=e.sectionWidgets,a=s.center;return s.left?(i=!0,r=s.left):r=s.start,s.right?(i=!0,o=s.right):o=s.end,F("div",{className:[n||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",a||[]),this.renderSection("end",o||[]))}renderSection(e,n){let{props:i}=this;return F(mLe,{key:e,widgetGroups:n,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class pLe extends Mt{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Ua(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:i}=e,r=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",s="";return i?n.availableWidth!==null?o=n.availableWidth/i:s=`${1/i*100}%`:o=e.height||"",F("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:o,paddingBottom:s}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class ALe extends DI{constructor(e){super(e),this.handleSegClick=(n,i)=>{let{component:r}=this,{context:o}=r,s=GI(i);if(s&&r.isValidSegDownEl(n.target)){let a=Mi(n.target,".fc-event-forced-url"),l=a?a.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:i,event:new Vn(r.context,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:o.viewApi}),l&&!n.defaultPrevented&&(window.location.href=l)}},this.destroy=tO(e.el,"click",".fc-event",this.handleSegClick)}}class bLe extends DI{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,i)=>{GI(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",n,i))},this.handleSegLeave=(n,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,i))},this.removeHoverListeners=eFe(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,i){let{component:r}=this,{context:o}=r,s=GI(i);(!n||r.isValidSegDownEl(n.target))&&o.emitter.trigger(e,{el:i,event:new Vn(o,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:o.viewApi})}}class yLe extends hu{constructor(){super(...arguments),this.buildViewContext=rt(a9e),this.buildViewPropTransformers=rt(SLe),this.buildToolbarProps=rt(vLe),this.headerRef=tr(),this.footerRef=tr(),this.interactionsStore={},this.state={viewLabelId:ng()},this.registerInteractiveComponent=(e,n)=>{let i=gMe(e,n),s=[ALe,bLe].concat(this.props.pluginHooks.componentInteractions).map(a=>new a(i));this.interactionsStore[e.uid]=s,u2[e.uid]=i},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let i of n)i.destroy();delete this.interactionsStore[e.uid]}delete u2[e.uid]},this.resizeRunner=new nW(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:i}=e,r=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,Hm(e.options.now,e.dateEnv),e.viewTitle),o=!1,s="",a;e.isHeightAuto||e.forPrint?s="":i.height!=null?o=!0:i.contentHeight!=null?s=i.contentHeight:a=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),g=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return F(qa.Provider,{value:l},n.header&&F(Z9,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:g},r)),F(pLe,{liquid:o,height:s,aspectRatio:a,labeledById:g},this.renderView(e),this.buildAppendContent()),n.footer&&F(Z9,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},r)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let i in n)n[i](e[i],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:i}=n.pluginHooks;for(let r in i)n[r]!==e[r]&&i[r](n[r],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(i=>i(e));return F(on,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:i}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},o=this.buildViewPropTransformers(n.viewPropsTransformers);for(let a of o)Object.assign(r,a.transform(r,e));let s=i.component;return F(s,Object.assign({},r))}}function vLe(t,e,n,i,r,o){let s=n.build(r,void 0,!1),a=n.buildPrev(e,i,!1),l=n.buildNext(e,i,!1);return{title:o,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:s.isValid&&!Ea(e.currentRange,r),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function SLe(t){return t.map(e=>new e)}class ZLe extends cMe{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;ey(()=>{_f(F(lMe,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(r,o,s,a)=>(this.setClassNames(r),this.setHeight(o),F(cO.Provider,{value:this.customContentRenderId},F(yLe,Object.assign({isHeightAuto:s,forPrint:a},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,_f(null,this.el),this.setClassNames([]),this.setHeight(""))},KYe(e),this.el=e,this.renderRunner=new nW(this.handleRenderRequest),new lLe({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){ey(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!cg(e,this.currentClassNames)){let{classList:n}=this.el;for(let i of this.currentClassNames)n.remove(i);for(let i of e)n.add(i);this.currentClassNames=e}}setHeight(e){q4(this.el,"height",e)}}const GLe=parseInt(String(gt.version).split(".")[0]),BLe=GLe<18;class sQ extends m.Component{constructor(){super(...arguments),this.elRef=m.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(gt.createElement(RLe,{key:n.id,customRendering:n}));return gt.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new cTe;this.handleCustomRendering=e.handle.bind(e),this.calendar=new ZLe(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render();let n;e.subscribe(i=>{const r=Date.now(),o=!n;(BLe||o||this.isUpdating||this.isUnmounting||r-n<100?aQ:Pr.flushSync)(()=>{this.setState({customRenderingMap:i},()=>{n=r,o?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}sQ.act=aQ;class RLe extends m.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,i=typeof n=="function"?n(e.renderProps):n;return Pr.createPortal(i,e.containerEl)}}function aQ(t){t()}class kLe extends as{constructor(){super(...arguments),this.headerElRef=tr()}renderSimpleLayout(e,n){let{props:i,context:r}=this,o=[],s=ry(r.options);return e&&o.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),F(Df,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},F(kW,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:o}))}renderHScrollLayout(e,n,i,r){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:s,context:a}=this,l=!s.forPrint&&ry(a.options),g=!s.forPrint&&DO(a.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),g&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:C2}]}),F(Df,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},F(o,{liquid:!s.isHeightAuto&&!s.forPrint,forPrint:s.forPrint,collapsibleWidth:s.forPrint,colGroups:[{cols:[{span:i,minWidth:r}]}],sections:u}))}}function RA(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.row].push(i);return n}function kA(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.firstCol].push(i);return n}function G9(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}const lQ=Zn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function gQ(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class cQ extends Mt{render(){let{props:e}=this;return F(KO,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:lQ,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class uQ extends Mt{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,o=i.eventTimeFormat||lQ,s=Ph(r,o,n,!0,e.defaultDisplayEventEnd);return F(oS,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:yW(e.seg,n),defaultGenerator:VLe,timeText:s,isResizing:!1,isDateSelecting:!1}))}}function VLe(t){return F(on,null,F("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&F("div",{className:"fc-event-time"},t.timeText),F("div",{className:"fc-event-title"},t.event.title||F(on,null,"")))}class wLe extends Mt{constructor(){super(...arguments),this.compileSegs=rt(WLe)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return F(jO,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return F(on,null,n.map(o=>{let s=o.eventRange.instance.instanceId;return F("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:r[s]?"hidden":""}},gQ(o)?F(uQ,Object.assign({seg:o,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},Ha(o,e.todayRange))):F(cQ,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},Ha(o,e.todayRange))))}))}})}}function WLe(t){let e=[],n=[];for(let i of t)e.push(i.seg),i.isVisible||n.push(i.seg);return{allSegs:e,invisibleSegs:n}}const xLe=Zn({week:"narrow"});class XLe extends as{constructor(){super(...arguments),this.rootElRef=tr(),this.state={dayNumberId:ng()},this.handleRootEl=e=>{Ua(this.rootElRef,e),Ua(this.props.elRef,e)}}render(){let{context:e,props:n,state:i,rootElRef:r}=this,{options:o,dateEnv:s}=e,{date:a,dateProfile:l}=n;const g=n.showDayNumber&&ELe(a,l.currentRange,s);return F(wW,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:JLe,date:a,dateProfile:l,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:g,extraRenderProps:n.extraRenderProps},(u,d)=>F("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&F(UO,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:BI(e,a,"week"),date:a,defaultFormat:xLe}),!d.isDisabled&&(n.showDayNumber||WW(o)||n.forceDayTop)?F("div",{className:"fc-daygrid-day-top"},F(u,{elTag:"a",elClasses:["fc-daygrid-day-number",g&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},BI(e,a)),{id:i.dayNumberId})})):n.showDayNumber?F("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},F("a",{className:"fc-daygrid-day-number"},"")):void 0,F("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,F("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},F(wLe,{allDayDate:a,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:r,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),F("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function JLe(t){return t.dayNumberText||F(on,null,"")}function ELe(t,e,n){const{start:i,end:r}=e,o=ug(r,-1),s=n.getYear(i),a=n.getMonth(i),l=n.getYear(o),g=n.getMonth(o);return!(s===l&&a===g)&&(t.valueOf()===i.valueOf()||n.getDay(t)===1&&t.valueOf()<r.valueOf())}function dQ(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function IQ(t){return dQ(t)+":"+t.lastCol}function HLe(t,e,n,i,r,o,s){let a=new FLe(v=>{let S=t[v.index].eventRange.instance.instanceId+":"+v.span.start+":"+(v.span.end-1);return r[S]||1});a.allowReslicing=!0,a.strictOrder=i,e===!0||n===!0?(a.maxCoord=o,a.hiddenConsumes=!0):typeof e=="number"?a.maxStackCnt=e:typeof n=="number"&&(a.maxStackCnt=n,a.hiddenConsumes=!0);let l=[],g=[];for(let v=0;v<t.length;v+=1){let S=t[v],Z=IQ(S);r[Z]!=null?l.push({index:v,span:{start:S.firstCol,end:S.lastCol+1}}):g.push(S)}let u=a.addSegs(l),d=a.toRects(),{singleColPlacements:h,multiColPlacements:f,leftoverMargins:A}=NLe(d,t,s),p=[],y=[];for(let v of g){f[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let S=v.firstCol;S<=v.lastCol;S+=1)h[S].push({seg:Od(v,S,S+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<s.length;v+=1)p.push(0);for(let v of u){let S=t[v.index],Z=v.span;f[Z.start].push({seg:Od(S,Z.start,Z.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=Z.start;R<Z.end;R+=1)p[R]+=1,h[R].push({seg:Od(S,R,R+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<s.length;v+=1)y.push(A[v]);return{singleColPlacements:h,multiColPlacements:f,moreCnts:p,moreMarginTops:y}}function NLe(t,e,n){let i=YLe(t,n.length),r=[],o=[],s=[];for(let a=0;a<n.length;a+=1){let l=i[a],g=[],u=0,d=0;for(let f of l){let A=e[f.index];g.push({seg:Od(A,a,a+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:f.levelCoord-u}),u=f.levelCoord+f.thickness}let h=[];u=0,d=0;for(let f of l){let A=e[f.index],p=f.span.end-f.span.start>1,y=f.span.start===a;d+=f.levelCoord-u,u=f.levelCoord+f.thickness,p?(d+=f.thickness,y&&h.push({seg:Od(A,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:f.levelCoord,marginTop:0})):y&&(h.push({seg:Od(A,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:d}),d=0)}r.push(g),o.push(h),s.push(d)}return{singleColPlacements:r,multiColPlacements:o,leftoverMargins:s}}function YLe(t,e){let n=[];for(let i=0;i<e;i+=1)n.push([]);for(let i of t)for(let r=i.span.start;r<i.span.end;r+=1)n[r].push(i);return n}function Od(t,e,n,i){if(t.firstCol===e&&t.lastCol===n-1)return t;let r=t.eventRange,o=r.range,s=dg(o,{start:i[e].date,end:mi(i[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:s},isStart:t.isStart&&s.start.valueOf()===o.start.valueOf(),isEnd:t.isEnd&&s.end.valueOf()===o.end.valueOf()})}class FLe extends xO{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:i}=this,r=o=>!this.forceHidden[Vc(o)];for(let o=0;o<i.length;o+=1)i[o]=i[o].filter(r);return n}handleInvalidInsertion(e,n,i){const{entriesByLevel:r,forceHidden:o}=this,{touchingEntry:s,touchingLevel:a,touchingLateral:l}=e;if(this.hiddenConsumes&&s){const g=Vc(s);if(!o[g])if(this.allowReslicing){const u=Object.assign(Object.assign({},s),{span:BW(s.span,n.span)}),d=Vc(u);o[d]=!0,r[a][l]=u,i.push(u),this.splitEntry(s,n,i)}else o[g]=!0,i.push(s)}super.handleInvalidInsertion(e,n,i)}}class CQ extends as{constructor(){super(...arguments),this.cellElRefs=new Va,this.frameElRefs=new Va,this.fgElRefs=new Va,this.segHarnessRefs=new Va,this.rootElRef=tr(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:i}=this,{options:r}=i,o=e.cells.length,s=kA(e.businessHourSegs,o),a=kA(e.bgEventSegs,o),l=kA(this.getHighlightSegs(),o),g=kA(this.getMirrorSegs(),o),{singleColPlacements:u,multiColPlacements:d,moreCnts:h,moreMarginTops:f}=HLe(bW(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),A=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return F("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((p,y)=>{let v=this.renderFgSegs(y,e.forPrint?u[y]:d[y],e.todayRange,A),S=this.renderFgSegs(y,MLe(g[y],d),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return F(XLe,{key:p.key,elRef:this.cellElRefs.createRef(p.key),innerElRef:this.frameElRefs.createRef(p.key),dateProfile:e.dateProfile,date:p.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,moreCnt:h[y],moreMarginTop:f[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(p.key),fgContent:F(on,null,F(on,null,v),F(on,null,S)),bgContent:F(on,null,this.renderFillSegs(l[y],"highlight"),this.renderFillSegs(s[y],"non-business"),this.renderFillSegs(a[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let i=this.props;this.updateSizing(!Ks(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,i,r,o,s,a){let{context:l}=this,{eventSelection:g}=this.props,{framePositions:u}=this.state,d=this.props.cells.length===1,h=o||s||a,f=[];if(u)for(let A of n){let{seg:p}=A,{instanceId:y}=p.eventRange.instance,v=A.isVisible&&!r[y],S=A.isAbsolute,Z="",R="";S&&(l.isRtl?(R=0,Z=u.lefts[p.lastCol]-u.lefts[p.firstCol]):(Z=0,R=u.rights[p.firstCol]-u.rights[p.lastCol])),f.push(F("div",{className:"fc-daygrid-event-harness"+(S?" fc-daygrid-event-harness-abs":""),key:dQ(p),ref:h?null:this.segHarnessRefs.createRef(IQ(p)),style:{visibility:v?"":"hidden",marginTop:S?"":A.marginTop,top:S?A.absoluteTop:"",left:Z,right:R}},gQ(p)?F(uQ,Object.assign({seg:p,isDragging:o,isSelected:y===g,defaultDisplayEventEnd:d},Ha(p,i))):F(cQ,Object.assign({seg:p,isDragging:o,isResizing:s,isDateSelecting:a,isSelected:y===g,defaultDisplayEventEnd:d},Ha(p,i)))))}return f}renderFillSegs(e,n){let{isRtl:i}=this.context,{todayRange:r}=this.props,{framePositions:o}=this.state,s=[];if(o)for(let a of e){let l=i?{right:0,left:o.lefts[a.lastCol]-o.lefts[a.firstCol]}:{left:0,right:o.rights[a.firstCol]-o.rights[a.lastCol]};s.push(F("div",{key:GO(a.eventRange),className:"fc-daygrid-bg-harness",style:l},n==="bg-event"?F(zO,Object.assign({seg:a},Ha(a,r))):PO(n)))}return F(on,{},...s)}updateSizing(e){let{props:n,state:i,frameElRefs:r}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let l=n.cells.map(g=>r.currentMap[g.key]);if(l.length){let g=this.rootElRef.current,u=new RI(g,l,!0,!1);(!i.framePositions||!i.framePositions.similarTo(u))&&this.setState({framePositions:new RI(g,l,!0,!1)})}}const o=this.state.segHeights,s=this.querySegHeights(),a=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},o),s),maxContentHeight:a?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let i in e){let r=Math.round(e[i].getBoundingClientRect().height);n[i]=Math.max(n[i]||0,r)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}CQ.addStateEquality({segHeights:Ks});function MLe(t,e){if(!t.length)return[];let n=TLe(e);return t.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:n[i.eventRange.instance.instanceId],marginTop:0}))}function TLe(t){let e={};for(let n of t)for(let i of n)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class LLe extends as{constructor(){super(...arguments),this.splitBusinessHourSegs=rt(RA),this.splitBgEventSegs=rt(RA),this.splitFgEventSegs=rt(RA),this.splitDateSelectionSegs=rt(RA),this.splitEventDrag=rt(G9),this.splitEventResize=rt(G9),this.rowRefs=new Va}render(){let{props:e,context:n}=this,i=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,i),o=this.splitBgEventSegs(e.bgEventSegs,i),s=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitDateSelectionSegs(e.dateSelectionSegs,i),l=this.splitEventDrag(e.eventDrag,i),g=this.splitEventResize(e.eventResize,i),u=i>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return F(KI,{unit:"day"},(d,h)=>F(on,null,e.cells.map((f,A)=>F(CQ,{ref:this.rowRefs.createRef(A),key:f.length?f[0].date.toISOString():A,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:f,renderIntro:e.renderRowIntro,businessHourSegs:r[A],eventSelection:e.eventSelection,bgEventSegs:o[A].filter(_Le),fgEventSegs:s[A],dateSelectionSegs:a[A],eventDrag:l[A],eventResize:g[A],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new RI(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new RI(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:i,rowPositions:r}=this,o=i.leftToIndex(e),s=r.topToIndex(n);if(s!=null&&o!=null){let a=this.props.cells[s][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(s,o),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(s,o),rect:{left:i.lefts[o],right:i.rights[o],top:r.tops[s],bottom:r.bottoms[s]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let i=this.props.cells[e][n].date,r=mi(i,1);return{start:i,end:r}}}function _Le(t){return t.eventRange.def.allDay}class DLe extends as{constructor(){super(...arguments),this.elRef=tr(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:i,expandRows:r}=e,o=i===!0||n===!0;o&&!r&&(o=!1,n=null,i=null);let s=["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return F("div",{ref:this.elRef,className:s.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},F("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,F("tbody",{role:"presentation"},F(LLe,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=KLe(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),i=n.closest(".fc-scroller"),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;i.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function KLe(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${WFe(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Jm(e.currentDate)}"]`)),n}class zLe extends YO{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class hQ extends as{constructor(){super(...arguments),this.slicer=new zLe,this.tableRef=tr()}render(){let{props:e,context:n}=this;return F(DLe,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class PLe extends kLe{constructor(){super(...arguments),this.buildDayTableModel=rt(ULe),this.headerRef=tr(),this.tableRef=tr()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:i}=this,r=this.buildDayTableModel(i.dateProfile,n),o=e.dayHeaders&&F(EO,{ref:this.headerRef,dateProfile:i.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),s=a=>F(hQ,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:r,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:a.tableColGroupNode,tableMinWidth:a.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:a.clientWidth,clientHeight:a.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(o,s,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(o,s)}}function ULe(t,e){let n=new HO(t.renderRange,e);return new NO(n,/year|month|week/.test(t.currentRangeUnit))}class jLe extends IO{buildRenderRange(e,n,i){let r=super.buildRenderRange(e,n,i),{props:o}=this;return OLe({currentRange:r,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}}function OLe(t){let{dateEnv:e,currentRange:n}=t,{start:i,end:r}=n,o;if(t.snapToWeek&&(i=e.startOfWeek(i),o=e.startOfWeek(r),o.valueOf()!==r.valueOf()&&(r=e9(o,1))),t.fixedWeekCount){let s=e.startOfWeek(e.startOfMonth(mi(n.end,-1))),a=Math.ceil(bFe(s,r));r=e9(r,6-a)}return{start:i,end:r}}var QLe=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';qv(QLe);var $Le=Qs({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:PLe,dateProfileGeneratorClass:jLe},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class qLe extends Mt{constructor(){super(...arguments),this.state={textId:ng()}}render(){let{theme:e,dateEnv:n,options:i,viewApi:r}=this.context,{cellId:o,dayDate:s,todayRange:a}=this.props,{textId:l}=this.state,g=SW(s,a),u=i.listDayFormat?n.format(s,i.listDayFormat):"",d=i.listDaySideFormat?n.format(s,i.listDaySideFormat):"",h=Object.assign({date:n.toDate(s),view:r,textId:l,text:u,sideText:d,navLinkAttrs:BI(this.context,s),sideNavLinkAttrs:BI(this.context,s,"day",!1)},g);return F(Di,{elTag:"tr",elClasses:["fc-list-day",...rS(g,e)],elAttrs:{"data-date":Jm(s)},renderProps:h,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:e_e,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},f=>F("th",{scope:"colgroup",colSpan:3,id:o,"aria-labelledby":l},F(f,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function e_e(t){return F(on,null,t.text&&F("a",Object.assign({id:t.textId,className:"fc-list-day-text"},t.navLinkAttrs),t.text),t.sideText&&F("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},t.sideNavLinkAttrs),t.sideText))}const t_e=Zn({hour:"numeric",minute:"2-digit",meridiem:"short"});class n_e extends Mt{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r,timeHeaderId:o,eventHeaderId:s,dateHeaderId:a}=e,l=i.eventTimeFormat||t_e;return F(oS,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",r.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>i_e(r,n),seg:r,timeText:"",disableDragging:!0,disableResizing:!0}),(g,u)=>F(on,null,r_e(r,l,n,o,a),F("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},F("span",{className:"fc-list-event-dot",style:{borderColor:u.borderColor||u.backgroundColor}})),F(g,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${s} ${a}`}})))}}function i_e(t,e){let n=yW(t,e);return F("a",Object.assign({},n),t.eventRange.def.title)}function r_e(t,e,n,i,r){let{options:o}=n;if(o.displayEventTime!==!1){let s=t.eventRange.def,a=t.eventRange.instance,l=!1,g;if(s.allDay?l=!0:m9e(t.eventRange.range)?t.isStart?g=Ph(t,e,n,null,null,a.range.start,t.end):t.isEnd?g=Ph(t,e,n,null,null,t.start,a.range.end):l=!0:g=Ph(t,e,n),l){let u={text:n.options.allDayText,view:n.viewApi};return F(Di,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${i} ${r}`},renderProps:u,generatorName:"allDayContent",customGenerator:o.allDayContent,defaultGenerator:o_e,classNameGenerator:o.allDayClassNames,didMount:o.allDayDidMount,willUnmount:o.allDayWillUnmount})}return F("td",{className:"fc-list-event-time"},g)}return null}function o_e(t){return t.text}class s_e extends as{constructor(){super(...arguments),this.computeDateVars=rt(l_e),this.eventStoreToSegs=rt(this._eventStoreToSegs),this.state={timeHeaderId:ng(),eventHeaderId:ng(),dateHeaderIdRoot:ng()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:n}=this,{dayDates:i,dayRanges:r}=this.computeDateVars(e.dateProfile),o=this.eventStoreToSegs(e.eventStore,e.eventUiBases,r);return F(Df,{elRef:this.setRootEl,elClasses:["fc-list",n.theme.getClass("table"),n.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:n.viewSpec},F(LO,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},o.length>0?this.renderSegList(o,i):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:n}=this.context,i={text:e.noEventsText,view:n};return F(Di,{elTag:"div",elClasses:["fc-list-empty"],renderProps:i,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:a_e,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},r=>F(r,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,n){let{theme:i,options:r}=this.context,{timeHeaderId:o,eventHeaderId:s,dateHeaderIdRoot:a}=this.state,l=g_e(e);return F(KI,{unit:"day"},(g,u)=>{let d=[];for(let h=0;h<l.length;h+=1){let f=l[h];if(f){let A=Jm(n[h]),p=a+"-"+A;d.push(F(qLe,{key:A,cellId:p,dayDate:n[h],todayRange:u})),f=bW(f,r.eventOrder);for(let y of f)d.push(F(n_e,Object.assign({key:A+":"+y.eventRange.instance.instanceId,seg:y,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:o,eventHeaderId:s,dateHeaderId:p},Ha(y,u,g))))}}return F("table",{className:"fc-list-table "+i.getClass("table")},F("thead",null,F("tr",null,F("th",{scope:"col",id:o},r.timeHint),F("th",{scope:"col","aria-hidden":!0}),F("th",{scope:"col",id:s},r.eventHint))),F("tbody",null,d))})}_eventStoreToSegs(e,n,i){return this.eventRangesToSegs(c2(e,n,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,i)}eventRangesToSegs(e,n){let i=[];for(let r of e)i.push(...this.eventRangeToSegs(r,n));return i}eventRangeToSegs(e,n){let{dateEnv:i}=this.context,{nextDayThreshold:r}=this.context.options,o=e.range,s=e.def.allDay,a,l,g,u=[];for(a=0;a<n.length;a+=1)if(l=dg(o,n[a]),l&&(g={component:this,eventRange:e,start:l.start,end:l.end,isStart:e.isStart&&l.start.valueOf()===o.start.valueOf(),isEnd:e.isEnd&&l.end.valueOf()===o.end.valueOf(),dayIndex:a},u.push(g),!g.isEnd&&!s&&a+1<n.length&&o.end<i.add(n[a+1].start,r))){g.end=o.end,g.isEnd=!0;break}return u}}function a_e(t){return t.text}function l_e(t){let e=sn(t.renderRange.start),n=t.renderRange.end,i=[],r=[];for(;e<n;)i.push(e),r.push({start:e,end:mi(e,1)}),e=mi(e,1);return{dayDates:i,dayRanges:r}}function g_e(t){let e=[],n,i;for(n=0;n<t.length;n+=1)i=t[n],(e[i.dayIndex]||(e[i.dayIndex]=[])).push(i);return e}var c_e=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';qv(c_e);const u_e={listDayFormat:B9,listDaySideFormat:B9,noEventsClassNames:ge,noEventsContent:ge,noEventsDidMount:ge,noEventsWillUnmount:ge};function B9(t){return t===!1?null:Zn(t)}var d_e=Qs({name:"@fullcalendar/list",optionRefiners:u_e,views:{list:{component:s_e,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});class I_e extends hMe{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?z9e(e)?["timed","allDay"]:["allDay"]:["timed"]}}const C_e=Zn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function fQ(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return F(qa.Consumer,null,n=>{if(!t.isLabeled)return F("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:i,options:r,viewApi:o}=n,s=r.slotLabelFormat==null?C_e:Array.isArray(r.slotLabelFormat)?Zn(r.slotLabelFormat[0]):Zn(r.slotLabelFormat),a={level:0,time:t.time,date:i.toDate(t.date),view:o,text:i.format(t.date,s)};return F(Di,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:a,generatorName:"slotLabelContent",customGenerator:r.slotLabelContent,defaultGenerator:h_e,classNameGenerator:r.slotLabelClassNames,didMount:r.slotLabelDidMount,willUnmount:r.slotLabelWillUnmount},l=>F("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},F(l,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function h_e(t){return t.text}class f_e extends Mt{render(){return this.props.slatMetas.map(e=>F("tr",{key:e.key},F(fQ,Object.assign({},e))))}}const m_e=Zn({week:"short"}),p_e=5;class A_e extends as{constructor(){super(...arguments),this.allDaySplitter=new I_e,this.headerElRef=tr(),this.rootElRef=tr(),this.scrollerElRef=tr(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:i}=this.context,{dateProfile:r}=this.props,o=r.renderRange,a=Bg(o.start,o.end)===1?BI(this.context,o.start,"week"):{};return i.weekNumbers&&e==="day"?F(UO,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:o.start,defaultFormat:m_e},l=>F("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},F(l,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:a}))):F("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},F("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:i}=this.context,r={text:n.allDayText,view:i};return F(Di,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:b_e,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},o=>F("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},F(o,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,i){let{context:r,props:o}=this,s=[],a=ry(r.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(s.push({type:"body",key:"all-day",chunk:{content:n}}),s.push({type:"body",key:"all-day-divider",outerContent:F("tr",{role:"presentation",className:"fc-scrollgrid-section"},F("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),s.push({type:"body",key:"body",liquid:!0,expandRows:!!r.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:i}}),F(Df,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},F(kW,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[{width:"shrink"}],sections:s}))}renderHScrollLayout(e,n,i,r,o,s,a){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{context:g,props:u}=this,d=!u.forPrint&&ry(g.options),h=!u.forPrint&&DO(g.options),f=[];e&&f.push({type:"header",key:"header",isSticky:d,syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>F("tr",{role:"presentation"},this.renderHeadAxis("day",p.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(f.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>F("tr",{role:"presentation"},this.renderTableRowAxis(p.rowSyncHeights[0]))},{key:"cols",content:n}]}),f.push({key:"all-day-divider",type:"body",outerContent:F("tr",{role:"presentation",className:"fc-scrollgrid-section"},F("td",{colSpan:2,className:"fc-timegrid-divider "+g.theme.getClass("tableCellShaded")}))}));let A=g.options.nowIndicator;return f.push({type:"body",key:"body",liquid:!0,expandRows:!!g.options.expandRows,chunks:[{key:"axis",content:p=>F("div",{className:"fc-timegrid-axis-chunk"},F("table",{"aria-hidden":!0,style:{height:p.expandRows?p.clientHeight:""}},p.tableColGroupNode,F("tbody",null,F(f_e,{slatMetas:s}))),F("div",{className:"fc-timegrid-now-indicator-container"},F(KI,{unit:A?"minute":"day"},y=>{let v=A&&a&&a.safeComputeTop(y);return typeof v=="number"?F(VW,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:v},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:i}]}),h&&f.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:C2},{key:"cols",content:C2}]}),F(Df,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:g.viewSpec},F(l,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:o}]}],sections:f}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=p_e),{dayMaxEvents:e,dayMaxEventRows:n}}}function b_e(t){return t.text}class y_e{constructor(e,n,i){this.positions=e,this.dateProfile=n,this.slotDuration=i}safeComputeTop(e){let{dateProfile:n}=this;if(Ea(n.currentRange,e)){let i=sn(e),r=e.valueOf()-i.valueOf();if(r>=qo(n.slotMinTime)&&r<qo(n.slotMaxTime))return this.computeTimeTop(xt(r))}return null}computeDateTop(e,n){return n||(n=sn(e)),this.computeTimeTop(xt(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:i}=this,r=n.els.length,o=(e.milliseconds-qo(i.slotMinTime))/qo(this.slotDuration),s,a;return o=Math.max(0,o),o=Math.min(r,o),s=Math.floor(o),s=Math.min(s,r-1),a=o-s,n.tops[s]+n.getHeight(s)*a}}class v_e extends Mt{render(){let{props:e,context:n}=this,{options:i}=n,{slatElRefs:r}=e;return F("tbody",null,e.slatMetas.map((o,s)=>{let a={time:o.time,date:n.dateEnv.toDate(o.date),view:n.viewApi};return F("tr",{key:o.key,ref:r.createRef(o.key)},e.axis&&F(fQ,Object.assign({},o)),F(Di,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!o.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":o.isoTimeStr},renderProps:a,generatorName:"slotLaneContent",customGenerator:i.slotLaneContent,classNameGenerator:i.slotLaneClassNames,didMount:i.slotLaneDidMount,willUnmount:i.slotLaneWillUnmount}))}))}}class S_e extends Mt{constructor(){super(...arguments),this.rootElRef=tr(),this.slatElRefs=new Va}render(){let{props:e,context:n}=this;return F("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},F("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,F(v_e,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new y_e(new RI(this.rootElRef.current,Z_e(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function Z_e(t,e){return e.map(n=>t[n.key])}function zC(t,e){let n=[],i;for(i=0;i<e;i+=1)n.push([]);if(t)for(i=0;i<t.length;i+=1)n[t[i].col].push(t[i]);return n}function R9(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.col].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}class G_e extends Mt{render(){let{props:e}=this;return F(jO,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>pQ(e.hiddenSegs,e),defaultGenerator:B_e,forceTimed:!0},n=>F(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function B_e(t){return t.shortText}function R_e(t,e,n){let i=new xO;e!=null&&(i.strictOrder=e),n!=null&&(i.maxStackCnt=n);let r=i.addSegs(t),o=kMe(r),s=k_e(i);return s=x_e(s,1),{segRects:X_e(s),hiddenGroups:o}}function k_e(t){const{entriesByLevel:e}=t,n=XW((i,r)=>i+":"+r,(i,r)=>{let o=W_e(t,i,r),s=k9(o,n),a=e[i][r];return[Object.assign(Object.assign({},a),{nextLevelNodes:s[0]}),a.thickness+s[1]]});return k9(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function k9(t,e){if(!t)return[[],0];let{level:n,lateralStart:i,lateralEnd:r}=t,o=i,s=[];for(;o<r;)s.push(e(n,o)),o+=1;return s.sort(V_e),[s.map(w_e),s[0][1]]}function V_e(t,e){return e[1]-t[1]}function w_e(t){return t[0]}function W_e(t,e,n){let{levelCoords:i,entriesByLevel:r}=t,o=r[e][n],s=i[e]+o.thickness,a=i.length,l=e;for(;l<a&&i[l]<s;l+=1);for(;l<a;l+=1){let g=r[l],u,d=I2(g,o.span.start,d2),h=d[0]+d[1],f=h;for(;(u=g[f])&&u.span.start<o.span.end;)f+=1;if(h<f)return{level:l,lateralStart:h,lateralEnd:f}}return null}function x_e(t,e){const n=XW((i,r,o)=>Vc(i),(i,r,o)=>{let{nextLevelNodes:s,thickness:a}=i,l=a+o,g=a/l,u,d=[];if(!s.length)u=e;else for(let f of s)if(u===void 0){let A=n(f,r,l);u=A[0],d.push(A[1])}else{let A=n(f,u,0);d.push(A[1])}let h=(u-r)*g;return[u-h,Object.assign(Object.assign({},i),{thickness:h,nextLevelNodes:d})]});return t.map(i=>n(i,0,0)[1])}function X_e(t){let e=[];const n=XW((r,o,s)=>Vc(r),(r,o,s)=>{let a=Object.assign(Object.assign({},r),{levelCoord:o,stackDepth:s,stackForward:0});return e.push(a),a.stackForward=i(r.nextLevelNodes,o+r.thickness,s+1)+1});function i(r,o,s){let a=0;for(let l of r)a=Math.max(n(l,o,s),a);return a}return i(t,0,0),e}function XW(t,e){const n={};return(...i)=>{let r=t(...i);return r in n?n[r]:n[r]=e(...i)}}function V9(t,e,n=null,i=0){let r=[];if(n)for(let o=0;o<t.length;o+=1){let s=t[o],a=n.computeDateTop(s.start,e),l=Math.max(a+(i||0),n.computeDateTop(s.end,e));r.push({start:Math.round(a),end:Math.round(l)})}return r}function J_e(t,e,n,i){let r=[],o=[];for(let g=0;g<t.length;g+=1){let u=e[g];u?r.push({index:g,thickness:1,span:u}):o.push(t[g])}let{segRects:s,hiddenGroups:a}=R_e(r,n,i),l=[];for(let g of s)l.push({seg:t[g.index],rect:g});for(let g of o)l.push({seg:g,rect:null});return{segPlacements:l,hiddenGroups:a}}const E_e=Zn({hour:"numeric",minute:"2-digit",meridiem:!1});class mQ extends Mt{render(){return F(KO,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:E_e}))}}class H_e extends Mt{constructor(){super(...arguments),this.sortEventSegs=rt(bW)}render(){let{props:e,context:n}=this,{options:i}=n,r=i.selectMirror,o=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],s=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},a=this.sortEventSegs(e.fgEventSegs,i.eventOrder);return F(wW,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},l=>F("div",{className:"fc-timegrid-col-frame"},F("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),F("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,s,!1,!1,!1)),F("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,{},!!e.eventDrag,!!e.eventResize,!!r,"mirror")),F("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),WW(i)&&F(l,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,i,r,o,s){let{props:a}=this;return a.forPrint?pQ(e,a):this.renderPositionedFgSegs(e,n,i,r,o,s)}renderPositionedFgSegs(e,n,i,r,o,s){let{eventMaxStack:a,eventShortHeight:l,eventOrderStrict:g,eventMinHeight:u}=this.context.options,{date:d,slatCoords:h,eventSelection:f,todayRange:A,nowDate:p}=this.props,y=i||r||o,v=V9(e,d,h,u),{segPlacements:S,hiddenGroups:Z}=J_e(e,v,g,a);return F(on,null,this.renderHiddenGroups(Z,e),S.map(R=>{let{seg:W,rect:B}=R,k=W.eventRange.instance.instanceId,w=y||!!(!n[k]&&B),J=cB(B&&B.span),X=!y&&B?this.computeSegHStyle(B):{left:0,right:0},Y=!!B&&B.stackForward>0,z=!!B&&B.span.end-B.span.start<l;return F("div",{className:"fc-timegrid-event-harness"+(Y?" fc-timegrid-event-harness-inset":""),key:s||k,style:Object.assign(Object.assign({visibility:w?"":"hidden"},J),X)},F(mQ,Object.assign({seg:W,isDragging:i,isResizing:r,isDateSelecting:o,isSelected:k===f,isShort:z},Ha(W,A,p))))}))}renderHiddenGroups(e,n){let{extraDateSpan:i,dateProfile:r,todayRange:o,nowDate:s,eventSelection:a,eventDrag:l,eventResize:g}=this.props;return F(on,null,e.map(u=>{let d=cB(u.span),h=N_e(u.entries,n);return F(G_e,{key:oO(OO(h)),hiddenSegs:h,top:d.top,bottom:d.bottom,extraDateSpan:i,dateProfile:r,todayRange:o,nowDate:s,eventSelection:a,eventDrag:l,eventResize:g})}))}renderFillSegs(e,n){let{props:i,context:r}=this,s=V9(e,i.date,i.slatCoords,r.options.eventMinHeight).map((a,l)=>{let g=e[l];return F("div",{key:GO(g.eventRange),className:"fc-timegrid-bg-harness",style:cB(a)},n==="bg-event"?F(zO,Object.assign({seg:g},Ha(g,i.todayRange,i.nowDate))):PO(n))});return F(on,null,s)}renderNowIndicator(e){let{slatCoords:n,date:i}=this.props;return n?e.map((r,o)=>F(VW,{key:o,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(r.start,i)},isAxis:!1,date:i})):null}computeSegHStyle(e){let{isRtl:n,options:i}=this.context,r=i.slotEventOverlap,o=e.levelCoord,s=e.levelCoord+e.thickness,a,l;r&&(s=Math.min(1,o+(s-o)*2)),n?(a=1-s,l=o):(a=o,l=1-s);let g={zIndex:e.stackDepth+1,left:a*100+"%",right:l*100+"%"};return r&&!e.stackForward&&(g[n?"marginLeft":"marginRight"]=10*2),g}}function pQ(t,{todayRange:e,nowDate:n,eventSelection:i,eventDrag:r,eventResize:o}){let s=(r?r.affectedInstances:null)||(o?o.affectedInstances:null)||{};return F(on,null,t.map(a=>{let l=a.eventRange.instance.instanceId;return F("div",{key:l,style:{visibility:s[l]?"hidden":""}},F(mQ,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===i,isShort:!1},Ha(a,e,n))))}))}function cB(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function N_e(t,e){return t.map(n=>e[n.index])}class Y_e extends Mt{constructor(){super(...arguments),this.splitFgEventSegs=rt(zC),this.splitBgEventSegs=rt(zC),this.splitBusinessHourSegs=rt(zC),this.splitNowIndicatorSegs=rt(zC),this.splitDateSelectionSegs=rt(zC),this.splitEventDrag=rt(R9),this.splitEventResize=rt(R9),this.rootElRef=tr(),this.cellElRefs=new Va}render(){let{props:e,context:n}=this,i=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,o=this.splitFgEventSegs(e.fgEventSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitBusinessHourSegs(e.businessHourSegs,r),l=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),g=this.splitDateSelectionSegs(e.dateSelectionSegs,r),u=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r);return F("div",{className:"fc-timegrid-cols",ref:this.rootElRef},F("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,F("tbody",{role:"presentation"},F("tr",{role:"row"},e.axis&&F("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},F("div",{className:"fc-timegrid-col-frame"},F("div",{className:"fc-timegrid-now-indicator-container"},typeof i=="number"&&F(VW,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:i},isAxis:!0,date:e.nowDate})))),e.cells.map((h,f)=>F(H_e,{key:h.key,elRef:this.cellElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,fgEventSegs:o[f],bgEventSegs:s[f],businessHourSegs:a[f],nowIndicatorSegs:l[f],dateSelectionSegs:g[f],eventDrag:u[f],eventResize:d[f],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new RI(this.rootElRef.current,F_e(this.cellElRefs.currentMap,e.cells),!0,!1))}}function F_e(t,e){return e.map(n=>t[n.key])}class M_e extends as{constructor(){super(...arguments),this.processSlotOptions=rt(T_e),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:i}=this.state;if(n&&i){if(e.time){let r=i.computeTimeTop(e.time);r=Math.ceil(r),r&&(r+=1),n(r)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return F("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},F(S_e,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),F(Y_e,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:i,options:r}=this.context,{colCoords:o}=this,{dateProfile:s}=this.props,{slatCoords:a}=this.state,{snapDuration:l,snapsPerSlot:g}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),u=o.leftToIndex(e),d=a.positions.topToIndex(n);if(u!=null&&d!=null){let h=this.props.cells[u],f=a.positions.tops[d],A=a.positions.getHeight(d),p=(n-f)/A,y=Math.floor(p*g),v=d*g+y,S=this.props.cells[u].date,Z=r2(s.slotMinTime,fFe(l,v)),R=i.add(S,Z),W=i.add(R,l);return{dateProfile:s,dateSpan:Object.assign({range:{start:R,end:W},allDay:!1},h.extraDateSpan),dayEl:o.els[u],rect:{left:o.lefts[u],right:o.rights[u],top:f,bottom:f+A},layer:0}}return null}}function T_e(t,e){let n=e||t,i=sW(t,n);return i===null&&(n=t,i=1),{snapDuration:n,snapsPerSlot:i}}class L_e extends YO{sliceRange(e,n){let i=[];for(let r=0;r<n.length;r+=1){let o=dg(e,n[r]);o&&i.push({start:o.start,end:o.end,isStart:o.start.valueOf()===e.start.valueOf(),isEnd:o.end.valueOf()===e.end.valueOf(),col:r})}return i}}class __e extends as{constructor(){super(...arguments),this.buildDayRanges=rt(D_e),this.slicer=new L_e,this.timeColsRef=tr()}render(){let{props:e,context:n}=this,{dateProfile:i,dayTableModel:r}=e,{nowIndicator:o,nextDayThreshold:s}=n.options,a=this.buildDayRanges(r,i,n.dateEnv);return F(KI,{unit:o?"minute":"day"},(l,g)=>F(M_e,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,i,null,n,a),{forPrint:e.forPrint,axis:e.axis,dateProfile:i,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:l,nowIndicatorSegs:o&&this.slicer.sliceNowDate(l,i,s,n,a),todayRange:g,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function D_e(t,e,n){let i=[];for(let r of t.headerDates)i.push({start:n.add(r,e.slotMinTime),end:n.add(r,e.slotMaxTime)});return i}const w9=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function K_e(t,e,n,i,r){let o=new Date(0),s=t,a=xt(0),l=n||z_e(i),g=[];for(;qo(s)<qo(e);){let u=r.add(o,s),d=sW(a,l)!==null;g.push({date:u,time:s,key:u.toISOString(),isoTimeStr:xFe(u),isLabeled:d}),s=r2(s,i),a=r2(a,i)}return g}function z_e(t){let e,n,i;for(e=w9.length-1;e>=0;e-=1)if(n=xt(w9[e]),i=sW(n,t),i!==null&&i>1)return n;return t}class P_e extends A_e{constructor(){super(...arguments),this.buildTimeColsModel=rt(U_e),this.buildSlatMetas=rt(K_e)}render(){let{options:e,dateEnv:n,dateProfileGenerator:i}=this.context,{props:r}=this,{dateProfile:o}=r,s=this.buildTimeColsModel(o,i),a=this.allDaySplitter.splitProps(r),l=this.buildSlatMetas(o.slotMinTime,o.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:g}=e,u=!g,d=g,h=e.dayHeaders&&F(EO,{dates:s.headerDates,dateProfile:o,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),f=e.allDaySlot!==!1&&(p=>F(hQ,Object.assign({},a.allDay,{dateProfile:o,dayTableModel:s,nextDayThreshold:e.nextDayThreshold,tableMinWidth:p.tableMinWidth,colGroupNode:p.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:p.clientWidth,clientHeight:p.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),A=p=>F(__e,Object.assign({},a.timed,{dayTableModel:s,dateProfile:o,axis:u,slotDuration:e.slotDuration,slatMetas:l,forPrint:r.forPrint,tableColGroupNode:p.tableColGroupNode,tableMinWidth:p.tableMinWidth,clientWidth:p.clientWidth,clientHeight:p.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:p.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return d?this.renderHScrollLayout(h,f,A,s.colCnt,g,l,this.state.slatCoords):this.renderSimpleLayout(h,f,A)}}function U_e(t,e){let n=new HO(t.renderRange,e);return new NO(n,!1)}var j_e='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';qv(j_e);const O_e={allDaySlot:Boolean};var Q_e=Qs({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:O_e,views:{timeGrid:{component:P_e,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});RW.touchMouseIgnoreWait=500;let f2=0,oy=0,m2=!1;class AQ{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&$_e(n)&&this.tryStart(n)){let i=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let i=this.createEventFromMouse(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let i=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let r=n.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let i=this.createEventFromTouch(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=n=>{if(this.isDragging){let i=n.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,q_e()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let i=window.pageXOffset-this.prevScrollX+this.prevPageX,r=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:r,deltaX:i-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new iS,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),e3e()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),t3e()}tryStart(e){let n=this.querySubjectEl(e),i=e.target;return n&&(!this.handleSelector||Mi(i,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){m2=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Mi(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return f2||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(m2=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let i=0,r=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:r}}createEventFromTouch(e,n){let i=e.touches,r,o,s=0,a=0;return i&&i.length?(r=i[0].pageX,o=i[0].pageY):(r=e.pageX,o=e.pageY),n?(this.origPageX=r,this.origPageY=o):(s=r-this.origPageX,a=o-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:o,deltaX:s,deltaY:a}}}function $_e(t){return t.button===0&&!t.ctrlKey}function q_e(){f2+=1,setTimeout(()=>{f2-=1},RW.touchMouseIgnoreWait)}function e3e(){oy+=1,oy===1&&window.addEventListener("touchmove",bQ,{passive:!1})}function t3e(){oy-=1,oy||window.removeEventListener("touchmove",bQ,{passive:!1})}function bQ(t){m2&&t.preventDefault()}class n3e{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.pageXOffset,this.origScreenY=i-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=n-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let i=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,n){let i=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();i.style.transition="top "+n+"ms,left "+n+"ms",Dh(i,{left:r.left,top:r.top}),tFe(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(iW(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Dh(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.classList.add("fc-event-dragging"),Dh(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class yQ extends GW{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class vQ extends yQ{constructor(e,n){super(new BMe(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return ZMe(this.scrollController.el)}}class i3e extends yQ{constructor(e){super(new RMe,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const W9=typeof performance=="function"?performance.now:Date.now;class r3e{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(e){let n=W9();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let i=e-window.pageXOffset,r=n-window.pageYOffset,o=this.pointerScreenY===null?0:r-this.pointerScreenY,s=this.pointerScreenX===null?0:i-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(W9()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:i}=e,{edgeThreshold:r}=this,o=r-e.distance,s=o*o/(r*r)*this.maxVelocity*n,a=1;switch(e.name){case"left":a=-1;case"right":i.setScrollLeft(i.getScrollLeft()+s*a);break;case"top":a=-1;case"bottom":i.setScrollTop(i.getScrollTop()+s*a);break}}computeBestEdge(e,n){let{edgeThreshold:i}=this,r=null,o=this.scrollCaches||[];for(let s of o){let a=s.clientRect,l=e-a.left,g=a.right-e,u=n-a.top,d=a.bottom-n;l>=0&&g>=0&&u>=0&&d>=0&&(u<=i&&this.everMovedUp&&s.canScrollUp()&&(!r||r.distance>u)&&(r={scrollCache:s,name:"top",distance:u}),d<=i&&this.everMovedDown&&s.canScrollDown()&&(!r||r.distance>d)&&(r={scrollCache:s,name:"bottom",distance:d}),l<=i&&this.everMovedLeft&&s.canScrollLeft()&&(!r||r.distance>l)&&(r={scrollCache:s,name:"left",distance:l}),g<=i&&this.everMovedRight&&s.canScrollRight()&&(!r||r.distance>g)&&(r={scrollCache:s,name:"right",distance:g}))}return r}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new i3e(!1):new vQ(n,!1))}queryScrollEls(e){let n=[];for(let i of this.scrollQuery)typeof i=="object"?n.push(i):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return n}}class Nm extends wMe{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,nFe(document.body),rFe(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let o=this.minDistance,s,{deltaX:a,deltaY:l}=r;s=a*a+l*l,s>=o*o&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,iFe(document.body),oFe(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new AQ(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),n&&(i.selector=n),this.mirror=new n3e,this.autoScroller=new r3e}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class o3e{constructor(e){this.origRect=ZW(e),this.scrollCaches=WO(e).map(n=>new vQ(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let i={left:e,top:n};for(let r of this.scrollCaches)if(!s3e(r.getEventTarget())&&!uMe(i,r.clientRect))return!1;return!0}}function s3e(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class sS{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):r.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new iS}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},i=n,r=e.subjectEl,o;r instanceof HTMLElement&&(o=ZW(r),i=dMe(i,o));let s=this.initialHit=this.queryHitForOffset(i.left,i.top);if(s){if(this.useSubjectCenter&&o){let a=VO(o,s.rect);a&&(i=IMe(a))}this.coordAdjust=CMe(i,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!aS(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Pa(this.droppableStore,e=>(e.component.prepareHits(),new o3e(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:i,offsetTrackers:r}=this,o=null;for(let s in i){let a=i[s].component,l=r[s];if(l&&l.isWithinClipping(e,n)){let g=l.computeLeft(),u=l.computeTop(),d=e-g,h=n-u,{origRect:f}=l,A=f.right-f.left,p=f.bottom-f.top;if(d>=0&&d<A&&h>=0&&h<p){let y=a.queryHit(d,h,A,p);y&&tS(y.dateProfile.activeRange,y.dateSpan.range)&&(!o||y.layer>o.layer)&&(y.componentId=s,y.context=a.context,y.rect.left+=g,y.rect.right+=g,y.rect.top+=u,y.rect.bottom+=u,o=y)}}}return o}}function aS(t,e){return!t&&!e?!0:!!t!=!!e?!1:tMe(t.dateSpan,e.dateSpan)}function SQ(t,e){let n={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(n,i(t,e));return Object.assign(n,a3e(t,e.dateEnv)),n}function a3e(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class l3e extends DI{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:r}=this,o=i.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(o))},this.handleDragEnd=i=>{let{component:r}=this,{pointer:o}=this.dragging;if(!o.wasTouchScroll){let{initialHit:s,finalHit:a}=this.hitDragging;if(s&&a&&aS(s,a)){let{context:l}=r,g=Object.assign(Object.assign({},SQ(s.dateSpan,l)),{dayEl:s.dayEl,jsEvent:i.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",g)}}},this.dragging=new Nm(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new sS(this.dragging,vW(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class g3e extends DI{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=s=>{let{component:a,dragging:l}=this,{options:g}=a.context,u=g.selectable&&a.isValidDateDownEl(s.origEvent.target);l.setIgnoreMove(!u),l.delay=s.isTouch?c3e(a):null},this.handleDragStart=s=>{this.component.context.calendarApi.unselect(s)},this.handleHitUpdate=(s,a)=>{let{context:l}=this.component,g=null,u=!1;if(s){let d=this.hitDragging.initialHit;s.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,s)||(g=u3e(d,s,l.pluginHooks.dateSelectionTransformers)),(!g||!HMe(g,s.dateProfile,l))&&(u=!0,g=null)}g?l.dispatch({type:"SELECT_DATES",selection:g}):a||l.dispatch({type:"UNSELECT_DATES"}),u?rW():oW(),a||(this.dragSelection=g)},this.handlePointerUp=s=>{this.dragSelection&&(vO(this.dragSelection,s,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:i}=n.context,r=this.dragging=new Nm(e.el);r.touchScrollAllowed=!1,r.minDistance=i.selectMinDistance||0,r.autoScroller.isEnabled=i.dragScroll;let o=this.hitDragging=new sS(this.dragging,vW(e));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function c3e(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function u3e(t,e,n){let i=t.dateSpan,r=e.dateSpan,o=[i.range.start,i.range.end,r.range.start,r.range.end];o.sort(cFe);let s={};for(let a of n){let l=a(t,e);if(l===!1)return null;l&&Object.assign(s,l)}return s.range={start:o[0],end:o[3]},s.allDay=i.allDay,s}class Ym extends DI{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let a=s.origEvent.target,{component:l,dragging:g}=this,{mirror:u}=g,{options:d}=l.context,h=l.context;this.subjectEl=s.subjectEl;let f=this.subjectSeg=GI(s.subjectEl),p=(this.eventRange=f.eventRange).instance.instanceId;this.relevantEvents=fW(h.getCurrentData().eventStore,p),g.minDistance=s.isTouch?0:d.eventDragMinDistance,g.delay=s.isTouch&&p!==l.props.eventSelection?I3e(l):null,d.fixedMirrorParent?u.parentNode=d.fixedMirrorParent:u.parentNode=Mi(a,".fc"),u.revertDuration=d.dragRevertDuration;let y=l.isValidSegDownEl(a)&&!Mi(a,".fc-event-resizer");g.setIgnoreMove(!y),this.isDragging=y&&s.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=s=>{let a=this.component.context,l=this.eventRange,g=l.instance.instanceId;s.isTouch?g!==this.component.props.eventSelection&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:g}):a.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(a.calendarApi.unselect(s),a.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Vn(a,l.def,l.instance),jsEvent:s.origEvent,view:a.viewApi}))},this.handleHitUpdate=(s,a)=>{if(!this.isDragging)return;let l=this.relevantEvents,g=this.hitDragging.initialHit,u=this.component.context,d=null,h=null,f=null,A=!1,p={affectedEvents:l,mutatedEvents:Tr(),isEvent:!0};if(s){d=s.context;let y=d.options;u===d||y.editable&&y.droppable?(h=d3e(g,s,d.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(f=AW(l,d.getCurrentData().eventUiBases,h,d),p.mutatedEvents=f,FO(p,s.dateProfile,d)||(A=!0,h=null,f=null,p.mutatedEvents=Tr()))):d=null}this.displayDrag(d,p),A?rW():oW(),a||(u===d&&aS(g,s)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!s||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=d,this.validMutation=h,this.mutatedRelevantEvents=f)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=s=>{if(this.isDragging){let a=this.component.context,l=a.viewApi,{receivingContext:g,validMutation:u}=this,d=this.eventRange.def,h=this.eventRange.instance,f=new Vn(a,d,h),A=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),a.emitter.trigger("eventDragStop",{el:this.subjectEl,event:f,jsEvent:s.origEvent,view:l}),u){if(g===a){let v=new Vn(a,p.defs[d.defId],h?p.instances[h.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:p});let S={oldEvent:f,event:v,relatedEvents:kc(p,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:A})}},Z={};for(let R of a.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(Z,R(u,a));a.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},S),Z),{el:s.subjectEl,delta:u.datesDelta,jsEvent:s.origEvent,view:l})),a.emitter.trigger("eventChange",S)}else if(g){let v={event:f,relatedEvents:kc(A,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:A})}};a.emitter.trigger("eventLeave",Object.assign(Object.assign({},v),{draggedEl:s.subjectEl,view:l})),a.dispatch({type:"REMOVE_EVENTS",eventStore:A}),a.emitter.trigger("eventRemove",v);let S=p.defs[d.defId],Z=p.instances[h.instanceId],R=new Vn(g,S,Z);g.dispatch({type:"MERGE_EVENTS",eventStore:p});let W={event:R,relatedEvents:kc(p,g,Z),revert(){g.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};g.emitter.trigger("eventAdd",W),s.isTouch&&g.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),g.emitter.trigger("drop",Object.assign(Object.assign({},SQ(y.dateSpan,g)),{draggedEl:s.subjectEl,jsEvent:s.origEvent,view:y.context.viewApi})),g.emitter.trigger("eventReceive",Object.assign(Object.assign({},W),{draggedEl:s.subjectEl,view:y.context.viewApi}))}}else a.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:i}=n.context,r=this.dragging=new Nm(e.el);r.pointer.selector=Ym.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=i.dragScroll;let o=this.hitDragging=new sS(this.dragging,u2);o.useSubjectCenter=e.useEventCenter,o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp),o.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let i=this.component.context,r=this.receivingContext;r&&r!==e&&(r===i?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Tr(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Ym.SELECTOR=".fc-event-draggable, .fc-event-resizable";function d3e(t,e,n){let i=t.dateSpan,r=e.dateSpan,o=i.range.start,s=r.range.start,a={};i.allDay!==r.allDay&&(a.allDay=r.allDay,a.hasEnd=e.context.options.allDayMaintainDuration,r.allDay&&(o=sn(o)));let l=Bd(o,s,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);l.milliseconds&&(a.allDay=!1);let g={datesDelta:l,standardProps:a};for(let u of n)u(g,t,e);return g}function I3e(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class C3e extends DI{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let{component:s}=this,a=this.querySegEl(o),l=GI(a),g=this.eventRange=l.eventRange;this.dragging.minDistance=s.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&this.component.props.eventSelection!==g.instance.instanceId)},this.handleDragStart=o=>{let{context:s}=this.component,a=this.eventRange;this.relevantEvents=fW(s.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(o);this.draggingSegEl=l,this.draggingSeg=GI(l),s.calendarApi.unselect(),s.emitter.trigger("eventResizeStart",{el:l,event:new Vn(s,a.def,a.instance),jsEvent:o.origEvent,view:s.viewApi})},this.handleHitUpdate=(o,s,a)=>{let{context:l}=this.component,g=this.relevantEvents,u=this.hitDragging.initialHit,d=this.eventRange.instance,h=null,f=null,A=!1,p={affectedEvents:g,mutatedEvents:Tr(),isEvent:!0};o&&(o.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,o)||(h=h3e(u,o,a.subjectEl.classList.contains("fc-event-resizer-start"),d.range))),h&&(f=AW(g,l.getCurrentData().eventUiBases,h,l),p.mutatedEvents=f,FO(p,o.dateProfile,l)||(A=!0,h=null,f=null,p.mutatedEvents=null)),f?l.dispatch({type:"SET_EVENT_RESIZE",state:p}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),A?rW():oW(),s||(h&&aS(u,o)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=f)},this.handleDragEnd=o=>{let{context:s}=this.component,a=this.eventRange.def,l=this.eventRange.instance,g=new Vn(s,a,l),u=this.relevantEvents,d=this.mutatedRelevantEvents;if(s.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:g,jsEvent:o.origEvent,view:s.viewApi}),this.validMutation){let h=new Vn(s,d.defs[a.defId],l?d.instances[l.instanceId]:null);s.dispatch({type:"MERGE_EVENTS",eventStore:d});let f={oldEvent:g,event:h,relatedEvents:kc(d,s,l),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:u})}};s.emitter.trigger("eventResize",Object.assign(Object.assign({},f),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||xt(0),endDelta:this.validMutation.endDelta||xt(0),jsEvent:o.origEvent,view:s.viewApi})),s.emitter.trigger("eventChange",f)}else s.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,i=this.dragging=new Nm(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=n.context.options.dragScroll;let r=this.hitDragging=new sS(this.dragging,vW(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Mi(e.subjectEl,".fc-event")}}function h3e(t,e,n,i){let r=t.context.dateEnv,o=t.dateSpan.range.start,s=e.dateSpan.range.start,a=Bd(o,s,r,t.largeUnit);if(n){if(r.add(i.start,a)<i.end)return{startDelta:a}}else if(r.add(i.end,a)>i.start)return{endDelta:a};return null}class f3e{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let r=this.context.options.unselectCancel,o=eO(i.origEvent);this.matchesCancel=!!Mi(o,r),this.matchesEvent=!!Mi(o,Ym.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:r}=this,{documentPointer:o}=this,s=r.getCurrentData();if(!o.wasTouchScroll){if(s.dateSelection&&!this.isRecentPointerDateSelect){let a=r.options.unselectAuto;a&&(!a||!this.matchesCancel)&&r.calendarApi.unselect(i)}s.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new AQ(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const m3e={fixedMirrorParent:ge},p3e={dateClick:ge,eventDragStart:ge,eventDragStop:ge,eventDrop:ge,eventResizeStart:ge,eventResizeStop:ge,eventResize:ge,drop:ge,eventReceive:ge,eventLeave:ge};RW.dataAttrPrefix="";var A3e=Qs({name:"@fullcalendar/interaction",componentInteractions:[l3e,g3e,Ym,C3e],calendarInteractions:[f3e],elementDraggingImpl:Nm,optionRefiners:m3e,listenerRefiners:p3e});const b3e=({isEventDetailsOpen:t,onEventDetailsOpen:e,onEventDetailsClose:n,selectedEvent:i})=>{const r=ln(),o=async s=>{try{const l=await(await fn.put(`/api/posts/checkin/${s.eventId}`,{ticketId:s.id})).data;r("success",l.message,"success"),n()}catch{r("Error","error")}};return C.jsxs(C.Fragment,{children:[" ",C.jsxs(Jo,{isOpen:t,onClose:n,children:[C.jsx(No,{}),C.jsxs(Eo,{bgGradient:"linear(to-t, #37ecba 0%, #72afd3 100%)",borderRadius:"1em",children:[C.jsx(Ho,{textAlign:"center",children:"Event Details"}),C.jsx(Yo,{size:"md"}),C.jsx(ss,{children:C.jsx(Se,{borderWidth:"1px",borderRadius:"1em",overflow:"hidden",border:"1px",borderColor:"gray.500",children:i&&C.jsxs(Se,{p:"6",background:"",children:[i.img&&C.jsx(Se,{w:"100%",h:"200px",background:"white",alignSelf:"flex-end",borderRadius:"1em",objectFit:"contain",overflow:"hidden",mb:"3",children:C.jsx(oi,{h:"100%",w:"100%",src:i.img})}),C.jsxs(Se,{mt:"1",fontWeight:"semibold",as:"h4",children:["Event Name : ",i.event,C.jsx("br",{}),i.category==="ticket"?"User Name":"Posted By"," ",": ",i.name,C.jsx("br",{}),"Ticket Price : ",i.price,C.jsx("br",{}),"Start :"," ",new Date(i.start).toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"}),C.jsx("br",{}),"Time : ",i.time,C.jsx("br",{}),"Venue : ",i.venue," (",i.type,")",C.jsx("br",{})]})]})})}),C.jsx(is,{children:(i==null?void 0:i.category)&&i.category==="ticket"&&C.jsx(De,{colorScheme:"blue",alignSelf:"center",justifySelf:"center",size:"sm",mt:"1",ms:"auto",color:"white",onClick:()=>o(i),children:"Check In"})})]})]})]})};var jc={};(function(t){var e,n,i=Za&&Za.__awaiter||function(B,k,w,J){return new(w=w||Promise)(function(X,Y){function z(oe){try{$(J.next(oe))}catch(q){Y(q)}}function P(oe){try{$(J.throw(oe))}catch(q){Y(q)}}function $(oe){var q;oe.done?X(oe.value):((q=oe.value)instanceof w?q:new w(function(K){K(q)})).then(z,P)}$((J=J.apply(B,k||[])).next())})},r=Za&&Za.__rest||function(B,k){var w={};for(X in B)Object.prototype.hasOwnProperty.call(B,X)&&k.indexOf(X)<0&&(w[X]=B[X]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,X=Object.getOwnPropertySymbols(B);J<X.length;J++)k.indexOf(X[J])<0&&Object.prototype.propertyIsEnumerable.call(B,X[J])&&(w[X[J]]=B[X[J]]);return w};Object.defineProperty(t,"__esModule",{value:!0}),t.fromLatLng=t.fromPlaceId=t.fromAddress=t.geocode=t.enableAddressDescriptor=t.setOutputFormat=t.setLocationType=t.setResultType=t.setBounds=t.setComponents=t.setRegion=t.setLanguage=t.setKey=t.setDefaults=t.OutputFormat=t.RequestType=void 0,function(B){B.ADDRESS="address",B.LATLNG="latlng",B.PLACE_ID="place_id"}(e=t.RequestType||(t.RequestType={})),function(B){B.XML="xml",B.JSON="json"}(n=t.OutputFormat||(t.OutputFormat={}));const o="https://maps.googleapis.com/maps/api/geocode";let s={outputFormat:n.JSON};function a(B){return i(this,void 0,void 0,function*(){var w=B.outputFormat,k=r(B,["outputFormat"]),k=new URLSearchParams(k).toString(),w=o+`/${w}?`+k;try{var J=yield(yield fetch(w)).json(),{status:X,error_message:Y}=J;if(X==="OK")return J;throw new Error(`Geocoding failed: ${Y}. Server returned status code ${X}.`)}catch(z){throw z instanceof Error?new Error("Geocoding request failed: "+z.message):new Error("Geocoding request failed with unknown error: "+z)}})}function l(B){s=Object.assign(Object.assign({},s),B)}function g(B){s.key=B}function u(B){s.language=B}function d(B){s.region=B}function h(B){s.components=B}function f(B){s.bounds=B}function A(B){s.result_type=B}function p(B){s.location_type=B}function y(B){s.outputFormat=B}function v(B){s.enable_address_descriptor=B}function S(B,k,w){if(typeof B!="string"||typeof k!="string")throw new Error(`Both requestType and value are required and must be of type string. 
       requestType: ${typeof B}, value: `+typeof k);return a(Object.assign(Object.assign(Object.assign({},s),w),{[B]:k}))}function Z(B,k,w,J){var X={outputFormat:n.JSON};return k&&(X.key=k),w&&(X.language=w),J&&(X.region=J),S(e.ADDRESS,B,X)}function R(B,k,w,J){var X={outputFormat:n.JSON};return k&&(X.key=k),w&&(X.language=w),J&&(X.region=J),S(e.PLACE_ID,B,X)}function W(B,k,w,J,X,Y){var z={outputFormat:n.JSON};return w&&(z.key=w),J&&(z.language=J),X&&(z.region=X),Y&&(z.location_type=Y),S(e.LATLNG,B+","+k,z)}t.setDefaults=l,t.setKey=g,t.setLanguage=u,t.setRegion=d,t.setComponents=h,t.setBounds=f,t.setResultType=A,t.setLocationType=p,t.setOutputFormat=y,t.enableAddressDescriptor=v,t.geocode=S,t.fromAddress=Z,t.fromPlaceId=R,t.fromLatLng=W})(jc);jc.setDefaults({key:"AIzaSyCOuKI3MS9Rri0indbiBsWhZcgyoccGYQI",language:"en",region:"es"});const Uu=500,VA=100,y3e=[{value:"GMT-12",label:"Baker Island Time (BIKT)"},{value:"GMT-11",label:"Samoa Time (SST)"},{value:"GMT-10",label:"Hawaii-Aleutian Time (HST)"},{value:"GMT-9",label:"Alaska Time (AKST)"},{value:"GMT-8",label:"Pacific Time (PST)"},{value:"GMT-7",label:"Mountain Time (MST)"},{value:"GMT-6",label:"Central Time (CST)"},{value:"GMT-5",label:"Eastern Time (EST)"},{value:"GMT-4",label:"Atlantic Time (AST)"},{value:"GMT-3.5",label:"Newfoundland Time (NST)"},{value:"GMT-3",label:"West Africa Time (WAT)"},{value:"GMT-2",label:"Mid-Atlantic Time (MAT)"},{value:"GMT-1",label:"Western European Time (WET)"},{value:"GMT+1",label:"Central European Time (CET)"},{value:"GMT+2",label:"Eastern European Time (EET)"},{value:"GMT+3",label:"Moscow Time (MSK)"},{value:"GMT+4",label:"Astrakhan Time (Astrakhan Time)"},{value:"GMT+5",label:"Pakistan Time (PKT)"},{value:"GMT+5.5",label:"India Time (IST)"},{value:"GMT+6",label:"Bangladesh Time (BDT)"},{value:"GMT+7",label:"Krasnoyarsk Time (KRAT)"},{value:"GMT+8",label:"China Standard Time (CST)"},{value:"GMT+9",label:"Japan Standard Time (JST)"},{value:"GMT+12",label:"Kiribati Time (Kiritimati Time)"}],v3e=["Music","Technology","Business","Networking"],S3e=({date:t,createPostOpen:e,setCreatePostOpen:n})=>{const{isOpen:i,onOpen:r,onClose:o}=Go(),[s,a]=m.useState(""),{handleImageChange:l,imgUrl:g,setImgUrl:u}=Jv(),d=m.useRef(null),[h,f]=m.useState(Uu),[A,p]=m.useState(VA),y=Nn(an),v=ln(),[S,Z]=m.useState(!1),[R,W]=_i(Sg),{username:B}=Im(),[k,w]=m.useState(""),[J,X]=m.useState(""),[Y,z]=m.useState(""),[P,$]=m.useState(""),[oe,q]=m.useState(""),[K,_]=m.useState(""),[de,ne]=m.useState(""),[se,E]=m.useState(""),[M,T]=m.useState(),[U,H]=m.useState(),[ie,Ae]=m.useState(""),[Ie,xe]=m.useState(""),[Xe,Je]=m.useState(""),[Ne,et]=m.useState(""),[he,Be]=m.useState(!0),[Ge,Me]=m.useState(!1),[Oe,Ye]=m.useState(""),[Ct,j]=m.useState(""),[be,Ce]=m.useState(!1),[We,je]=m.useState(!0),[tt,ft]=m.useState(""),[ut,Yn]=m.useState(""),[gi,ci]=m.useState(""),[ui,di]=m.useState(""),te=m.useRef(),O=async()=>{const[pe]=await te.current.getPlaces();pe&&(E(pe.formatted_address),di(pe.formatted_address),T(pe.geometry.location.lat()),H(pe.geometry.location.lng()))};m.useEffect(()=>{e&&(r(),z(t))},[e]),m.useEffect(()=>{We&&xe(9999)},[We]),m.useEffect(()=>{M&&U&&jc.geocode(jc.RequestType.LATLNG,`${M},${U}`,{location_type:"ROOFTOP",enable_address_descriptor:!0}).then(({results:pe})=>{const{city:Ee,state:ze,country:ve}=pe[0].address_components.reduce((st,Ht)=>(Ht.types.includes("administrative_area_level_3")?st.city=Ht.long_name:Ht.types.includes("administrative_area_level_1")?st.state=Ht.long_name:Ht.types.includes("country")&&(st.country=Ht.long_name),st),{});ft(Ee),Yn(ze),ci(ve)}).catch(console.error)},[M,U]),m.useEffect(()=>{Oe||(Ye(new Date().toJSON().split("T")[0]),j(`${new Date().getHours()}:${new Date().getMinutes()}`))},[Oe]);function me(){o(),n&&n(!e)}const we=pe=>{const Ee=pe.target.value;if(Ee.length>Uu){const ze=Ee.slice(0,Uu);a(ze),f(0)}else a(Ee),f(Uu-Ee.length)},ke=pe=>{const Ee=pe.target.value;if(Ee.length>VA){const ze=Ee.slice(0,Uu);w(ze),p(0)}else w(Ee),p(VA-Ee.length)},He=async()=>{if((Xe==="Hybrid"||Xe==="Physical")&&!se){v("","Please provide a venue for the event.","error"),v();return}if((Xe==="Hybrid"||Xe==="Virtual")&&!Ne){v("","Please provide a meeting link for the event.","error");return}ui!==se&&v("","Please select a venue from Place suggestions","error"),Z(!0);try{const Ee=await(await fetch("/api/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postedBy:y._id,name:k,text:s,img:g,startDate:Y,startTime:P,endDate:oe,endTime:K,timeZone:de,venue:se,venueLatitude:M,venueLongitude:U,city:tt,state:ut,country:gi,meetingLink:Ne,ticketPrice:he?0:ie,capacity:Ie,eventType:J,ticketSalesStartDate:Oe,ticketSalesStartTime:Ct,isPrivate:Ge,requireApproval:be})})).json();if(Ee.error){v("Error",Ee.error,"error");return}v("Success","Event created successfully","success"),B===y.username&&W([Ee,...R]),w(""),a(""),u(""),z(""),$(""),q(""),_(""),ne(""),E(""),ft(""),Yn(""),ci(""),et(""),Ae(""),xe(""),Je(""),Ye(""),j(""),X(""),Be(!1),Me(!1),Ce(!1)}catch(pe){v("Error",pe,"error")}finally{Z(!1)}me()};return C.jsxs(C.Fragment,{children:[C.jsx(De,{position:"fixed",visibility:"hidden",bottom:10,right:5,bg:Ve("gray.300","gray.dark"),onClick:r,size:{base:"sm",sm:"md"},children:C.jsx(qV,{})}),C.jsxs(Jo,{isOpen:i,onClose:me,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{children:"Create Event"}),C.jsx(Yo,{}),C.jsxs(ss,{pb:6,children:[C.jsxs(mt,{children:[C.jsx(nt,{children:"Event Name"}),C.jsx(_e,{type:"text",value:k,onChange:ke}),C.jsxs(ue,{fontSize:"xs",fontWeight:"bold",textAlign:"right",m:"1",color:"gray.800",children:[A,"/",VA]}),C.jsx(nt,{children:"Event Category"}),C.jsxs(Ir,{value:J,onChange:pe=>X(pe.target.value),children:[C.jsx("option",{value:"",children:"Select Event Category"}),v3e.map(pe=>C.jsx("option",{value:pe,children:pe},pe))]}),C.jsx(nt,{children:"Description"}),C.jsx(_K,{placeholder:"Post content goes here..",onChange:we,value:s}),C.jsxs(ue,{fontSize:"xs",fontWeight:"bold",textAlign:"right",m:"1",color:"gray.800",children:[h,"/",Uu]}),C.jsx(nt,{children:"Image"}),C.jsx(_e,{type:"file",hidden:!0,ref:d,onChange:l}),C.jsx(HV,{style:{marginLeft:"5px",cursor:"pointer"},size:16,onClick:()=>d.current.click()}),C.jsx(nt,{children:"Start Time"}),C.jsx(_e,{type:"date",w:"60%",value:Y,min:new Date().toISOString().split("T")[0],onChange:pe=>z(pe.target.value)}),C.jsx(_e,{type:"time",w:"40%",value:P,onChange:pe=>$(pe.target.value)}),C.jsx(nt,{children:"End Date"}),C.jsx(_e,{type:"date",value:oe,min:Y,w:"60%",onChange:pe=>q(pe.target.value)}),C.jsx(_e,{type:"time",value:K,w:"40%",onChange:pe=>_(pe.target.value)}),C.jsx(nt,{children:"Time Zone"}),C.jsxs(Ir,{value:de,onChange:pe=>ne(pe.target.value),children:[C.jsx("option",{value:"",children:"Select Time Zone"}),y3e.map(pe=>C.jsx("option",{value:pe.value,children:pe.label},pe.value))]}),C.jsx(nt,{children:"Event Type"}),C.jsxs(Ir,{value:Xe,onChange:pe=>Je(pe.target.value),children:[C.jsx("option",{value:"",children:"Select Event Type"}),C.jsx("option",{value:"Physical",children:"Physical"}),C.jsx("option",{value:"Virtual",children:"Virtual"}),C.jsx("option",{value:"Hybrid",children:"Hybrid"})]}),["Physical","Hybrid"].includes(Xe)&&C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Location"}),C.jsx(Bv,{onLoad:pe=>te.current=pe,onPlacesChanged:O,children:C.jsx(_e,{type:"text",style:{width:"100%"},placeholder:"Venue",value:ui,onChange:pe=>di(pe.target.value)})})]}),["Virtual","Hybrid"].includes(Xe)&&C.jsxs(mt,{isRequired:!0,children:[C.jsx(nt,{children:"Meeting Link"}),C.jsx(_e,{type:"text",value:Ne,onChange:pe=>et(pe.target.value)})]}),C.jsxs(mt,{children:[C.jsx(nt,{children:"Ticket Price"}),C.jsxs(_d,{placement:"right",children:[C.jsx(Ld,{children:C.jsx(De,{size:"xs",bg:"rgba(218, 218, 218, 0.68)",_hover:{bg:"blue.600",color:"white"},children:"Free"})}),C.jsxs(Kd,{children:[C.jsx(kf,{}),C.jsx(VV,{fontSize:"xl",children:"Accept Payments"}),C.jsxs(Dd,{children:[C.jsxs(ue,{fontSize:"md",children:["We use ",C.jsx("span",{color:"red",children:"Stripe"})," to process payments. Connect or setup a Stripe account to start accepting payments.it usually takes less than 5 minutes"]}),C.jsx(De,{w:"full",mt:2,_hover:{bg:"blue.600",color:"white"},children:"Connect Stripe"})]})]})]})]}),C.jsx(nt,{children:"Capacity"}),C.jsx(Yd,{isChecked:We,onChange:pe=>je(pe.target.checked),children:"Unlimited"}),!We&&C.jsx(_e,{type:"number",value:Ie,onChange:pe=>xe(pe.target.value)}),C.jsx(nt,{children:"Do you want to make this Event Private?"}),C.jsx(Ka,{id:"private-settings",isChecked:Ge,onChange:()=>Me(!Ge)}),C.jsx(ue,{children:"Note: People with link will only be able to know / join this event."}),C.jsx(nt,{children:"Require Approval"}),C.jsx(Ka,{id:"private-settings",isChecked:be,onChange:()=>Ce(!be)})]}),C.jsx(nt,{children:"Ticket Sales Start Date"}),C.jsx(_e,{type:"date",value:Oe,w:"60%",onChange:pe=>Ye(pe.target.value)}),C.jsx(_e,{type:"time",value:Ct,w:"40%",onChange:pe=>j(pe.target.value)}),g&&C.jsxs(ae,{mt:5,w:"full",position:"relative",children:[C.jsx(oi,{src:g,alt:"Selected img"}),C.jsx(JI,{onClick:()=>{u("")},bg:"gray.800",position:"absolute",top:2,right:2})]})]}),C.jsx(is,{children:C.jsx(De,{colorScheme:"blue",mr:3,onClick:He,isLoading:S,children:"Post"})})]})]})]})},Z3e=()=>{var v,S,Z,R,W,B,k;const t=Nn(an),[e,n]=m.useState([]),[i,r]=m.useState(),[o,s]=m.useState(),a=[],[l,g]=m.useState([]),[u,d]=m.useState(!1),{isOpen:h,onOpen:f,onClose:A}=Go();if(m.useEffect(()=>{t&&(async()=>{try{const J=await fn.get(`/api/tickets/gettickets/${t._id}`);n(J.data)}catch(J){console.error("Error fetching tickets:",J)}})()},[t]),m.useEffect(()=>{(async()=>{try{const X=await(await fetch(`/api/posts/user/${t.username}`)).json();console.log(X),g(X)}catch{g([])}})()},[t]),e)for(const w of e){const J=(S=(v=w==null?void 0:w.ticketDetails)==null?void 0:v.eventdate)==null?void 0:S.split("T")[0],X=(R=(Z=w==null?void 0:w.eventid)==null?void 0:Z.endDate)==null?void 0:R.split("T")[0],Y={title:(W=w==null?void 0:w.ticketDetails)==null?void 0:W.eventname,start:new Date(`${J} ${(B=w==null?void 0:w.ticketDetails)==null?void 0:B.eventtime}:00.000+00:00`),end:new Date(`${X} ${(k=w==null?void 0:w.eventid)==null?void 0:k.endTime}:00.000+00:00`),id:w._id,category:"ticket"};a.push(Y)}!l.error&&(l==null||l.map(w=>{var z,P;const J=(z=w==null?void 0:w.startDate)==null?void 0:z.split("T")[0],X=(P=w==null?void 0:w.endDate)==null?void 0:P.split("T")[0],Y={title:w==null?void 0:w.name,start:new Date(`${J} ${w==null?void 0:w.startTime}:00.000+00:00`),end:new Date(`${X} ${w==null?void 0:w.endTime}:00.000+00:00`),id:w._id,category:"post",color:"green"};a.push(Y)}));function p(w){var X;let J=(X=w.event._def)==null?void 0:X.extendedProps.category;if(J==="ticket"){let Y=e.find(P=>P._id===w.event._def.publicId),z={id:Y._id,eventId:Y.eventid._id,event:Y.ticketDetails.eventname,name:Y.ticketDetails.name,price:Y.ticketDetails.ticketprice,start:Y.ticketDetails.eventdate,time:Y.ticketDetails.eventtime,venue:Y.eventid.venue,type:Y.eventid.eventType,img:Y.eventid.img,category:"ticket"};r(z)}if(J==="post"){let Y=l.find(P=>P._id===w.event._def.publicId),z={event:Y.name,name:t.name,price:Y.ticketPrice,start:Y.startDate,time:Y.startTime,venue:Y.venue,type:Y.eventType,img:Y.img,category:"post"};r(z)}f()}function y(w){t.soloOrganizer===!0?(s(w.dateStr),d(!0)):console.log("Not allowed to edit")}return C.jsxs(Se,{w:"80%",m:"auto",children:[a&&C.jsx(sQ,{plugins:[A3e,d_e,$Le,Q_e],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",selectable:!0,events:a,eventClick:p,dateClick:y}),C.jsx(b3e,{selectedEvent:i,isEventDetailsOpen:h,onEventDetailsOpen:f,onEventDetailsClose:A}),t.soloOrganizer===!0&&C.jsx(S3e,{date:o,createPostOpen:u,setCreatePostOpen:d})]})};function x9(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM7 11V13H9V11H7ZM7 14V16H9V14H7ZM7 17V19H9V17H7Z"},child:[]}]})(t)}function G3e(t){return ct({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11 4h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6h-4v-4h4v4zM17 3c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM7 13c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(t)}function B3e(t){return ct({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M172,68a44,44,0,1,0-44,44A44.05,44.05,0,0,0,172,68ZM128,96a28,28,0,1,1,28-28A28,28,0,0,1,128,96Zm80,128a8,8,0,0,1-8,8H56a8,8,0,0,1-5.29-14l98.07-86.54a64,64,0,0,0-84,50.33A8,8,0,0,1,49,179.25a80,80,0,0,1,113.16-59.59L186.71,98a8,8,0,0,1,10.58,12L77.16,216H200A8,8,0,0,1,208,224Zm-14.27-77.62A79.6,79.6,0,0,1,208,192a8,8,0,0,1-16,0,63.67,63.67,0,0,0-11.41-36.49,8,8,0,0,1,13.14-9.13Z"},child:[]}]})(t)}jc.setDefaults({key:"AIzaSyCOuKI3MS9Rri0indbiBsWhZcgyoccGYQI",language:"en",region:"es"});const PC=500,R3e=[{value:"GMT-12",label:"Baker Island Time (BIKT)"},{value:"GMT-11",label:"Samoa Time (SST)"},{value:"GMT-10",label:"Hawaii-Aleutian Time (HST)"},{value:"GMT-9",label:"Alaska Time (AKST)"},{value:"GMT-8",label:"Pacific Time (PST)"},{value:"GMT-7",label:"Mountain Time (MST)"},{value:"GMT-6",label:"Central Time (CST)"},{value:"GMT-5",label:"Eastern Time (EST)"},{value:"GMT-4",label:"Atlantic Time (AST)"},{value:"GMT-3.5",label:"Newfoundland Time (NST)"},{value:"GMT-3",label:"West Africa Time (WAT)"},{value:"GMT-2",label:"Mid-Atlantic Time (MAT)"},{value:"GMT-1",label:"Western European Time (WET)"},{value:"GMT+1",label:"Central European Time (CET)"},{value:"GMT+2",label:"Eastern European Time (EET)"},{value:"GMT+3",label:"Moscow Time (MSK)"},{value:"GMT+4",label:"Astrakhan Time (Astrakhan Time)"},{value:"GMT+5",label:"Pakistan Time (PKT)"},{value:"GMT+5.5",label:"India Time (IST)"},{value:"GMT+6",label:"Bangladesh Time (BDT)"},{value:"GMT+7",label:"Krasnoyarsk Time (KRAT)"},{value:"GMT+8",label:"China Standard Time (CST)"},{value:"GMT+9",label:"Japan Standard Time (JST)"},{value:"GMT+12",label:"Kiribati Time (Kiritimati Time)"}],k3e=["Music","Technology","Business","Networking"],V3e=()=>{const t=Qr();Go();const[e,n]=m.useState(""),{handleImageChange:i,imgUrl:r,setImgUrl:o}=Jv(),s=m.useRef(null),[a,l]=m.useState(PC),g=Nn(an),u=ln(),[d,h]=m.useState(!1),[f,A]=_i(Sg),{username:p}=Im(),[y,v]=m.useState(""),[S,Z]=m.useState(""),[R,W]=m.useState(""),[B,k]=m.useState(""),[w,J]=m.useState(""),[X,Y]=m.useState(""),[z,P]=m.useState(""),[$,oe]=m.useState(""),[q,K]=m.useState(),[_,de]=m.useState(),[ne,se]=m.useState(""),[E,M]=m.useState(""),[T,U]=m.useState(""),[H,ie]=m.useState(""),[Ae,Ie]=m.useState(!0),[xe,Xe]=m.useState(!1),[Je,Ne]=m.useState(""),[et,he]=m.useState(""),[Be,Ge]=m.useState(!1),[Me,Oe]=m.useState(!0),[Ye,Ct]=m.useState(""),[j,be]=m.useState(""),[Ce,We]=m.useState(""),je=m.useRef(),[tt,ft]=m.useState(!1),[ut,Yn]=m.useState(""),[gi,ci]=m.useState(!1),{isOpen:ui,onOpen:di,onClose:te}=Go(),{isOpen:O,onOpen:me,onClose:we}=Go();m.useEffect(()=>{Me&&M(9999)},[Me]),m.useEffect(()=>{jc.geocode(jc.RequestType.LATLNG,`${q},${_}`,{location_type:"ROOFTOP",enable_address_descriptor:!0}).then(({results:ve})=>{ve[0].formatted_address;const{city:st,state:Ht,country:tn}=ve[0].address_components.reduce((cn,nn)=>(nn.types.includes("administrative_area_level_3")?cn.city=nn.long_name:nn.types.includes("administrative_area_level_1")?cn.state=nn.long_name:nn.types.includes("country")&&(cn.country=nn.long_name),cn),{});Ct(st),be(Ht),We(tn)}).catch(console.error)},[q,_]),m.useEffect(()=>{Je||(Ne(new Date().toJSON().split("T")[0]),he(`${new Date().getHours()}:${new Date().getMinutes()}`))},[Je]);const ke=async()=>{const[ve]=await je.current.getPlaces();ve&&(oe(ve.formatted_address),Yn(ve.formatted_address),K(ve.geometry.location.lat()),de(ve.geometry.location.lng()))},He=ve=>{const st=ve.target.value;if(st.length>PC){const Ht=st.slice(0,PC);n(Ht),l(0)}else n(st),l(PC-st.length)},pe=()=>{ci(!1)},Ee=async()=>{if((T==="Hybrid"||T==="Physical")&&!$){u("Error","Please provide a venue for the event.","error"),u();return}if((T==="Hybrid"||T==="Virtual")&&!H){u("Error","Please provide a meeting link for the event.","error");return}ut!==$&&u("","Please select a venue from Place suggestions","error"),h(!0);try{const st=await(await fetch("/api/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postedBy:g._id,name:y,text:e,img:r,startDate:S,startTime:R,endDate:B,endTime:w,timeZone:X,venue:$,venueLatitude:q,venueLongitude:_,city:Ye,state:j,country:Ce,meetingLink:H,ticketPrice:Ae?0:ne,capacity:E,eventType:z,ticketSalesStartDate:Je,ticketSalesStartTime:et,isPrivate:xe,requireApproval:Be})})).json();if(st.error){u("Error",st.error,"error");return}u("Success","Event created successfully","success"),p===g.username&&A([st,...f]),v(""),n(""),o(""),Z(""),W(""),k(""),J(""),Y(""),oe(""),Ct(""),be(""),We(""),K(),de(),ie(""),se(""),M(""),U(""),Ne(""),he(""),Ie(!1),Xe(!1),Ge(!1),t("/")}catch(ve){u("Error",ve,"error")}finally{h(!1)}},ze=ve=>{Xe(ve),ft(!1)};return C.jsx(C.Fragment,{children:C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"1fr 2fr"},maxW:{base:"95%",lg:"55%"},margin:"auto",alignItems:"start",children:[C.jsx(ae,{w:"100%",direction:"column",p:3,children:C.jsxs(Se,{borderRadius:15,overflow:"hidden",w:{base:"full",md:300},h:310,alignItems:"center",position:"relative",justifyContent:"center",margin:"auto",onClick:()=>s.current.click(),children:[C.jsx(_e,{type:"file",position:"absolute",hidden:!0,height:"full",top:0,left:0,right:0,bottom:0,ref:s,onChange:i}),C.jsx(qJe,{style:{marginLeft:"5px",cursor:"pointer",position:"absolute",bottom:2,right:5,borderRadius:"50%"},size:50}),C.jsx(oi,{src:r||"https://images.pexels.com/photos/17151646/pexels-photo-17151646/free-photo-of-one-transparent-compact-audio-cassette-with-visible-tape-and-red-inner-reels-isolated-on-blue-background-top-down-view-flat-lay-with-empty-space-for-text.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",w:"full",h:"full"})]})}),C.jsxs(ae,{w:"100%",p:3,direction:"column",children:[C.jsx(ae,{alignItems:"end",justifyContent:"end",children:C.jsxs(_d,{isOpen:tt,children:[C.jsx(Ld,{children:C.jsx(De,{size:"xs",gap:2,bg:"rgba(218, 218, 218, 0.77)",_hover:{bg:"blue.600",color:"white"},onClick:()=>ft(!0),children:xe?C.jsxs(C.Fragment,{children:[C.jsx(x9,{}),"Private"]}):C.jsxs(C.Fragment,{children:[C.jsx(mH,{}),"Public"]})})}),C.jsxs(Kd,{boxShadow:"md",w:"2xs",children:[C.jsx(kf,{}),C.jsxs(Dd,{p:.5,children:[C.jsxs(ae,{flexDirection:"row",alignItems:"center",p:1,gap:2,borderRadius:"lg",_hover:{bg:"gray.100"},onClick:()=>{ze(!1)},children:[C.jsx(mH,{}),"Public"]}),C.jsxs(ae,{flexDirection:"row",alignItems:"center",p:1,borderRadius:"lg",gap:2,_hover:{bg:"gray.100"},onClick:()=>{ze(!0)},children:[C.jsx(x9,{}),"Private"]})]})]})]})}),C.jsx(_e,{size:"lg",p:3,variant:"unstyled",fontSize:"5xl",letterSpacing:1,fontWeight:"500",placeholder:"Event Name",value:y,onChange:ve=>v(ve.target.value)}),C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"3fr 1fr"},gap:2,children:[C.jsxs(ae,{bg:"gray.200",borderRadius:"md",gap:2,p:1,children:[C.jsxs(ae,{alignItems:"center",justifyContent:"space-around",flexDir:"column",position:"relative",ms:4,children:[C.jsx(Se,{width:"10px",height:"10px",bg:"gray.400",borderRadius:"50%"}),C.jsx(Se,{width:"0.25px",height:"25px",bg:"transparent",borderStyle:"dashed",borderWidth:"1px",borderColor:"gray.400",position:"absolute"}),C.jsx(Se,{width:"10px",height:"10px",bg:"gray.100",borderWidth:"1px",borderColor:"gray.500",borderRadius:"50%"})]}),C.jsxs(ae,{justifyContent:"space-evenly",flexDir:"column",color:"gray.500",children:[C.jsx(ue,{fontSize:"xl",letterSpacing:.75,fontWeight:400,children:"Start"}),C.jsx(ue,{fontSize:"xl",letterSpacing:.75,fontWeight:400,children:"End"})]}),C.jsx(Se,{borderRadius:"md",ms:"auto",children:C.jsxs(sm,{spacing:0,align:"start",children:[C.jsx(ae,{align:"center",children:C.jsxs(ae,{ml:"auto",children:[C.jsx(_e,{type:"date",value:S,min:new Date().toISOString().split("T")[0],onChange:ve=>Z(ve.target.value),size:"md"}),C.jsx(_e,{type:"time",value:R,onChange:ve=>W(ve.target.value),size:"sm",ml:2})]})}),C.jsx(ae,{align:"center",children:C.jsxs(ae,{ml:"auto",children:[C.jsx(_e,{type:"date",value:B,min:S,onChange:ve=>k(ve.target.value),size:"md"}),C.jsx(_e,{type:"time",value:w,onChange:ve=>J(ve.target.value),size:"sm",ml:2})]})})]})})]}),C.jsx(ae,{bg:"gray.200",borderRadius:"md",flexDirection:"column",justifyContent:"center",children:C.jsxs(Ir,{bg:"gray.200",borderRadius:"md",value:X,variant:"flushed",size:"lg",height:50,fontSize:"lg",p:2,borderColor:"transparent",icon:"none",onChange:ve=>Y(ve.target.value),children:[C.jsx("option",{value:"",children:"GMT"}),R3e.map(ve=>C.jsx("option",{value:ve.value,children:ve.label},ve.value))]})})]}),C.jsxs(_d,{style:{minWidth:"100%"},isOpen:gi,children:[C.jsx(Ld,{children:C.jsxs(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"column",p:3,gap:2,w:"full",onClick:()=>ci(!0),children:[C.jsxs(ae,{flexDir:"row",alignItems:"center",gap:2,children:[C.jsx(PP,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.600",children:"Add Event Type and Location"})]}),C.jsx(ae,{ps:6,children:$?C.jsx(ue,{children:$}):C.jsx(ue,{children:"Offline location or virtual link"})})]})}),C.jsx(Kd,{boxShadow:"md",style:{minWidth:"100"},children:C.jsxs(Dd,{style:{minWidth:"100%"},children:[C.jsxs(Ir,{placeholder:"Event Type",value:T,size:"lg",onChange:ve=>U(ve.target.value),variant:"flushed",style:{minWidth:"100%"},children:[C.jsx("option",{value:"Physical",children:"Physical"}),C.jsx("option",{value:"Virtual",children:"Virtual"}),C.jsx("option",{value:"Hybrid",children:"Hybrid"})]}),["Physical","Hybrid"].includes(T)&&C.jsx(Bv,{onLoad:ve=>je.current=ve,onPlacesChanged:ke,children:C.jsx(_e,{type:"text",style:{width:"100%"},placeholder:"Venue",onChange:ve=>Yn(ve.target.value)})}),["Virtual","Hybrid"].includes(T)&&C.jsxs(C.Fragment,{children:[C.jsx(De,{_hover:{bg:"gray.100"},bg:"none",style:{width:"100%"},children:"Create Zoom Meeting"}),C.jsx(De,{_hover:{bg:"gray.100"},bg:"none",style:{width:"100%"},children:"Select Existing Zoom Link"})]}),C.jsx(De,{colorScheme:"blue",style:{minWidth:"100%"},onClick:pe,children:"Save"})]})})]}),C.jsx(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"column",p:3,gap:2,w:"full",children:C.jsxs(ae,{flexDir:"row",alignItems:"center",justifyContent:"space-between",children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(G3e,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.600",children:"Event Category"})]}),C.jsxs(Ir,{maxW:"25%",value:z,onChange:ve=>P(ve.target.value),children:[C.jsx("option",{value:"",children:"Select Event Category"}),k3e.map(ve=>C.jsx("option",{value:ve,children:ve},ve))]})]})}),C.jsxs(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"column",p:3,gap:2,w:"full",onClick:di,children:[C.jsxs(ae,{flexDir:"row",alignItems:"center",gap:2,children:[C.jsx(GRe,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.600",children:"Description"})]}),C.jsx(ae,{ps:6,children:C.jsx(ue,{children:e||""})})]}),C.jsxs(Jo,{isOpen:ui,onClose:te,motionPreset:!0,isCentered:!0,children:[C.jsx(No,{}),C.jsxs(Eo,{borderRadius:"15px",overflow:"hidden",children:[C.jsx(Ho,{bg:"gray.100",children:"Event Description"}),C.jsx(Yo,{}),C.jsx(_e,{minH:"200",onChange:He,value:e}),C.jsxs(ue,{fontSize:"xs",fontWeight:"bold",textAlign:"right",m:"1",color:"gray.800",children:[a,"/",PC]}),C.jsx(is,{children:C.jsx(De,{colorScheme:"blue",mr:3,onClick:te,children:"Save"})})]})]}),C.jsx(ue,{fontSize:"lg",mt:3,fontWeight:500,color:"gray.600",children:"Event Options"}),C.jsxs(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"row",p:2,gap:2,w:"full",justifyContent:"space-between",children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(vXe,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:400,color:"gray.600",children:"Tickets"})]}),C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.400",children:"Free"}),C.jsxs(_d,{children:[C.jsx(Ld,{children:C.jsx(De,{size:"sm",children:C.jsx(fH,{size:20})})}),C.jsxs(Kd,{isCentered:!0,children:[C.jsx(kf,{}),C.jsx(VV,{fontSize:"xl",children:"Accept Payments"}),C.jsxs(Dd,{children:[C.jsxs(ue,{fontSize:"md",children:["We use ",C.jsx("span",{color:"red",children:"Stripe"})," to process payments. Connect or setup a Stripe account to start accepting payments.it usually takes less than 5 minutes"]}),C.jsx(De,{w:"full",mt:2,_hover:{bg:"blue.600",color:"white"},children:"Connect Stripe"})]})]})]})]})]}),C.jsxs(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"row",p:2,gap:2,w:"full",justifyContent:"space-between",alignItems:"center",children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(XRe,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:400,color:"gray.600",children:"Require Approval"})]}),C.jsx(Ka,{id:"private-settings",isChecked:Be,onChange:()=>Ge(!Be)})]}),C.jsxs(ae,{bg:"gray.200",borderRadius:"md",mt:2,flexDir:"row",p:2,gap:2,w:"full",justifyContent:"space-between",alignItems:"center",children:[C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(B3e,{size:20}),C.jsx(ue,{fontSize:"lg",fontWeight:400,color:"gray.600",children:"Capacity"})]}),C.jsxs(ae,{alignItems:"center",gap:2,children:[C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.400",children:Me?"Unlimited":E}),C.jsxs(De,{size:"sm",onClick:me,children:[" ",C.jsx(fH,{size:20})]}),C.jsxs(Jo,{isOpen:O,onClose:we,isCentered:!0,children:[C.jsx(No,{}),C.jsxs(Eo,{children:[C.jsx(Ho,{children:"Max Capacity"}),C.jsx(Yo,{}),C.jsxs(ss,{children:["Auto-close registration when the capacity is reached."," ",C.jsx(ue,{fontSize:"lg",fontWeight:500,color:"gray.600",children:"Capacity"}),C.jsxs(ae,{gap:2,alignItems:"center",children:[C.jsx(Ka,{id:"private-settings",isChecked:Me,onChange:()=>Oe(!Me)}),C.jsx(ue,{children:"Unlimited"})]}),!Me&&C.jsx(_e,{type:"number",mt:2,value:E,onChange:ve=>M(ve.target.value)})]}),C.jsx(is,{children:C.jsx(De,{colorScheme:"purple",mr:3,size:"sm",onClick:we,children:"Close"})})]})]})]})]}),C.jsx(De,{colorScheme:"purple",mt:3,p:2,size:"lg",onClick:Ee,isLoading:d,children:"Create Event"})]})]})})},w3e=({user:t})=>{const[e,n]=m.useState(""),[i,r]=m.useState([]),[o,s]=m.useState(!1),[a,l]=m.useState([]),g=Qr(),u=async f=>{const A=f.target.value;if(n(A),A.trim()===""){l([]);return}try{const y=(await fn.get(`/api/posts/search/${A}`)).data.slice(0,5);l(y)}catch(p){console.error("Error fetching search suggestions:",p),l([])}},d=async f=>{console.log("Clicked suggestion:",f);try{const A=await fn.get(`/api/posts/${f._id}`);console.log("Post details:",A.data),g(`/${f.postedBy.username}/post/${f._id}`)}catch(A){console.error("Error fetching post details:",A)}},h=async f=>{f.preventDefault();try{s(!0);const A=await fn.get(`/api/posts/search/${e}`);r(A.data),s(!1)}catch(A){console.error("Error fetching search results:",A),s(!1)}};return C.jsxs(Se,{children:[C.jsx("form",{onSubmit:h,children:C.jsxs(ae,{children:[C.jsx(_e,{type:"text",placeholder:"Search for posts...",value:e,onChange:u,variant:"filled",mr:2}),C.jsx(De,{type:"submit",colorScheme:"teal",isLoading:o,loadingText:"Searching",children:"Search"})]})}),C.jsx(Se,{mt:4,children:a.length>0&&C.jsx(_a,{spacing:1,bg:"white",boxShadow:"md",p:2,children:a.map(f=>C.jsxs(Yc,{cursor:"pointer",onClick:()=>d(f),_hover:{bg:"gray.100"},children:[C.jsx(OR,{as:nH,color:"green.500"}),f.name]},f._id))})}),C.jsx(Se,{mt:4,children:o?C.jsx(nr,{size:"xl"}):i.length>0?C.jsx(_a,{spacing:3,children:i.map(f=>C.jsxs(Yc,{children:[C.jsx(OR,{as:nH,color:"green.500"}),f.name]},f._id))}):e&&C.jsx(ue,{children:"No results found"})})]})};var ZQ={},lS={},Gr={},bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.areaConversion=bt.timeConversion=bt.distanceConversion=bt.altitudeKeys=bt.latitudeKeys=bt.longitudeKeys=bt.MAXLON=bt.MINLON=bt.MAXLAT=bt.MINLAT=bt.earthRadius=bt.sexagesimalPattern=void 0;var W3e=/^([0-9]{1,3})\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)[']\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["]\s*)?([NEOSW]?)$/;bt.sexagesimalPattern=W3e;var x3e=6378137;bt.earthRadius=x3e;var X3e=-90;bt.MINLAT=X3e;var J3e=90;bt.MAXLAT=J3e;var E3e=-180;bt.MINLON=E3e;var H3e=180;bt.MAXLON=H3e;var N3e=["lng","lon","longitude",0];bt.longitudeKeys=N3e;var Y3e=["lat","latitude",1];bt.latitudeKeys=Y3e;var F3e=["alt","altitude","elevation","elev",2];bt.altitudeKeys=F3e;var M3e={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};bt.distanceConversion=M3e;var T3e={m:60,h:3600,d:86400};bt.timeConversion=T3e;var rs={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};bt.areaConversion=rs;rs.sqm=rs.m2;rs.sqkm=rs.km2;rs.sqft=rs.ft2;rs.sqyd=rs.yd2;rs.sqin=rs.in2;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.default=void 0;var L3e=function(e,n){return n.reduce(function(i,r){if(typeof e>"u"||e===null)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,r)&&typeof r<"u"&&typeof i>"u"?(i=r,r):i},void 0)},_3e=L3e;fu.default=_3e;var zI={},mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.default=void 0;var D3e=function(e){var n=e.toString().trim();return isNaN(parseFloat(n))?!1:parseFloat(n)===Number(n)},K3e=D3e;mu.default=K3e;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.default=void 0;var z3e=bt,P3e=function(e){return z3e.sexagesimalPattern.test(e.toString().trim())},U3e=P3e;pu.default=U3e;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.default=void 0;var j3e=bt,O3e=function(e){var n=new RegExp(j3e.sexagesimalPattern).exec(e.toString().trim());if(typeof n>"u"||n===null)throw new Error("Given value is not in sexagesimal format");var i=Number(n[2])/60||0,r=Number(n[4])/3600||0,o=parseFloat(n[1])+i+r;return["S","W"].includes(n[7])?-o:o},Q3e=O3e;Au.default=Q3e;var Fm={},PI={};Object.defineProperty(PI,"__esModule",{value:!0});PI.default=void 0;var uB=bt,dB=$3e(fu);function $3e(t){return t&&t.__esModule?t:{default:t}}function X9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function q3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(n),!0).forEach(function(i){eDe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eDe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tDe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:uB.longitudeKeys,latitude:uB.latitudeKeys,altitude:uB.altitudeKeys},i=(0,dB.default)(e,n.longitude),r=(0,dB.default)(e,n.latitude),o=(0,dB.default)(e,n.altitude);return q3e({latitude:r,longitude:i},o?{altitude:o}:{})},nDe=tDe;PI.default=nDe;var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=void 0;var iDe=JW(mu),rDe=JW(pu),oDe=JW(Au),J9=bt;function JW(t){return t&&t.__esModule?t:{default:t}}var sDe=function t(e){return(0,iDe.default)(e)?!(parseFloat(e)>J9.MAXLAT||e<J9.MINLAT):(0,rDe.default)(e)?t((0,oDe.default)(e)):!1},aDe=sDe;Mm.default=aDe;var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.default=void 0;var lDe=EW(mu),gDe=EW(pu),cDe=EW(Au),E9=bt;function EW(t){return t&&t.__esModule?t:{default:t}}var uDe=function t(e){return(0,lDe.default)(e)?!(parseFloat(e)>E9.MAXLON||e<E9.MINLON):(0,gDe.default)(e)?t((0,cDe.default)(e)):!1},dDe=uDe;Tm.default=dDe;Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=void 0;var IDe=HW(PI),H9=HW(Mm),N9=HW(Tm);function HW(t){return t&&t.__esModule?t:{default:t}}var CDe=function(e){var n=(0,IDe.default)(e),i=n.latitude,r=n.longitude;if(Array.isArray(e)&&e.length>=2)return(0,N9.default)(e[0])&&(0,H9.default)(e[1]);if(typeof i>"u"||typeof r>"u")return!1;var o=e[r],s=e[i];return!(typeof s>"u"||typeof o>"u"||(0,H9.default)(s)===!1||(0,N9.default)(o)===!1)},hDe=CDe;Fm.default=hDe;Object.defineProperty(zI,"__esModule",{value:!0});zI.default=void 0;var fDe=Lm(mu),mDe=Lm(pu),pDe=Lm(Au),Y9=Lm(Fm),ADe=Lm(PI);function Lm(t){return t&&t.__esModule?t:{default:t}}function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function IB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(i){p2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function p2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bDe=function t(e){if((0,fDe.default)(e))return Number(e);if((0,mDe.default)(e))return(0,pDe.default)(e);if((0,Y9.default)(e)){var n=(0,ADe.default)(e);return Array.isArray(e)?e.map(function(i,r){return[0,1].includes(r)?t(i):i}):IB(IB(IB({},e),n.latitude&&p2({},n.latitude,t(e[n.latitude]))),n.longitude&&p2({},n.longitude,t(e[n.longitude])))}return Array.isArray(e)?e.map(function(i){return(0,Y9.default)(i)?t(i):i}):e},yDe=bDe;zI.default=yDe;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=void 0;var vDe=bt,SDe=GQ(fu),ZDe=GQ(zI);function GQ(t){return t&&t.__esModule?t:{default:t}}var GDe=function(e,n){var i=(0,SDe.default)(e,vDe.latitudeKeys);if(!(typeof i>"u"||i===null)){var r=e[i];return n===!0?r:(0,ZDe.default)(r)}},BDe=GDe;Gr.default=BDe;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.default=void 0;var RDe=bt,kDe=BQ(fu),VDe=BQ(zI);function BQ(t){return t&&t.__esModule?t:{default:t}}var wDe=function(e,n){var i=(0,kDe.default)(e,RDe.longitudeKeys);if(!(typeof i>"u"||i===null)){var r=e[i];return n===!0?r:(0,VDe.default)(r)}},WDe=wDe;Br.default=WDe;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var xDe=function(e){return e*Math.PI/180},XDe=xDe;Fo.default=XDe;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.default=void 0;var JDe=function(e){return e*180/Math.PI},EDe=JDe;el.default=EDe;Object.defineProperty(lS,"__esModule",{value:!0});lS.default=void 0;var HDe=gS(Gr),NDe=gS(Br),CB=gS(Fo),hB=gS(el),M9=bt;function gS(t){return t&&t.__esModule?t:{default:t}}var YDe=function(e,n,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,o=(0,HDe.default)(e),s=(0,NDe.default)(e),a=n/r,l=(0,CB.default)(i),g=(0,CB.default)(o),u=(0,CB.default)(s),d=Math.asin(Math.sin(g)*Math.cos(a)+Math.cos(g)*Math.sin(a)*Math.cos(l)),h=u+Math.atan2(Math.sin(l)*Math.sin(a)*Math.cos(g),Math.cos(a)-Math.sin(g)*Math.sin(d)),f=(0,hB.default)(h);return(f<M9.MINLON||f>M9.MAXLON)&&(h=(h+3*Math.PI)%(2*Math.PI)-Math.PI,f=(0,hB.default)(h)),{latitude:(0,hB.default)(d),longitude:f}},FDe=YDe;lS.default=FDe;var cS={};Object.defineProperty(cS,"__esModule",{value:!0});cS.default=void 0;var MDe=bt,TDe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",i=MDe.areaConversion[n];if(i)return e*i;throw new Error("Invalid unit used for area conversion.")},LDe=TDe;cS.default=LDe;var uS={};Object.defineProperty(uS,"__esModule",{value:!0});uS.default=void 0;var _De=bt,DDe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",i=_De.distanceConversion[n];if(i)return e*i;throw new Error("Invalid unit used for distance conversion.")},KDe=DDe;uS.default=KDe;var dS={};Object.defineProperty(dS,"__esModule",{value:!0});dS.default=void 0;var wA=bt,zDe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(n){case"kmh":return e*wA.timeConversion.h*wA.distanceConversion.km;case"mph":return e*wA.timeConversion.h*wA.distanceConversion.mi;default:return e}},PDe=zDe;dS.default=PDe;var IS={};Object.defineProperty(IS,"__esModule",{value:!0});IS.default=void 0;function T9(t,e){return QDe(t)||ODe(t,e)||jDe(t,e)||UDe()}function UDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jDe(t,e){if(t){if(typeof t=="string")return L9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L9(t,e)}}function L9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ODe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,r=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(i=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s.return!=null&&s.return()}finally{if(r)throw o}}return n}}function QDe(t){if(Array.isArray(t))return t}var $De=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,i=Math.pow(10,n);return Math.round(e*i)/i},qDe=function(e){var n=e.toString().split("."),i=T9(n,2),r=i[0],o=i[1],s=Math.abs(Number(r)),a=+("0."+(o||0))*60,l=a.toString().split("."),g=Math.floor(a),u=$De(+("0."+(l[1]||0))*60).toString(),d=u.split("."),h=T9(d,2),f=h[0],A=h[1],p=A===void 0?"0":A;return s+" "+g.toString().padStart(2,"0")+"' "+f.padStart(2,"0")+"."+p.padEnd(1,"0")+'"'},eKe=qDe;IS.default=eKe;var CS={},_m={},$s={},Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=void 0;var tKe=function(e){return e>1?1:e<-1?-1:e},nKe=tKe;Dm.default=nKe;Object.defineProperty($s,"__esModule",{value:!0});$s.default=void 0;var _9=hS(Gr),D9=hS(Br),ju=hS(Fo),iKe=hS(Dm),rKe=bt;function hS(t){return t&&t.__esModule?t:{default:t}}var oKe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;i=typeof i<"u"&&!isNaN(i)?i:1;var r=(0,_9.default)(e),o=(0,D9.default)(e),s=(0,_9.default)(n),a=(0,D9.default)(n),l=Math.acos((0,iKe.default)(Math.sin((0,ju.default)(s))*Math.sin((0,ju.default)(r))+Math.cos((0,ju.default)(s))*Math.cos((0,ju.default)(r))*Math.cos((0,ju.default)(o)-(0,ju.default)(a))))*rKe.earthRadius;return Math.round(l/i)*i},sKe=oKe;$s.default=sKe;Object.defineProperty(_m,"__esModule",{value:!0});_m.default=void 0;var K9=aKe($s);function aKe(t){return t&&t.__esModule?t:{default:t}}var lKe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K9.default;return i=typeof i=="function"?i:K9.default,n.slice().sort(function(r,o){return i(e,r)-i(e,o)})},gKe=lKe;_m.default=gKe;Object.defineProperty(CS,"__esModule",{value:!0});CS.default=void 0;var cKe=uKe(_m);function uKe(t){return t&&t.__esModule?t:{default:t}}var dKe=function(e,n){return(0,cKe.default)(e,n)[0]},IKe=dKe;CS.default=IKe;var fS={};Object.defineProperty(fS,"__esModule",{value:!0});fS.default=void 0;var fB=NW(Fo),CKe=NW(Gr),z9=NW(Br),P9=bt;function NW(t){return t&&t.__esModule?t:{default:t}}var hKe=function(e){var n=0;if(e.length>2){for(var i,r,o,s=0;s<e.length;s++){s===e.length-2?(i=e.length-2,r=e.length-1,o=0):s===e.length-1?(i=e.length-1,r=0,o=1):(i=s,r=s+1,o=s+2);var a=(0,z9.default)(e[i]),l=(0,CKe.default)(e[r]),g=(0,z9.default)(e[o]);n+=((0,fB.default)(g)-(0,fB.default)(a))*Math.sin((0,fB.default)(l))}n=n*P9.earthRadius*P9.earthRadius/2}return Math.abs(n)},fKe=hKe;fS.default=fKe;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});Km.default=void 0;var mKe=RQ(Gr),pKe=RQ(Br);function RQ(t){return t&&t.__esModule?t:{default:t}}var AKe=function(e){if(Array.isArray(e)===!1||e.length===0)throw new Error("No points were given.");return e.reduce(function(n,i){var r=(0,mKe.default)(i),o=(0,pKe.default)(i);return{maxLat:Math.max(r,n.maxLat),minLat:Math.min(r,n.minLat),maxLng:Math.max(o,n.maxLng),minLng:Math.min(o,n.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},bKe=AKe;Km.default=bKe;var mS={};Object.defineProperty(mS,"__esModule",{value:!0});mS.default=void 0;var yKe=pS(Gr),vKe=pS(Br),Ou=pS(Fo),WA=pS(el),UC=bt;function pS(t){return t&&t.__esModule?t:{default:t}}var SKe=function(e,n){var i=(0,yKe.default)(e),r=(0,vKe.default)(e),o=(0,Ou.default)(i),s=(0,Ou.default)(r),a=n/UC.earthRadius,l=o-a,g=o+a,u=(0,Ou.default)(UC.MAXLAT),d=(0,Ou.default)(UC.MINLAT),h=(0,Ou.default)(UC.MAXLON),f=(0,Ou.default)(UC.MINLON),A,p;if(l>d&&g<u){var y=Math.asin(Math.sin(a)/Math.cos(o));A=s-y,A<f&&(A+=Math.PI*2),p=s+y,p>h&&(p-=Math.PI*2)}else l=Math.max(l,d),g=Math.min(g,u),A=f,p=h;return[{latitude:(0,WA.default)(l),longitude:(0,WA.default)(A)},{latitude:(0,WA.default)(g),longitude:(0,WA.default)(p)}]},ZKe=SKe;mS.default=ZKe;var AS={};Object.defineProperty(AS,"__esModule",{value:!0});AS.default=void 0;var GKe=bS(Gr),BKe=bS(Br),U9=bS(Fo),j9=bS(el);function bS(t){return t&&t.__esModule?t:{default:t}}var RKe=function(e){if(Array.isArray(e)===!1||e.length===0)return!1;var n=e.length,i=e.reduce(function(a,l){var g=(0,U9.default)((0,GKe.default)(l)),u=(0,U9.default)((0,BKe.default)(l));return{X:a.X+Math.cos(g)*Math.cos(u),Y:a.Y+Math.cos(g)*Math.sin(u),Z:a.Z+Math.sin(g)}},{X:0,Y:0,Z:0}),r=i.X/n,o=i.Y/n,s=i.Z/n;return{longitude:(0,j9.default)(Math.atan2(o,r)),latitude:(0,j9.default)(Math.atan2(s,Math.sqrt(r*r+o*o)))}},kKe=RKe;AS.default=kKe;var yS={};Object.defineProperty(yS,"__esModule",{value:!0});yS.default=void 0;var VKe=wKe(Km);function wKe(t){return t&&t.__esModule?t:{default:t}}var WKe=function(e){var n=(0,VKe.default)(e),i=n.minLat+(n.maxLat-n.minLat)/2,r=n.minLng+(n.maxLng-n.minLng)/2;return{latitude:parseFloat(i.toFixed(6)),longitude:parseFloat(r.toFixed(6))}},xKe=WKe;yS.default=xKe;var vS={},zm={};Object.defineProperty(zm,"__esModule",{value:!0});zm.default=void 0;var O9=SS(Gr),Q9=SS(Br),xA=SS(Fo),XKe=SS(el);function SS(t){return t&&t.__esModule?t:{default:t}}var JKe=function(e,n){var i=(0,xA.default)((0,Q9.default)(n))-(0,xA.default)((0,Q9.default)(e)),r=Math.log(Math.tan((0,xA.default)((0,O9.default)(n))/2+Math.PI/4)/Math.tan((0,xA.default)((0,O9.default)(e))/2+Math.PI/4));return Math.abs(i)>Math.PI&&(i>0?i=(Math.PI*2-i)*-1:i=Math.PI*2+i),((0,XKe.default)(Math.atan2(i,r))+360)%360},EKe=JKe;zm.default=EKe;Object.defineProperty(vS,"__esModule",{value:!0});vS.default=void 0;var $9=HKe(zm);function HKe(t){return t&&t.__esModule?t:{default:t}}var NKe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$9.default,r=typeof i=="function"?i(e,n):(0,$9.default)(e,n);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},YKe=NKe;vS.default=YKe;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;var mB=kQ($s),q9=kQ(Dm);function kQ(t){return t&&t.__esModule?t:{default:t}}var FKe=function(e,n,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=(0,mB.default)(n,e,r),s=(0,mB.default)(e,i,r),a=(0,mB.default)(n,i,r),l=Math.acos((0,q9.default)((o*o+a*a-s*s)/(2*o*a))),g=Math.acos((0,q9.default)((s*s+a*a-o*o)/(2*s*a)));return l>Math.PI/2?o:g>Math.PI/2?s:Math.sin(l)*o},MKe=FKe;Pm.default=MKe;var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});ZS.default=void 0;var eM=GS(Gr),tM=GS(Br),fa=GS(Fo),TKe=GS(el);function GS(t){return t&&t.__esModule?t:{default:t}}var LKe=function(e,n){var i=(0,eM.default)(n),r=(0,tM.default)(n),o=(0,eM.default)(e),s=(0,tM.default)(e),a=((0,TKe.default)(Math.atan2(Math.sin((0,fa.default)(r)-(0,fa.default)(s))*Math.cos((0,fa.default)(i)),Math.cos((0,fa.default)(o))*Math.sin((0,fa.default)(i))-Math.sin((0,fa.default)(o))*Math.cos((0,fa.default)(i))*Math.cos((0,fa.default)(r)-(0,fa.default)(s))))+360)%360;return a},_Ke=LKe;ZS.default=_Ke;var BS={};Object.defineProperty(BS,"__esModule",{value:!0});BS.default=void 0;var DKe=KKe($s);function KKe(t){return t&&t.__esModule?t:{default:t}}function wb(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wb=function(n){return typeof n}:wb=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wb(t)}var zKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DKe.default;return e.reduce(function(i,r){return wb(i)==="object"&&i.last!==null&&(i.distance+=n(r,i.last)),i.last=r,i},{last:null,distance:0}).distance},PKe=zKe;BS.default=PKe;var RS={};Object.defineProperty(RS,"__esModule",{value:!0});RS.default=void 0;var nM=YW(Gr),iM=YW(Br),pB=YW(Fo),rM=bt;function YW(t){return t&&t.__esModule?t:{default:t}}var UKe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;i=typeof i<"u"&&!isNaN(i)?i:1;var r=(0,nM.default)(e),o=(0,iM.default)(e),s=(0,nM.default)(n),a=(0,iM.default)(n),l=6356752314245e-6,g=1/298.257223563,u=(0,pB.default)(a-o),d,h,f,A,p,y,v=Math.atan((1-g)*Math.tan((0,pB.default)(parseFloat(r)))),S=Math.atan((1-g)*Math.tan((0,pB.default)(parseFloat(s)))),Z=Math.sin(v),R=Math.cos(v),W=Math.sin(S),B=Math.cos(S),k=u,w,J=100;do{var X=Math.sin(k),Y=Math.cos(k);if(y=Math.sqrt(B*X*(B*X)+(R*W-Z*B*Y)*(R*W-Z*B*Y)),y===0)return 0;d=Z*W+R*B*Y,h=Math.atan2(y,d),f=R*B*X/y,A=1-f*f,p=d-2*Z*W/A,isNaN(p)&&(p=0);var z=g/16*A*(4+g*(4-3*A));w=k,k=u+(1-z)*g*f*(h+z*y*(p+z*d*(-1+2*p*p)))}while(Math.abs(k-w)>1e-12&&--J>0);if(J===0)return NaN;var P=A*(rM.earthRadius*rM.earthRadius-l*l)/(l*l),$=1+P/16384*(4096+P*(-768+P*(320-175*P))),oe=P/1024*(256+P*(-128+P*(74-47*P))),q=oe*y*(p+oe/4*(d*(-1+2*p*p)-oe/6*p*(-3+4*y*y)*(-3+4*p*p))),K=l*$*(h-q);return Math.round(K/i)*i},jKe=UKe;RS.default=jKe;var kS={};Object.defineProperty(kS,"__esModule",{value:!0});kS.default=void 0;var OKe=function(e){if(/^(NNE|NE|NNW|N)$/.test(e))return"N";if(/^(ENE|E|ESE|SE)$/.test(e))return"E";if(/^(SSE|S|SSW|SW)$/.test(e))return"S";if(/^(WSW|W|WNW|NW)$/.test(e))return"W"},QKe=OKe;kS.default=QKe;var VS={};Object.defineProperty(VS,"__esModule",{value:!0});VS.default=void 0;var $Ke=qKe($s);function qKe(t){return t&&t.__esModule?t:{default:t}}var eze=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$Ke.default,r=i(e,n),o=Number(n.time)-Number(e.time),s=r/o*1e3;return s},tze=eze;VS.default=tze;var wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.default=void 0;var AB=nze($s);function nze(t){return t&&t.__esModule?t:{default:t}}var ize=function(e,n,i){return(0,AB.default)(n,e)+(0,AB.default)(e,i)===(0,AB.default)(n,i)},rze=ize;wS.default=rze;var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.default=void 0;var XA=VQ(Gr),Io=VQ(Br);function VQ(t){return t&&t.__esModule?t:{default:t}}var oze=function(e,n){for(var i=!1,r=n.length,o=-1,s=r-1;++o<r;s=o)((0,Io.default)(n[o])<=(0,Io.default)(e)&&(0,Io.default)(e)<(0,Io.default)(n[s])||(0,Io.default)(n[s])<=(0,Io.default)(e)&&(0,Io.default)(e)<(0,Io.default)(n[o]))&&(0,XA.default)(e)<((0,XA.default)(n[s])-(0,XA.default)(n[o]))*((0,Io.default)(e)-(0,Io.default)(n[o]))/((0,Io.default)(n[s])-(0,Io.default)(n[o]))+(0,XA.default)(n[o])&&(i=!i);return i},sze=oze;WS.default=sze;var xS={};Object.defineProperty(xS,"__esModule",{value:!0});xS.default=void 0;var aze=lze(Pm);function lze(t){return t&&t.__esModule?t:{default:t}}var gze=function(e,n,i,r){return(0,aze.default)(e,n,i)<r},cze=gze;xS.default=cze;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});XS.default=void 0;var uze=dze($s);function dze(t){return t&&t.__esModule?t:{default:t}}var Ize=function(e,n,i){var r=.01;return(0,uze.default)(e,n,r)<i},Cze=Ize;XS.default=Cze;var JS={};Object.defineProperty(JS,"__esModule",{value:!0});JS.default=void 0;function hze(t,e){return Aze(t)||pze(t,e)||mze(t,e)||fze()}function fze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mze(t,e){if(t){if(typeof t=="string")return oM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oM(t,e)}}function oM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pze(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,r=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(i=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));i=!0);}catch(l){r=!0,o=l}finally{try{!i&&s.return!=null&&s.return()}finally{if(r)throw o}}return n}}function Aze(t){if(Array.isArray(t))return t}var bze=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");var n=e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", "),i=n.map(function(r){var o=r.split(" "),s=hze(o,2),a=s[0],l=s[1];return{longitude:parseFloat(a),latitude:parseFloat(l)}});return i},yze=bze;JS.default=yze;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(t,"toRad",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:function(){return T.default}});var n=H(lS),i=H(cS),r=H(uS),o=H(dS),s=H(IS),a=H(CS),l=H(fS),g=H(Km),u=H(mS),d=H(AS),h=H(yS),f=H(vS),A=H(fu),p=H(PI),y=H($s),v=H(Pm),S=H(ZS),Z=H(Gr),R=H(Br),W=H(BS),B=H(RS),k=H(zm),w=H(kS),J=H(VS),X=H(mu),Y=H(wS),z=H(WS),P=H(xS),$=H(XS),oe=H(pu),q=H(Fm),K=H(Mm),_=H(Tm),de=H(_m),ne=H(Au),se=H(zI),E=H(Fo),M=H(el),T=H(JS),U=bt;Object.keys(U).forEach(function(ie){ie==="default"||ie==="__esModule"||Object.prototype.hasOwnProperty.call(e,ie)||Object.defineProperty(t,ie,{enumerable:!0,get:function(){return U[ie]}})});function H(ie){return ie&&ie.__esModule?ie:{default:ie}}})(ZQ);delete tU.Icon.Default.prototype._getIconUrl;tU.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const vze=()=>{const[t,e]=_i(Sg),n=ln(),[i]=_i(an),[r,o]=m.useState(!0);m.useState(null),m.useState([]);const[s,a]=m.useState([]),[l,g]=m.useState([]),[u,d]=m.useState([]),h=["Music","Technology","Business","Networking"],[f,A]=m.useState(null),[p,y]=m.useState(null),[v,S]=m.useState(null),[Z,R]=m.useState(null),[W,B]=m.useState(null),[k,w]=m.useState(""),[J,X]=m.useState("00:00"),[Y,z]=m.useState(""),[P,$]=m.useState("23:59"),[oe,q]=m.useState([]),[K,_]=m.useState(""),{lat:de,long:ne}=i.selectedLocationCord&&i.selectedLocationCord;m.useEffect(()=>{(async()=>{try{o(!0),e([]);const{data:M}=await fn.get("/api/posts/all");if(e(M),q(M),M.error){n("Error",M.error,"error");return}}catch(M){console.log(M)}finally{o(!1)}})()},[]);const se=async()=>{let E=t,M=[];const T=i==null?void 0:i.selectedLocationCord;if(p&&(E=E.filter(U=>U.venue===p)),v&&(E=E.filter(U=>U.city===v)),Z&&(E=E.filter(U=>U.state===Z)),W&&!K&&(E=E.filter(U=>U.country===W)),k&&!J&&(E=E.filter(U=>W0(new Date(U.startDate),vd(new Date(k).toISOString())))),k&&J&&(E=E.filter(U=>{const H=new Date(U.startDate);H.setMinutes(U.startTime.split(":")[1]),H.setHours(U.startTime.split(":")[0]);const ie=vd(`${k}T${J}`);return W0(H,ie)})),Y&&!P&&(E=E.filter(U=>rH(new Date(U.startDate),vd(new Date(Y).toISOString())))),Y&&P&&(E=E.filter(U=>{const H=new Date(U.startDate);H.setMinutes(U.startTime.split(":")[1]),H.setHours(U.startTime.split(":")[0]);const ie=vd(`${Y}T${P}`);return rH(H,ie)})),f&&(E=E.filter(U=>U.eventType===f)),T&&!p&&!v&&!v&&!Z&&!W&&!K){M=E.filter(U=>{var H,ie;return ZQ.isPointWithinRadius({latitude:i.selectedLocationCord.lat,longitude:i.selectedLocationCord.long},{latitude:(H=U.venueCord)==null?void 0:H.lat,longitude:(ie=U.venueCord)==null?void 0:ie.long},25e3)}),q(M);return}f&&(E=E.filter(U=>U.eventType===f)),q(E)};return console.log("Posts",oe),m.useEffect(()=>{const E=[],M=[],T=[];t==null||t.forEach(U=>{E.includes(U.city)||U.city&&E.push(U.city),a(E),M.includes(U.state)||U.state&&M.push(U.state),g(M),T.includes(U.country)||U.country&&T.push(U.country),d(T)})},[t]),m.useEffect(()=>{se()},[i,t,p,v,Z,W,f,k,J,Y,P]),C.jsxs(Se,{mx:"auto",width:"80%",textAlign:"center",children:[C.jsx(w3e,{user:i}),C.jsxs(ae,{gap:10,mt:2,alignItems:"center",children:[C.jsx(ue,{fontWeight:"bold",color:"red",children:"Start"}),C.jsx(_e,{type:"date",w:"60%",value:k,min:new Date().toISOString().split("T")[0],onChange:E=>w(E.target.value)}),C.jsx(_e,{type:"time",w:"40%",value:J,defaultValue:"00:00",onChange:E=>X(E.target.value)}),C.jsx(ue,{fontWeight:"bold",color:"red",children:"End"}),C.jsx(_e,{type:"date",value:Y,min:k,w:"60%",onChange:E=>z(E.target.value)}),C.jsx(_e,{type:"time",value:P,w:"40%",onChange:E=>$(E.target.value)}),C.jsxs(Ir,{value:f,onChange:E=>A(E.target.value),children:[C.jsx("option",{value:"",children:"Select Event Category"}),h.map(E=>C.jsx("option",{value:E,children:E},E))]}),C.jsx(Ir,{placeholder:"Select City",filled:!0,value:v,onChange:E=>S(E.target.value),children:s.map(E=>C.jsx("option",{value:E,children:E},E))}),C.jsx(Ir,{placeholder:"Select State",filled:!0,value:Z,onChange:E=>R(E.target.value),children:l.map(E=>C.jsx("option",{value:E,children:E},E))}),C.jsx(Ir,{placeholder:"Select Country",filled:!0,value:W,onChange:E=>B(E.target.value),children:u.map(E=>C.jsx("option",{value:E,children:E},E))})]}),C.jsxs(Ts,{gridTemplateColumns:{base:"1fr",md:"1fr 2fr"},gap:"10",mt:5,alignItems:"flex-start",children:[C.jsx(Se,{children:C.jsxs(iU,{center:de&&ne?[de,ne]:[51.5074,-.1278],zoom:13,style:{maxHeight:"60vh",height:"60vh",borderRadius:"5%"},attributionControl:!1,children:[C.jsx(oU,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.map((E,M)=>{var T,U;return(E==null?void 0:E.venueCord)&&C.jsx(rU,{position:[(T=E==null?void 0:E.venueCord)==null?void 0:T.lat,(U=E==null?void 0:E.venueCord)==null?void 0:U.long],children:C.jsxs(ORe,{children:[E.name,C.jsx("br",{}),"Venue : ",E.venue,C.jsx("br",{}),C.jsx(Zi,{to:`/${i.username}/post/${E._id}`,children:C.jsx(De,{size:"xs",mt:2,bg:Ve("black","white"),color:Ve("white","black"),_hover:{background:Ve("gray.700","gray.300")},p:2,gap:2,mr:3,children:"More"})})]})},M)})]})}),C.jsxs(Se,{flex:70,maxH:"60vh",overflowY:"scroll",children:[!r&&t.length===0&&C.jsx(ue,{fontSize:"xl",fontWeight:"bold",children:"No Post found"}),r&&C.jsx(ae,{justify:"center",children:C.jsx(nr,{size:"xl"})}),C.jsx(Se,{children:!r&&(oe==null?void 0:oe.map(E=>C.jsx(UP,{post:E,postedBy:E.postedBy},E._id)))})]})]})]})},Sze=()=>{const t=Qr();return C.jsx(De,{position:"fixed",bottom:10,right:5,bg:Ve("gray.300","gray.dark"),size:{base:"sm",sm:"md"},onClick:()=>t("/create"),children:C.jsx(qV,{})})};function Zze(){const t=Nn(an),{pathname:e}=bg();return C.jsx(y2e,{clientId:{}.REACT_APP_GOOGLE_CLIENT_ID,children:C.jsx(Se,{position:"relative",w:"full",children:C.jsxs(sK,{maxW:"full",children:[C.jsx(f2e,{}),(t==null?void 0:t.soloOrganizer)&&e!=="/chat"&&C.jsx(Sze,{}),C.jsxs(QK,{children:[C.jsx(yn,{path:"/",element:t?C.jsx(A2e,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/auth",element:t?C.jsx(hs,{to:"/"}):C.jsx(fXe,{})}),C.jsx(yn,{path:"/update",element:t?C.jsx(mXe,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/:username",element:t?C.jsx(C.Fragment,{children:C.jsx(pH,{})}):C.jsx(pH,{})}),C.jsx(yn,{path:"/:username/post/:pid",element:C.jsx(QRe,{})}),C.jsx(yn,{path:"/chat",element:t?C.jsx(mJe,{}):C.jsx(hs,{to:"/auth"})}),C.jsxs(yn,{path:"/settings/*",element:t?C.jsx(bJe,{}):C.jsx(hs,{to:"/auth"}),children:[C.jsx(yn,{path:"account",element:C.jsx(wj,{})}),C.jsx(yn,{path:"options",element:C.jsx(Gj,{})}),C.jsx(yn,{path:"embed",element:C.jsx(kj,{})}),C.jsx(yn,{path:"evntiq-plus",element:C.jsx(Vj,{})}),C.jsx(yn,{path:"payment",element:C.jsx(Bj,{})}),C.jsx(yn,{path:"admins",element:C.jsx(Rj,{})})]}),C.jsx(yn,{path:"/analytics",element:t?C.jsx(ONe,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/tickets",element:t?C.jsx(ZYe,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/calendar",element:t?C.jsx(Z3e,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/discover",element:t?C.jsx(vze,{}):C.jsx(hs,{to:"/auth"})}),C.jsx(yn,{path:"/create",element:t!=null&&t.soloOrganizer?C.jsx(V3e,{}):C.jsx(hs,{to:"/auth"})})]})]})})})}const Gze=({children:t})=>C.jsx(c1e,{googleMapsApiKey:"AIzaSyAQnl_lRnahonxei5BzTWXSBnnSb0PEOaM",libraries:["places"],children:t}),Bze={global:t=>({body:{color:$e("gray.800","whiteAlpha.900")(t),bg:$e("gray.100","#101010")(t)}})},Rze={initialColorMode:"dark",useSystemColorMode:!0},kze={gray:{light:"#616161",dark:"#1e1e1e"}},sM=oae({config:Rze,styles:Bze,colors:kze});yB.createRoot(document.getElementById("root")).render(C.jsx(gt.StrictMode,{children:C.jsx(ZGe,{children:C.jsx(AAe,{children:C.jsxs(Bde,{theme:sM,children:[C.jsx(dq,{initialColorMode:sM.config.initialColorMode}),C.jsx(IJe,{children:C.jsx(Gze,{children:C.jsx(Zze,{})})})]})})})}))});export default Vze();
